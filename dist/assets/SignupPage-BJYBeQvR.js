import{r,e as z,f as F,u as H,s as v,j as e,L as i}from"./index-T9wcIP7k.js";import{P as R}from"./PuzzleCaptcha-mgjHn_3Y.js";import"./circle-check-big-BYTb-izI.js";function U(){const[u,j]=r.useState(""),[m,N]=r.useState(""),[g,w]=r.useState(""),[a,C]=r.useState("customer"),[x,n]=r.useState(""),[y,c]=r.useState(!1),[_,S]=r.useState(!1),[h,P]=r.useState(!1),[b,A]=r.useState(!1),[p,E]=r.useState([]),{signUp:q}=z(),{settings:l}=F(),T=H();r.useEffect(()=>{I()},[]);const I=async()=>{try{const{data:t,error:s}=await v.from("contracts").select("*").in("contract_type",["customer_terms","customer_privacy"]).eq("is_active",!0);if(s)throw s;E(t||[])}catch(t){console.error("Error fetching contracts:",t)}},L=async t=>{if(t.preventDefault(),n(""),c(!0),!_){n("Please verify that you are a human"),c(!1);return}if(a==="customer"&&(!h||!b)){n("Please accept both the Customer Terms & Conditions and Privacy Policy"),c(!1);return}const{error:s,data:o}=await q(u,m,g,a);if(s)n(s.message),c(!1);else{if(o!=null&&o.user&&a==="customer"){const f=p.find(d=>d.contract_type==="customer_terms"),k=p.find(d=>d.contract_type==="customer_privacy");f&&k&&await v.from("contract_acceptances").insert([{user_id:o.user.id,contract_id:f.id,ip_address:"",user_agent:navigator.userAgent},{user_id:o.user.id,contract_id:k.id,ip_address:"",user_agent:navigator.userAgent}])}T("/")}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-cyan-50 to-green-50 dark:from-slate-950 dark:to-slate-900 flex items-center justify-center p-4 transition-colors duration-300",children:e.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-slate-800 rounded-2xl shadow-xl dark:shadow-slate-950/40 p-8 border border-gray-100 dark:border-slate-700",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("img",{src:l.site_logo,alt:l.site_name,className:"h-12 w-auto object-contain",onError:t=>{t.currentTarget.style.display="none"}})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Create Account"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Join ",l.site_name," today"]})]}),x&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:x}),e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",value:g,onChange:t=>w(t.target.value),className:"w-full px-4 py-3 bg-gray-50 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 transition-all",placeholder:"collen hunters",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:u,onChange:t=>j(t.target.value),className:"w-full px-4 py-3 bg-gray-50 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 transition-all",placeholder:"you@example.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),e.jsx("input",{type:"password",value:m,onChange:t=>N(t.target.value),className:"w-full px-4 py-3 bg-gray-50 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 transition-all",placeholder:"••••••••",required:!0,minLength:6})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"I want to"}),e.jsxs("select",{value:a,onChange:t=>C(t.target.value),className:"w-full px-4 py-3 bg-gray-50 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent text-gray-900 dark:text-white transition-all outline-none",children:[e.jsx("option",{value:"customer",children:"Shop as a Customer"}),e.jsx("option",{value:"vendor",children:"Sell as a Vendor"})]})]}),a==="customer"&&e.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 dark:bg-slate-700/50 rounded-lg border border-gray-200 dark:border-slate-700",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Customer Agreements *"}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",required:!0,checked:h,onChange:t=>P(t.target.checked),className:"rounded border-gray-300 dark:border-slate-600 text-cyan-600 focus:ring-cyan-500 bg-white dark:bg-slate-700 mt-1"}),e.jsxs("label",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:["I agree to the"," ",e.jsx(i,{to:"/contract/customer_terms",target:"_blank",className:"text-cyan-600 hover:text-cyan-700 font-semibold underline",children:"Customer Terms & Conditions"})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",required:!0,checked:b,onChange:t=>A(t.target.checked),className:"rounded border-gray-300 dark:border-slate-600 text-cyan-600 focus:ring-cyan-500 bg-white dark:bg-slate-700 mt-1"}),e.jsxs("label",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:["I have read and accept the"," ",e.jsx(i,{to:"/contract/customer_privacy",target:"_blank",className:"text-cyan-600 dark:text-cyan-400 hover:text-cyan-700 dark:hover:text-cyan-300 font-semibold underline",children:"Customer Privacy Policy"})]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx(R,{onVerify:S})}),e.jsx("button",{type:"submit",disabled:y,className:"w-full py-3 bg-gradient-to-r from-cyan-600 to-green-600 text-white rounded-lg font-semibold hover:from-cyan-700 hover:to-green-700 transition disabled:opacity-50",children:y?"Creating account...":"Create Account"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Already have an account?"," ",e.jsx(i,{to:"/login",className:"text-cyan-600 dark:text-cyan-400 hover:text-cyan-700 dark:hover:text-cyan-300 font-semibold",children:"Sign in"})]})})]})})}export{U as SignupPage};
