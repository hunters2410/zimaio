import{e as v,h as j,i as k,a as y,b as N,r as o,s as _,j as e,H as S,L as n,A as m,X as C,m as W,S as E}from"./index-T9wcIP7k.js";function A(){const{user:i}=v(),{formatPrice:g}=j(),{calculatePrice:d}=k(),{addToCart:b}=y(),{toggleWishlist:p}=N(),[l,c]=o.useState([]),[u,h]=o.useState(!0);o.useEffect(()=>{i?f():h(!1)},[i]);const f=async()=>{try{const{data:s,error:t}=await _.from("wishlists").select(`
          product_id,
          products (
            id,
            name,
            slug,
            base_price,
            images,
            vendor_id,
            currency_code,
            vendor_profiles (
              shop_name
            )
          )
        `).eq("user_id",i==null?void 0:i.id);if(t)throw t;if(s){const r=s.map(a=>({...a.products,vendor:a.products.vendor_profiles})).filter(a=>a!==null);c(r)}}catch(s){console.error("Error fetching wishlist:",s)}finally{h(!1)}},w=async s=>{await p(s),c(t=>t.filter(r=>r.id!==s))};return u?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-slate-900",children:e.jsx("div",{className:"w-12 h-12 border-4 border-rose-500 border-t-transparent rounded-full animate-spin"})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-900 py-12 transition-colors duration-300",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-6xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-12",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-black text-gray-900 dark:text-white uppercase tracking-tighter mb-2",children:"My Wishlist"}),e.jsx("p",{className:"text-rose-500 font-bold uppercase tracking-[0.3em] text-[10px]",children:"Saved Premium Items"})]}),e.jsx("div",{className:"bg-rose-50 dark:bg-rose-900/20 px-4 py-2 rounded-full border border-rose-100 dark:border-rose-800/50",children:e.jsxs("span",{className:"text-rose-700 dark:text-rose-400 font-black text-xs uppercase tracking-widest",children:[l.length," Items"]})})]}),l.length===0?e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-[3rem] p-16 text-center shadow-2xl shadow-slate-900/5 border-2 border-slate-50 dark:border-slate-700",children:[e.jsx("div",{className:"w-24 h-24 bg-rose-50 dark:bg-rose-900/20 rounded-[2rem] flex items-center justify-center mx-auto mb-8 animate-bounce",children:e.jsx(S,{className:"w-10 h-10 text-rose-500"})}),e.jsx("h2",{className:"text-3xl font-black text-gray-900 dark:text-white uppercase tracking-tight mb-4",children:"Your Wishlist is Empty"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium max-w-sm mx-auto mb-10 text-sm",children:"Elevate your shopping experience by saving your favorite high-end finds here."}),e.jsxs(n,{to:"/products",className:"inline-flex items-center gap-3 bg-gray-900 dark:bg-white text-white dark:text-gray-900 px-10 py-4 rounded-2xl font-black uppercase tracking-widest text-[10px] shadow-xl hover:scale-105 active:scale-95 transition-all",children:["Go Shopping ",e.jsx(m,{className:"w-4 h-4"})]})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:l.map(s=>{var t,r;return e.jsxs("div",{className:"group bg-white dark:bg-slate-800 rounded-[1.5rem] overflow-hidden border-2 border-slate-50 dark:border-slate-700 shadow-lg hover:shadow-xl transition-all duration-500 hover:-translate-y-1",children:[e.jsxs("div",{className:"aspect-square relative overflow-hidden bg-gray-100 dark:bg-slate-700",children:[e.jsx("img",{src:(t=s.images)==null?void 0:t[0],alt:s.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),e.jsx("button",{onClick:()=>w(s.id),className:"absolute top-2 right-2 p-1.5 bg-white/90 dark:bg-slate-800/90 backdrop-blur-md rounded-full text-gray-400 hover:text-rose-500 border border-gray-100 dark:border-slate-700 shadow-sm transition-all",children:e.jsx(C,{className:"w-3.5 h-3.5"})}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/60 to-transparent p-4 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("button",{onClick:()=>{var a,x;return b({id:s.id,name:s.name,price:d(s.base_price).total,image:((a=s.images)==null?void 0:a[0])||"",vendor_id:s.vendor_id,vendor:((x=s.vendor)==null?void 0:x.shop_name)||"Vendor",base_price:s.base_price,quantity:1})},className:"w-full bg-white text-gray-900 py-2 rounded-lg font-black uppercase tracking-widest text-[8px] flex items-center justify-center gap-2 hover:bg-rose-500 hover:text-white transition-all shadow-lg",children:[e.jsx(W,{className:"w-3 h-3"})," Add to Cart"]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-[7px] font-black text-rose-500 uppercase tracking-widest mb-1.5 px-2 py-0.5 bg-rose-50 dark:bg-rose-900/20 rounded-full w-fit",children:[e.jsx(E,{className:"w-2.5 h-2.5"})," ",(r=s.vendor)==null?void 0:r.shop_name]}),e.jsx(n,{to:`/products/${s.slug}`,children:e.jsx("h3",{className:"text-sm font-black text-gray-900 dark:text-white uppercase tracking-tighter mb-2 line-clamp-1 group-hover:text-rose-500 transition-colors",children:s.name})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg font-black text-gray-900 dark:text-white font-mono",children:g(d(s.base_price).total)}),e.jsx(n,{to:`/products/${s.slug}`,className:"p-2 bg-slate-50 dark:bg-slate-700 rounded-lg hover:bg-rose-500 hover:text-white transition-all",children:e.jsx(m,{className:"w-3.5 h-3.5"})})]})]})]},s.id)})})]})})}export{A as WishlistPage};
