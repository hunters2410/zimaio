import{r as d,s as c,j as e,n as oe,S as de,M as ce,D as xe,z as ue}from"./index-BktnpWS0.js";import{A as T}from"./AdminLayout-C6Mn2_Yu.js";import{P as me}from"./plus-DKkFzrwN.js";import{C as M}from"./check-t-U1Tl8Z.js";import{X as y}from"./x-Be8cuiWM.js";import{S as pe}from"./store-DDL7ZG_8.js";import{S as R}from"./star-N_Zw1XPq.js";import{C as ge}from"./calendar-CBE4Rgbp.js";import{S as he}from"./square-pen-RrpnH1Wm.js";import{E as fe}from"./eye-geM34do8.js";import{F as be}from"./file-text-DIHdwLby.js";import{U as ye}from"./user-x-BeFz5KZK.js";import{U as je}from"./user-check-DmjDKnBZ.js";import{T as Ne}from"./trash-2-BZYqHlTV.js";import"./chevron-left-AWoZAuKB.js";import"./triangle-alert-HMuOKNOn.js";import"./circle-check-big-DQYFJHkd.js";import"./chevron-right-peYPGYwP.js";import"./zap-CpGj1Zaf.js";import"./maximize-DSH1SQuK.js";import"./users-vNuzB1jC.js";import"./shield-QBrICIHj.js";import"./globe-CdXxteOx.js";import"./truck-CO3939ut.js";import"./credit-card-BMxorgaG.js";import"./settings-D3GsvmJN.js";import"./trending-up-wuknMfwd.js";function He(){const[U,L]=d.useState([]),[j,m]=d.useState(!0),[N,Y]=d.useState(""),[b,C]=d.useState("all"),[v,z]=d.useState(""),[_,B]=d.useState(""),[O,D]=d.useState(!1),[J,w]=d.useState(!1),[K,E]=d.useState(!1),[Z,A]=d.useState(!1),[l,k]=d.useState(null),[F,H]=d.useState([]),[S,V]=d.useState(""),[t,n]=d.useState({email:"",password:"",full_name:"",phone:"",shop_name:"",shop_description:"",business_email:"",business_phone:"",business_address:"",tax_id:""}),[u,o]=d.useState(null);d.useEffect(()=>{g(),Q()},[b,v,_]);const Q=async()=>{try{const{data:s,error:a}=await c.from("vendor_packages").select("id, name, description, price_monthly, is_default").eq("is_active",!0).order("sort_order",{ascending:!0});if(a)throw a;H(s||[]);const r=s==null?void 0:s.find(i=>i.is_default);r&&V(r.id)}catch(s){console.error("Error fetching packages:",s)}},g=async()=>{m(!0);let s=c.from("vendor_profiles").select(`
        *,
        profile:profiles!vendor_profiles_user_id_fkey(
          email,
          full_name,
          phone,
          is_active
        ),
        orders(subtotal, status, payment_status)
      `).order("created_at",{ascending:!1});if(b==="approved"?s=s.eq("is_approved",!0):b==="pending"&&(s=s.eq("is_approved",!1)),v&&(s=s.gte("created_at",new Date(v).toISOString())),_){const i=new Date(_);i.setHours(23,59,59,999),s=s.lte("created_at",i.toISOString())}const{data:a,error:r}=await s;if(r)console.error("Error fetching vendors:",r),o({type:"error",text:"Error fetching vendors: "+r.message});else{const i=(a||[]).map(x=>{var h;return{...x,total_sales:((h=x.orders)==null?void 0:h.reduce((f,p)=>p.payment_status==="paid"||["delivered","completed"].includes(p.status)?f+(Number(p.subtotal)||0):f,0))||0}});L(i)}m(!1)},X=async(s,a)=>{const{error:r}=await c.from("vendor_profiles").update({is_featured:!a}).eq("id",s);r?(console.error("Error toggling featured status:",r),o({type:"error",text:"Failed to update: "+r.message})):(o({type:"success",text:"Vendor featured status updated successfully!"}),g())},G=async(s,a)=>{const{error:r}=await c.from("vendor_profiles").update({is_verified:!a}).eq("id",s);r?(console.error("Error toggling verified status:",r),o({type:"error",text:"Failed to update: "+r.message})):(o({type:"success",text:"Vendor verification status updated successfully!"}),g())},W=async(s,a)=>{const{error:r}=await c.from("vendor_profiles").update({is_approved:!a}).eq("id",s);r?(console.error("Error toggling approved status:",r),o({type:"error",text:"Failed to update: "+r.message})):(o({type:"success",text:"Vendor approval status updated successfully!"}),g())},ee=async(s,a)=>{const{error:r}=await c.from("profiles").update({is_active:!a}).eq("id",s);r?(console.error("Error toggling active status:",r),o({type:"error",text:"Failed to update: "+r.message})):(o({type:"success",text:"User account status updated successfully!"}),g())},se=async s=>{s.preventDefault(),m(!0);const a=ue("https://mnkncdqalkamhmtfcykm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1ua25jZHFhbGthbWhtdGZjeWttIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg4MjQ1OTAsImV4cCI6MjA4NDQwMDU5MH0.9Hxdgh_-wQImFfq3Tb8OHPkSN2oRjR_AzMAY1jn1ZQk",{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}}),{data:r,error:i}=await a.auth.signUp({email:t.email,password:t.password});if(i||!r.user){o({type:"error",text:"Failed to create vendor account: "+(i==null?void 0:i.message)}),m(!1);return}const{error:x}=await c.from("profiles").upsert({id:r.user.id,email:t.email,full_name:t.full_name,phone:t.phone,role:"vendor"});if(x){o({type:"error",text:"Failed to create profile: "+x.message}),m(!1);return}const{error:h}=await c.from("vendor_profiles").insert({user_id:r.user.id,shop_name:t.shop_name,shop_description:t.shop_description,business_email:t.business_email,business_phone:t.business_phone,business_address:t.business_address,tax_id:t.tax_id});if(h){o({type:"error",text:"Failed to create vendor profile: "+h.message}),m(!1);return}if(S){const p=F.find(ie=>ie.id===S),P=new Date,I=new Date(P);I.setMonth(I.getMonth()+1);const{error:$}=await c.from("vendor_subscriptions").insert([{vendor_id:r.user.id,package_id:S,status:(p==null?void 0:p.price_monthly)===0?"active":"pending",billing_cycle:"monthly",current_period_start:P.toISOString(),current_period_end:I.toISOString()}]);$&&console.error("Error creating subscription:",$)}o({type:"success",text:"Vendor registered successfully!"}),n({email:"",password:"",full_name:"",phone:"",shop_name:"",shop_description:"",business_email:"",business_phone:"",business_address:"",tax_id:""});const f=F.find(p=>p.is_default);f&&V(f.id),g()},te=async s=>{if(s.preventDefault(),!l)return;m(!0);const{error:a}=await c.from("profiles").update({full_name:t.full_name,phone:t.phone}).eq("id",l.user_id);if(a){o({type:"error",text:"Failed to update user profile: "+a.message}),m(!1);return}const{error:r}=await c.from("vendor_profiles").update({shop_name:t.shop_name,shop_description:t.shop_description,business_email:t.business_email,business_phone:t.business_phone,business_address:t.business_address,tax_id:t.tax_id}).eq("id",l.id);if(r){o({type:"error",text:"Failed to update vendor profile: "+r.message}),m(!1);return}o({type:"success",text:"Vendor "+t.shop_name+" updated successfully!"}),w(!1),k(null),g()},re=async s=>{if(!confirm(`Are you sure you want to delete vendor "${s.shop_name}"? This action cannot be undone.`))return;const{error:a}=await c.from("profiles").delete().eq("id",s.user_id);a?alert("Failed to delete vendor: "+a.message):g()},ae=s=>{var a,r,i;k(s),n({email:((a=s.profile)==null?void 0:a.email)||"",password:"",full_name:((r=s.profile)==null?void 0:r.full_name)||"",phone:((i=s.profile)==null?void 0:i.phone)||"",shop_name:s.shop_name,shop_description:s.shop_description||"",business_email:s.business_email||"",business_phone:s.business_phone||"",business_address:s.business_address||"",tax_id:s.tax_id||""}),w(!0)},le=s=>{k(s),E(!0)},ne=s=>{k(s),A(!0)},q=U.filter(s=>{var a,r,i,x;return((a=s.shop_name)==null?void 0:a.toLowerCase().includes(N.toLowerCase()))||((r=s.business_email)==null?void 0:r.toLowerCase().includes(N.toLowerCase()))||((x=(i=s.profile)==null?void 0:i.email)==null?void 0:x.toLowerCase().includes(N.toLowerCase()))});return j?e.jsx(T,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})})}):e.jsxs(T,{children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Vendor Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage and monitor vendor accounts"})]}),e.jsxs("button",{onClick:()=>D(!0),className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition",children:[e.jsx(me,{className:"h-5 w-5 mr-2"}),"Register Vendor"]})]}),u&&e.jsxs("div",{className:`mb-6 p-4 rounded-lg border flex items-center justify-between ${u.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:[e.jsxs("div",{className:"flex items-center",children:[u.type==="success"?e.jsx(M,{className:"h-5 w-5 mr-3"}):e.jsx(oe,{className:"h-5 w-5 mr-3"}),e.jsx("span",{className:"font-medium text-sm",children:u.text})]}),e.jsx("button",{onClick:()=>o(null),className:"text-gray-400 hover:text-gray-600 transition",children:e.jsx(y,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(de,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"text",placeholder:"Search vendors by shop name or email...",value:N,onChange:s=>Y(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("input",{type:"date",value:v,onChange:s=>z(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Start Date"}),e.jsx("input",{type:"date",value:_,onChange:s=>B(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"End Date"}),e.jsx("button",{onClick:()=>C("all"),className:`px-4 py-2 rounded-lg transition ${b==="all"?"bg-green-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All"}),e.jsx("button",{onClick:()=>C("approved"),className:`px-4 py-2 rounded-lg transition ${b==="approved"?"bg-green-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Approved"}),e.jsx("button",{onClick:()=>C("pending"),className:`px-4 py-2 rounded-lg transition ${b==="pending"?"bg-green-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Pending"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsxs("table",{className:"min-w-full border-collapse border border-gray-200",children:[e.jsx("thead",{className:"bg-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 border border-gray-200 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vendor"}),e.jsx("th",{className:"px-6 py-3 border border-gray-200 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 border border-gray-200 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 border border-gray-200 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Performance"}),e.jsx("th",{className:"px-6 py-3 border border-gray-200 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),e.jsx("th",{className:"px-6 py-3 border border-gray-200 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:q.map(s=>{var a,r,i,x,h;return e.jsxs("tr",{className:"hover:bg-white",children:[e.jsx("td",{className:"px-6 py-4 border border-gray-200 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:s.shop_logo_url?e.jsx("img",{src:s.shop_logo_url,alt:s.shop_name,className:"w-full h-full rounded-full object-cover"}):e.jsx(pe,{className:"h-5 w-5 text-green-500"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.shop_name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["KYC: ",s.kyc_status]})]})]})}),e.jsx("td",{className:"px-6 py-4 border border-gray-200 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),s.business_email||"N/A"]})}),e.jsx("td",{className:"px-6 py-4 border border-gray-200 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${(a=s.profile)!=null&&a.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:(r=s.profile)!=null&&r.is_active?"Active":"Inactive"}),e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${s.is_approved?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:s.is_approved?"Approved":"Pending"}),s.is_verified&&e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:"Verified"}),s.is_featured&&e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"Featured"})]})}),e.jsx("td",{className:"px-6 py-4 border border-gray-200 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{className:"h-4 w-4 mr-1 text-yellow-500 fill-current"}),s.rating.toFixed(1),"/5.0"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(xe,{className:"h-4 w-4 mr-1"}),"$",s.total_sales.toFixed(2)]})]})}),e.jsx("td",{className:"px-6 py-4 border border-gray-200 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),new Date(s.created_at).toLocaleDateString()]})}),e.jsx("td",{className:"px-6 py-4 border border-gray-200 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.jsxs("button",{onClick:()=>ae(s),className:"inline-flex items-center px-2 py-1 rounded-md text-xs text-blue-600 hover:bg-blue-50",title:"Edit vendor",children:[e.jsx(he,{className:"h-3 w-3 mr-1"}),"Edit"]}),e.jsxs("button",{onClick:()=>le(s),className:"inline-flex items-center px-2 py-1 rounded-md text-xs text-gray-600 hover:bg-gray-50",title:"View shop info",children:[e.jsx(fe,{className:"h-3 w-3 mr-1"}),"Shop"]}),e.jsxs("button",{onClick:()=>ne(s),className:"inline-flex items-center px-2 py-1 rounded-md text-xs text-purple-600 hover:bg-purple-50",title:"View KYC documents",children:[e.jsx(be,{className:"h-3 w-3 mr-1"}),"KYC"]}),e.jsx("button",{onClick:()=>{var f;return ee(s.user_id,((f=s.profile)==null?void 0:f.is_active)||!1)},className:`inline-flex items-center px-2 py-1 rounded-md text-xs ${(i=s.profile)!=null&&i.is_active?"text-orange-600 hover:bg-orange-50":"text-green-600 hover:bg-green-50"}`,title:(x=s.profile)!=null&&x.is_active?"Deactivate vendor":"Activate vendor",children:(h=s.profile)!=null&&h.is_active?e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"h-3 w-3 mr-1"}),"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"h-3 w-3 mr-1"}),"Activate"]})}),e.jsx("button",{onClick:()=>W(s.id,s.is_approved),className:`inline-flex items-center px-2 py-1 rounded-md text-xs ${s.is_approved?"text-red-600 hover:bg-red-50":"text-green-600 hover:bg-green-50"}`,title:s.is_approved?"Disapprove vendor":"Approve vendor",children:s.is_approved?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"h-3 w-3 mr-1"}),"Disapprove"]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"h-3 w-3 mr-1"}),"Approve"]})}),e.jsxs("button",{onClick:()=>G(s.id,s.is_verified),className:"inline-flex items-center px-2 py-1 rounded-md text-xs text-blue-600 hover:bg-blue-50",title:s.is_verified?"Unverify vendor":"Verify vendor",children:[e.jsx(M,{className:"h-3 w-3 mr-1"}),s.is_verified?"Unverify":"Verify"]}),e.jsxs("button",{onClick:()=>X(s.id,s.is_featured),className:"inline-flex items-center px-2 py-1 rounded-md text-xs text-yellow-600 hover:bg-yellow-50",title:s.is_featured?"Remove from featured":"Add to featured",children:[e.jsx(R,{className:"h-3 w-3 mr-1"}),s.is_featured?"Unfeature":"Feature"]}),e.jsxs("button",{onClick:()=>re(s),className:"inline-flex items-center px-2 py-1 rounded-md text-xs text-red-600 hover:bg-red-50",title:"Delete vendor",children:[e.jsx(Ne,{className:"h-3 w-3 mr-1"}),"Delete"]})]})})]},s.id)})})]}),q.length===0&&e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No vendors found matching your criteria."})]}),O&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Register Vendor"}),e.jsx("button",{onClick:()=>D(!1),className:"text-gray-400 hover:text-gray-600 transition",children:e.jsx(y,{className:"h-5 w-5"})})]}),u&&e.jsx("div",{className:`mx-4 mt-4 p-3 rounded-lg flex items-center gap-2 text-xs font-bold ${u.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:u.text}),e.jsxs("form",{onSubmit:se,className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Email"}),e.jsx("input",{type:"email",required:!0,value:t.email,onChange:s=>n({...t,email:s.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Password"}),e.jsx("input",{type:"password",required:!0,value:t.password,onChange:s=>n({...t,password:s.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Full Name"}),e.jsx("input",{type:"text",required:!0,value:t.full_name,onChange:s=>n({...t,full_name:s.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:t.phone,onChange:s=>n({...t,phone:s.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Shop Name"}),e.jsx("input",{type:"text",required:!0,value:t.shop_name,onChange:s=>n({...t,shop_name:s.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Business Email"}),e.jsx("input",{type:"email",value:t.business_email,onChange:s=>n({...t,business_email:s.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Business Phone"}),e.jsx("input",{type:"tel",value:t.business_phone,onChange:s=>n({...t,business_phone:s.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Tax ID"}),e.jsx("input",{type:"text",value:t.tax_id,onChange:s=>n({...t,tax_id:s.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Business Address"}),e.jsx("textarea",{rows:2,value:t.business_address,onChange:s=>n({...t,business_address:s.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Shop Description"}),e.jsx("textarea",{rows:2,value:t.shop_description,onChange:s=>n({...t,shop_description:s.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Subscription Package *"}),e.jsxs("select",{required:!0,value:S,onChange:s=>V(s.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"",children:"Select a package"}),F.map(s=>e.jsxs("option",{value:s.id,children:[s.name," - $",s.price_monthly,"/month ",s.is_default?"(Default)":""]},s.id))]}),e.jsx("p",{className:"mt-1 text-[10px] text-gray-400",children:"Select the subscription package for this vendor"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-5",children:[e.jsx("button",{type:"button",onClick:()=>D(!1),className:"px-3 py-1.5 text-sm font-bold text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:j,className:"px-3 py-1.5 text-sm font-bold bg-green-600 text-white rounded-lg hover:bg-green-700 transition disabled:opacity-50",children:j?"Creating...":"Register Vendor"})]})]})]})}),J&&l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Edit Vendor"}),e.jsx("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600 transition",children:e.jsx(y,{className:"h-5 w-5"})})]}),u&&e.jsx("div",{className:`mx-4 mt-4 p-3 rounded-lg flex items-center gap-2 text-xs font-bold ${u.type==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:u.text}),e.jsxs("form",{onSubmit:te,className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-gray-400 mb-1",children:"Email (readonly)"}),e.jsx("input",{type:"email",disabled:!0,value:t.email,className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg bg-gray-50 text-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-gray-400 mb-1",children:"Full Name"}),e.jsx("input",{type:"text",required:!0,value:t.full_name,onChange:s=>n({...t,full_name:s.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-gray-400 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:t.phone,onChange:s=>n({...t,phone:s.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-gray-400 mb-1",children:"Shop Name"}),e.jsx("input",{type:"text",required:!0,value:t.shop_name,onChange:s=>n({...t,shop_name:s.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-gray-400 mb-1",children:"Business Email"}),e.jsx("input",{type:"email",value:t.business_email,onChange:s=>n({...t,business_email:s.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-gray-400 mb-1",children:"Business Phone"}),e.jsx("input",{type:"tel",value:t.business_phone,onChange:s=>n({...t,business_phone:s.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-gray-400 mb-1",children:"Tax ID"}),e.jsx("input",{type:"text",value:t.tax_id,onChange:s=>n({...t,tax_id:s.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-gray-400 mb-1",children:"Business Address"}),e.jsx("textarea",{rows:1,value:t.business_address,onChange:s=>n({...t,business_address:s.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-gray-400 mb-1",children:"Shop Description"}),e.jsx("textarea",{rows:2,value:t.shop_description,onChange:s=>n({...t,shop_description:s.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-5",children:[e.jsx("button",{type:"button",onClick:()=>w(!1),className:"px-3 py-1.5 text-sm font-bold text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:j,className:"px-3 py-1.5 text-sm font-bold bg-green-600 text-white rounded-lg hover:bg-green-700 transition disabled:opacity-50",children:j?"Saving...":"Save Changes"})]})]})]})}),K&&l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Shop Information"}),e.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600 transition",children:e.jsx(y,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Shop Name"}),e.jsx("p",{className:"mt-1 text-lg text-gray-900",children:l.shop_name})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Shop Description"}),e.jsx("p",{className:"mt-1 text-gray-900",children:l.shop_description||"N/A"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Business Email"}),e.jsx("p",{className:"mt-1 text-gray-900",children:l.business_email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Business Phone"}),e.jsx("p",{className:"mt-1 text-gray-900",children:l.business_phone||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Business Address"}),e.jsx("p",{className:"mt-1 text-gray-900",children:l.business_address||"N/A"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Tax ID"}),e.jsx("p",{className:"mt-1 text-gray-900",children:l.tax_id||"N/A"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Subscription Plan"}),e.jsx("p",{className:"mt-1 text-gray-900 capitalize",children:l.subscription_plan})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Subscription Expires"}),e.jsx("p",{className:"mt-1 text-gray-900",children:l.subscription_expires_at?new Date(l.subscription_expires_at).toLocaleDateString():"N/A"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Sales"}),e.jsxs("p",{className:"mt-1 text-lg font-semibold text-green-600",children:["$",l.total_sales.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Rating"}),e.jsxs("p",{className:"mt-1 text-lg font-semibold text-yellow-600",children:[l.rating.toFixed(1),"/5.0"]})]})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition",children:"Close"})})]})]})}),Z&&l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"KYC Documents"}),e.jsx("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-gray-600 transition",children:e.jsx(y,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"KYC Status"}),e.jsx("span",{className:`mt-1 inline-block px-3 py-1 rounded-full text-sm font-semibold ${l.kyc_status==="approved"?"bg-green-100 text-green-800":l.kyc_status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:l.kyc_status})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Submitted Documents"}),l.kyc_documents&&Array.isArray(l.kyc_documents)&&l.kyc_documents.length>0?e.jsx("div",{className:"space-y-2",children:l.kyc_documents.map((s,a)=>e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.name||`Document ${a+1}`}),s.url&&e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:"View Document"}),s.type&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Type: ",s.type]})]},a))}):e.jsx("p",{className:"text-gray-500",children:"No documents submitted yet"})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition",children:"Close"})})]})]})})]})}export{He as VendorManagement};
