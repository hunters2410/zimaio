import{r as n,b as N,c as S,u as k,j as e,L as c,P,s as f}from"./index-BktnpWS0.js";function L(){const[l,h]=n.useState(""),[d,p]=n.useState(""),[m,i]=n.useState(""),[u,t]=n.useState(!1),{signIn:y}=N(),{settings:g}=S(),j=k(),w=async s=>{s.preventDefault(),i(""),t(!0);try{const{error:o}=await y(l,d);if(o){i(o.message),t(!1);return}await new Promise(a=>setTimeout(a,500));const{data:{user:x}}=await f.auth.getUser();if(x){const{data:a,error:v}=await f.from("profiles").select("role").eq("id",x.id).single();if(!v&&a){console.log("Profile found:",a),t(!1);let r="/";switch(a.role){case"admin":r="/admin/dashboard";break;case"vendor":r="/vendor/dashboard";break;case"customer":r="/dashboard";break;case"logistic":r="/logistic/dashboard";break;default:r="/"}console.log("Redirecting to:",r);const b=`${window.location.origin}${r}`;console.log("Full redirect URL:",b),window.location.href=b;return}}t(!1),j("/")}catch(o){console.error("Login error:",o),i("An unexpected error occurred. Please try again."),t(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-cyan-50 to-green-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("img",{src:g.site_logo,alt:g.site_name,className:"h-12 w-auto object-contain",onError:s=>{s.currentTarget.src="/zimaio_mineral_edition,_no_background_v1.2.png"}})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600",children:"Sign in to your ZimAIO account"})]}),m&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:m}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:l,onChange:s=>h(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",placeholder:"you@example.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsx("input",{type:"password",value:d,onChange:s=>p(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",placeholder:"••••••••",required:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-cyan-600 focus:ring-cyan-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Remember me"})]}),e.jsx(c,{to:"/forgot-password",className:"text-sm text-cyan-600 hover:text-cyan-700",children:"Forgot password?"})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full py-2 bg-gradient-to-r from-cyan-600 to-green-600 text-white rounded-lg font-semibold hover:from-cyan-700 hover:to-green-700 transition disabled:opacity-50",children:u?"Signing in...":"Sign In"})]}),e.jsxs("div",{className:"mt-6 text-center space-y-4",children:[e.jsxs("p",{className:"text-gray-600",children:["Don't have an account?"," ",e.jsx(c,{to:"/signup",className:"text-cyan-600 hover:text-cyan-700 font-semibold",children:"Sign up"})]}),e.jsx("div",{className:"pt-4 border-t border-gray-100",children:e.jsxs(c,{to:"/logistic-signup",className:"text-sm text-green-600 hover:text-green-700 font-bold flex items-center justify-center gap-2",children:[e.jsx(P,{className:"h-4 w-4"})," Sign Up As Logistic"]})})]})]})})}export{L as LoginPage};
