import{r as s,b as z,c as F,u as H,s as j,j as e,L as d}from"./index-BktnpWS0.js";import{P as R}from"./PuzzleCaptcha-Bl_GW0Ey.js";import"./circle-check-big-DQYFJHkd.js";function U(){const[u,N]=s.useState(""),[m,C]=s.useState(""),[x,_]=s.useState(""),[r,w]=s.useState("customer"),[g,n]=s.useState(""),[h,o]=s.useState(!1),[S,P]=s.useState(!1),[y,k]=s.useState(!1),[p,A]=s.useState(!1);s.useState(!1);const[f,E]=s.useState([]),{signUp:q}=z(),{settings:l}=F(),T=H();s.useEffect(()=>{I()},[]);const I=async()=>{try{const{data:t,error:a}=await j.from("contracts").select("*").in("contract_type",["customer_terms","customer_privacy"]).eq("is_active",!0);if(a)throw a;E(t||[])}catch(t){console.error("Error fetching contracts:",t)}},L=async t=>{if(t.preventDefault(),n(""),o(!0),!S){n("Please verify that you are a human"),o(!1);return}if(r==="customer"&&(!y||!p)){n("Please accept both the Customer Terms & Conditions and Privacy Policy"),o(!1);return}const{error:a,data:c}=await q(u,m,x,r);if(a)n(a.message),o(!1);else{if(c!=null&&c.user&&r==="customer"){const b=f.find(i=>i.contract_type==="customer_terms"),v=f.find(i=>i.contract_type==="customer_privacy");b&&v&&await j.from("contract_acceptances").insert([{user_id:c.user.id,contract_id:b.id,ip_address:"",user_agent:navigator.userAgent},{user_id:c.user.id,contract_id:v.id,ip_address:"",user_agent:navigator.userAgent}])}T("/")}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-cyan-50 to-green-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("img",{src:l.site_logo,alt:l.site_name,className:"h-12 w-auto object-contain",onError:t=>{t.currentTarget.style.display="none"}})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create Account"}),e.jsxs("p",{className:"text-gray-600",children:["Join ",l.site_name," today"]})]}),g&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:g}),e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",value:x,onChange:t=>_(t.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",placeholder:"collen hunters",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:u,onChange:t=>N(t.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",placeholder:"you@example.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsx("input",{type:"password",value:m,onChange:t=>C(t.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",placeholder:"••••••••",required:!0,minLength:6})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"I want to"}),e.jsxs("select",{value:r,onChange:t=>w(t.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",children:[e.jsx("option",{value:"customer",children:"Shop as a Customer"}),e.jsx("option",{value:"vendor",children:"Sell as a Vendor"})]})]}),r==="customer"&&e.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Customer Agreements *"}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",required:!0,checked:y,onChange:t=>k(t.target.checked),className:"rounded border-gray-300 text-cyan-600 focus:ring-cyan-500 mt-1"}),e.jsxs("label",{className:"ml-2 text-sm text-gray-600",children:["I agree to the"," ",e.jsx(d,{to:"/contract/customer_terms",target:"_blank",className:"text-cyan-600 hover:text-cyan-700 font-semibold underline",children:"Customer Terms & Conditions"})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",required:!0,checked:p,onChange:t=>A(t.target.checked),className:"rounded border-gray-300 text-cyan-600 focus:ring-cyan-500 mt-1"}),e.jsxs("label",{className:"ml-2 text-sm text-gray-600",children:["I have read and accept the"," ",e.jsx(d,{to:"/contract/customer_privacy",target:"_blank",className:"text-cyan-600 hover:text-cyan-700 font-semibold underline",children:"Customer Privacy Policy"})]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx(R,{onVerify:P})}),e.jsx("button",{type:"submit",disabled:h,className:"w-full py-3 bg-gradient-to-r from-cyan-600 to-green-600 text-white rounded-lg font-semibold hover:from-cyan-700 hover:to-green-700 transition disabled:opacity-50",children:h?"Creating account...":"Create Account"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",e.jsx(d,{to:"/login",className:"text-cyan-600 hover:text-cyan-700 font-semibold",children:"Sign in"})]})})]})})}export{U as SignupPage};
