import{n as N,e as v,r,s as i,j as e,w as y,X as _,D as S}from"./index-T9wcIP7k.js";import{R as n}from"./refresh-ccw-Dz0QHDRq.js";import{A as u}from"./arrow-up-right-D0Qk9enJ.js";import{T as D}from"./trending-down-BkJW1vDt.js";import{C as z}from"./clock-Hzc8pPp_.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],C=N("arrow-down-left",A);function M(){var b;const{user:s}=v(),[t,k]=r.useState(null),[c,w]=r.useState([]),[o,x]=r.useState(!0),[d,m]=r.useState(null);r.useEffect(()=>{s&&h()},[s]);const h=async()=>{x(!0);try{let{data:a,error:l}=await i.from("wallets").select("*").eq("user_id",s==null?void 0:s.id).single();if(l&&l.code==="PGRST116"){const{data:j,error:p}=await i.from("wallets").insert([{user_id:s==null?void 0:s.id,balance_usd:0,balance_zig:0}]).select().single();if(p)throw p;a=j}else if(l)throw l;k({id:a.id,balance_usd:Number(a.balance_usd)||0,balance_zig:Number(a.balance_zig)||0,total_earned:Number(a.total_earned)||0,total_withdrawn:Number(a.total_withdrawn)||0});const{data:f,error:g}=await i.from("wallet_transactions_detailed").select("*").eq("wallet_id",a.id).order("created_at",{ascending:!1}).limit(10);if(g)throw g;w(f||[])}catch(a){m({type:"error",text:a.message})}finally{x(!1)}};return o&&!t?e.jsx("div",{className:"flex items-center justify-center h-64 bg-gray-50 dark:bg-slate-900",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600"})}):e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-black text-slate-900 dark:text-white uppercase tracking-tighter",children:"My Treasury"}),e.jsx("p",{className:"text-slate-500 font-bold uppercase tracking-widest text-[10px] mt-2",children:"Personal Funds & Balance Audit"})]}),e.jsx("button",{onClick:h,className:"p-4 bg-white dark:bg-slate-800 border-2 border-slate-100 dark:border-slate-700 rounded-2xl hover:bg-slate-50 dark:hover:bg-slate-700 transition-all active:scale-90 shadow-sm group",children:e.jsx(n,{className:`w-5 h-5 text-slate-600 dark:text-slate-400 group-hover:rotate-180 transition-transform duration-500 ${o?"animate-spin":""}`})})]}),d&&e.jsxs("div",{className:`p-6 rounded-[2rem] flex items-center justify-between border-2 animate-in slide-in-from-top-4 duration-300 ${d.type==="success"?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-100 dark:border-emerald-800/50 text-emerald-700 dark:text-emerald-400":"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-800/50 text-red-700 dark:text-red-400"}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(y,{className:"w-6 h-6"}),e.jsx("span",{className:"text-xs font-black uppercase tracking-widest",children:d.text})]}),e.jsx("button",{onClick:()=>m(null),className:"p-2 hover:bg-black/5 dark:hover:bg-white/5 rounded-full transition-colors",children:e.jsx(_,{size:20})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 rounded-[2rem] p-8 text-white shadow-2xl relative overflow-hidden group border-4 border-white/5",children:e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("div",{className:"p-2 bg-white/10 rounded-lg",children:e.jsx(S,{className:"w-5 h-5 text-cyan-400"})}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-cyan-400/80",children:"USD Balance"})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("span",{className:"text-4xl font-black tracking-tighter",children:["$",t==null?void 0:t.balance_usd.toLocaleString(void 0,{minimumFractionDigits:2})]}),e.jsx(u,{className:"w-5 h-5 text-green-400"})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-[2rem] p-8 border-2 border-slate-50 dark:border-slate-700 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("div",{className:"p-2 bg-cyan-50 dark:bg-cyan-900/20 rounded-lg",children:e.jsx(n,{className:"w-5 h-5 text-cyan-600"})}),e.jsx("span",{className:"text-[10px] font-black text-slate-400 tracking-widest uppercase",children:"ZIG Treasury"})]}),e.jsxs("p",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tighter",children:[t==null?void 0:t.balance_zig.toLocaleString()," ",e.jsx("span",{className:"text-xs",children:"ZIG"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-[2rem] p-8 border-2 border-slate-50 dark:border-slate-700 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("div",{className:"p-2 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:e.jsx(D,{className:"w-5 h-5 text-purple-600"})}),e.jsx("span",{className:"text-[10px] font-black text-slate-400 tracking-widest uppercase",children:"Total Spent"})]}),e.jsxs("p",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tighter",children:["$",(b=t==null?void 0:t.total_withdrawn)==null?void 0:b.toLocaleString()]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-[2.5rem] border-2 border-slate-50 dark:border-slate-700 shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"p-8 border-b-2 border-slate-50 dark:border-slate-700 flex items-center justify-between",children:[e.jsx("h2",{className:"text-sm font-black text-slate-900 dark:text-white uppercase tracking-widest",children:"Recent Activity"}),e.jsx(z,{className:"w-4 h-4 text-slate-300"})]}),e.jsxs("div",{className:"divide-y-2 divide-slate-50 dark:divide-slate-800",children:[c.map(a=>e.jsxs("div",{className:"p-8 flex items-center justify-between hover:bg-slate-50 dark:hover:bg-slate-900/50 transition-colors border-l-4 border-transparent hover:border-cyan-500",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:`p-4 rounded-[1.5rem] shadow-sm ${a.amount>0?"bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400":"bg-rose-50 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400"}`,children:a.amount>0?e.jsx(C,{size:24}):e.jsx(u,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-black text-slate-900 dark:text-white uppercase tracking-tighter mb-1",children:a.description}),e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:new Date(a.created_at).toLocaleString()})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`text-lg font-black tracking-tighter ${a.amount>0?"text-emerald-600":"text-slate-900 dark:text-white"}`,children:[a.amount>0?"+":"",a.amount," ",a.currency]}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-300 dark:text-slate-600",children:a.transaction_type})]})]},a.id)),c.length===0&&e.jsxs("div",{className:"p-32 text-center",children:[e.jsx(n,{className:"w-12 h-12 text-slate-100 dark:text-slate-800 mx-auto mb-6"}),e.jsx("p",{className:"text-[10px] font-black text-slate-300 dark:text-slate-700 uppercase tracking-[0.6em]",children:"No financial data logged yet"})]})]})]})]})}export{M as CustomerWallet};
