import{r as o,t as Bt,s as B,v as te,j as i,P as _t,h as Lt,D as Le,L as H}from"./index-DO0RgZ49.js";import{A as Tt,P as zt,C as Rt}from"./AdminLayout-BKwUxqku.js";import{r as ae,d as Ie,e as Ee,S as Kt,f as Mt,u as Y,s as Ft,g as Wt,h as Vt,i as Gt,j as Ut,k as qt,l as Ht,m as et,n as Yt,o as Te,p as we,q as Xt,t as X,v as Pe,w as Ae,x as Zt,y as T,z as V,B as Jt,D as ce,E as Ce,F as Qt,G as F,H as W,I as tt,J as fe,K as at,L as rt,M as nt,N as pe,O as it,Q as ve,U as st,V as ea,W as ot,Z as ta,_ as aa,$ as he,a0 as Q,a1 as lt,a2 as ra,a3 as xe,a4 as ze,a5 as ct,a6 as dt,a7 as _,a8 as ut,a9 as mt,aa as na,ab as ft,ac as pt,ad as ia,ae as G,af as U,ag as sa,ah as vt,ai as oa,aj as la,ak as ca,al as da,am as ua,an as Re,ao as Ke,ap as ma,aq as fa,c as ht,ar as pa,as as va,at as Me,au as xt,av as gt,aw as yt,ax as bt,ay as ha,az as xa,aA as Fe,aB as ga,aC as jt,aD as wt,R as ge,C as De,X as $e,Y as Be,T as ye,A as ya,a as We,P as ba,b as ja}from"./AreaChart-BDGlk4x5.js";import{U as Ve}from"./users-BSjrVskw.js";import{T as wa}from"./trending-up-wwL8Hvm9.js";import{G as Pa}from"./globe-D32u69CK.js";import{T as Aa}from"./truck-B6XH1kda.js";import{T as Ge}from"./triangle-alert-BGFUz6oR.js";import"./chevron-left-41R8eOj5.js";import"./x-DeAqnK16.js";import"./circle-check-big-9UdHLz61.js";import"./chevron-right-Q63LQqcu.js";import"./zap-BYU6Jgn-.js";import"./maximize-Bk65GDgD.js";import"./store-66_jksTa.js";import"./shield-DcS4_U9J.js";import"./file-text-CE8OtNx3.js";import"./credit-card-CQ2BKawh.js";import"./settings-CrPpwdBJ.js";function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},de.apply(null,arguments)}function Ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Oa(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Ue(Object(a),!0).forEach(function(r){Sa(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ue(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Sa(e,t,a){return(t=ka(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ka(e){var t=Na(e,"string");return typeof t=="symbol"?t:t+""}function Na(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var L=32,Ia={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function Ea(e){var{data:t,iconType:a,inactiveColor:r}=e,n=L/2,s=L/6,d=L/3,l=t.inactive?r:t.color,u=a??t.type;if(u==="none")return null;if(u==="plainline"){var c;return o.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(c=t.payload)===null||c===void 0?void 0:c.strokeDasharray,x1:0,y1:n,x2:L,y2:n,className:"recharts-legend-icon"})}if(u==="line")return o.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(n,"h").concat(d,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*d,",").concat(n,`
            H`).concat(L,"M").concat(2*d,",").concat(n,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(d,",").concat(n),className:"recharts-legend-icon"});if(u==="rect")return o.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(L/8,"h").concat(L,"v").concat(L*3/4,"h").concat(-L,"z"),className:"recharts-legend-icon"});if(o.isValidElement(t.legendIcon)){var m=Oa({},t);return delete m.legendIcon,o.cloneElement(t.legendIcon,m)}return o.createElement(Mt,{fill:l,cx:n,cy:n,size:L,sizeType:"diameter",type:u})}function Ca(e){var{payload:t,iconSize:a,layout:r,formatter:n,inactiveColor:s,iconType:d}=e,l={x:0,y:0,width:L,height:L},u={display:r==="horizontal"?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((m,f)=>{var p=m.formatter||n,g=Ie({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:m.inactive});if(m.type==="none")return null;var y=m.inactive?s:m.color,h=p?p(m.value,m,f):m.value;return o.createElement("li",de({className:g,style:u,key:"legend-item-".concat(f)},Ee(e,m,f)),o.createElement(Kt,{width:a,height:a,viewBox:l,style:c,"aria-label":"".concat(h," legend icon")},o.createElement(Ea,{data:m,iconType:d,inactiveColor:s})),o.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},h))})}var Da=e=>{var t=ae(e,Ia),{payload:a,layout:r,align:n}=t;if(!a||!a.length)return null;var s={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return o.createElement("ul",{className:"recharts-default-legend",style:s},o.createElement(Ca,de({},t,{payload:a})))};function $a(){return Y(Ft)}var Ba=["contextPayload"];function Oe(){return Oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Oe.apply(null,arguments)}function qe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?qe(Object(a),!0).forEach(function(r){_a(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qe(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function _a(e,t,a){return(t=La(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function La(e){var t=Ta(e,"string");return typeof t=="symbol"?t:t+""}function Ta(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function za(e,t){if(e==null)return{};var a,r,n=Ra(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Ra(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function Ka(e){return e.value}function Ma(e){var{contextPayload:t}=e,a=za(e,Ba),r=Ht(t,e.payloadUniqBy,Ka),n=Z(Z({},a),{},{payload:r});return o.isValidElement(e.content)?o.cloneElement(e.content,n):typeof e.content=="function"?o.createElement(e.content,n):o.createElement(Da,n)}function Fa(e,t,a,r,n,s){var{layout:d,align:l,verticalAlign:u}=t,c,m;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&d==="vertical"?c={left:((r||0)-s.width)/2}:c=l==="right"?{right:a&&a.right||0}:{left:a&&a.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(u==="middle"?m={top:((n||0)-s.height)/2}:m=u==="bottom"?{bottom:a&&a.bottom||0}:{top:a&&a.top||0}),Z(Z({},c),m)}function Wa(e){var t=et();return o.useEffect(()=>{t(Yt(e))},[t,e]),null}function Va(e){var t=et();return o.useEffect(()=>(t(Te(e)),()=>{t(Te({width:0,height:0}))}),[t,e]),null}function Ga(e,t,a,r){return e==="vertical"&&we(t)?{height:t}:e==="horizontal"?{width:a||r}:null}var Ua={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function be(e){var t=ae(e,Ua),a=$a(),r=Wt(),n=Vt(),{width:s,height:d,wrapperStyle:l,portal:u}=t,[c,m]=Gt([a]),f=Ut(),p=qt();if(f==null||p==null)return null;var g=f-((n==null?void 0:n.left)||0)-((n==null?void 0:n.right)||0),y=Ga(t.layout,d,s,g),h=u?l:Z(Z({position:"absolute",width:(y==null?void 0:y.width)||s||"auto",height:(y==null?void 0:y.height)||d||"auto"},Fa(l,t,n,f,p,c)),l),b=u??r;if(b==null||a==null)return null;var v=o.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:m},o.createElement(Wa,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!u&&o.createElement(Va,{width:c.width,height:c.height}),o.createElement(Ma,Oe({},t,y,{margin:n,chartWidth:f,chartHeight:p,contextPayload:a})));return Bt.createPortal(v,b)}be.displayName="Legend";var He=(e,t,a)=>{var r=a??e;if(!X(r))return Pe(r,t,0)},qa=(e,t,a)=>{var r={},n=e.filter(Xt),s=e.filter(c=>c.stackId==null),d=n.reduce((c,m)=>(c[m.stackId]||(c[m.stackId]=[]),c[m.stackId].push(m),c),r),l=Object.entries(d).map(c=>{var[m,f]=c,p=f.map(y=>y.dataKey),g=He(t,a,f[0].barSize);return{stackId:m,dataKeys:p,barSize:g}}),u=s.map(c=>{var m=[c.dataKey].filter(p=>p!=null),f=He(t,a,c.barSize);return{stackId:void 0,dataKeys:m,barSize:f}});return[...l,...u]};function Ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function oe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Ye(Object(a),!0).forEach(function(r){Ha(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ye(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Ha(e,t,a){return(t=Ya(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ya(e){var t=Xa(e,"string");return typeof t=="symbol"?t:t+""}function Xa(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Za(e,t,a,r,n){var s=r.length;if(!(s<1)){var d=Pe(e,a,0,!0),l,u=[];if(Ae(r[0].barSize)){var c=!1,m=a/s,f=r.reduce((v,x)=>v+(x.barSize||0),0);f+=(s-1)*d,f>=a&&(f-=(s-1)*d,d=0),f>=a&&m>0&&(c=!0,m*=.9,f=s*m);var p=(a-f)/2>>0,g={offset:p-d,size:0};l=r.reduce((v,x)=>{var j,w={stackId:x.stackId,dataKeys:x.dataKeys,position:{offset:g.offset+g.size+d,size:c?m:(j=x.barSize)!==null&&j!==void 0?j:0}},A=[...v,w];return g=A[A.length-1].position,A},u)}else{var y=Pe(t,a,0,!0);a-2*y-(s-1)*d<=0&&(d=0);var h=(a-2*y-(s-1)*d)/s;h>1&&(h>>=0);var b=Ae(n)?Math.min(h,n):h;l=r.reduce((v,x,j)=>[...v,{stackId:x.stackId,dataKeys:x.dataKeys,position:{offset:y+(h+d)*j+(h-b)/2,size:b}}],u)}return l}}var Ja=(e,t,a,r,n,s,d)=>{var l=X(d)?t:d,u=Za(a,r,n!==s?n:s,e,l);return n!==s&&u!=null&&(u=u.map(c=>oe(oe({},c),{},{position:oe(oe({},c.position),{},{offset:c.position.offset-n/2})}))),u},Qa=(e,t)=>{var a=Zt(t);if(!(!e||a==null||t==null)){var{stackId:r}=t;if(r!=null){var n=e[r];if(n){var{stackedData:s}=n;if(s)return s.find(d=>d.key===a)}}}};function er(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Ae(e.zIndex)?e.zIndex:t}var tr=["children"];function ar(e,t){if(e==null)return{};var a,r,n=rr(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function rr(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var nr={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},ir=o.createContext(nr);function Pt(e){var{children:t}=e,a=ar(e,tr);return o.createElement(ir.Provider,{value:a},t)}var At=(e,t,a,r)=>F(e,"xAxis",t,r),Ot=(e,t,a,r)=>W(e,"xAxis",t,r),St=(e,t,a,r)=>F(e,"yAxis",a,r),kt=(e,t,a,r)=>W(e,"yAxis",a,r),sr=T([V,At,St,Ot,kt],(e,t,a,r,n)=>Jt(e,"xAxis")?ce(t,r,!1):ce(a,n,!1)),or=(e,t,a,r,n)=>n;function lr(e){return e.type==="line"}var cr=T([Ce,or],(e,t)=>e.filter(lr).find(a=>a.id===t)),dr=T([V,At,St,Ot,kt,cr,sr,Qt],(e,t,a,r,n,s,d,l)=>{var{chartData:u,dataStartIndex:c,dataEndIndex:m}=l;if(!(s==null||t==null||a==null||r==null||n==null||r.length===0||n.length===0||d==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:f,data:p}=s,g;if(p!=null&&p.length>0?g=p:g=u==null?void 0:u.slice(c,m+1),g!=null)return Er({layout:e,xAxis:t,yAxis:a,xAxisTicks:r,yAxisTicks:n,dataKey:f,bandSize:d,displayedData:g})}}),ur=["id"],mr=["type","layout","connectNulls","needClip","shape"],fr=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ee.apply(null,arguments)}function Xe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Xe(Object(a),!0).forEach(function(r){pr(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Xe(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function pr(e,t,a){return(t=vr(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function vr(e){var t=hr(e,"string");return typeof t=="symbol"?t:t+""}function hr(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _e(e,t){if(e==null)return{};var a,r,n=xr(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function xr(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var gr=e=>{var{dataKey:t,name:a,stroke:r,legendType:n,hide:s}=e;return[{inactive:s,dataKey:t,type:n,color:r,value:pe(a,t),payload:e}]},yr=o.memo(e=>{var{dataKey:t,data:a,stroke:r,strokeWidth:n,fill:s,name:d,hide:l,unit:u,tooltipType:c,id:m}=e,f={dataDefinedOnItem:a,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:pe(d,t),hide:l,type:c,color:r,unit:u,graphicalItemId:m}};return o.createElement(it,{tooltipEntrySettings:f})}),Nt=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function br(e,t){for(var a=e.length%2!==0?[...e,0]:e,r=[],n=0;n<t;++n)r=[...r,...a];return r}var jr=(e,t,a)=>{var r=a.reduce((f,p)=>f+p);if(!r)return Nt(t,e);for(var n=Math.floor(e/r),s=e%r,d=t-e,l=[],u=0,c=0;u<a.length;c+=a[u],++u)if(c+a[u]>s){l=[...a.slice(0,u),s-c];break}var m=l.length%2===0?[0,d]:[d];return[...br(a,n),...l,...m].map(f=>"".concat(f,"px")).join(", ")};function wr(e){var{clipPathId:t,points:a,props:r}=e,{dot:n,dataKey:s,needClip:d}=r,l=_e(r,ur),u=pt(l);return o.createElement(ia,{points:a,dot:n,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:u,needClip:d,clipPathId:t})}function Pr(e){var{showLabels:t,children:a,points:r}=e,n=o.useMemo(()=>r==null?void 0:r.map(s=>{var d,l,u={x:(d=s.x)!==null&&d!==void 0?d:0,y:(l=s.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return z(z({},u),{},{value:s.value,payload:s.payload,viewBox:u,parentViewBox:void 0,fill:void 0})}),[r]);return o.createElement(mt,{value:t?n:void 0},a)}function Ze(e){var{clipPathId:t,pathRef:a,points:r,strokeDasharray:n,props:s}=e,{type:d,layout:l,connectNulls:u,needClip:c,shape:m}=s,f=_e(s,mr),p=z(z({},na(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(t,")"):void 0,points:r,type:d,layout:l,connectNulls:u,strokeDasharray:n??s.strokeDasharray});return o.createElement(o.Fragment,null,(r==null?void 0:r.length)>1&&o.createElement(ft,ee({shapeType:"curve",option:m},p,{pathRef:a})),o.createElement(wr,{points:r,clipPathId:t,props:s}))}function Ar(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function Or(e){var{clipPathId:t,props:a,pathRef:r,previousPointsRef:n,longestAnimatedLengthRef:s}=e,{points:d,strokeDasharray:l,isAnimationActive:u,animationBegin:c,animationDuration:m,animationEasing:f,animateNewValues:p,width:g,height:y,onAnimationEnd:h,onAnimationStart:b}=a,v=n.current,x=ct(d,"recharts-line-"),j=o.useRef(x),[w,A]=o.useState(!1),P=!w,N=o.useCallback(()=>{typeof h=="function"&&h(),A(!1)},[h]),I=o.useCallback(()=>{typeof b=="function"&&b(),A(!0)},[b]),O=Ar(r.current),S=o.useRef(0);j.current!==x&&(S.current=s.current,j.current=x);var K=S.current;return o.createElement(Pr,{points:d,showLabels:P},a.children,o.createElement(dt,{animationId:x,begin:c,duration:m,isActive:u,easing:f,onAnimationEnd:N,onAnimationStart:I,key:x},$=>{var k=_(K,O+K,$),E=Math.min(k,O),M;if(u)if(l){var q="".concat(l).split(/[,\s]+/gim).map(D=>parseFloat(D));M=jr(E,O,q)}else M=Nt(O,E);else M=l==null?void 0:String(l);if($>0&&O>0&&(n.current=d,s.current=Math.max(s.current,E)),v){var ne=v.length/d.length,J=$===1?d:d.map((D,je)=>{var ie=Math.floor(je*ne);if(v[ie]){var se=v[ie];return z(z({},D),{},{x:_(se.x,D.x,$),y:_(se.y,D.y,$)})}return p?z(z({},D),{},{x:_(g*2,D.x,$),y:_(y/2,D.y,$)}):z(z({},D),{},{x:D.x,y:D.y})});return n.current=J,o.createElement(Ze,{props:a,points:J,clipPathId:t,pathRef:r,strokeDasharray:M})}return o.createElement(Ze,{props:a,points:d,clipPathId:t,pathRef:r,strokeDasharray:M})}),o.createElement(ut,{label:a.label}))}function Sr(e){var{clipPathId:t,props:a}=e,r=o.useRef(null),n=o.useRef(0),s=o.useRef(null);return o.createElement(Or,{props:a,clipPathId:t,previousPointsRef:r,longestAnimatedLengthRef:n,pathRef:s})}var kr=(e,t)=>{var a,r;return{x:(a=e.x)!==null&&a!==void 0?a:void 0,y:(r=e.y)!==null&&r!==void 0?r:void 0,value:e.value,errorVal:xe(e.payload,t)}};class Nr extends o.Component{render(){var{hide:t,dot:a,points:r,className:n,xAxisId:s,yAxisId:d,top:l,left:u,width:c,height:m,id:f,needClip:p,zIndex:g}=this.props;if(t)return null;var y=Ie("recharts-line",n),h=f,{r:b,strokeWidth:v}=ta(a),x=aa(a),j=b*2+v,w=p?"url(#clipPath-".concat(x?"":"dots-").concat(h,")"):void 0;return o.createElement(he,{zIndex:g},o.createElement(Q,{className:y},p&&o.createElement("defs",null,o.createElement(lt,{clipPathId:h,xAxisId:s,yAxisId:d}),!x&&o.createElement("clipPath",{id:"clipPath-dots-".concat(h)},o.createElement("rect",{x:u-j/2,y:l-j/2,width:c+j,height:m+j}))),o.createElement(Pt,{xAxisId:s,yAxisId:d,data:r,dataPointFormatter:kr,errorBarOffset:0},o.createElement(Sr,{props:this.props,clipPathId:h}))),o.createElement(ra,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:w}))}}var It={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:ve.line,type:"linear"};function Ir(e){var t=ae(e,It),{activeDot:a,animateNewValues:r,animationBegin:n,animationDuration:s,animationEasing:d,connectNulls:l,dot:u,hide:c,isAnimationActive:m,label:f,legendType:p,xAxisId:g,yAxisId:y,id:h}=t,b=_e(t,fr),{needClip:v}=st(g,y),x=ea(),j=ot(),w=fe(),A=Y(S=>dr(S,g,y,w,h));if(j!=="horizontal"&&j!=="vertical"||A==null||x==null)return null;var{height:P,width:N,x:I,y:O}=x;return o.createElement(Nr,ee({},b,{id:h,connectNulls:l,dot:u,activeDot:a,animateNewValues:r,animationBegin:n,animationDuration:s,animationEasing:d,isAnimationActive:m,hide:c,label:f,legendType:p,xAxisId:g,yAxisId:y,points:A,layout:j,height:P,width:N,left:I,top:O,needClip:v}))}function Er(e){var{layout:t,xAxis:a,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataKey:d,bandSize:l,displayedData:u}=e;return u.map((c,m)=>{var f=xe(c,d);if(t==="horizontal"){var p=ze({axis:a,ticks:n,bandSize:l,entry:c,index:m}),g=X(f)?null:r.scale(f);return{x:p,y:g,value:f,payload:c}}var y=X(f)?null:a.scale(f),h=ze({axis:r,ticks:s,bandSize:l,entry:c,index:m});return y==null||h==null?null:{x:y,y:h,value:f,payload:c}}).filter(Boolean)}function Cr(e){var t=ae(e,It),a=fe();return o.createElement(at,{id:t.id,type:"line"},r=>o.createElement(o.Fragment,null,o.createElement(rt,{legendPayload:gr(t)}),o.createElement(yr,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:r}),o.createElement(nt,{type:"line",id:r,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:a}),o.createElement(Ir,ee({},t,{id:r}))))}var Se=o.memo(Cr,tt);Se.displayName="Line";var Dr="Invariant failed";function $r(e,t){throw new Error(Dr)}function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ke.apply(null,arguments)}function ue(e){return o.createElement(ft,ke({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var Br=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,n)=>{if(we(t))return t;var s=we(r)||X(r);return s?t(r,n):(s||$r(),a)}},_r=(e,t,a)=>a,Lr=(e,t)=>t,re=T([Ce,Lr],(e,t)=>e.filter(a=>a.type==="bar").find(a=>a.id===t)),Tr=T([re],e=>e==null?void 0:e.maxBarSize),zr=(e,t,a,r)=>r,Rr=T([V,Ce,G,U,_r],(e,t,a,r,n)=>t.filter(s=>e==="horizontal"?s.xAxisId===a:s.yAxisId===r).filter(s=>s.isPanorama===n).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Kr=(e,t,a)=>{var r=V(e),n=G(e,t),s=U(e,t);if(!(n==null||s==null))return r==="horizontal"?Re(e,"yAxis",s,a):Re(e,"xAxis",n,a)},Mr=(e,t)=>{var a=V(e),r=G(e,t),n=U(e,t);if(!(r==null||n==null))return a==="horizontal"?Ke(e,"xAxis",r):Ke(e,"yAxis",n)},Fr=T([Rr,sa,Mr],qa),Wr=(e,t,a)=>{var r,n,s=re(e,t);if(s!=null){var d=G(e,t),l=U(e,t);if(!(d==null||l==null)){var u=V(e),c=vt(e),{maxBarSize:m}=s,f=X(m)?c:m,p,g;return u==="horizontal"?(p=F(e,"xAxis",d,a),g=W(e,"xAxis",d,a)):(p=F(e,"yAxis",l,a),g=W(e,"yAxis",l,a)),(r=(n=ce(p,g,!0))!==null&&n!==void 0?n:f)!==null&&r!==void 0?r:0}}},Et=(e,t,a)=>{var r=V(e),n=G(e,t),s=U(e,t);if(!(n==null||s==null)){var d,l;return r==="horizontal"?(d=F(e,"xAxis",n,a),l=W(e,"xAxis",n,a)):(d=F(e,"yAxis",s,a),l=W(e,"yAxis",s,a)),ce(d,l)}},Vr=T([Fr,vt,oa,la,Wr,Et,Tr],Ja),Gr=(e,t,a)=>{var r=G(e,t);if(r!=null)return F(e,"xAxis",r,a)},Ur=(e,t,a)=>{var r=U(e,t);if(r!=null)return F(e,"yAxis",r,a)},qr=(e,t,a)=>{var r=G(e,t);if(r!=null)return W(e,"xAxis",r,a)},Hr=(e,t,a)=>{var r=U(e,t);if(r!=null)return W(e,"yAxis",r,a)},Yr=T([Vr,re],(e,t)=>{if(!(e==null||t==null)){var a=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(a!=null)return a.position}}),Xr=T([Kr,re],Qa),Zr=T([ca,da,Gr,Ur,qr,Hr,Yr,V,ua,Et,Xr,re,zr],(e,t,a,r,n,s,d,l,u,c,m,f,p)=>{var{chartData:g,dataStartIndex:y,dataEndIndex:h}=u;if(!(f==null||d==null||t==null||l!=="horizontal"&&l!=="vertical"||a==null||r==null||n==null||s==null||c==null)){var{data:b}=f,v;if(b!=null&&b.length>0?v=b:v=g==null?void 0:g.slice(y,h+1),v!=null)return kn({layout:l,barSettings:f,pos:d,parentViewBox:t,bandSize:c,xAxis:a,yAxis:r,xAxisTicks:n,yAxisTicks:s,stackedData:m,displayedData:v,offset:e,cells:p,dataStartIndex:y})}}),Jr=["index"];function Ne(){return Ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Ne.apply(null,arguments)}function Qr(e,t){if(e==null)return{};var a,r,n=en(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function en(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var Ct=o.createContext(void 0),tn=e=>{var t=o.useContext(Ct);if(t!=null)return t.stackId;if(e!=null)return ma(e)},an=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),rn=e=>{var t=o.useContext(Ct);if(t!=null){var{stackId:a}=t;return"url(#".concat(an(a,e),")")}},nn=e=>{var{index:t}=e,a=Qr(e,Jr),r=rn(t);return o.createElement(Q,Ne({className:"recharts-bar-stack-layer",clipPath:r},a))},sn=["onMouseEnter","onMouseLeave","onClick"],on=["value","background","tooltipPosition"],ln=["id"],cn=["onMouseEnter","onClick","onMouseLeave"];function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},R.apply(null,arguments)}function Je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Je(Object(a),!0).forEach(function(r){dn(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Je(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function dn(e,t,a){return(t=un(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function un(e){var t=mn(e,"string");return typeof t=="symbol"?t:t+""}function mn(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function me(e,t){if(e==null)return{};var a,r,n=fn(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function fn(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var pn=e=>{var{dataKey:t,name:a,fill:r,legendType:n,hide:s}=e;return[{inactive:s,dataKey:t,type:n,color:r,value:pe(a,t),payload:e}]},vn=o.memo(e=>{var{dataKey:t,stroke:a,strokeWidth:r,fill:n,name:s,hide:d,unit:l,tooltipType:u,id:c}=e,m={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:a,strokeWidth:r,fill:n,dataKey:t,nameKey:void 0,name:pe(s,t),hide:d,type:u,color:n,unit:l,graphicalItemId:c}};return o.createElement(it,{tooltipEntrySettings:m})});function hn(e){var t=Y(xt),{data:a,dataKey:r,background:n,allOtherBarProps:s}=e,{onMouseEnter:d,onMouseLeave:l,onClick:u}=s,c=me(s,sn),m=gt(d,r,s.id),f=yt(l),p=bt(u,r,s.id);if(!n||a==null)return null;var g=ha(n);return o.createElement(he,{zIndex:er(n,ve.barBackground)},a.map((y,h)=>{var{value:b,background:v,tooltipPosition:x}=y,j=me(y,on);if(!v)return null;var w=m(y,h),A=f(y,h),P=p(y,h),N=C(C(C(C(C({option:n,isActive:String(h)===t},j),{},{fill:"#eee"},v),g),Ee(c,y,h)),{},{onMouseEnter:w,onMouseLeave:A,onClick:P,dataKey:r,index:h,className:"recharts-bar-background-rectangle"});return o.createElement(ue,R({key:"background-bar-".concat(h)},N))}))}function xn(e){var{showLabels:t,children:a,rects:r}=e,n=r==null?void 0:r.map(s=>{var d={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return C(C({},d),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:d,fill:s.fill})});return o.createElement(mt,{value:t?n:void 0},a)}function gn(e){var{shape:t,activeBar:a,baseProps:r,entry:n,index:s,dataKey:d}=e,l=Y(xt),u=Y(ga),c=a&&String(s)===l&&(u==null||d===u),m=c?a:t;return c?o.createElement(he,{zIndex:ve.activeBar},o.createElement(ue,R({},r,{name:String(r.name)},n,{isActive:c,option:m,index:s,dataKey:d}))):o.createElement(ue,R({},r,{name:String(r.name)},n,{isActive:c,option:m,index:s,dataKey:d}))}function yn(e){var{shape:t,baseProps:a,entry:r,index:n,dataKey:s}=e;return o.createElement(ue,R({},a,{name:String(a.name)},r,{isActive:!1,option:t,index:n,dataKey:s}))}function bn(e){var t,{data:a,props:r}=e,n=(t=pt(r))!==null&&t!==void 0?t:{},{id:s}=n,d=me(n,ln),{shape:l,dataKey:u,activeBar:c}=r,{onMouseEnter:m,onClick:f,onMouseLeave:p}=r,g=me(r,cn),y=gt(m,u,s),h=yt(p),b=bt(f,u,s);return a?o.createElement(o.Fragment,null,a.map((v,x)=>o.createElement(nn,R({index:x,key:"rectangle-".concat(v==null?void 0:v.x,"-").concat(v==null?void 0:v.y,"-").concat(v==null?void 0:v.value,"-").concat(x),className:"recharts-bar-rectangle"},Ee(g,v,x),{onMouseEnter:y(v,x),onMouseLeave:h(v,x),onClick:b(v,x)}),c?o.createElement(gn,{shape:l,activeBar:c,baseProps:d,entry:v,index:x,dataKey:u}):o.createElement(yn,{shape:l,baseProps:d,entry:v,index:x,dataKey:u})))):null}function jn(e){var{props:t,previousRectanglesRef:a}=e,{data:r,layout:n,isAnimationActive:s,animationBegin:d,animationDuration:l,animationEasing:u,onAnimationEnd:c,onAnimationStart:m}=t,f=a.current,p=ct(t,"recharts-bar-"),[g,y]=o.useState(!1),h=!g,b=o.useCallback(()=>{typeof c=="function"&&c(),y(!1)},[c]),v=o.useCallback(()=>{typeof m=="function"&&m(),y(!0)},[m]);return o.createElement(xn,{showLabels:h,rects:r},o.createElement(dt,{animationId:p,begin:d,duration:l,isActive:s,easing:u,onAnimationEnd:b,onAnimationStart:v,key:p},x=>{var j=x===1?r:r==null?void 0:r.map((w,A)=>{var P=f&&f[A];if(P)return C(C({},w),{},{x:_(P.x,w.x,x),y:_(P.y,w.y,x),width:_(P.width,w.width,x),height:_(P.height,w.height,x)});if(n==="horizontal"){var N=_(0,w.height,x),I=_(w.stackedBarStart,w.y,x);return C(C({},w),{},{y:I,height:N})}var O=_(0,w.width,x),S=_(w.stackedBarStart,w.x,x);return C(C({},w),{},{width:O,x:S})});return x>0&&(a.current=j??null),j==null?null:o.createElement(Q,null,o.createElement(bn,{props:t,data:j}))}),o.createElement(ut,{label:t.label}),t.children)}function wn(e){var t=o.useRef(null);return o.createElement(jn,{previousRectanglesRef:t,props:e})}var Dt=0,Pn=(e,t)=>{var a=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:a,errorVal:xe(e,t)}};class An extends o.PureComponent{render(){var{hide:t,data:a,dataKey:r,className:n,xAxisId:s,yAxisId:d,needClip:l,background:u,id:c}=this.props;if(t||a==null)return null;var m=Ie("recharts-bar",n),f=c;return o.createElement(Q,{className:m,id:c},l&&o.createElement("defs",null,o.createElement(lt,{clipPathId:f,xAxisId:s,yAxisId:d})),o.createElement(Q,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},o.createElement(hn,{data:a,dataKey:r,background:u,allOtherBarProps:this.props}),o.createElement(wn,this.props)))}}var On={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Dt,xAxisId:0,yAxisId:0,zIndex:ve.bar};function Sn(e){var{xAxisId:t,yAxisId:a,hide:r,legendType:n,minPointSize:s,activeBar:d,animationBegin:l,animationDuration:u,animationEasing:c,isAnimationActive:m}=e,{needClip:f}=st(t,a),p=ot(),g=fe(),y=fa(e.children,ht),h=Y(x=>Zr(x,e.id,g,y));if(p!=="vertical"&&p!=="horizontal")return null;var b,v=h==null?void 0:h[0];return v==null||v.height==null||v.width==null?b=0:b=p==="vertical"?v.height/2:v.width/2,o.createElement(Pt,{xAxisId:t,yAxisId:a,data:h,dataPointFormatter:Pn,errorBarOffset:b},o.createElement(An,R({},e,{layout:p,needClip:f,data:h,xAxisId:t,yAxisId:a,hide:r,legendType:n,minPointSize:s,activeBar:d,animationBegin:l,animationDuration:u,animationEasing:c,isAnimationActive:m})))}function kn(e){var{layout:t,barSettings:{dataKey:a,minPointSize:r},pos:n,bandSize:s,xAxis:d,yAxis:l,xAxisTicks:u,yAxisTicks:c,stackedData:m,displayedData:f,offset:p,cells:g,parentViewBox:y,dataStartIndex:h}=e,b=t==="horizontal"?l:d,v=m?b.scale.domain():null,x=pa({numericAxis:b}),j=b.scale(x);return f.map((w,A)=>{var P,N,I,O,S,K;if(m){var $=m[A+h];if($==null)return null;P=va($,v)}else P=xe(w,a),Array.isArray(P)||(P=[x,P]);var k=Br(r,Dt)(P[1],A);if(t==="horizontal"){var E,[M,q]=[l.scale(P[0]),l.scale(P[1])];N=Me({axis:d,ticks:u,bandSize:s,offset:n.offset,entry:w,index:A}),I=(E=q??M)!==null&&E!==void 0?E:void 0,O=n.size;var ne=M-q;if(S=xa(ne)?0:ne,K={x:N,y:p.top,width:O,height:p.height},Math.abs(k)>0&&Math.abs(S)<Math.abs(k)){var J=Fe(S||k)*(Math.abs(k)-Math.abs(S));I-=J,S+=J}}else{var[D,je]=[d.scale(P[0]),d.scale(P[1])];if(N=D,I=Me({axis:l,ticks:c,bandSize:s,offset:n.offset,entry:w,index:A}),O=je-D,S=n.size,K={x:p.left,y:I,width:p.width,height:S},Math.abs(k)>0&&Math.abs(O)<Math.abs(k)){var ie=Fe(O||k)*(Math.abs(k)-Math.abs(O));O+=ie}}if(N==null||I==null||O==null||S==null)return null;var se=C(C({},w),{},{stackedBarStart:j,x:N,y:I,width:O,height:S,value:m?P:P[1],payload:w,background:K,tooltipPosition:{x:N+O/2,y:I+S/2},parentViewBox:y},g&&g[A]&&g[A].props);return se}).filter(Boolean)}function Nn(e){var t=ae(e,On),a=tn(t.stackId),r=fe();return o.createElement(at,{id:t.id,type:"bar"},n=>o.createElement(o.Fragment,null,o.createElement(rt,{legendPayload:pn(t)}),o.createElement(vn,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:n}),o.createElement(nt,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:a,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),o.createElement(he,{zIndex:t.zIndex},o.createElement(Sn,R({},t,{id:n})))))}var $t=o.memo(Nn,tt);$t.displayName="Bar";var In=["axis"],En=o.forwardRef((e,t)=>o.createElement(jt,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:In,tooltipPayloadSearcher:wt,categoricalChartProps:e,ref:t})),Cn=["axis","item"],Dn=o.forwardRef((e,t)=>o.createElement(jt,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Cn,tooltipPayloadSearcher:wt,categoricalChartProps:e,ref:t}));const le={async getDailyStats(e=30){const{data:t,error:a}=await B.from("analytics_daily_stats").select("*").order("date",{ascending:!0}).limit(e);if(a)throw a;return t||[]},async getRevenueGrowth(e=30){return(await this.getDailyStats(e)).map(a=>({date:new Date(a.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),revenue:Number(a.total_revenue),orders:a.total_orders}))},async getCustomerGrowth(e=30){return(await this.getDailyStats(e)).map(a=>({date:new Date(a.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),total:a.total_customers,new:a.new_customers}))},async getVendorGrowth(e=30){return(await this.getDailyStats(e)).map(a=>({date:new Date(a.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),total:a.total_vendors,new:a.new_vendors}))},async getOrderTrends(e){const t=e||new Date().toISOString().split("T")[0],{data:a,error:r}=await B.from("analytics_order_trends").select("*").eq("date",t).order("hour",{ascending:!0});if(r)throw r;return(a||[]).map(n=>({hour:`${n.hour}:00`,orders:n.order_count,value:Number(n.total_value)}))},async getTopVendors(e=10){const{data:t,error:a}=await B.from("analytics_vendor_performance").select(`
        vendor_id,
        total_revenue,
        total_orders,
        vendor_profiles (
          business_name,
          user_id
        )
      `).order("total_revenue",{ascending:!1}).limit(e);if(a)throw a;return t||[]},async getSalesComparison(e=7){return(await this.getDailyStats(e)).map(a=>({date:new Date(a.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),orders:a.total_orders,revenue:Number(a.total_revenue),customers:a.new_customers}))},async getProductCategoryDistribution(){const{data:e,error:t}=await B.from("products").select(`
        category_id,
        categories (name)
      `);if(t)throw t;const a={};return(e||[]).forEach(r=>{var s;const n=((s=r.categories)==null?void 0:s.name)||"Uncategorized";a[n]=(a[n]||0)+1}),Object.entries(a).map(([r,n])=>({name:r,value:n}))},async getOrderStatusDistribution(){const{data:e,error:t}=await B.from("orders").select("status");if(t)throw t;const a={};return(e||[]).forEach(r=>{a[r.status]=(a[r.status]||0)+1}),Object.entries(a).map(([r,n])=>({name:r.charAt(0).toUpperCase()+r.slice(1),value:n}))}};function $n({data:e}){const{theme:t}=te(),a=t==="dark";return i.jsx(ge,{width:"100%",height:300,children:i.jsxs(En,{data:e,children:[i.jsx(De,{strokeDasharray:"3 3",stroke:a?"#374151":"#e5e7eb"}),i.jsx($e,{dataKey:"date",stroke:a?"#9ca3af":"#6b7280",style:{fontSize:"12px"}}),i.jsx(Be,{stroke:a?"#9ca3af":"#6b7280",style:{fontSize:"12px"}}),i.jsx(ye,{contentStyle:{backgroundColor:a?"#1f2937":"#ffffff",border:`1px solid ${a?"#374151":"#e5e7eb"}`,borderRadius:"8px",fontSize:"14px"},labelStyle:{color:a?"#f3f4f6":"#111827"}}),i.jsx(be,{wrapperStyle:{fontSize:"14px"}}),i.jsx(Se,{type:"monotone",dataKey:"revenue",stroke:"#06b6d4",strokeWidth:2,dot:{r:4},activeDot:{r:6},name:"Revenue ($)"}),i.jsx(Se,{type:"monotone",dataKey:"orders",stroke:"#10b981",strokeWidth:2,dot:{r:4},activeDot:{r:6},name:"Orders"})]})})}function Bn({data:e}){const{theme:t}=te(),a=t==="dark";return i.jsx(ge,{width:"100%",height:300,children:i.jsxs(ya,{data:e,children:[i.jsxs("defs",{children:[i.jsxs("linearGradient",{id:"colorTotal",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.8}),i.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]}),i.jsxs("linearGradient",{id:"colorNew",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.8}),i.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]})]}),i.jsx(De,{strokeDasharray:"3 3",stroke:a?"#374151":"#e5e7eb"}),i.jsx($e,{dataKey:"date",stroke:a?"#9ca3af":"#6b7280",style:{fontSize:"12px"}}),i.jsx(Be,{stroke:a?"#9ca3af":"#6b7280",style:{fontSize:"12px"}}),i.jsx(ye,{contentStyle:{backgroundColor:a?"#1f2937":"#ffffff",border:`1px solid ${a?"#374151":"#e5e7eb"}`,borderRadius:"8px",fontSize:"14px"},labelStyle:{color:a?"#f3f4f6":"#111827"}}),i.jsx(We,{type:"monotone",dataKey:"total",stroke:"#3b82f6",fillOpacity:1,fill:"url(#colorTotal)",name:"Total Customers"}),i.jsx(We,{type:"monotone",dataKey:"new",stroke:"#10b981",fillOpacity:1,fill:"url(#colorNew)",name:"New Customers"})]})})}function _n({data:e}){const{theme:t}=te(),a=t==="dark";return i.jsx(ge,{width:"100%",height:300,children:i.jsxs(Dn,{data:e,children:[i.jsx(De,{strokeDasharray:"3 3",stroke:a?"#374151":"#e5e7eb"}),i.jsx($e,{dataKey:"hour",stroke:a?"#9ca3af":"#6b7280",style:{fontSize:"12px"}}),i.jsx(Be,{stroke:a?"#9ca3af":"#6b7280",style:{fontSize:"12px"}}),i.jsx(ye,{contentStyle:{backgroundColor:a?"#1f2937":"#ffffff",border:`1px solid ${a?"#374151":"#e5e7eb"}`,borderRadius:"8px",fontSize:"14px"},labelStyle:{color:a?"#f3f4f6":"#111827"}}),i.jsx(be,{wrapperStyle:{fontSize:"14px"}}),i.jsx($t,{dataKey:"orders",fill:"#06b6d4",name:"Orders",radius:[8,8,0,0]})]})})}const Qe=["#06b6d4","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#14b8a6","#f97316"];function Ln({data:e}){const{theme:t}=te(),a=t==="dark";return i.jsx(ge,{width:"100%",height:300,children:i.jsxs(ba,{children:[i.jsx(ja,{data:e,cx:"50%",cy:"50%",labelLine:!1,label:({name:r,percent:n})=>`${r}: ${(n*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:e.map((r,n)=>i.jsx(ht,{fill:Qe[n%Qe.length]},`cell-${n}`))}),i.jsx(ye,{contentStyle:{backgroundColor:a?"#1f2937":"#ffffff",border:`1px solid ${a?"#374151":"#e5e7eb"}`,borderRadius:"8px",fontSize:"14px"}}),i.jsx(be,{wrapperStyle:{fontSize:"12px"},iconType:"circle"})]})})}function ai(){var f,p,g;const{theme:e}=te(),[t,a]=o.useState({totalCustomers:0,totalVendors:0,totalProducts:0,totalOrders:0,totalRevenue:0,pendingVendors:0,pendingKyc:0,fraudAlerts:0,totalVisits:0}),[r,n]=o.useState(!0),[s,d]=o.useState({revenueGrowth:[],customerGrowth:[],orderTrends:[],categoryDistribution:[]}),l=e==="dark",u=l?"bg-gray-800":"bg-white",c=l?"text-gray-100":"text-gray-900",m=l?"text-gray-400":"text-gray-600";return o.useEffect(()=>{const y=async()=>{var $;const[b,v,x,j,w,A,P,N]=await Promise.all([B.from("profiles").select("id",{count:"exact",head:!0}).eq("role","customer"),B.from("profiles").select("id",{count:"exact",head:!0}).eq("role","vendor"),B.from("products").select("id",{count:"exact",head:!0}),B.from("orders").select("total, vat_amount, commission_amount, shipping_fee"),B.from("vendor_profiles").select("id",{count:"exact",head:!0}).eq("is_approved",!1),B.from("vendor_profiles").select("id",{count:"exact",head:!0}).eq("kyc_status","pending"),B.from("fraud_detections").select("id",{count:"exact",head:!0}).eq("status","pending"),B.from("site_visits").select("id",{count:"exact",head:!0})]),I=(j.data||[]).reduce((k,E)=>k+Number(E.total),0),O=(j.data||[]).reduce((k,E)=>k+(Number(E.vat_amount)||0),0),S=(j.data||[]).reduce((k,E)=>k+(Number(E.commission_amount)||0),0),K=(j.data||[]).reduce((k,E)=>k+(Number(E.shipping_fee)||0),0);a({totalCustomers:b.count||0,totalVendors:v.count||0,totalProducts:x.count||0,totalOrders:(($=j.data)==null?void 0:$.length)||0,totalRevenue:I,pendingVendors:w.count||0,pendingKyc:A.count||0,fraudAlerts:P.count||0,totalVisits:N.count||0,vatCollected:O,handlingFees:S,logisticsEarnings:K}),n(!1)},h=async()=>{try{const[b,v,x,j]=await Promise.all([le.getRevenueGrowth(14),le.getCustomerGrowth(14),le.getOrderTrends(),le.getProductCategoryDistribution()]);d({revenueGrowth:b,customerGrowth:v,orderTrends:x,categoryDistribution:j})}catch(b){console.error("Error fetching analytics:",b)}};y(),h()},[]),r?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600"})}):i.jsxs(Tt,{children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:`text-2xl font-bold ${c}`,children:"Admin Dashboard"}),i.jsx("p",{className:`text-sm ${m}`,children:"Platform Overview & Management"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[i.jsxs("div",{className:`${u} rounded-lg shadow-sm p-6`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:i.jsx(Ve,{className:"h-6 w-6 text-blue-600"})}),i.jsx("span",{className:"text-sm text-gray-500",children:"Customers"})]}),i.jsx("div",{className:`text-3xl font-bold ${c}`,children:t.totalCustomers}),i.jsxs("p",{className:"text-sm text-blue-600 mt-2",children:[i.jsx(wa,{className:"inline h-4 w-4"})," Active users"]})]}),i.jsxs("div",{className:`${u} rounded-lg shadow-sm p-6`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:i.jsx(Ve,{className:"h-6 w-6 text-purple-600"})}),i.jsx("span",{className:`text-sm ${m}`,children:"Vendors"})]}),i.jsx("div",{className:`text-3xl font-bold ${c}`,children:t.totalVendors}),i.jsxs("p",{className:"text-sm text-yellow-600 mt-2",children:[t.pendingVendors," pending approval"]})]}),i.jsxs("div",{className:`${u} rounded-lg shadow-sm p-6`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:i.jsx(_t,{className:"h-6 w-6 text-green-600"})}),i.jsx("span",{className:`text-sm ${m}`,children:"Products"})]}),i.jsx("div",{className:`text-3xl font-bold ${c}`,children:t.totalProducts}),i.jsx("p",{className:`text-sm ${m} mt-2`,children:"Listed on platform"})]}),i.jsxs("div",{className:`${u} rounded-lg shadow-sm p-6`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"bg-cyan-100 p-3 rounded-lg",children:i.jsx(Lt,{className:"h-6 w-6 text-cyan-600"})}),i.jsx("span",{className:`text-sm ${m}`,children:"Orders"})]}),i.jsx("div",{className:`text-3xl font-bold ${c}`,children:t.totalOrders}),i.jsx("p",{className:"text-sm text-cyan-600 mt-2",children:"Total orders placed"})]}),i.jsxs("div",{className:`${u} rounded-lg shadow-sm p-6`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"bg-indigo-100 p-3 rounded-lg",children:i.jsx(Pa,{className:"h-6 w-6 text-indigo-600"})}),i.jsx("span",{className:`text-sm ${m}`,children:"Site Visits"})]}),i.jsx("div",{className:`text-3xl font-bold ${c}`,children:t.totalVisits.toLocaleString()}),i.jsx("p",{className:"text-sm text-indigo-600 mt-2",children:"Total page visits"})]})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-green-600 rounded-lg shadow-sm p-6 text-white",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx(Le,{className:"h-8 w-8"}),i.jsx("span",{className:"text-sm text-cyan-100",children:"Handling Fee (Admin)"})]}),i.jsxs("div",{className:"text-4xl font-bold mb-2",children:["$",((f=t.handlingFees)==null?void 0:f.toFixed(2))||"0.00"]}),i.jsx("p",{className:"text-cyan-100 font-medium",children:"Earned through platform commissions"})]}),i.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-lg shadow-sm p-6 text-white",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx(zt,{className:"h-8 w-8"}),i.jsx("span",{className:"text-sm text-blue-100",children:"VAT Collected"})]}),i.jsxs("div",{className:"text-4xl font-bold mb-2",children:["$",((p=t.vatCollected)==null?void 0:p.toFixed(2))||"0.00"]}),i.jsx("p",{className:"text-blue-100 font-medium",children:"Total value-added tax processed"})]}),i.jsxs("div",{className:"bg-gradient-to-br from-emerald-600 to-teal-700 rounded-lg shadow-sm p-6 text-white",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx(Aa,{className:"h-8 w-8"}),i.jsx("span",{className:"text-sm text-emerald-100",children:"Logistics Earnings"})]}),i.jsxs("div",{className:"text-4xl font-bold mb-2",children:["$",((g=t.logisticsEarnings)==null?void 0:g.toFixed(2))||"0.00"]}),i.jsx("p",{className:"text-emerald-100 font-medium",children:"Total shipping & delivery revenue"})]})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[i.jsxs("div",{className:`${u} rounded-lg shadow-sm p-6 border ${l?"border-gray-700":"border-gray-100"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx(Le,{className:`h-8 w-8 ${l?"text-cyan-400":"text-cyan-600"}`}),i.jsx("span",{className:`text-sm ${m}`,children:"Platform Revenue"})]}),i.jsxs("div",{className:`text-3xl font-bold ${c} mb-2`,children:["$",t.totalRevenue.toFixed(2)]}),i.jsx("p",{className:m,children:"Total transaction value"})]}),i.jsxs("div",{className:`${u} rounded-lg shadow-sm p-6`,children:[i.jsx("h3",{className:`text-lg font-semibold ${c} mb-4`,children:"Pending Actions"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:`flex items-center justify-between p-3 ${l?"bg-yellow-900/30":"bg-yellow-50"} rounded-lg`,children:[i.jsx("span",{className:`text-sm ${m}`,children:"Vendor Approvals"}),i.jsx("span",{className:"px-2 py-1 bg-yellow-200 text-yellow-800 rounded-full text-xs font-semibold",children:t.pendingVendors})]}),i.jsxs("div",{className:`flex items-center justify-between p-3 ${l?"bg-blue-900/30":"bg-blue-50"} rounded-lg`,children:[i.jsx("span",{className:`text-sm ${m}`,children:"KYC Verifications"}),i.jsx("span",{className:"px-2 py-1 bg-blue-200 text-blue-800 rounded-full text-xs font-semibold",children:t.pendingKyc})]}),i.jsxs("div",{className:`flex items-center justify-between p-3 ${l?"bg-red-900/30":"bg-red-50"} rounded-lg`,children:[i.jsx("span",{className:`text-sm ${m}`,children:"Fraud Alerts"}),i.jsx("span",{className:"px-2 py-1 bg-red-200 text-red-800 rounded-full text-xs font-semibold",children:t.fraudAlerts})]})]})]}),i.jsxs("div",{className:`${u} rounded-lg shadow-sm p-6`,children:[i.jsx("h3",{className:`text-base font-semibold ${c} mb-3`,children:"Quick Actions"}),i.jsxs("div",{className:"space-y-1.5",children:[i.jsx(H,{to:"/admin/vendors",className:`block w-full text-left px-3 py-2 ${l?"bg-green-900/20 text-green-400 hover:bg-green-900/40":"bg-green-50 text-green-700 hover:bg-green-100"} rounded-lg text-sm transition`,children:"Manage Vendors"}),i.jsx(H,{to:"/admin/kyc-verification",className:`block w-full text-left px-3 py-2 ${l?"bg-blue-900/20 text-blue-400 hover:bg-blue-900/40":"bg-blue-50 text-blue-700 hover:bg-blue-100"} rounded-lg text-sm transition`,children:"KYC Verification"}),i.jsx(H,{to:"/admin/roles-permissions",className:`block w-full text-left px-3 py-2 ${l?"bg-cyan-900/20 text-cyan-400 hover:bg-cyan-900/40":"bg-cyan-50 text-cyan-700 hover:bg-cyan-100"} rounded-lg text-sm transition`,children:"Roles & Permissions"}),i.jsx(H,{to:"/admin/orders",className:`block w-full text-left px-3 py-2 ${l?"bg-purple-900/20 text-purple-400 hover:bg-purple-900/40":"bg-purple-50 text-purple-700 hover:bg-purple-100"} rounded-lg text-sm transition`,children:"Orders Management"}),i.jsx(H,{to:"/admin/reports",className:`block w-full text-left px-3 py-2 ${l?"bg-indigo-900/20 text-indigo-400 hover:bg-indigo-900/40":"bg-indigo-50 text-indigo-700 hover:bg-indigo-100"} rounded-lg text-sm transition`,children:"Generate Reports"}),i.jsx(H,{to:"/admin/fraud-detection",className:`block w-full text-left px-3 py-2 ${l?"bg-red-900/20 text-red-400 hover:bg-red-900/40":"bg-red-50 text-red-700 hover:bg-red-100"} rounded-lg text-sm transition`,children:"Fraud Detection"})]})]})]}),i.jsxs("div",{className:`${u} rounded-lg shadow-sm p-6`,children:[i.jsx("h3",{className:`text-lg font-semibold ${c} mb-4`,children:"System Alerts"}),i.jsxs("div",{className:"space-y-3",children:[t.fraudAlerts>0&&i.jsxs("div",{className:`flex items-start space-x-3 p-4 ${l?"bg-red-900/30 border-red-700":"bg-red-50 border-red-200"} border rounded-lg`,children:[i.jsx(Ge,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-red-600",children:"Fraud Alerts Pending Review"}),i.jsxs("p",{className:`text-sm ${l?"text-red-400":"text-red-700"}`,children:[t.fraudAlerts," transaction(s) flagged for potential fraud. Review immediately."]})]})]}),t.pendingVendors>0&&i.jsxs("div",{className:`flex items-start space-x-3 p-4 ${l?"bg-yellow-900/30 border-yellow-700":"bg-yellow-50 border-yellow-200"} border rounded-lg`,children:[i.jsx(Ge,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-yellow-600",children:"Vendor Applications Pending"}),i.jsxs("p",{className:`text-sm ${l?"text-yellow-400":"text-yellow-700"}`,children:[t.pendingVendors," vendor application(s) waiting for approval."]})]})]}),t.fraudAlerts===0&&t.pendingVendors===0&&i.jsx("div",{className:`text-center py-8 ${m}`,children:"No alerts at this time. System running smoothly."})]})]}),i.jsxs("div",{className:"mt-8",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[i.jsx(Rt,{className:`h-6 w-6 ${c}`}),i.jsx("h2",{className:`text-xl font-bold ${c}`,children:"Analytics & Insights"})]}),i.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 mb-6",children:[i.jsxs("div",{className:`${u} rounded-lg shadow-sm p-6`,children:[i.jsx("h3",{className:`text-base font-semibold ${c} mb-4`,children:"Revenue & Orders (Last 14 Days)"}),i.jsx($n,{data:s.revenueGrowth})]}),i.jsxs("div",{className:`${u} rounded-lg shadow-sm p-6`,children:[i.jsx("h3",{className:`text-base font-semibold ${c} mb-4`,children:"Customer Growth (Last 14 Days)"}),i.jsx(Bn,{data:s.customerGrowth})]})]}),i.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:`${u} rounded-lg shadow-sm p-6`,children:[i.jsx("h3",{className:`text-base font-semibold ${c} mb-4`,children:"Today's Order Trends by Hour"}),i.jsx(_n,{data:s.orderTrends})]}),i.jsxs("div",{className:`${u} rounded-lg shadow-sm p-6`,children:[i.jsx("h3",{className:`text-base font-semibold ${c} mb-4`,children:"Product Distribution by Category"}),i.jsx(Ln,{data:s.categoryDistribution})]})]})]})]})]})}export{ai as AdminDashboard};
