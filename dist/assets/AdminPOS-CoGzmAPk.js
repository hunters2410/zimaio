import{r,s as u,j as e,S as f,n as y}from"./index-BktnpWS0.js";import{V as b}from"./VendorPOS-CvODHvda.js";import{S as j}from"./store-DDL7ZG_8.js";import{C as d}from"./chevron-right-peYPGYwP.js";import"./html2canvas.esm-CBrSDip1.js";import"./jspdf.es.min-Bw_9JQnp.js";import"./maximize-DSH1SQuK.js";import"./trash-2-BZYqHlTV.js";import"./minus-CUR8ke6T.js";import"./plus-DKkFzrwN.js";import"./x-Be8cuiWM.js";import"./banknote-WnSVUBld.js";import"./credit-card-BMxorgaG.js";import"./circle-check-big-DQYFJHkd.js";function L(){var i;const[a,x]=r.useState([]),[t,o]=r.useState(null),[m,h]=r.useState(!0),[n,p]=r.useState("");r.useEffect(()=>{g()},[]);const g=async()=>{try{const{data:s,error:c}=await u.from("vendor_profiles").select("id, shop_name, shop_logo_url, rating").order("shop_name");if(c)throw c;x(s||[])}catch(s){console.error("Error fetching vendors for POS:",s)}finally{h(!1)}},l=a.filter(s=>s.shop_name.toLowerCase().includes(n.toLowerCase()));return m?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-600"})}):t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 bg-gray-900 p-6 rounded-[32px] text-white shadow-xl",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("button",{onClick:()=>o(null),className:"w-10 h-10 bg-white/10 rounded-xl flex items-center justify-center hover:bg-white/20 transition-all",children:e.jsx(d,{className:"rotate-180"})}),e.jsx("div",{className:"h-10 w-px bg-white/10"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-black uppercase tracking-tight",children:"POS Terminal"}),e.jsxs("p",{className:"text-[10px] font-bold text-white/40",children:["Serving: ",(i=a.find(s=>s.id===t))==null?void 0:i.shop_name]})]})]}),e.jsx("div",{className:"bg-cyan-500/10 text-cyan-400 px-4 py-2 rounded-xl text-[9px] font-black uppercase tracking-[0.2em] border border-cyan-500/20",children:"Admin Override Active"})]}),e.jsx(b,{overrideVendorId:t})]}):e.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 uppercase tracking-tight",children:"Admin Terminal POS"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a vendor shop to initiate a point of sale session."})]})}),e.jsxs("div",{className:"relative group max-w-xl",children:[e.jsx(f,{className:"absolute left-5 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-cyan-500 transition-colors"}),e.jsx("input",{type:"text",placeholder:"Search vendor shops...",value:n,onChange:s=>p(s.target.value),className:"w-full bg-white border-gray-100 border focus:border-cyan-500 rounded-[24px] py-5 pl-14 pr-6 text-sm font-bold transition-all outline-none shadow-xl shadow-gray-100/50"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.map(s=>e.jsxs("button",{onClick:()=>o(s.id),className:"group bg-white rounded-[32px] p-6 border border-gray-100 hover:border-cyan-200 transition-all shadow-sm hover:shadow-xl hover:shadow-cyan-100/50 flex items-center gap-6 text-left active:scale-95",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-2xl overflow-hidden shadow-inner flex items-center justify-center border border-gray-100 group-hover:bg-cyan-50 transition-colors",children:s.shop_logo_url?e.jsx("img",{src:s.shop_logo_url,alt:s.shop_name,className:"w-full h-full object-cover"}):e.jsx(j,{className:"text-gray-300 group-hover:text-cyan-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-black text-gray-900 uppercase tracking-tight truncate",children:s.shop_name}),e.jsxs("p",{className:"text-[10px] font-bold text-gray-400 mt-0.5",children:["ID: ",s.id.slice(0,8).toUpperCase()]}),e.jsx("div",{className:"flex items-center gap-2 mt-2",children:e.jsxs("span",{className:"text-[9px] font-black uppercase text-cyan-600 bg-cyan-50 px-2 py-0.5 rounded-lg border border-cyan-100",children:["Rating: ",s.rating||"N/A"]})})]}),e.jsx(d,{className:"text-gray-300 group-hover:text-cyan-500 group-hover:translate-x-1 transition-all"})]},s.id)),l.length===0&&e.jsxs("div",{className:"col-span-full py-20 bg-gray-50 rounded-[40px] border-2 border-dashed border-gray-100 flex flex-col items-center justify-center text-center",children:[e.jsx(y,{className:"w-12 h-12 text-gray-300 mb-4"}),e.jsx("p",{className:"text-sm font-bold text-gray-400",children:"No active vendors found matching your search."})]})]})]})}export{L as AdminPOS};
