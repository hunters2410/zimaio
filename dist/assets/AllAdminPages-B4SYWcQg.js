import{n as H,y as ee,r as n,j as e,d as me,w as Q,X as U,s as _,D as Se,m as lt,v as nt,M as De,l as Ee,h as he,S as He,c as Le,p as We,P as it}from"./index-T9wcIP7k.js";import{A as I,P as qe,T as Je,C as dt,F as ne}from"./AdminLayout-CfMOCoMf.js";import{p as oe}from"./paymentService-BqYZQt0v.js";import{C as ct}from"./credit-card-DbXuWlg0.js";import{L as ve,M as ot,E as xt,A as Ze}from"./mouse-pointer-LCbXvNjb.js";import{P as re}from"./plus-B2DFtXvD.js";import{C as ie}from"./circle-check-big-BYTb-izI.js";import{S as J}from"./square-pen-ryj9D0Al.js";import{T as Z}from"./trash-2-RCUSiwrv.js";import{S as ae}from"./save-Bbxo6HuH.js";import{LogisticManagement as pa}from"./LogisticManagement-CdWN70l9.js";import{F as Ne}from"./funnel-DSb2S8Kf.js";import{C as Ae}from"./circle-x-COGKxlZd.js";import{F as se}from"./file-text-D26nKDmr.js";import{S as Pe}from"./shield-BnwYx_xt.js";import{D as Ce,E as mt}from"./jspdf.es.min-CpleFsXe.js";import{C as be}from"./chevron-right-DQGX3U4F.js";import{E as Xe,M as Fe,a as ut,T as Re}from"./triangle-alert-C6svA3ly.js";import{U as gt}from"./users-CYjWSRo-.js";import{Z as ue}from"./zap-_oUAMe_n.js";import{S as Ke,C as Qe}from"./settings-CBK8R_-F.js";import{C as xe}from"./check-CtKt80mY.js";import{P as we}from"./pen-CPGzRDpf.js";import{G as fe}from"./globe-BkMXYPOg.js";import{C as de}from"./clock-Hzc8pPp_.js";import{E as le}from"./eye-ByJpIZwj.js";import{C as Ye}from"./calendar-DXYSGu7Y.js";import{U as et}from"./upload-DtkpSNDN.js";import{default as ba}from"./VendorPackages-D2q7Mar4.js";import{S as pt}from"./share-2-BEHdt95O.js";import{L as ht}from"./lock-DR4ROgcT.js";import{A as pe}from"./arrow-up-right-D0Qk9enJ.js";import{S as bt}from"./star-Fc9uE4lG.js";import{S as Ie}from"./shield-alert-B_XNUTdg.js";import{U as ft}from"./user-x-DlaUuw34.js";import{T as _e}from"./truck-CI4bnO7s.js";import{T as tt}from"./trending-up-D57PSrGr.js";import{W as yt}from"./wallet-C7uK7jSh.js";import{B as jt}from"./bell-B6qorZ8L.js";import"./maximize-CxfeF--5.js";import"./building-2-CaxZvuNK.js";import"./circle-check-B7qSo7SU.js";import"./ellipsis-vertical-GFqU5AFZ.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Nt=H("activity",vt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],kt=H("ban",wt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],st=H("book",_t);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],St=H("chart-line",$t);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],Ve=H("chart-no-axes-column-increasing",Ct);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Oe=H("chart-pie",Dt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ue=H("circle-question-mark",At);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],Mt=H("code",Pt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Et=H("database",Tt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],qt=H("flag",Lt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],ke=H("grid-3x3",Ft);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],at=H("key",Rt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=[["path",{d:"M8 18L12 22L16 18",key:"cskvfv"}],["path",{d:"M12 2V22",key:"r89rzk"}]],Vt=H("move-down",It);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=[["path",{d:"M8 6L12 2L16 6",key:"1yvkyx"}],["path",{d:"M12 2V22",key:"r89rzk"}]],Ut=H("move-up",Ot);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Gt=H("panels-top-left",Bt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ye=H("power-off",zt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],je=H("power",Ht);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],Jt=H("table",Wt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],Be=H("ticket",Zt);function Vs(){var Y,q,z,G,X,C,O,K,te,ge,Me,Te;const{theme:M}=ee(),m=M==="dark",[f,T]=n.useState([]),[D,P]=n.useState(!0),[g,N]=n.useState(null),[p,x]=n.useState(!1),[i,u]=n.useState(null),[y,w]=n.useState([]),[v,$]=n.useState("list"),[l,s]=n.useState(""),t=m?"bg-gray-800":"bg-white",a=m?"text-gray-100":"text-gray-900",c=m?"text-gray-400":"text-gray-600",j=m?"border-gray-700":"border-gray-200";n.useEffect(()=>{S()},[]);const S=async()=>{P(!0);try{const k=await oe.getAllGateways();T(k)}catch(k){u({type:"error",text:k.message})}finally{P(!1)}},o=async k=>{if(N({...k,configuration:k.configuration||{}}),k.gateway_type==="manual")try{const B=await oe.getInstructions(k.id);w(B)}catch(B){u({type:"error",text:B.message})}},h=async k=>{if(k.preventDefault(),!!g){P(!0);try{await oe.updateGateway(g.id,{display_name:g.display_name,description:g.description,is_active:g.is_active,configuration:g.configuration,instructions:g.instructions,logo_url:g.logo_url}),g.gateway_type==="manual"&&y.length>0&&await oe.saveInstructions(g.id,y),u({type:"success",text:"Payment gateway updated successfully"}),N(null),w([]),S()}catch(B){u({type:"error",text:B.message})}finally{P(!1)}}},r=async k=>{const B=[...f];T(f.map(W=>W.id===k.id?{...W,is_active:!W.is_active}:W));try{await oe.updateGateway(k.id,{is_active:!k.is_active}),u({type:"success",text:`${k.display_name} ${k.is_active?"disabled":"enabled"} successfully`}),S()}catch(W){T(B),u({type:"error",text:W.message})}},d=async k=>{if(confirm(`Are you sure you want to delete ${k.display_name}?`))try{await oe.deleteGateway(k.id),u({type:"success",text:"Payment gateway deleted successfully"}),S()}catch(B){u({type:"error",text:B.message})}},F=async k=>{k.preventDefault();const B=new FormData(k.target);try{await oe.createManualGateway({gateway_name:B.get("gateway_name"),gateway_type:"manual",display_name:B.get("display_name"),description:B.get("description"),is_active:!1,is_default:!1,configuration:{},supported_currencies:["USD","ZWL"],instructions:B.get("instructions"),logo_url:B.get("logo_url"),sort_order:f.length+1}),u({type:"success",text:"Manual payment gateway added successfully"}),x(!1),S()}catch(W){u({type:"error",text:W.message})}},E=(k,B)=>{g&&N({...g,configuration:{...g.configuration,[k]:B}})},R=()=>{w([...y,{id:`temp-${Date.now()}`,gateway_id:g.id,step_number:y.length+1,title:"",description:"",created_at:new Date().toISOString()}])},b=(k,B,W)=>{const ce=[...y];ce[k]={...ce[k],[B]:W},w(ce)},A=k=>{const B=y.filter((W,ce)=>ce!==k);B.forEach((W,ce)=>{W.step_number=ce+1}),w(B)},L=k=>{switch(k){case"paynow":return"ðŸ’³";case"paypal":return"ðŸ…¿ï¸";case"stripe":return"ðŸ’ ";case"cash":return"ðŸ’µ";default:return"ðŸ¦"}},V=f.filter(k=>{var B;return k.display_name.toLowerCase().includes(l.toLowerCase())||k.gateway_type.toLowerCase().includes(l.toLowerCase())||((B=k.description)==null?void 0:B.toLowerCase().includes(l.toLowerCase()))});return D&&f.length===0?e.jsx(I,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600"})})}):e.jsxs(I,{children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"h-6 w-6 text-cyan-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${a}`,children:"Payment Gateways"}),e.jsx("p",{className:`text-sm ${c}`,children:"Configure payment methods for your store"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:`absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 ${c}`}),e.jsx("input",{type:"text",placeholder:"Search gateways...",value:l,onChange:k=>s(k.target.value),className:`pl-9 pr-4 py-1.5 text-sm border ${j} rounded-lg focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-800 text-gray-100":"bg-white"} w-full md:w-64`})]}),e.jsxs("div",{className:`flex items-center border ${j} rounded-lg p-1`,children:[e.jsx("button",{onClick:()=>$("grid"),className:`p-1.5 rounded transition ${v==="grid"?"bg-cyan-600 text-white":`${c} hover:bg-gray-100 dark:hover:bg-gray-700`}`,title:"Grid view",children:e.jsx(ke,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>$("list"),className:`p-1.5 rounded transition ${v==="list"?"bg-cyan-600 text-white":`${c} hover:bg-gray-100 dark:hover:bg-gray-700`}`,title:"List view",children:e.jsx(ve,{className:"h-4 w-4"})})]}),e.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-1.5 px-3 py-1.5 text-sm bg-gradient-to-r from-cyan-600 to-green-600 text-white rounded-lg hover:from-cyan-700 hover:to-green-700 transition",children:[e.jsx(re,{className:"h-4 w-4"}),"Add Gateway"]})]})]})}),i&&e.jsxs("div",{className:`mb-4 p-3 rounded-lg flex items-start space-x-2 text-sm ${i.type==="success"?"bg-green-50 border border-green-200 text-green-800 dark:bg-green-900/20 dark:border-green-800 dark:text-green-400":"bg-red-50 border border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-800 dark:text-red-400"}`,children:[i.type==="success"?e.jsx(ie,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}):e.jsx(Q,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:i.text}),e.jsx("button",{onClick:()=>u(null),className:"ml-auto",children:e.jsx(U,{className:"h-3.5 w-3.5"})})]}),v==="grid"?e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:V.map(k=>e.jsxs("div",{className:`${t} rounded-2xl shadow-sm border ${j} p-6 transition-all hover:shadow-xl hover:-translate-y-1 group duration-300 relative overflow-hidden`,children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx("span",{className:"text-6xl grayscale",children:L(k.gateway_type)})}),e.jsx("div",{className:"flex items-start justify-between mb-4 relative z-10",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-4xl shadow-sm bg-gray-50 dark:bg-gray-700/50 rounded-xl p-2",children:L(k.gateway_type)}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-bold ${a} tracking-tight`,children:k.display_name}),k.is_active?e.jsxs("span",{className:"inline-flex items-center gap-1.5 mt-1 px-2.5 py-0.5 text-[10px] font-bold uppercase tracking-wider rounded-full bg-emerald-100/50 text-emerald-700 dark:bg-emerald-500/10 dark:text-emerald-400",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),"Active"]}):e.jsx("span",{className:"inline-flex items-center mt-1 px-2.5 py-0.5 text-[10px] font-bold uppercase tracking-wider rounded-full bg-gray-100 text-gray-500 dark:bg-gray-700 dark:text-gray-400",children:"Inactive"})]})]})}),e.jsx("p",{className:`text-xs ${c} mb-6 line-clamp-2 min-h-[2.5em] relative z-10 font-medium leading-relaxed`,children:k.description}),e.jsxs("div",{className:"flex items-center gap-3 mt-auto relative z-10",children:[e.jsxs("button",{onClick:()=>o(k),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 text-xs font-bold uppercase tracking-wider bg-gray-50 text-gray-700 rounded-xl hover:bg-gray-100 transition dark:bg-gray-700/50 dark:text-gray-300 dark:hover:bg-gray-700",children:[e.jsx(J,{className:"h-3.5 w-3.5"}),"Configure"]}),e.jsx("button",{onClick:()=>r(k),className:`flex items-center justify-center p-2.5 rounded-xl transition ${k.is_active?"bg-emerald-50 text-emerald-600 hover:bg-red-50 hover:text-red-600 dark:bg-emerald-900/20 dark:text-emerald-400":"bg-gray-50 text-gray-400 hover:bg-emerald-50 hover:text-emerald-600 dark:bg-gray-800 dark:text-gray-500"}`,title:k.is_active?"Disable Gateway":"Enable Gateway",children:k.is_active?e.jsx(ye,{className:"h-4 w-4"}):e.jsx(je,{className:"h-4 w-4"})}),k.gateway_type==="manual"&&e.jsx("button",{onClick:()=>d(k),className:"p-2.5 text-gray-400 hover:bg-red-50 hover:text-red-600 rounded-xl transition dark:hover:bg-red-900/30",title:"Delete",children:e.jsx(Z,{className:"h-4 w-4"})})]})]},k.id))}):e.jsx("div",{className:"flex flex-col gap-4",children:V.map(k=>e.jsxs("div",{className:`${t} rounded-xl shadow-sm border border-transparent hover:border-gray-200 dark:hover:border-gray-700 p-5 transition-all hover:shadow-lg group flex items-center gap-6 relative overflow-hidden`,children:[e.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1 ${k.is_active?"bg-emerald-500":"bg-gray-200 dark:bg-gray-700"}`}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-2xl ${k.is_active?"bg-emerald-50 text-emerald-600 dark:bg-emerald-900/20 dark:text-emerald-400":"bg-gray-100 text-gray-400 dark:bg-gray-800 dark:text-gray-500"}`,children:L(k.gateway_type)})}),e.jsxs("div",{className:"flex-1 min-w-0 grid grid-cols-1 md:grid-cols-12 gap-6 items-center",children:[e.jsxs("div",{className:"md:col-span-4",children:[e.jsxs("h3",{className:`text-base font-bold ${a} flex items-center gap-3`,children:[k.display_name,k.is_default&&e.jsx("span",{className:"text-[9px] bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full uppercase tracking-wider font-extrabold",children:"Default"})]}),e.jsx("p",{className:`text-xs ${c} mt-1 truncate`,children:k.description})]}),e.jsx("div",{className:"md:col-span-4 hidden md:flex flex-wrap gap-1.5",children:k.supported_currencies.map(B=>e.jsx("span",{className:"px-2 py-0.5 bg-blue-50 text-blue-600 border border-blue-100 rounded text-[10px] font-bold dark:bg-blue-900/20 dark:text-blue-400 dark:border-blue-800",children:B},B))}),e.jsx("div",{className:"md:col-span-2 flex items-center",children:k.is_active?e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 text-[10px] font-bold uppercase tracking-wider rounded-full bg-emerald-50 text-emerald-700 dark:bg-emerald-500/10 dark:text-emerald-400 ring-1 ring-emerald-500/20",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),"Active"]}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 text-[10px] font-bold uppercase tracking-wider rounded-full bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400 ring-1 ring-gray-200 dark:ring-gray-700",children:"Inactive"})})]}),e.jsxs("div",{className:"flex items-center gap-2 opacity-100 md:opacity-0 group-hover:opacity-100 transition-opacity ml-auto",children:[e.jsx("button",{onClick:()=>o(k),className:"p-2 text-gray-500 hover:text-cyan-600 hover:bg-cyan-50 rounded-lg transition dark:text-gray-400 dark:hover:bg-cyan-900/20",title:"Configure",children:e.jsx(J,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>r(k),className:`p-2 rounded-lg transition ${k.is_active?"text-emerald-600 hover:bg-red-50 hover:text-red-600 dark:text-emerald-400":"text-gray-400 hover:text-emerald-600 hover:bg-emerald-50 dark:text-gray-500"}`,title:k.is_active?"Disable":"Enable",children:k.is_active?e.jsx(ye,{className:"h-4 w-4"}):e.jsx(je,{className:"h-4 w-4"})}),k.gateway_type==="manual"&&e.jsx("button",{onClick:()=>d(k),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition dark:hover:bg-red-900/20",title:"Delete",children:e.jsx(Z,{className:"h-4 w-4"})})]})]},k.id))}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:`${t} rounded-lg shadow-xl max-w-3xl w-full my-8`,children:[e.jsxs("div",{className:`p-4 border-b ${j} flex items-center justify-between`,children:[e.jsxs("h2",{className:`text-lg font-bold ${a} flex items-center gap-2`,children:[e.jsx(J,{className:"h-5 w-5 text-cyan-600"}),"Configure ",g.display_name]}),e.jsx("button",{onClick:()=>{N(null),w([])},className:`${c} hover:text-gray-600 transition`,children:e.jsx(U,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:h,className:"p-4 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${a} mb-1.5`,children:"Display Name *"}),e.jsx("input",{type:"text",required:!0,value:g.display_name,onChange:k=>N({...g,display_name:k.target.value}),className:`w-full px-3 py-1.5 text-sm border ${j} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${a} mb-1.5`,children:"Description"}),e.jsx("textarea",{value:g.description||"",onChange:k=>N({...g,description:k.target.value}),rows:2,className:`w-full px-3 py-1.5 text-sm border ${j} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`})]}),g.gateway_type==="paynow"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:`text-sm font-semibold ${a}`,children:"PayNow Configuration"}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${a} mb-1.5`,children:"Integration ID *"}),e.jsx("input",{type:"text",required:!0,value:((Y=g.configuration)==null?void 0:Y.integration_id)||"",onChange:k=>E("integration_id",k.target.value),className:`w-full px-3 py-1.5 text-sm border ${j} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"Enter your PayNow Integration ID"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${a} mb-1.5`,children:"Integration Key *"}),e.jsx("input",{type:"password",required:!0,value:((q=g.configuration)==null?void 0:q.integration_key)||"",onChange:k=>E("integration_key",k.target.value),className:`w-full px-3 py-1.5 text-sm border ${j} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"Enter your PayNow Integration Key"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${a} mb-1.5`,children:"Return URL *"}),e.jsx("input",{type:"url",required:!0,value:((z=g.configuration)==null?void 0:z.return_url)||"",onChange:k=>E("return_url",k.target.value),className:`w-full px-3 py-1.5 text-sm border ${j} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"https://yourdomain.com/payment/return"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${a} mb-1.5`,children:"Result URL *"}),e.jsx("input",{type:"url",required:!0,value:((G=g.configuration)==null?void 0:G.result_url)||"",onChange:k=>E("result_url",k.target.value),className:`w-full px-3 py-1.5 text-sm border ${j} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"https://yourdomain.com/payment/result"})]})]}),g.gateway_type==="paypal"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:`text-sm font-semibold ${a}`,children:"PayPal Configuration"}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${a} mb-1.5`,children:"Client ID *"}),e.jsx("input",{type:"text",required:!0,value:((X=g.configuration)==null?void 0:X.client_id)||"",onChange:k=>E("client_id",k.target.value),className:`w-full px-3 py-1.5 text-sm border ${j} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"Enter your PayPal Client ID"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${a} mb-1.5`,children:"Client Secret *"}),e.jsx("input",{type:"password",required:!0,value:((C=g.configuration)==null?void 0:C.client_secret)||"",onChange:k=>E("client_secret",k.target.value),className:`w-full px-3 py-1.5 text-sm border ${j} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"Enter your PayPal Client Secret"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${a} mb-1.5`,children:"Mode *"}),e.jsxs("select",{value:((O=g.configuration)==null?void 0:O.mode)||"sandbox",onChange:k=>E("mode",k.target.value),className:`w-full px-3 py-1.5 text-sm border ${j} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`,children:[e.jsx("option",{value:"sandbox",children:"Sandbox (Testing)"}),e.jsx("option",{value:"live",children:"Live (Production)"})]})]})]}),g.gateway_type==="stripe"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:`text-sm font-semibold ${a}`,children:"Stripe Configuration"}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${a} mb-1.5`,children:"Publishable Key *"}),e.jsx("input",{type:"text",required:!0,value:((K=g.configuration)==null?void 0:K.publishable_key)||"",onChange:k=>E("publishable_key",k.target.value),className:`w-full px-3 py-1.5 text-sm border ${j} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"pk_test_..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${a} mb-1.5`,children:"Secret Key *"}),e.jsx("input",{type:"password",required:!0,value:((te=g.configuration)==null?void 0:te.secret_key)||"",onChange:k=>E("secret_key",k.target.value),className:`w-full px-3 py-1.5 text-sm border ${j} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"sk_test_..."})]})]}),g.gateway_type==="iveri"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:`text-sm font-semibold ${a}`,children:"iVeri Configuration"}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${a} mb-1.5`,children:"Application ID *"}),e.jsx("input",{type:"text",required:!0,value:((ge=g.configuration)==null?void 0:ge.application_id)||"",onChange:k=>E("application_id",k.target.value),className:`w-full px-3 py-1.5 text-sm border ${j} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"{3b80...}"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${a} mb-1.5`,children:"Certificate ID *"}),e.jsx("input",{type:"text",required:!0,value:((Me=g.configuration)==null?void 0:Me.certificate_id)||"",onChange:k=>E("certificate_id",k.target.value),className:`w-full px-3 py-1.5 text-sm border ${j} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"{4c96...}"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${a} mb-1.5`,children:"Mode *"}),e.jsxs("select",{value:((Te=g.configuration)==null?void 0:Te.mode)||"Live",onChange:k=>E("mode",k.target.value),className:`w-full px-3 py-1.5 text-sm border ${j} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`,children:[e.jsx("option",{value:"Live",children:"Live (Production)"}),e.jsx("option",{value:"Test",children:"Test (Sandbox)"})]})]})]}),g.gateway_type==="manual"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:`text-sm font-semibold ${a} flex items-center justify-between`,children:["Payment Instructions",e.jsxs("button",{type:"button",onClick:R,className:"flex items-center gap-1 px-2 py-1 text-xs bg-cyan-600 text-white rounded hover:bg-cyan-700 transition",children:[e.jsx(re,{className:"h-3.5 w-3.5"}),"Add Step"]})]}),y.map((k,B)=>e.jsxs("div",{className:`p-3 border ${j} rounded`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:`text-xs font-medium ${a}`,children:["Step ",k.step_number]}),e.jsx("button",{type:"button",onClick:()=>A(B),className:"text-red-600 hover:text-red-700",children:e.jsx(Z,{className:"h-3.5 w-3.5"})})]}),e.jsx("input",{type:"text",value:k.title,onChange:W=>b(B,"title",W.target.value),placeholder:"Step title",className:`w-full px-2.5 py-1.5 mb-2 text-sm border ${j} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`}),e.jsx("textarea",{value:k.description,onChange:W=>b(B,"description",W.target.value),placeholder:"Step description",rows:2,className:`w-full px-2.5 py-1.5 text-sm border ${j} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`})]},k.id))]}),e.jsx("div",{className:"pt-2",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",className:"sr-only",checked:g.is_active,onChange:k=>N({...g,is_active:k.target.checked})}),e.jsx("div",{className:`block w-10 h-6 rounded-full transition-colors ${g.is_active?"bg-emerald-500":"bg-gray-400"}`}),e.jsx("div",{className:`absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${g.is_active?"translate-x-4":""}`})]}),e.jsxs("div",{children:[e.jsx("span",{className:`block text-xs font-bold ${a} group-hover:text-cyan-600 transition-colors`,children:g.is_active?"Gateway is Active":"Gateway is Inactive"}),e.jsx("span",{className:`text-[10px] ${c}`,children:"Toggle to enable or disable this payment method for checkouts"})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${a} mb-1.5`,children:"General Instructions"}),e.jsx("textarea",{value:g.instructions||"",onChange:k=>N({...g,instructions:k.target.value}),rows:3,className:`w-full px-3 py-1.5 text-sm border ${j} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"Additional instructions for users"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:()=>{N(null),w([])},className:`px-4 py-1.5 text-sm border ${j} rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition`,children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:D,className:"flex items-center gap-1.5 px-4 py-1.5 text-sm bg-gradient-to-r from-cyan-600 to-green-600 text-white rounded hover:from-cyan-700 hover:to-green-700 transition disabled:opacity-50",children:[e.jsx(ae,{className:"h-4 w-4"}),D?"Saving...":"Save"]})]})]})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${t} rounded-lg shadow-xl max-w-xl w-full`,children:[e.jsxs("div",{className:`p-4 border-b ${j} flex items-center justify-between`,children:[e.jsx("h2",{className:`text-lg font-bold ${a}`,children:"Add Manual Payment Gateway"}),e.jsx("button",{onClick:()=>x(!1),className:`${c} hover:text-gray-600 transition`,children:e.jsx(U,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:F,className:"p-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${a} mb-1.5`,children:"Gateway Name * (lowercase, no spaces)"}),e.jsx("input",{type:"text",name:"gateway_name",required:!0,pattern:"[a-z_]+",className:`w-full px-3 py-1.5 text-sm border ${j} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"bank_transfer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${a} mb-1.5`,children:"Display Name *"}),e.jsx("input",{type:"text",name:"display_name",required:!0,className:`w-full px-3 py-1.5 text-sm border ${j} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"Bank Transfer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${a} mb-1.5`,children:"Description"}),e.jsx("textarea",{name:"description",rows:2,className:`w-full px-3 py-1.5 text-sm border ${j} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"Pay via direct bank transfer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${a} mb-1.5`,children:"Instructions *"}),e.jsx("textarea",{name:"instructions",required:!0,rows:4,className:`w-full px-3 py-1.5 text-sm border ${j} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:`To pay via bank transfer:
1. Transfer to: Account Name
2. Bank: Bank Name
3. Account Number: 1234567890
4. Reference: Your Order Number`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${a} mb-1.5`,children:"Logo URL (optional)"}),e.jsx("input",{type:"url",name:"logo_url",className:`w-full px-3 py-1.5 text-sm border ${j} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"https://example.com/logo.png"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:`px-4 py-1.5 text-sm border ${j} rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition`,children:"Cancel"}),e.jsxs("button",{type:"submit",className:"flex items-center gap-1.5 px-4 py-1.5 text-sm bg-gradient-to-r from-cyan-600 to-green-600 text-white rounded hover:from-cyan-700 hover:to-green-700 transition",children:[e.jsx(re,{className:"h-4 w-4"}),"Add Gateway"]})]})]})]})})]})}function Os(){const{theme:M}=ee(),m=M==="dark",[f,T]=n.useState(null),[D,P]=n.useState([]),[g,N]=n.useState(!0),[p,x]=n.useState(!1),[i,u]=n.useState(null),y=m?"bg-gray-800":"bg-white",w=m?"text-gray-100":"text-gray-900",v=m?"text-gray-400":"text-gray-600",$=m?"border-gray-700":"border-gray-200";n.useEffect(()=>{l()},[]);const l=async()=>{try{const{data:a,error:c}=await _.from("vat_settings").select("*").single();if(c)throw c;T(a);const{data:j,error:S}=await _.from("product_vat_overrides").select(`
          *,
          product:products(
            name,
            vendor:vendor_profiles(shop_name)
          )
        `).order("created_at",{ascending:!1}).limit(50);if(S)throw S;P(j||[])}catch(a){u({type:"error",text:a.message})}finally{N(!1)}},s=async()=>{if(f){x(!0);try{const{error:a}=await _.from("vat_settings").update({is_enabled:f.is_enabled,default_rate:f.default_rate,applies_to_products:f.applies_to_products,applies_to_shipping:f.applies_to_shipping,commission_enabled:f.commission_enabled,commission_rate:f.commission_rate,updated_at:new Date().toISOString()}).eq("id",f.id);if(a)throw a;u({type:"success",text:"VAT settings saved successfully"})}catch(a){u({type:"error",text:a.message})}finally{x(!1)}}},t=async a=>{if(confirm("Remove this VAT override?"))try{const{error:c}=await _.from("product_vat_overrides").delete().eq("id",a);if(c)throw c;u({type:"success",text:"VAT override removed"}),l()}catch(c){u({type:"error",text:c.message})}};return g?e.jsx(I,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600"})})}):e.jsxs(I,{children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"h-6 w-6 text-cyan-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${w}`,children:"VAT Management"}),e.jsx("p",{className:`text-sm ${v}`,children:"Configure value-added tax settings"})]})]})}),i&&e.jsxs("div",{className:`mb-4 p-3 rounded-lg flex items-start space-x-2 text-sm ${i.type==="success"?"bg-green-50 border border-green-200 text-green-800 dark:bg-green-900/20 dark:border-green-800 dark:text-green-400":"bg-red-50 border border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-800 dark:text-red-400"}`,children:[i.type==="success"?e.jsx(ie,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}):e.jsx(Q,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:i.text}),e.jsx("button",{onClick:()=>u(null),className:"ml-auto",children:e.jsx(U,{className:"h-3.5 w-3.5"})})]}),f&&e.jsxs("div",{className:`${y} rounded-lg shadow-sm border ${$} p-4 mb-6`,children:[e.jsx("h2",{className:`text-base font-semibold ${w} mb-4`,children:"Global VAT Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${w}`,children:"Enable VAT"}),e.jsx("p",{className:`text-xs ${v}`,children:"Apply VAT to transactions"})]}),e.jsx("button",{onClick:()=>T({...f,is_enabled:!f.is_enabled}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition ${f.is_enabled?"bg-cyan-600":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${f.is_enabled?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${w} mb-1.5`,children:"Default VAT Rate (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",value:f.default_rate,onChange:a=>T({...f,default_rate:parseFloat(a.target.value)||0}),className:`w-full px-3 py-1.5 text-sm border ${$} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${w}`,children:"Apply to Products"}),e.jsx("p",{className:`text-xs ${v}`,children:"Include VAT in product prices"})]}),e.jsx("button",{onClick:()=>T({...f,applies_to_products:!f.applies_to_products}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition ${f.applies_to_products?"bg-cyan-600":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${f.applies_to_products?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${w}`,children:"Apply to Shipping"}),e.jsx("p",{className:`text-xs ${v}`,children:"Include VAT in shipping costs"})]}),e.jsx("button",{onClick:()=>T({...f,applies_to_shipping:!f.applies_to_shipping}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition ${f.applies_to_shipping?"bg-cyan-600":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${f.applies_to_shipping?"translate-x-6":"translate-x-1"}`})})]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs("button",{onClick:s,disabled:p,className:"flex items-center gap-1.5 px-4 py-1.5 text-sm bg-gradient-to-r from-cyan-600 to-green-600 text-white rounded hover:from-cyan-700 hover:to-green-700 transition disabled:opacity-50",children:[e.jsx(ae,{className:"h-4 w-4"}),p?"Saving...":"Save Settings"]})})]})]}),f&&e.jsxs("div",{className:`${y} rounded-lg shadow-sm border ${$} p-4 mb-6`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(qe,{className:"h-5 w-5 text-emerald-600"}),e.jsx("h2",{className:`text-base font-semibold ${w}`,children:"Handling Fee Settings"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${w}`,children:"Enable Commission"}),e.jsx("p",{className:`text-xs ${v}`,children:"Add admin commission on top of vendor products"})]}),e.jsx("button",{onClick:()=>T({...f,commission_enabled:!f.commission_enabled}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition ${f.commission_enabled?"bg-emerald-600":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${f.commission_enabled?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${w} mb-1.5`,children:"Default Commission Rate (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",value:f.commission_rate,onChange:a=>T({...f,commission_rate:parseFloat(a.target.value)||0}),className:`w-full px-3 py-1.5 text-sm border ${$} rounded focus:outline-none focus:ring-1 focus:ring-emerald-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`})]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs("button",{onClick:s,disabled:p,className:"flex items-center gap-1.5 px-4 py-1.5 text-sm bg-emerald-600 text-white rounded hover:bg-emerald-700 transition disabled:opacity-50",children:[e.jsx(ae,{className:"h-4 w-4"}),p?"Saving...":"Save Handling Fee Settings"]})})]})]}),e.jsxs("div",{className:`${y} rounded-lg shadow-sm border ${$} p-4`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:`text-base font-semibold ${w}`,children:"Product VAT Overrides"}),e.jsxs("span",{className:`text-xs ${v}`,children:[D.length," overrides"]})]}),D.length===0?e.jsx("p",{className:`text-sm ${v} text-center py-8`,children:"No product-specific VAT overrides configured"}):e.jsx("div",{className:"space-y-2",children:D.map(a=>{var c,j,S;return e.jsxs("div",{className:`flex items-center justify-between p-3 border ${$} rounded hover:bg-gray-50 dark:hover:bg-gray-700/50 transition`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm font-medium ${w}`,children:((c=a.product)==null?void 0:c.name)||"Unknown Product"}),e.jsx("p",{className:`text-xs ${v}`,children:((S=(j=a.product)==null?void 0:j.vendor)==null?void 0:S.shop_name)||"Unknown Vendor"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[a.vat_exempt?e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",children:"VAT Exempt"}):e.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",children:[a.vat_rate,"%"]}),e.jsx("button",{onClick:()=>t(a.id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition dark:hover:bg-red-900/30",title:"Remove override",children:e.jsx(Z,{className:"h-3.5 w-3.5"})})]})]},a.id)})})]})]})}function Us(){var h;const{theme:M}=ee(),m=M==="dark",[f,T]=n.useState([]),[D,P]=n.useState([]),[g,N]=n.useState(!0),[p,x]=n.useState("all"),[i,u]=n.useState(null),[y,w]=n.useState(""),[v,$]=n.useState(null),l=m?"bg-gray-800":"bg-white",s=m?"text-gray-100":"text-gray-900",t=m?"text-gray-400":"text-gray-600",a=m?"border-gray-700":"border-gray-200";n.useEffect(()=>{c()},[]),n.useEffect(()=>{P(p==="all"?f:f.filter(r=>r.status===p))},[p,f]);const c=async()=>{try{const{data:r,error:d}=await _.from("order_refunds").select(`
          *,
          orders (
            order_number
          ),
          profiles:customer_id (
            full_name,
            email
          )
        `).order("created_at",{ascending:!1});if(d)throw d;T(r||[])}catch(r){$({type:"error",text:r.message})}finally{N(!1)}},j=async(r,d)=>{try{const{error:F}=await _.from("order_refunds").update({status:d,admin_notes:y||null}).eq("id",r);if(F)throw F;$({type:"success",text:`Refund ${d} successfully`}),u(null),w(""),c()}catch(F){$({type:"error",text:F.message})}},S=r=>{const d={pending:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",approved:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",rejected:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",processed:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"};return e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${d[r]||d.pending}`,children:r.charAt(0).toUpperCase()+r.slice(1)})},o={total:f.length,pending:f.filter(r=>r.status==="pending").length,approved:f.filter(r=>r.status==="approved").length,processed:f.filter(r=>r.status==="processed").length};return g?e.jsx(I,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600"})})}):e.jsxs(I,{children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-6 w-6 text-cyan-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${s}`,children:"Refund Management"}),e.jsx("p",{className:`text-sm ${t}`,children:"Process and manage customer refunds"})]})]})})}),v&&e.jsxs("div",{className:`mb-4 p-3 rounded-lg flex items-start space-x-2 text-sm ${v.type==="success"?"bg-green-50 border border-green-200 text-green-800 dark:bg-green-900/20 dark:border-green-800 dark:text-green-400":"bg-red-50 border border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-800 dark:text-red-400"}`,children:[v.type==="success"?e.jsx(ie,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}):e.jsx(Q,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:v.text}),e.jsx("button",{onClick:()=>$(null),className:"ml-auto",children:e.jsx(U,{className:"h-3.5 w-3.5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:`${l} rounded-lg shadow-sm border ${a} p-4`,children:[e.jsx("p",{className:`text-xs ${t} mb-1`,children:"Total Refunds"}),e.jsx("p",{className:`text-2xl font-bold ${s}`,children:o.total})]}),e.jsxs("div",{className:`${l} rounded-lg shadow-sm border ${a} p-4`,children:[e.jsx("p",{className:`text-xs ${t} mb-1`,children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:o.pending})]}),e.jsxs("div",{className:`${l} rounded-lg shadow-sm border ${a} p-4`,children:[e.jsx("p",{className:`text-xs ${t} mb-1`,children:"Approved"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:o.approved})]}),e.jsxs("div",{className:`${l} rounded-lg shadow-sm border ${a} p-4`,children:[e.jsx("p",{className:`text-xs ${t} mb-1`,children:"Processed"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:o.processed})]})]}),e.jsx("div",{className:`${l} rounded-lg shadow-sm border ${a} p-4 mb-4`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4 text-cyan-600"}),e.jsx("span",{className:`text-sm font-medium ${s}`,children:"Filter by Status:"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["all","pending","approved","rejected","processed"].map(r=>e.jsx("button",{onClick:()=>x(r),className:`px-3 py-1 text-xs rounded transition ${p===r?"bg-cyan-600 text-white":`${t} hover:bg-gray-100 dark:hover:bg-gray-700`}`,children:r.charAt(0).toUpperCase()+r.slice(1)},r))})]})}),e.jsx("div",{className:`${l} rounded-lg shadow-sm border ${a}`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`border-b ${a}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${t}`,children:"Order"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${t}`,children:"Customer"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${t}`,children:"Amount"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${t}`,children:"Reason"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${t}`,children:"Status"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${t}`,children:"Date"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${t}`,children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:D.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-8 text-center",children:e.jsx("p",{className:`text-sm ${t}`,children:"No refunds found"})})}):D.map(r=>{var d,F,E;return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:`px-4 py-3 text-sm ${s}`,children:((d=r.orders)==null?void 0:d.order_number)||"N/A"}),e.jsx("td",{className:`px-4 py-3 text-sm ${s}`,children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:((F=r.profiles)==null?void 0:F.full_name)||"Unknown"}),e.jsx("p",{className:`text-xs ${t}`,children:(E=r.profiles)==null?void 0:E.email})]})}),e.jsxs("td",{className:`px-4 py-3 text-sm font-semibold ${s}`,children:["$",r.amount.toFixed(2)]}),e.jsx("td",{className:`px-4 py-3 text-sm ${t} max-w-xs truncate`,children:r.reason}),e.jsx("td",{className:"px-4 py-3 text-sm",children:S(r.status)}),e.jsx("td",{className:`px-4 py-3 text-xs ${t}`,children:new Date(r.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{onClick:()=>{u(r),w(r.admin_notes||"")},className:"text-xs text-cyan-600 hover:text-cyan-700 font-medium",children:"Manage"})})]},r.id)})})]})})}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${l} rounded-lg shadow-xl max-w-2xl w-full`,children:[e.jsxs("div",{className:`p-4 border-b ${a} flex items-center justify-between`,children:[e.jsx("h2",{className:`text-lg font-bold ${s}`,children:"Manage Refund"}),e.jsx("button",{onClick:()=>{u(null),w("")},className:`${t} hover:text-gray-600 transition`,children:e.jsx(U,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t}`,children:"Order Number"}),e.jsx("p",{className:`text-sm font-medium ${s}`,children:(h=i.orders)==null?void 0:h.order_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t}`,children:"Refund Amount"}),e.jsxs("p",{className:`text-lg font-bold ${s}`,children:["$",i.amount.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t} mb-1`,children:"Reason"}),e.jsx("p",{className:`text-sm ${s}`,children:i.reason})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t}`,children:"Current Status"}),S(i.status)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${s} mb-1.5`,children:"Admin Notes"}),e.jsx("textarea",{value:y,onChange:r=>w(r.target.value),rows:3,placeholder:"Add notes about this refund...",className:`w-full px-3 py-1.5 text-sm border ${a} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[i.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>j(i.id,"approved"),className:"flex-1 flex items-center justify-center gap-1.5 px-4 py-1.5 text-sm bg-green-600 text-white rounded hover:bg-green-700 transition",children:[e.jsx(ie,{className:"h-4 w-4"}),"Approve"]}),e.jsxs("button",{onClick:()=>j(i.id,"rejected"),className:"flex-1 flex items-center justify-center gap-1.5 px-4 py-1.5 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition",children:[e.jsx(Ae,{className:"h-4 w-4"}),"Reject"]})]}),i.status==="approved"&&e.jsxs("button",{onClick:()=>j(i.id,"processed"),className:"flex-1 flex items-center justify-center gap-1.5 px-4 py-1.5 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:[e.jsx(Se,{className:"h-4 w-4"}),"Mark as Processed"]})]})]})]})})]})}function Bs(){const{theme:M}=ee(),m=M==="dark",[f,T]=n.useState([]),[D,P]=n.useState([]),[g,N]=n.useState(!0),[p,x]=n.useState(null),[i,u]=n.useState("all"),[y,w]=n.useState("all"),[v,$]=n.useState(""),[l,s]=n.useState(""),[t,a]=n.useState(""),c=m?"bg-gray-800":"bg-white",j=m?"text-gray-100":"text-gray-900",S=m?"text-gray-400":"text-gray-600",o=m?"border-gray-700":"border-gray-200";n.useEffect(()=>{h()},[]),n.useEffect(()=>{r()},[f,i,y,v,l,t]);const h=async()=>{try{const{data:A,error:L}=await _.from("transaction_ledger").select("*").order("created_at",{ascending:!1}).limit(500);if(L)throw L;T(A||[])}catch(A){x({type:"error",text:A.message})}finally{N(!1)}},r=()=>{let A=[...f];if(i!=="all"&&(A=A.filter(L=>L.transaction_type===i)),y!=="all"&&(A=A.filter(L=>L.status===y)),v&&(A=A.filter(L=>new Date(L.created_at)>=new Date(v))),l){const L=new Date(l);L.setHours(23,59,59,999),A=A.filter(V=>new Date(V.created_at)<=L)}if(t){const L=t.toLowerCase();A=A.filter(V=>{var Y,q;return((Y=V.reference_id)==null?void 0:Y.toLowerCase().includes(L))||((q=V.description)==null?void 0:q.toLowerCase().includes(L))||V.id.toLowerCase().includes(L)})}P(A)},d=()=>{u("all"),w("all"),$(""),s(""),a("")},F=()=>{const A=["Date","Type","Amount","Currency","Status","Reference","Description"],L=D.map(G=>[new Date(G.created_at).toLocaleString(),G.transaction_type,G.amount,G.currency_code,G.status,G.reference_id||"",G.description||""]),V=[A.join(","),...L.map(G=>G.map(X=>`"${X}"`).join(","))].join(`
`),Y=new Blob([V],{type:"text/csv"}),q=window.URL.createObjectURL(Y),z=document.createElement("a");z.href=q,z.download=`transactions-${new Date().toISOString().split("T")[0]}.csv`,z.click()},E=A=>{const L={completed:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",pending:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",failed:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",cancelled:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-400"};return L[A]||L.pending},R=A=>({deposit:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",withdrawal:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",payment:"bg-cyan-100 text-cyan-700 dark:bg-cyan-900/30 dark:text-cyan-400",refund:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400",commission:"bg-pink-100 text-pink-700 dark:bg-pink-900/30 dark:text-pink-400"})[A]||"bg-gray-100 text-gray-700",b={total:D.length,totalAmount:D.reduce((A,L)=>A+parseFloat(L.amount.toString()),0),completed:D.filter(A=>A.status==="completed").length,pending:D.filter(A=>A.status==="pending").length};return g?e.jsx(I,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600"})})}):e.jsxs(I,{children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-6 w-6 text-cyan-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${j}`,children:"Transaction Ledger"}),e.jsxs("p",{className:`text-sm ${S} flex items-center gap-1`,children:[e.jsx(Pe,{className:"h-3.5 w-3.5"}),"Immutable transaction history"]})]})]}),e.jsxs("button",{onClick:F,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm bg-gradient-to-r from-cyan-600 to-green-600 text-white rounded hover:from-cyan-700 hover:to-green-700 transition",children:[e.jsx(Ce,{className:"h-4 w-4"}),"Export CSV"]})]})}),p&&e.jsxs("div",{className:`mb-4 p-3 rounded-lg flex items-start space-x-2 text-sm ${p.type==="success"?"bg-green-50 border border-green-200 text-green-800 dark:bg-green-900/20 dark:border-green-800 dark:text-green-400":"bg-red-50 border border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-800 dark:text-red-400"}`,children:[e.jsx(Q,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:p.text}),e.jsx("button",{onClick:()=>x(null),className:"ml-auto",children:e.jsx(U,{className:"h-3.5 w-3.5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:`${c} rounded-lg shadow-sm border ${o} p-4`,children:[e.jsx("p",{className:`text-xs ${S} mb-1`,children:"Total Transactions"}),e.jsx("p",{className:`text-2xl font-bold ${j}`,children:b.total})]}),e.jsxs("div",{className:`${c} rounded-lg shadow-sm border ${o} p-4`,children:[e.jsx("p",{className:`text-xs ${S} mb-1`,children:"Total Volume"}),e.jsxs("p",{className:`text-2xl font-bold ${j}`,children:["$",b.totalAmount.toFixed(2)]})]}),e.jsxs("div",{className:`${c} rounded-lg shadow-sm border ${o} p-4`,children:[e.jsx("p",{className:`text-xs ${S} mb-1`,children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:b.completed})]}),e.jsxs("div",{className:`${c} rounded-lg shadow-sm border ${o} p-4`,children:[e.jsx("p",{className:`text-xs ${S} mb-1`,children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:b.pending})]})]}),e.jsxs("div",{className:`${c} rounded-lg shadow-sm border ${o} p-4 mb-4`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ne,{className:"h-4 w-4 text-cyan-600"}),e.jsx("span",{className:`text-sm font-medium ${j}`,children:"Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${j} mb-1`,children:"Type"}),e.jsxs("select",{value:i,onChange:A=>u(A.target.value),className:`w-full px-2 py-1.5 text-sm border ${o} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`,children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"deposit",children:"Deposit"}),e.jsx("option",{value:"withdrawal",children:"Withdrawal"}),e.jsx("option",{value:"payment",children:"Payment"}),e.jsx("option",{value:"refund",children:"Refund"}),e.jsx("option",{value:"commission",children:"Commission"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${j} mb-1`,children:"Status"}),e.jsxs("select",{value:y,onChange:A=>w(A.target.value),className:`w-full px-2 py-1.5 text-sm border ${o} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`,children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${j} mb-1`,children:"From Date"}),e.jsx("input",{type:"date",value:v,onChange:A=>$(A.target.value),className:`w-full px-2 py-1.5 text-sm border ${o} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${j} mb-1`,children:"To Date"}),e.jsx("input",{type:"date",value:l,onChange:A=>s(A.target.value),className:`w-full px-2 py-1.5 text-sm border ${o} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${j} mb-1`,children:"Search"}),e.jsx("input",{type:"text",value:t,onChange:A=>a(A.target.value),placeholder:"ID, reference...",className:`w-full px-2 py-1.5 text-sm border ${o} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`})]})]}),e.jsx("div",{className:"flex justify-end mt-3",children:e.jsx("button",{onClick:d,className:"text-xs text-cyan-600 hover:text-cyan-700 font-medium",children:"Reset Filters"})})]}),e.jsx("div",{className:`${c} rounded-lg shadow-sm border ${o}`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`border-b ${o}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${S}`,children:"Date/Time"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${S}`,children:"Type"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${S}`,children:"Amount"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${S}`,children:"Status"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${S}`,children:"Reference"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${S}`,children:"Description"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:D.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-8 text-center",children:e.jsx("p",{className:`text-sm ${S}`,children:"No transactions found"})})}):D.map(A=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:`px-4 py-3 text-xs ${S}`,children:new Date(A.created_at).toLocaleString()}),e.jsx("td",{className:"px-4 py-3 text-xs",children:e.jsx("span",{className:`px-2 py-0.5 rounded-full font-medium ${R(A.transaction_type)}`,children:A.transaction_type})}),e.jsxs("td",{className:`px-4 py-3 text-sm font-semibold ${j}`,children:[A.currency_code," ",parseFloat(A.amount.toString()).toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-xs",children:e.jsx("span",{className:`px-2 py-0.5 rounded-full font-medium ${E(A.status)}`,children:A.status})}),e.jsx("td",{className:`px-4 py-3 text-xs ${S} font-mono`,children:A.reference_id||"N/A"}),e.jsx("td",{className:`px-4 py-3 text-xs ${S} max-w-xs truncate`,children:A.description||"-"})]},A.id))})]})})})]})}const $e=[{id:"getting-started",title:"Getting Started",icon:st,description:"Learn the basics of the ZimAIO marketplace platform",topics:[{id:"intro",title:"Introduction",content:`# Welcome to ZimAIO Marketplace

ZimAIO is a comprehensive multi-vendor e-commerce platform built with modern technologies. This documentation will guide you through all features and functionalities.

## Key Features
- **Multi-vendor Support**: Allow multiple vendors to sell on your platform
- **Advanced Analytics**: Track sales, performance, and user behavior
- **Fraud Detection**: Built-in security and fraud prevention
- **Multi-currency**: Support for multiple currencies and languages
- **Responsive Design**: Works seamlessly on all devices

## Quick Start
1. Configure your system settings
2. Add currencies and languages
3. Set up email and SMS notifications
4. Create promotional campaigns
5. Monitor vendor performance`},{id:"dashboard",title:"Admin Dashboard Overview",content:`# Admin Dashboard

The admin dashboard provides a comprehensive overview of your marketplace.

## Main Sections
- **Overview**: Key metrics and statistics
- **Sales Analytics**: Revenue trends and performance
- **User Management**: Manage customers and vendors
- **Order Management**: Track and process orders
- **Product Catalog**: Manage products and categories

## Quick Actions
- View recent orders
- Approve vendor applications
- Monitor fraud alerts
- Review customer feedback`}]},{id:"user-management",title:"User Management",icon:gt,description:"Manage customers, vendors, and admin users",topics:[{id:"customers",title:"Customer Management",content:`# Managing Customers

## Customer Profiles
View and manage customer information including:
- Personal details
- Order history
- Wallet balance
- Activity logs

## Customer Actions
- **View Details**: Access complete customer profile
- **Edit Information**: Update customer details
- **Suspend Account**: Temporarily disable access
- **Delete Account**: Permanently remove customer

## Customer Insights
- Total orders placed
- Lifetime value
- Average order value
- Last activity date`},{id:"vendors",title:"Vendor Management",content:`# Managing Vendors

## Vendor Approval Process
1. Vendor submits application
2. Admin reviews business details
3. Verify documents and credentials
4. Approve or reject application
5. Vendor receives notification

## Vendor Dashboard
Vendors have access to:
- Sales analytics
- Product management
- Order fulfillment
- Customer reviews
- Payout history

## Vendor Performance Metrics
- Total sales revenue
- Number of products
- Customer ratings
- Order fulfillment rate
- Response time`}]},{id:"orders",title:"Order Management",icon:lt,description:"Process and track customer orders",topics:[{id:"order-processing",title:"Order Processing",content:`# Order Management

## Order Lifecycle
1. **Pending**: Order placed, awaiting payment
2. **Processing**: Payment confirmed, preparing shipment
3. **Shipped**: Order dispatched to customer
4. **Delivered**: Order received by customer
5. **Completed**: Transaction finalized

## Order Actions
- View order details
- Update order status
- Process refunds
- Generate invoices
- Track shipments

## Bulk Operations
- Export orders to CSV
- Bulk status updates
- Mass invoice generation
- Batch shipping labels`},{id:"refunds",title:"Refunds & Returns",content:`# Refund Management

## Refund Process
1. Customer requests refund
2. Admin reviews request
3. Approve or reject
4. Process payment reversal
5. Update inventory

## Refund Policies
- Full refund within 30 days
- Partial refund for damaged items
- Store credit option
- Restocking fees may apply

## Return Shipping
- Customer pays return shipping
- Free returns for defective items
- Provide return labels
- Track return shipments`}]},{id:"products",title:"Product Catalog",icon:Et,description:"Manage products, categories, and inventory",topics:[{id:"product-management",title:"Product Management",content:`# Product Management

## Adding Products
Required information:
- Product name and description
- Category and subcategory
- Price and SKU
- Images (multiple angles)
- Inventory quantity
- Shipping details

## Product Attributes
- Size, color, material
- Brand and manufacturer
- Weight and dimensions
- Custom attributes

## Inventory Management
- Track stock levels
- Low stock alerts
- Automatic reordering
- Multi-location inventory
- Variant management`},{id:"categories",title:"Categories & Tags",content:`# Category Management

## Category Structure
- Main categories
- Subcategories (unlimited depth)
- Category images
- SEO optimization

## Category Features
- Custom sorting
- Featured categories
- Category banners
- Filter options

## Product Tags
- Searchable keywords
- Trending tags
- Seasonal tags
- Brand tags
- Custom tags`}]},{id:"marketing",title:"Marketing & Promotions",icon:ue,description:"Create campaigns, coupons, and advertisements",topics:[{id:"promotions",title:"Promotion Management",content:`# Promotions & Discounts

## Promotion Types
- **Coupon Codes**: Unique discount codes
- **Flash Sales**: Time-limited offers
- **Banner Promotions**: Homepage campaigns

## Creating Promotions
1. Set promotion name
2. Choose discount type (% or fixed)
3. Set validity period
4. Define usage limits
5. Set minimum purchase amount

## Promotion Analytics
- Total usage count
- Revenue impact
- Customer acquisition
- Conversion rates`},{id:"ads",title:"Advertisement Management",content:`# Vendor Advertisements

## Ad Approval Process
1. Vendor submits ad request
2. Admin reviews content
3. Approve or reject
4. Set display duration
5. Monitor performance

## Ad Types
- Banner ads
- Sponsored products
- Category promotions
- Homepage features

## Ad Metrics
- Impressions
- Click-through rate
- Conversions
- Revenue generated`}]},{id:"settings",title:"System Configuration",icon:Ke,description:"Configure platform settings and integrations",topics:[{id:"general",title:"General Settings",content:`# System Configuration

## Site Settings
- Site name and tagline
- Contact information
- Social media links
- Logo and branding
- Default language
- Default currency

## Email Configuration
- SMTP server settings
- Email templates
- Sender information
- Test email functionality

## SMS Configuration
- SMS provider (Twilio, Africa's Talking)
- API credentials
- Sender ID
- SMS templates`},{id:"currencies",title:"Currency & Language",content:`# Multi-currency & Multi-language

## Currency Management
- Add multiple currencies
- Set exchange rates
- Default currency
- Auto-update rates
- Currency symbols

## Language Management
- Add languages
- Translation files
- RTL support
- Default language
- Language switcher

## Localization
- Date formats
- Number formats
- Address formats
- Tax calculations`}]},{id:"security",title:"Security & Fraud",icon:Pe,description:"Protect your platform from fraud and threats",topics:[{id:"fraud-detection",title:"Fraud Detection",content:`# Fraud Prevention

## Risk Scoring
Automatic risk assessment based on:
- Transaction patterns
- User behavior
- IP address analysis
- Device fingerprinting
- Velocity checks

## Fraud Alerts
- High-risk transactions
- Suspicious activities
- Multiple failed attempts
- Unusual patterns

## Security Actions
- Block IP addresses
- Ban user accounts
- Hold suspicious orders
- Require verification
- Manual review queue`},{id:"security-best-practices",title:"Security Best Practices",content:`# Security Guidelines

## Admin Security
- Use strong passwords
- Enable two-factor authentication
- Regular password changes
- Limit admin access
- Monitor admin activities

## Data Protection
- Regular backups
- Encrypted connections (SSL)
- Secure payment processing
- PCI compliance
- GDPR compliance

## Monitoring
- Activity logs
- Failed login attempts
- Unusual access patterns
- System health checks`}]},{id:"analytics",title:"Analytics & Reports",icon:se,description:"Track performance and generate reports",topics:[{id:"vendor-analytics",title:"Vendor Performance",content:`# Vendor Analytics

## Performance Metrics
- Total sales revenue
- Number of orders
- Average order value
- Customer ratings
- Product count
- Growth percentage

## Vendor Rankings
- Top performers
- Revenue leaders
- Best rated vendors
- Most active vendors

## Performance Reports
- Sales by period
- Product performance
- Customer feedback
- Fulfillment rates`},{id:"sales-reports",title:"Sales Reports",content:`# Sales Analytics

## Revenue Reports
- Daily sales
- Monthly trends
- Yearly comparison
- Category breakdown
- Payment methods

## Export Options
- CSV export
- PDF reports
- Excel format
- Scheduled reports

## Custom Reports
- Date range selection
- Filter by category
- Vendor comparison
- Product analysis`}]}];function Gs(){const[M,m]=n.useState($e[0]),[f,T]=n.useState($e[0].topics[0]),[D,P]=n.useState(""),g=$e.filter(N=>N.title.toLowerCase().includes(D.toLowerCase())||N.description.toLowerCase().includes(D.toLowerCase())||N.topics.some(p=>p.title.toLowerCase().includes(D.toLowerCase())||p.content.toLowerCase().includes(D.toLowerCase())));return e.jsx(I,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(st,{className:"w-6 h-6 mr-2 text-blue-600"}),"Platform Documentation"]}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Comprehensive guide to using the ZimAIO marketplace platform"})]}),e.jsx("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search documentation...",value:D,onChange:N=>P(N.target.value),className:"w-full pl-8 pr-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-blue-500 bg-white text-sm"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"lg:col-span-1 space-y-2",children:g.map(N=>e.jsxs("div",{className:"bg-gray-50 rounded border border-gray-200 overflow-hidden",children:[e.jsxs("button",{onClick:()=>{m(N),T(N.topics[0])},className:`w-full p-3 text-left flex items-center gap-2 hover:bg-gray-100 transition ${M.id===N.id?"bg-blue-100 border-l-4 border-blue-600":""}`,children:[e.jsx(N.icon,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-900",children:N.title}),e.jsx("p",{className:"text-xs text-slate-600 line-clamp-1",children:N.description})]}),e.jsx(be,{className:"w-4 h-4 text-slate-400"})]}),M.id===N.id&&e.jsx("div",{className:"bg-white border-t border-gray-200",children:N.topics.map(p=>e.jsx("button",{onClick:()=>T(p),className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-50 transition ${f.id===p.id?"bg-blue-50 text-blue-700 font-medium":"text-slate-700"}`,children:p.title},p.id))})]},N.id))}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"prose prose-sm max-w-none",children:[e.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 mb-2",children:[e.jsx(M.icon,{className:"w-4 h-4"}),e.jsx("span",{children:M.title}),e.jsx(be,{className:"w-3 h-3"}),e.jsx("span",{className:"text-blue-600",children:f.title})]}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:f.title})]}),e.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed text-slate-700",children:f.content})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{children:"Need more help?"})]}),e.jsxs("a",{href:"#",className:"flex items-center gap-1 text-sm text-blue-600 hover:text-blue-700 font-medium",children:["Contact Support",e.jsx(Xe,{className:"w-4 h-4"})]})]})})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded border border-blue-200",children:[e.jsx(Mt,{className:"w-5 h-5 text-blue-600 mb-2"}),e.jsx("h4",{className:"text-sm font-bold text-slate-900 mb-1",children:"API Reference"}),e.jsx("p",{className:"text-xs text-slate-600",children:"Developer documentation and API endpoints"})]}),e.jsxs("div",{className:"bg-green-50 p-3 rounded border border-green-200",children:[e.jsx(se,{className:"w-5 h-5 text-green-600 mb-2"}),e.jsx("h4",{className:"text-sm font-bold text-slate-900 mb-1",children:"Video Tutorials"}),e.jsx("p",{className:"text-xs text-slate-600",children:"Step-by-step video guides"})]}),e.jsxs("div",{className:"bg-purple-50 p-3 rounded border border-purple-200",children:[e.jsx(Ue,{className:"w-5 h-5 text-purple-600 mb-2"}),e.jsx("h4",{className:"text-sm font-bold text-slate-900 mb-1",children:"FAQ"}),e.jsx("p",{className:"text-xs text-slate-600",children:"Frequently asked questions"})]})]})]})]})]})})}function zs(){const[M,m]=n.useState([]),[f,T]=n.useState(!0),[D,P]=n.useState(!1),[g,N]=n.useState(null),[p,x]=n.useState({code:"",name:"",symbol:"",exchange_rate:1,is_active:!0,is_default:!1});n.useEffect(()=>{i()},[]);async function i(){try{const{data:s,error:t}=await _.from("currencies").select("*").order("code");if(t)throw t;m(s||[])}catch(s){console.error("Error loading currencies:",s)}finally{T(!1)}}async function u(s){s.preventDefault();try{if(g){const{error:t}=await _.from("currencies").update({...p,updated_at:new Date().toISOString()}).eq("id",g);if(t)throw t}else{const{error:t}=await _.from("currencies").insert([p]);if(t)throw t}l(),i()}catch(t){console.error("Error saving currency:",t),alert("Failed to save currency")}}async function y(s){if(confirm("Are you sure you want to delete this currency?"))try{const{error:t}=await _.from("currencies").delete().eq("id",s);if(t)throw t;i()}catch(t){console.error("Error deleting currency:",t),alert("Failed to delete currency")}}async function w(s,t){try{const{error:a}=await _.from("currencies").update({is_active:!t,updated_at:new Date().toISOString()}).eq("id",s);if(a)throw a;i()}catch(a){console.error("Error toggling currency status:",a)}}async function v(s){try{await _.from("currencies").update({is_default:!1});const{error:t}=await _.from("currencies").update({is_default:!0,updated_at:new Date().toISOString()}).eq("id",s);if(t)throw t;i()}catch(t){console.error("Error setting default currency:",t)}}function $(s){N(s.id),x({code:s.code,name:s.name,symbol:s.symbol,exchange_rate:s.exchange_rate,is_active:s.is_active,is_default:s.is_default}),P(!0)}function l(){x({code:"",name:"",symbol:"",exchange_rate:1,is_active:!0,is_default:!1}),N(null),P(!1)}return f?e.jsx(I,{children:e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):e.jsx(I,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center",children:[e.jsx(Se,{className:"w-6 h-6 mr-2 text-blue-600"}),"Currency Management"]}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Manage currencies and exchange rates"})]}),e.jsxs("button",{onClick:()=>P(!0),className:"flex items-center px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:[e.jsx(re,{className:"w-4 h-4 mr-1"}),"Add"]})]}),D&&e.jsxs("div",{className:"bg-gray-50 rounded p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:g?"Edit Currency":"Add Currency"}),e.jsx("button",{onClick:l,className:"text-slate-500 hover:text-slate-700",children:e.jsx(U,{className:"w-4 h-4"})})]}),e.jsxs("form",{onSubmit:u,className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Code *"}),e.jsx("input",{type:"text",value:p.code,onChange:s=>x({...p,code:s.target.value.toUpperCase()}),maxLength:3,required:!0,placeholder:"USD",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Name *"}),e.jsx("input",{type:"text",value:p.name,onChange:s=>x({...p,name:s.target.value}),required:!0,placeholder:"US Dollar",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Symbol *"}),e.jsx("input",{type:"text",value:p.symbol,onChange:s=>x({...p,symbol:s.target.value}),required:!0,placeholder:"$",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Rate *"}),e.jsx("input",{type:"number",step:"0.000001",value:p.exchange_rate,onChange:s=>x({...p,exchange_rate:parseFloat(s.target.value)}),required:!0,placeholder:"1.0",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900 text-sm"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center text-sm",children:[e.jsx("input",{type:"checkbox",checked:p.is_active,onChange:s=>x({...p,is_active:s.target.checked}),className:"w-3 h-3 text-blue-600 border-slate-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-1 text-slate-700",children:"Active"})]}),e.jsxs("label",{className:"flex items-center text-sm",children:[e.jsx("input",{type:"checkbox",checked:p.is_default,onChange:s=>x({...p,is_default:s.target.checked}),className:"w-3 h-3 text-blue-600 border-slate-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-1 text-slate-700",children:"Default"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:l,className:"px-3 py-1 text-slate-700 hover:bg-slate-100 rounded transition-colors text-sm",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"flex items-center px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(ae,{className:"w-3 h-3 mr-1"}),g?"Update":"Create"]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded shadow overflow-hidden border border-gray-200",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Code"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Symbol"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Rate"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Default"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:M.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-medium text-slate-900",children:s.code})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-slate-700",children:s.name})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-slate-700",children:s.symbol})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-slate-700",children:s.exchange_rate})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsx("button",{onClick:()=>w(s.id,s.is_active),className:`px-2 py-0.5 text-xs rounded-full ${s.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:s.is_default?e.jsxs("span",{className:"flex items-center text-sm text-green-600",children:[e.jsx(xe,{className:"w-3 h-3 mr-1"})," Default"]}):e.jsx("button",{onClick:()=>v(s.id),className:"text-sm text-blue-600 hover:text-blue-700",children:"Set Default"})}),e.jsxs("td",{className:"px-4 py-2 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>$(s),className:"text-blue-600 hover:text-blue-700 mr-2",children:e.jsx(we,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>y(s.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Z,{className:"w-3 h-3"})})]})]},s.id))})]})}),M.length===0&&e.jsx("div",{className:"text-center py-8 text-slate-500",children:"No currencies found. Add your first currency."})]})]})})}function Hs(){const[M,m]=n.useState([]),[f,T]=n.useState(!0),[D,P]=n.useState(!1),[g,N]=n.useState(null),[p,x]=n.useState({code:"",name:"",native_name:"",is_active:!0,is_default:!1});n.useEffect(()=>{i()},[]);async function i(){try{const{data:s,error:t}=await _.from("languages").select("*").order("code");if(t)throw t;m(s||[])}catch(s){console.error("Error loading languages:",s)}finally{T(!1)}}async function u(s){s.preventDefault();try{if(g){const{error:t}=await _.from("languages").update({...p,updated_at:new Date().toISOString()}).eq("id",g);if(t)throw t}else{const{error:t}=await _.from("languages").insert([p]);if(t)throw t}l(),i()}catch(t){console.error("Error saving language:",t),alert("Failed to save language")}}async function y(s){if(confirm("Delete this language?"))try{const{error:t}=await _.from("languages").delete().eq("id",s);if(t)throw t;i()}catch(t){console.error("Error deleting language:",t),alert("Failed to delete language")}}async function w(s,t){try{const{error:a}=await _.from("languages").update({is_active:!t,updated_at:new Date().toISOString()}).eq("id",s);if(a)throw a;i()}catch(a){console.error("Error toggling status:",a)}}async function v(s){try{await _.from("languages").update({is_default:!1});const{error:t}=await _.from("languages").update({is_default:!0,updated_at:new Date().toISOString()}).eq("id",s);if(t)throw t;i()}catch(t){console.error("Error setting default:",t)}}function $(s){N(s.id),x({code:s.code,name:s.name,native_name:s.native_name||"",is_active:s.is_active,is_default:s.is_default}),P(!0)}function l(){x({code:"",name:"",native_name:"",is_active:!0,is_default:!1}),N(null),P(!1)}return f?e.jsx(I,{children:e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):e.jsx(I,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center",children:[e.jsx(fe,{className:"w-6 h-6 mr-2 text-blue-600"}),"Language Management"]}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Manage languages and translations"})]}),e.jsxs("button",{onClick:()=>P(!0),className:"flex items-center px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:[e.jsx(re,{className:"w-4 h-4 mr-1"}),"Add"]})]}),D&&e.jsxs("div",{className:"bg-gray-50 rounded p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:g?"Edit Language":"Add Language"}),e.jsx("button",{onClick:l,className:"text-slate-500 hover:text-slate-700",children:e.jsx(U,{className:"w-4 h-4"})})]}),e.jsxs("form",{onSubmit:u,className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Code *"}),e.jsx("input",{type:"text",value:p.code,onChange:s=>x({...p,code:s.target.value.toLowerCase()}),maxLength:5,required:!0,placeholder:"en",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Name *"}),e.jsx("input",{type:"text",value:p.name,onChange:s=>x({...p,name:s.target.value}),required:!0,placeholder:"English",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900 text-sm"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Native Name"}),e.jsx("input",{type:"text",value:p.native_name,onChange:s=>x({...p,native_name:s.target.value}),placeholder:"English (native)",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900 text-sm"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center text-sm",children:[e.jsx("input",{type:"checkbox",checked:p.is_active,onChange:s=>x({...p,is_active:s.target.checked}),className:"w-3 h-3 text-blue-600 border-slate-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-1 text-slate-700",children:"Active"})]}),e.jsxs("label",{className:"flex items-center text-sm",children:[e.jsx("input",{type:"checkbox",checked:p.is_default,onChange:s=>x({...p,is_default:s.target.checked}),className:"w-3 h-3 text-blue-600 border-slate-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-1 text-slate-700",children:"Default"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:l,className:"px-3 py-1 text-slate-700 hover:bg-slate-100 rounded transition-colors text-sm",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"flex items-center px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(ae,{className:"w-3 h-3 mr-1"}),g?"Update":"Create"]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded shadow overflow-hidden border border-gray-200",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Code"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Native"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Default"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:M.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"text-sm font-medium text-slate-900",children:s.code})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"text-sm text-slate-700",children:s.name})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"text-sm text-slate-700",children:s.native_name||"-"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("button",{onClick:()=>w(s.id,s.is_active),className:`px-2 py-0.5 text-xs rounded-full ${s.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-4 py-2",children:s.is_default?e.jsxs("span",{className:"flex items-center text-sm text-green-600",children:[e.jsx(xe,{className:"w-3 h-3 mr-1"}),"Default"]}):e.jsx("button",{onClick:()=>v(s.id),className:"text-sm text-blue-600 hover:text-blue-700",children:"Set Default"})}),e.jsxs("td",{className:"px-4 py-2 text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>$(s),className:"text-blue-600 hover:text-blue-700 mr-2",children:e.jsx(we,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>y(s.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Z,{className:"w-3 h-3"})})]})]},s.id))})]})}),M.length===0&&e.jsx("div",{className:"text-center py-8 text-slate-500",children:"No languages found. Add your first language."})]})]})})}const Ge=[{value:"order_placed",label:"Order Placed"},{value:"order_shipped",label:"Order Shipped"},{value:"order_delivered",label:"Order Delivered"},{value:"payment_received",label:"Payment Received"},{value:"payment_failed",label:"Payment Failed"},{value:"user_registered",label:"User Registered"},{value:"vendor_approved",label:"Vendor Approved"},{value:"product_out_of_stock",label:"Product Out of Stock"},{value:"refund_requested",label:"Refund Requested"}],ze=[{value:"send_email",label:"Send Email"},{value:"send_sms",label:"Send SMS"},{value:"send_notification",label:"Send Notification"},{value:"webhook",label:"Call Webhook"},{value:"update_status",label:"Update Status"}];function Ws(){const[M,m]=n.useState([]),[f,T]=n.useState(!0),[D,P]=n.useState(!1),[g,N]=n.useState(null),[p,x]=n.useState({name:"",event_type:"",action_type:"",conditions:"{}",actions:"{}",is_active:!0});n.useEffect(()=>{i()},[]);const i=async()=>{try{const{data:l,error:s}=await _.from("event_triggers").select("*").order("created_at",{ascending:!1});if(s)throw s;m(l||[])}catch(l){console.error("Error loading triggers:",l)}finally{T(!1)}},u=async l=>{l.preventDefault();try{const s=JSON.parse(p.conditions),t=JSON.parse(p.actions),a={...p,conditions:s,actions:t};if(g){const{error:c}=await _.from("event_triggers").update({...a,updated_at:new Date().toISOString()}).eq("id",g);if(c)throw c}else{const{error:c}=await _.from("event_triggers").insert([a]);if(c)throw c}$(),i()}catch(s){console.error("Error saving trigger:",s),alert("Failed to save trigger")}},y=async l=>{if(confirm("Delete this trigger?"))try{const{error:s}=await _.from("event_triggers").delete().eq("id",l);if(s)throw s;i()}catch(s){console.error("Error deleting trigger:",s),alert("Failed to delete trigger")}},w=async(l,s)=>{try{const{error:t}=await _.from("event_triggers").update({is_active:!s,updated_at:new Date().toISOString()}).eq("id",l);if(t)throw t;i()}catch(t){console.error("Error toggling status:",t)}},v=l=>{N(l.id),x({name:l.name,event_type:l.event_type,action_type:l.action_type,conditions:JSON.stringify(l.conditions||{},null,2),actions:JSON.stringify(l.actions||{},null,2),is_active:l.is_active}),P(!0)},$=()=>{x({name:"",event_type:"",action_type:"",conditions:"{}",actions:"{}",is_active:!0}),N(null),P(!1)};return f?e.jsx(I,{children:e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):e.jsx(I,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center",children:[e.jsx(ue,{className:"w-6 h-6 mr-2 text-blue-600"}),"Trigger Module"]}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Automate actions based on events"})]}),e.jsxs("button",{onClick:()=>P(!0),className:"flex items-center px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:[e.jsx(re,{className:"w-4 h-4 mr-1"}),"Add"]})]}),D&&e.jsxs("div",{className:"bg-gray-50 rounded p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:g?"Edit Trigger":"Add Trigger"}),e.jsx("button",{onClick:$,className:"text-slate-500 hover:text-slate-700",children:e.jsx(U,{className:"w-4 h-4"})})]}),e.jsxs("form",{onSubmit:u,className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Name *"}),e.jsx("input",{type:"text",value:p.name,onChange:l=>x({...p,name:l.target.value}),required:!0,placeholder:"Send email on order placement",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Event Type *"}),e.jsxs("select",{value:p.event_type,onChange:l=>x({...p,event_type:l.target.value}),required:!0,className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900",children:[e.jsx("option",{value:"",children:"Select Event"}),Ge.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Action Type *"}),e.jsxs("select",{value:p.action_type,onChange:l=>x({...p,action_type:l.target.value}),required:!0,className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900",children:[e.jsx("option",{value:"",children:"Select Action"}),ze.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Conditions (JSON)"}),e.jsx("textarea",{rows:3,value:p.conditions,onChange:l=>x({...p,conditions:l.target.value}),placeholder:'{"min_amount":100,"status":"paid"}',className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Actions (JSON)"}),e.jsx("textarea",{rows:3,value:p.actions,onChange:l=>x({...p,actions:l.target.value}),placeholder:'{"template":"order_confirmation","recipient":"customer_email"}',className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white font-mono text-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:p.is_active,onChange:l=>x({...p,is_active:l.target.checked}),className:"w-3 h-3 text-blue-600 border-slate-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-700",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:$,className:"px-3 py-1 text-slate-700 hover:bg-slate-100 rounded transition-colors text-sm",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"flex items-center px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(ae,{className:"w-4 h-4 mr-1"}),g?"Update":"Create"]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded shadow overflow-hidden border border-gray-200",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Event"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Action"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:M.map(l=>{var s,t;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"text-sm font-medium text-slate-900",children:l.name})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"text-sm text-slate-700",children:((s=Ge.find(a=>a.value===l.event_type))==null?void 0:s.label)||l.event_type})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"text-sm text-slate-700",children:((t=ze.find(a=>a.value===l.action_type))==null?void 0:t.label)||l.action_type})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("button",{onClick:()=>w(l.id,l.is_active),className:`px-2 py-0.5 text-xs rounded-full ${l.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:l.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-4 py-2 text-right",children:[e.jsx("button",{onClick:()=>v(l),className:"p-1 text-blue-600 hover:bg-blue-50 rounded mr-2",children:e.jsx(we,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>y(l.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:e.jsx(Z,{className:"w-4 h-4"})})]})]},l.id)})})]})}),M.length===0&&e.jsx("div",{className:"text-center py-8 text-slate-500",children:"No triggers configured. Add your first trigger."})]})]})})}const Xt=[{value:"twilio",label:"Twilio"},{value:"africastalking",label:"Africa's Talking"},{value:"nexmo",label:"Nexmo/Vonage"},{value:"messagebird",label:"MessageBird"},{value:"custom",label:"Custom Provider"}];function Js(){const[M,m]=n.useState([]),[f,T]=n.useState(!0),[D,P]=n.useState(!1),[g,N]=n.useState({provider:"twilio",api_key:"",sender_id:"",is_active:!0,settings:"{}"});n.useEffect(()=>{p()},[]);const p=async()=>{try{const{data:i,error:u}=await _.from("sms_configurations").select("*").order("created_at",{ascending:!1});if(u)throw u;if(m(i||[]),i&&i.length>0){const y=i[0];N({provider:y.provider,api_key:y.api_key||"",sender_id:y.sender_id||"",is_active:y.is_active,settings:JSON.stringify(y.settings||{},null,2)})}}catch(i){console.error("Error loading SMS configs:",i)}finally{T(!1)}},x=async i=>{i.preventDefault(),P(!0);try{const u=JSON.parse(g.settings),y={...g,settings:u};if(M.length>0){const{error:w}=await _.from("sms_configurations").update({...y,updated_at:new Date().toISOString()}).eq("id",M[0].id);if(w)throw w}else{const{error:w}=await _.from("sms_configurations").insert([y]);if(w)throw w}alert("SMS configuration saved"),p()}catch(u){console.error("Error saving SMS config:",u),alert("Failed to save SMS configuration")}finally{P(!1)}};return f?e.jsx(I,{children:e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):e.jsx(I,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center",children:[e.jsx(nt,{className:"w-6 h-6 mr-2 text-blue-600"}),"SMS Configuration"]}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Configure SMS gateway for sending text messages"})]})}),e.jsx("div",{className:"bg-gray-50 rounded p-4 border border-gray-200",children:e.jsxs("form",{onSubmit:x,className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Provider *"}),e.jsx("select",{value:g.provider,onChange:i=>N({...g,provider:i.target.value}),className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900",children:Xt.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"API Key *"}),e.jsxs("div",{className:"relative",children:[e.jsx(at,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"password",value:g.api_key,onChange:i=>N({...g,api_key:i.target.value}),className:"w-full pl-8 pr-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Sender ID *"}),e.jsx("input",{type:"text",value:g.sender_id,onChange:i=>N({...g,sender_id:i.target.value}),className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:g.is_active,onChange:i=>N({...g,is_active:i.target.checked}),className:"w-3 h-3 text-blue-600 border-slate-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-slate-700",children:"Enable SMS notifications"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Additional Settings (JSON)"}),e.jsx("textarea",{rows:4,value:g.settings,onChange:i=>N({...g,settings:i.target.value}),className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white font-mono text-sm"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>N({provider:"twilio",api_key:"",sender_id:"",is_active:!0,settings:"{}"}),className:"px-3 py-1 text-slate-700 hover:bg-slate-100 rounded transition-colors text-sm",children:"Reset"}),e.jsx("button",{type:"submit",disabled:D,className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors disabled:opacity-50 text-sm",children:D?"Saving...":"Save"})]})]})})]})})}const Kt=[{value:"smtp",label:"SMTP (Generic)"},{value:"sendgrid",label:"SendGrid"},{value:"mailgun",label:"Mailgun"},{value:"ses",label:"Amazon SES"},{value:"postmark",label:"Postmark"},{value:"mailchimp",label:"Mailchimp"}];function Zs(){const[M,m]=n.useState([]),[f,T]=n.useState(!0),[D,P]=n.useState(!1),[g,N]=n.useState(""),[p,x]=n.useState(!1),[i,u]=n.useState(null),[y,w]=n.useState({provider:"smtp",smtp_host:"",smtp_port:587,username:"",password:"",from_email:"",from_name:"",is_active:!0,settings:"{}"});n.useEffect(()=>{v()},[]);async function v(){try{const{data:s,error:t}=await _.from("email_configurations").select("*").order("created_at",{ascending:!1});if(t)throw t;if(m(s||[]),s&&s.length>0){const a=s[0];w({provider:a.provider,smtp_host:a.smtp_host||"",smtp_port:a.smtp_port||587,username:a.username||"",password:a.password||"",from_email:a.from_email||"",from_name:a.from_name||"",is_active:a.is_active,settings:JSON.stringify(a.settings||{},null,2)})}}catch(s){console.error("Error loading email configs:",s)}finally{T(!1)}}async function $(s){s.preventDefault(),P(!0);try{let t;try{t=JSON.parse(y.settings)}catch{alert("Invalid JSON in settings"),P(!1);return}const a={...y,settings:t};if(M.length>0){const{error:c}=await _.from("email_configurations").update({...a,updated_at:new Date().toISOString()}).eq("id",M[0].id);if(c)throw c}else{const{error:c}=await _.from("email_configurations").insert([a]);if(c)throw c}alert("Email configuration saved"),v()}catch(t){console.error("Error saving email config:",t),alert("Failed to save email configuration")}finally{P(!1)}}async function l(){if(!g){u({type:"error",text:"Please enter a test email address"});return}x(!0),u(null);try{const s=await fetch("/api/send-test-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:g,config:y})});if(s.ok)u({type:"success",text:`Test email sent successfully to ${g}`}),N("");else{const t=await s.json();u({type:"error",text:t.message||"Failed to send test email"})}}catch{u({type:"error",text:"Failed to send test email. Please check your configuration."})}finally{x(!1)}}return f?e.jsx(I,{children:e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):e.jsx(I,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center",children:[e.jsx(De,{className:"w-6 h-6 mr-2 text-blue-600"}),"Email Configuration"]}),e.jsx("p",{className:"text-slate-600 mt-1 text-sm",children:"Configure email server for transactional emails"})]})}),e.jsx("div",{className:"bg-gray-50 rounded p-4 border border-gray-200",children:e.jsxs("form",{onSubmit:$,className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Provider *"}),e.jsx("select",{value:y.provider,onChange:s=>w({...y,provider:s.target.value}),className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900",children:Kt.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"SMTP Host *"}),e.jsx("input",{type:"text",value:y.smtp_host,onChange:s=>w({...y,smtp_host:s.target.value}),required:!0,placeholder:"smtp.example.com",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"SMTP Port *"}),e.jsx("input",{type:"number",value:y.smtp_port,onChange:s=>w({...y,smtp_port:parseInt(s.target.value)}),required:!0,placeholder:"587",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Username / API Key *"}),e.jsx("input",{type:"text",value:y.username,onChange:s=>w({...y,username:s.target.value}),required:!0,placeholder:"user@example.com or API key",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Password / API Secret *"}),e.jsxs("div",{className:"relative",children:[e.jsx(at,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"password",value:y.password,onChange:s=>w({...y,password:s.target.value}),required:!0,placeholder:"Enter password",className:"w-full pl-8 pr-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"From Email *"}),e.jsx("input",{type:"email",value:y.from_email,onChange:s=>w({...y,from_email:s.target.value}),required:!0,placeholder:"noreply@example.com",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"From Name *"}),e.jsx("input",{type:"text",value:y.from_name,onChange:s=>w({...y,from_name:s.target.value}),required:!0,placeholder:"My Company",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Additional Settings (JSON)"}),e.jsx("textarea",{rows:4,value:y.settings,onChange:s=>w({...y,settings:s.target.value}),className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white font-mono text-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:y.is_active,onChange:s=>w({...y,is_active:s.target.checked}),className:"w-3 h-3 text-blue-600 border-slate-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-700",children:"Enable email notifications"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>w({provider:"smtp",smtp_host:"",smtp_port:587,username:"",password:"",from_email:"",from_name:"",is_active:!0,settings:"{}"}),className:"px-3 py-1 text-slate-700 hover:bg-slate-100 rounded transition-colors text-sm",children:"Reset"}),e.jsx("button",{type:"submit",disabled:D,className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors disabled:opacity-50 text-sm",children:D?"Saving...":"Save"})]})]})}),e.jsxs("div",{className:"bg-blue-50 rounded p-4 border border-blue-200",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-900 mb-2 flex items-center",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2 text-blue-600"}),"Test Email Configuration"]}),e.jsx("p",{className:"text-xs text-slate-600 mb-3",children:"Send a test email to verify your configuration is working correctly"}),i&&e.jsxs("div",{className:`mb-3 p-2 rounded flex items-center gap-2 text-sm ${i.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[i.type==="success"?e.jsx(ie,{className:"w-4 h-4"}):e.jsx(Ae,{className:"w-4 h-4"}),e.jsx("span",{children:i.text})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"email",value:g,onChange:s=>N(s.target.value),placeholder:"Enter test email address",className:"flex-1 px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-sm"}),e.jsxs("button",{onClick:l,disabled:p||!g,className:"flex items-center px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors disabled:opacity-50 text-sm",children:[e.jsx(Ee,{className:"w-4 h-4 mr-1"}),p?"Sending...":"Send Test"]})]})]})]})})}function Xs(){const[M,m]=n.useState([]),[f,T]=n.useState(!0),[D,P]=n.useState("all");n.useEffect(()=>{g()},[D]);const g=async()=>{let x=_.from("vendor_ads").select("*, vendor_profiles(shop_name)").order("created_at",{ascending:!1});D==="pending"?x=x.eq("status","pending"):D==="active"?x=x.eq("status","active"):D==="banned"&&(x=x.eq("status","banned"));const{data:i,error:u}=await x;!u&&i&&m(i),T(!1)},N=async(x,i)=>{const{error:u}=await _.from("vendor_ads").update({status:i}).eq("id",x);u||g()},p=async x=>{if(!confirm("Delete this ad?"))return;const{error:i}=await _.from("vendor_ads").delete().eq("id",x);i||g()};return e.jsx(I,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(Fe,{className:"w-6 h-6 mr-2 text-purple-600"}),"Ads Management"]}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Review and approve vendor advertisement campaigns"})]})}),e.jsx("div",{className:"flex space-x-2",children:["all","pending","active","banned"].map(x=>e.jsx("button",{onClick:()=>P(x),className:`px-3 py-1 rounded font-medium uppercase text-xs transition ${D===x?"bg-purple-600 text-white":"bg-white text-gray-500 hover:bg-gray-50 border border-gray-200"}`,children:x},x))}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[f?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):M.map(x=>{var i;return e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 overflow-hidden flex flex-col md:flex-row hover:shadow-md transition",children:[e.jsxs("div",{className:"md:w-48 h-32 md:h-auto relative overflow-hidden",children:[e.jsx("img",{src:x.image_url,alt:x.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${x.status==="active"?"bg-green-500 text-white":x.status==="pending"?"bg-amber-500 text-white":x.status==="rejected"?"bg-red-500 text-white":x.status==="banned"?"bg-black text-white":"bg-gray-500 text-white"}`,children:x.status})})]}),e.jsxs("div",{className:"flex-1 p-4 flex flex-col",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-purple-600 mb-1",children:[e.jsx(de,{className:"w-3 h-3"}),e.jsx("span",{children:new Date(x.created_at).toLocaleDateString()})]}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:x.title}),e.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:["Type: ",x.ad_type," â€¢ Shop: ",e.jsx("span",{className:"text-purple-600",children:(i=x.vendor_profiles)==null?void 0:i.shop_name})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[x.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>N(x.id,"active"),title:"Approve",className:"p-2 bg-green-100 text-green-600 rounded hover:bg-green-600 hover:text-white transition",children:e.jsx(xe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>N(x.id,"rejected"),title:"Reject",className:"p-2 bg-red-100 text-red-600 rounded hover:bg-red-600 hover:text-white transition",children:e.jsx(U,{className:"w-4 h-4"})})]}),x.status==="active"&&e.jsx("button",{onClick:()=>N(x.id,"banned"),title:"Ban",className:"p-2 bg-red-100 text-red-600 rounded hover:bg-red-600 hover:text-white transition",children:e.jsx(U,{className:"w-4 h-4"})}),x.status==="banned"&&e.jsx("button",{onClick:()=>N(x.id,"active"),title:"Reactivate",className:"p-2 bg-green-100 text-green-600 rounded hover:bg-green-600 hover:text-white transition",children:e.jsx(xe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>p(x.id),className:"p-2 bg-gray-100 text-gray-400 rounded hover:bg-gray-900 hover:text-white transition",children:e.jsx(Z,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-auto",children:[e.jsxs("div",{className:"bg-white p-2 rounded border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400 mb-1",children:[e.jsx(le,{className:"w-3 h-3"})," Views"]}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:x.impressions.toLocaleString()})]}),e.jsxs("div",{className:"bg-white p-2 rounded border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400 mb-1",children:[e.jsx(ot,{className:"w-3 h-3"})," Clicks"]}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:x.clicks.toLocaleString()})]}),e.jsxs("div",{className:"bg-white p-2 rounded border border-gray-200 col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400 mb-1",children:[e.jsx(Ye,{className:"w-3 h-3"})," Schedule"]}),e.jsxs("div",{className:"text-xs font-medium text-gray-900",children:[new Date(x.start_date).toLocaleDateString()," - ",new Date(x.end_date).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("a",{href:x.link_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-xs text-purple-600 hover:underline",children:[e.jsx(Xe,{className:"w-3 h-3"})," ",x.link_url]}),x.status==="active"&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-600 rounded-full text-xs",children:[e.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full animate-pulse"}),"Live Campaign"]})]})]})]},x.id)}),M.length===0&&e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-200",children:[e.jsx(Fe,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-bold text-gray-400",children:"No campaigns found"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Wait for vendors to submit requests"})]})]})]})})}function Ks(){const[M,m]=n.useState([]),[f,T]=n.useState(!0),[D,P]=n.useState(!1),[g,N]=n.useState(null),[p,x]=n.useState(!1),[i,u]=n.useState({title:"",subtitle:"",image_url:"",link_url:"",button_text:"Shop Now",is_active:!0,sort_order:0});n.useEffect(()=>{y()},[]);const y=async()=>{const{data:t,error:a}=await _.from("home_slides").select("*").order("sort_order",{ascending:!0});!a&&t&&m(t),T(!1)},w=async t=>{var c;const a=(c=t.target.files)==null?void 0:c[0];if(a){if(!a.type.startsWith("image/")){alert("Please upload an image file");return}if(a.size>5*1024*1024){alert("Image size must be less than 5MB");return}x(!0);try{const j=a.name.split(".").pop(),S=`slide-${Date.now()}.${j}`,o=`slides/${S}`,{error:h}=await _.storage.from("public").upload(o,a,{cacheControl:"3600",upsert:!1});if(h)throw h;const{data:{publicUrl:r}}=_.storage.from("public").getPublicUrl(o);u(d=>({...d,image_url:r})),await _.from("uploads").insert({file_name:S,file_path:r,file_type:a.type,file_size:a.size,upload_type:"slider"})}catch(j){alert(`Upload failed: ${j.message}`)}finally{x(!1)}}},v=async t=>{t.preventDefault(),T(!0);const a={...i,sort_order:g?i.sort_order:M.length+1};g?await _.from("home_slides").update(a).eq("id",g.id):await _.from("home_slides").insert(a),P(!1),N(null),y()},$=async t=>{confirm("Delete this slide?")&&(await _.from("home_slides").delete().eq("id",t),y())},l=async t=>{await _.from("home_slides").update({is_active:!t.is_active}).eq("id",t.id),y()},s=async(t,a)=>{const c=[...M],j=a==="up"?t-1:t+1;if(j<0||j>=M.length)return;const S=c[t].sort_order;c[t].sort_order=c[j].sort_order,c[j].sort_order=S,await Promise.all([_.from("home_slides").update({sort_order:c[t].sort_order}).eq("id",c[t].id),_.from("home_slides").update({sort_order:c[j].sort_order}).eq("id",c[j].id)]),y()};return e.jsx(I,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Slider Management"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Manage the main slideshow on the homepage"})]}),e.jsxs("button",{onClick:()=>{N(null),u({title:"",subtitle:"",image_url:"",link_url:"",button_text:"Shop Now",is_active:!0,sort_order:0}),P(!0)},className:"bg-purple-600 text-white px-3 py-1 rounded font-medium flex items-center gap-1 hover:bg-purple-700 transition text-sm",children:[e.jsx(re,{className:"w-4 h-4"})," Add"]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:M.map((t,a)=>e.jsxs("div",{className:`bg-gray-50 rounded-lg border p-4 flex flex-col md:flex-row gap-4 items-center transition ${t.is_active?"border-gray-200":"border-dashed border-gray-300 opacity-60"}`,children:[e.jsx("div",{className:"w-full md:w-64 aspect-video rounded overflow-hidden bg-gray-100 flex-shrink-0",children:e.jsx("img",{src:t.image_url,alt:t.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"bg-purple-100 text-purple-600 px-2 py-0.5 rounded-full text-xs font-medium",children:["Slide #",t.sort_order]}),!t.is_active&&e.jsx("span",{className:"bg-gray-100 text-gray-500 px-2 py-0.5 rounded-full text-xs font-medium",children:"Disabled"})]}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:t.title}),e.jsx("p",{className:"text-gray-500 text-sm line-clamp-2",children:t.subtitle}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-3 text-xs",children:[e.jsxs("div",{className:"text-purple-600",children:["Link: ",e.jsx("span",{className:"text-gray-900 underline",children:t.link_url})]}),e.jsxs("div",{className:"text-purple-600",children:["Button: ",e.jsx("span",{className:"text-gray-900",children:t.button_text})]})]})]}),e.jsxs("div",{className:"flex flex-row md:flex-col gap-1",children:[e.jsx("button",{onClick:()=>l(t),className:`p-2 rounded transition ${t.is_active?"bg-amber-100 text-amber-600 hover:bg-amber-600 hover:text-white":"bg-green-100 text-green-600 hover:bg-green-600 hover:text-white"}`,children:t.is_active?e.jsx(xt,{className:"w-4 h-4"}):e.jsx(le,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{N(t),u(t),P(!0)},className:"p-2 bg-blue-100 text-blue-600 rounded hover:bg-blue-600 hover:text-white transition",children:e.jsx(we,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>s(a,"up"),disabled:a===0,className:"p-2 bg-gray-100 text-gray-400 rounded hover:bg-gray-900 hover:text-white transition disabled:opacity-30",children:e.jsx(Ut,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>s(a,"down"),disabled:a===M.length-1,className:"p-2 bg-gray-100 text-gray-400 rounded hover:bg-gray-900 hover:text-white transition disabled:opacity-30",children:e.jsx(Vt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>$(t.id),className:"p-2 bg-red-100 text-red-600 rounded hover:bg-red-600 hover:text-white transition",children:e.jsx(Z,{className:"w-4 h-4"})})]})]},t.id))}),D&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl p-6 shadow-xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:g?"Edit Slide":"New Slide"}),e.jsx("button",{onClick:()=>P(!1),className:"p-1 hover:bg-gray-100 rounded transition",children:e.jsx(U,{className:"w-5 h-5 text-gray-400"})})]}),e.jsxs("form",{onSubmit:v,className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Heading Title"}),e.jsx("input",{required:!0,value:i.title,onChange:t=>u({...i,title:t.target.value}),className:"w-full px-2 py-1 bg-gray-50 rounded border border-gray-300 focus:ring-2 focus:ring-purple-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Button Label"}),e.jsx("input",{value:i.button_text,onChange:t=>u({...i,button_text:t.target.value}),className:"w-full px-2 py-1 bg-gray-50 rounded border border-gray-300 focus:ring-2 focus:ring-purple-500 text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Sub-heading Description"}),e.jsx("textarea",{required:!0,value:i.subtitle,onChange:t=>u({...i,subtitle:t.target.value}),className:"w-full px-2 py-1 bg-gray-50 rounded border border-gray-300 focus:ring-2 focus:ring-purple-500 text-sm min-h-[80px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Background Image"}),e.jsxs("div",{className:"space-y-2",children:[i.image_url&&e.jsx("div",{className:"w-full aspect-video rounded overflow-hidden border border-gray-300",children:e.jsx("img",{src:i.image_url,className:"w-full h-full object-cover",alt:"Preview"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:w,disabled:p,className:"hidden",id:"image-upload"}),e.jsxs("label",{htmlFor:"image-upload",className:`inline-flex items-center gap-2 px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-50 transition cursor-pointer text-sm ${p?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx(et,{className:"w-4 h-4"}),p?"Uploading...":"Upload Image"]}),e.jsx("input",{type:"text",value:i.image_url,onChange:t=>u({...i,image_url:t.target.value}),placeholder:"Or paste image URL",className:"flex-1 px-2 py-1 bg-gray-50 rounded border border-gray-300 focus:ring-2 focus:ring-purple-500 text-sm"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Upload an image or paste a URL. Recommended: 1920x600px"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Destination URL Link"}),e.jsx("input",{required:!0,value:i.link_url,onChange:t=>u({...i,link_url:t.target.value}),className:"w-full px-2 py-1 bg-gray-50 rounded border border-gray-300 focus:ring-2 focus:ring-purple-500 text-sm"})]}),e.jsx("button",{type:"submit",className:"w-full bg-gray-900 text-white rounded py-2 font-medium hover:bg-black transition text-sm",children:"Save Slide"})]})]})})]})})}function Qs(){const[M,m]=n.useState([]),[f,T]=n.useState(!0),[D,P]=n.useState(!1),[g,N]=n.useState(!1),[p,x]=n.useState(null),[i,u]=n.useState({});n.useEffect(()=>{y()},[]);const y=async()=>{T(!0);try{const{data:t,error:a}=await _.from("site_settings").select("*");if(a)throw a;m(t||[]);const c={};t==null||t.forEach(j=>{c[j.setting_key]=j.setting_value}),u(c)}catch(t){x({type:"error",text:t.message})}finally{T(!1)}},w=async t=>{t.preventDefault(),P(!0),x(null);try{for(const[a,c]of Object.entries(i)){const{error:j}=await _.from("site_settings").upsert({setting_key:a,setting_value:c,setting_type:a.includes("email")?"email":a.includes("url")||a.includes("logo")?"url":a==="maintenance_mode"?"boolean":"text"},{onConflict:"setting_key"});if(j)throw j}x({type:"success",text:"Settings saved successfully! Changes will take effect immediately."}),y()}catch(a){x({type:"error",text:`Failed to save: ${a.message}`})}finally{P(!1)}},v=async t=>{var c;const a=(c=t.target.files)==null?void 0:c[0];if(a){if(!a.type.startsWith("image/")){x({type:"error",text:"Please upload an image file"});return}if(a.size>2*1024*1024){x({type:"error",text:"Image size must be less than 2MB"});return}N(!0),x(null);try{const j=a.name.split(".").pop(),S=`logo-${Date.now()}.${j}`,o=`logos/${S}`,{error:h}=await _.storage.from("public").upload(o,a,{cacheControl:"3600",upsert:!1});if(h)throw h;const{data:{publicUrl:r}}=_.storage.from("public").getPublicUrl(o);u(F=>({...F,site_logo:r}));const{error:d}=await _.from("site_settings").upsert({setting_key:"site_logo",setting_value:r,setting_type:"image"},{onConflict:"setting_key"});if(d)throw d;await _.from("uploads").insert({file_name:S,file_path:r,file_type:a.type,file_size:a.size,upload_type:"logo"}),x({type:"success",text:"Logo uploaded successfully! It will appear across the site."}),y()}catch(j){x({type:"error",text:`Upload failed: ${j.message}`})}finally{N(!1)}}},$=(t,a)=>{u(c=>({...c,[t]:a}))},l=({title:t,icon:a,children:c})=>e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 overflow-hidden mb-4",children:[e.jsxs("div",{className:"p-3 border-b border-gray-200 flex items-center gap-2 bg-gray-100",children:[e.jsx("div",{className:"p-1 bg-white rounded text-indigo-600",children:e.jsx(a,{className:"w-4 h-4"})}),e.jsx("h3",{className:"text-sm font-bold text-slate-900",children:t})]}),e.jsx("div",{className:"p-3 space-y-3",children:c})]}),s=({label:t,id:a,type:c="text",placeholder:j})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:t}),e.jsx("input",{type:c,id:a,value:i[a]||"",onChange:S=>$(a,S.target.value),placeholder:j,className:"w-full px-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm"})]});return e.jsx(I,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center",children:[e.jsx(Ke,{className:"w-6 h-6 mr-2 text-indigo-600"}),"System Configurations"]}),e.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"Manage site-wide settings and branding"})]}),e.jsxs("button",{onClick:w,disabled:D,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition disabled:opacity-50 text-sm",children:[e.jsx(ae,{className:"w-4 h-4"}),D?"Saving...":"Save All Changes"]})]}),p&&e.jsxs("div",{className:`p-3 rounded flex items-center gap-2 text-sm ${p.type==="success"?"bg-emerald-100 text-emerald-800 border border-emerald-200":"bg-rose-100 text-rose-800 border border-rose-200"}`,children:[e.jsx(Q,{className:"w-4 h-4"}),e.jsx("span",{children:p.text})]}),f?e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsx(l,{title:"Site Branding",icon:ut,children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Site Logo"}),e.jsxs("div",{className:"flex items-center gap-3",children:[i.site_logo&&e.jsx("img",{src:i.site_logo,alt:"Site Logo",className:"h-12 w-auto object-contain bg-white border border-gray-200 rounded p-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:v,disabled:g,className:"hidden",id:"logo-upload"}),e.jsxs("label",{htmlFor:"logo-upload",className:`inline-flex items-center gap-2 px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-50 transition cursor-pointer text-sm ${g?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx(et,{className:"w-4 h-4"}),g?"Uploading...":"Upload New Logo"]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"PNG, JPG or SVG. Max 2MB."})]})]})]})}),e.jsx(l,{title:"General Information",icon:fe,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx(s,{label:"Site Name",id:"site_name",placeholder:"ZimAIO Marketplace"}),e.jsx(s,{label:"Site Tagline",id:"site_tagline",placeholder:"Everything you need, all in one place"}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Footer Text"}),e.jsx("textarea",{value:i.footer_text||"",onChange:t=>$("footer_text",t.target.value),rows:2,className:"w-full px-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm"})]})]})}),e.jsx(l,{title:"Contact & Support",icon:De,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx(s,{label:"Support Email",id:"support_email",type:"email",placeholder:"support@zimaio.com"}),e.jsx(s,{label:"Sales Email",id:"sales_email",type:"email",placeholder:"sales@zimaio.com"}),e.jsx(s,{label:"Contact Phone",id:"contact_phone",placeholder:"+263 77 123 4567"}),e.jsx(s,{label:"Office Address",id:"office_address",placeholder:"123 Samora Machel Ave, Harare"})]})}),e.jsx(l,{title:"Social Media Links",icon:pt,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx(s,{label:"Facebook",id:"facebook_url",placeholder:"https://facebook.com/zimaio"}),e.jsx(s,{label:"Twitter/X",id:"twitter_url",placeholder:"https://twitter.com/zimaio"}),e.jsx(s,{label:"Instagram",id:"instagram_url",placeholder:"https://instagram.com/zimaio"})]})}),e.jsx(l,{title:"Appearance",icon:Gt,children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Default Font"}),e.jsxs("select",{value:i.font_family||"Inter",onChange:t=>$("font_family",t.target.value),className:"w-full px-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm",children:[e.jsx("option",{value:"Inter",children:"Inter (Modern)"}),e.jsx("option",{value:"Poppins",children:"Poppins (Friendly)"}),e.jsx("option",{value:"Montserrat",children:"Montserrat (Geometric)"}),e.jsx("option",{value:"Roboto",children:"Roboto (Clean)"})]})]})})}),e.jsxs(l,{title:"Security & Advanced",icon:ht,children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-slate-900",children:"Maintenance Mode"}),e.jsx("p",{className:"text-xs text-slate-600",children:"Take the platform offline for updates"})]}),e.jsx("button",{type:"button",onClick:()=>$("maintenance_mode",i.maintenance_mode==="true"?"false":"true"),className:`w-12 h-6 rounded-full p-0.5 transition ${i.maintenance_mode==="true"?"bg-rose-500":"bg-gray-300"}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow transition-transform ${i.maintenance_mode==="true"?"translate-x-6":""}`})})]}),e.jsx(s,{label:"Google Analytics ID",id:"ga_id",placeholder:"G-XXXXXXXXXX"})]})]})]})})}function Ys(){const[M,m]=n.useState([]),[f,T]=n.useState(!0),[D,P]=n.useState(""),[g,N]=n.useState("all"),[p,x]=n.useState(!1),[i,u]=n.useState(null),[y,w]=n.useState(null),[v,$]=n.useState({name:"",description:"",promo_type:"coupon",code:"",discount_value:0,discount_type:"percentage",start_date:"",end_date:"",is_active:!0,usage_limit:0,min_purchase_amount:0});n.useEffect(()=>{l()},[]);const l=async()=>{T(!0);try{const{data:o,error:h}=await _.from("promotions").select("*").order("start_date",{ascending:!1});if(h)throw h;m(o||[])}catch(o){w({type:"error",text:o.message})}finally{T(!1)}},s=async o=>{o.preventDefault(),T(!0);try{if(i){const{error:h}=await _.from("promotions").update(v).eq("id",i.id);if(h)throw h;w({type:"success",text:"Promotion updated"})}else{const{error:h}=await _.from("promotions").insert([v]);if(h)throw h;w({type:"success",text:"Promotion created"})}l(),j()}catch(h){w({type:"error",text:h.message})}finally{T(!1)}},t=o=>{u(o),$({name:o.name,description:o.description,promo_type:o.promo_type,code:o.code||"",discount_value:o.discount_value,discount_type:o.discount_type,start_date:o.start_date.split("T")[0],end_date:o.end_date.split("T")[0],is_active:o.is_active,usage_limit:o.usage_limit||0,min_purchase_amount:o.min_purchase_amount}),x(!0)},a=async o=>{if(confirm("Delete this promotion?"))try{const{error:h}=await _.from("promotions").delete().eq("id",o);if(h)throw h;w({type:"success",text:"Promotion deleted"}),l()}catch(h){w({type:"error",text:h.message})}},c=async o=>{try{const{error:h}=await _.from("promotions").update({is_active:!o.is_active}).eq("id",o.id);if(h)throw h;l()}catch(h){w({type:"error",text:h.message})}},j=()=>{x(!1),u(null),$({name:"",description:"",promo_type:"coupon",code:"",discount_value:0,discount_type:"percentage",start_date:"",end_date:"",is_active:!0,usage_limit:0,min_purchase_amount:0})},S=M.filter(o=>{var d;const h=o.name.toLowerCase().includes(D.toLowerCase())||((d=o.code)==null?void 0:d.toLowerCase().includes(D.toLowerCase())),r=g==="all"||o.promo_type===g;return h&&r});return e.jsx(I,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center",children:[e.jsx(Je,{className:"w-6 h-6 mr-2 text-indigo-600"}),"Promotion Management"]}),e.jsx("p",{className:"text-slate-600 mt-1 text-sm",children:"Create and manage discount codes and campaigns"})]}),e.jsxs("button",{onClick:()=>x(!0),className:"flex items-center px-3 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition text-sm",children:[e.jsx(re,{className:"w-4 h-4 mr-1"}),"Add"]})]}),y&&e.jsxs("div",{className:`p-2 rounded flex items-center gap-2 text-sm ${y.type==="success"?"bg-emerald-100 text-emerald-800":"bg-rose-100 text-rose-800"}`,children:[e.jsx(Q,{className:"w-4 h-4"}),e.jsx("span",{children:y.text}),e.jsx("button",{onClick:()=>w(null),children:e.jsx(U,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(Be,{className:"w-5 h-5 text-indigo-600"})}),e.jsx("p",{className:"text-xs text-slate-600 uppercase",children:"Total"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:M.length})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(ie,{className:"w-5 h-5 text-emerald-600"})}),e.jsx("p",{className:"text-xs text-slate-600 uppercase",children:"Active"}),e.jsx("h2",{className:"text-2xl font-bold text-emerald-600",children:M.filter(o=>o.is_active).length})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(ue,{className:"w-5 h-5 text-amber-600"})}),e.jsx("p",{className:"text-xs text-slate-600 uppercase",children:"Usages"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:M.reduce((o,h)=>o+h.usage_count,0)})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(de,{className:"w-5 h-5 text-rose-600"})}),e.jsx("p",{className:"text-xs text-slate-600 uppercase",children:"Expiring"}),e.jsx("h2",{className:"text-2xl font-bold text-rose-600",children:M.filter(o=>{const h=(new Date(o.end_date).getTime()-new Date().getTime())/864e5;return h>0&&h<7}).length})]})]}),e.jsx("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(me,{className:"absolute left-2 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search...",value:D,onChange:o=>P(o.target.value),className:"w-full pl-8 pr-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"w-4 h-4 text-slate-400"}),e.jsxs("select",{value:g,onChange:o=>N(o.target.value),className:"px-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"coupon",children:"Coupons"}),e.jsx("option",{value:"flash_sale",children:"Flash Sales"}),e.jsx("option",{value:"banner",children:"Banners"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[f?Array.from({length:3}).map((o,h)=>e.jsx("div",{className:"bg-gray-50 h-48 rounded animate-pulse border border-gray-200"},h)):S.map(o=>e.jsxs("div",{className:"bg-gray-50 rounded border border-gray-200 overflow-hidden hover:shadow-md transition",children:[e.jsx("div",{className:`h-2 ${o.is_active?"bg-indigo-600":"bg-gray-400"}`}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"flex justify-between items-start mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${o.promo_type==="coupon"?"bg-indigo-100 text-indigo-700":o.promo_type==="flash_sale"?"bg-rose-100 text-rose-700":"bg-emerald-100 text-emerald-700"}`,children:o.promo_type.replace("_"," ")}),o.is_active&&e.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 bg-emerald-100 text-emerald-700 rounded-full text-xs",children:[e.jsx("div",{className:"w-1 h-1 bg-emerald-500 rounded-full animate-pulse"}),"Live"]})]}),e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:o.name})]})}),e.jsxs("div",{className:"p-2 rounded bg-indigo-50 mb-3 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-slate-600",children:"Discount"}),e.jsx("p",{className:"text-xl font-bold text-slate-900",children:o.discount_type==="percentage"?`${o.discount_value}%`:`$${o.discount_value}`})]}),o.code&&e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"Code"}),e.jsx("p",{className:"text-sm font-bold font-mono text-indigo-600 bg-white px-2 py-1 rounded",children:o.code})]})]}),e.jsxs("div",{className:"space-y-2 mb-4 text-xs",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[e.jsx(Ye,{className:"w-3 h-3"}),e.jsx("span",{children:"Validity"})]}),e.jsxs("span",{className:"font-medium text-slate-900",children:[new Date(o.start_date).toLocaleDateString()," - ",new Date(o.end_date).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[e.jsx(ue,{className:"w-3 h-3"}),e.jsx("span",{children:"Usage"})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsxs("span",{className:"font-medium text-slate-900",children:[o.usage_count," / ",o.usage_limit||"âˆž"]}),e.jsx("div",{className:"w-24 h-1 bg-gray-200 rounded-full mt-1 overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-600",style:{width:`${Math.min(100,o.usage_count/(o.usage_limit||100)*100)}%`}})})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>t(o),className:"flex-1 flex items-center justify-center gap-1 py-1 bg-indigo-100 hover:bg-indigo-600 hover:text-white text-indigo-600 rounded transition text-sm",children:[e.jsx(J,{className:"w-3 h-3"}),"Edit"]}),e.jsx("button",{onClick:()=>c(o),className:`p-1 rounded transition ${o.is_active?"bg-rose-100 text-rose-600 hover:bg-rose-600 hover:text-white":"bg-emerald-100 text-emerald-600 hover:bg-emerald-600 hover:text-white"}`,children:o.is_active?e.jsx(Ae,{className:"w-4 h-4"}):e.jsx(ie,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>a(o.id),className:"p-1 bg-gray-100 text-gray-400 hover:bg-rose-600 hover:text-white rounded transition",children:e.jsx(Z,{className:"w-4 h-4"})})]})]})]},o.id)),!f&&S.length===0&&e.jsxs("div",{className:"col-span-full py-12 bg-gray-50 rounded border-2 border-dashed border-gray-200 flex flex-col items-center text-center",children:[e.jsx(Be,{className:"w-12 h-12 text-gray-300 mb-3"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"No Promotions Found"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Try adjusting filters or create a new campaign"})]})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between bg-indigo-600 text-white",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:i?"Edit Campaign":"New Campaign"}),e.jsx("p",{className:"text-xs text-white/70",children:"Configure promotion details"})]}),e.jsx("button",{onClick:j,className:"p-1 hover:bg-white/20 rounded transition",children:e.jsx(U,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsxs("form",{onSubmit:s,className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Campaign Name *"}),e.jsx("input",{type:"text",required:!0,value:v.name,onChange:o=>$({...v,name:o.target.value}),className:"w-full px-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm",placeholder:"Summer Sale 2026"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Type"}),e.jsxs("select",{value:v.promo_type,onChange:o=>$({...v,promo_type:o.target.value}),className:"w-full px-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm",children:[e.jsx("option",{value:"coupon",children:"Coupon Code"}),e.jsx("option",{value:"flash_sale",children:"Flash Sale"}),e.jsx("option",{value:"banner",children:"Banner Promo"})]})]}),v.promo_type==="coupon"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Code *"}),e.jsx("input",{type:"text",required:!0,value:v.code,onChange:o=>$({...v,code:o.target.value.toUpperCase()}),className:"w-full px-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm uppercase font-mono",placeholder:"SUMMER50"})]}),e.jsxs("div",{className:"p-3 bg-slate-50 rounded md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Discount Value *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",step:"0.01",required:!0,value:v.discount_value,onChange:o=>$({...v,discount_value:parseFloat(o.target.value)}),className:"flex-1 px-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm"}),e.jsxs("select",{value:v.discount_type,onChange:o=>$({...v,discount_type:o.target.value}),className:"px-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm",children:[e.jsx("option",{value:"percentage",children:"%"}),e.jsx("option",{value:"fixed",children:"$"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Min Purchase"}),e.jsx("input",{type:"number",value:v.min_purchase_amount,onChange:o=>$({...v,min_purchase_amount:parseFloat(o.target.value)}),className:"w-full px-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Start Date *"}),e.jsx("input",{type:"date",required:!0,value:v.start_date,onChange:o=>$({...v,start_date:o.target.value}),className:"w-full px-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"End Date *"}),e.jsx("input",{type:"date",required:!0,value:v.end_date,onChange:o=>$({...v,end_date:o.target.value}),className:"w-full px-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Usage Limit (0 for âˆž)"}),e.jsx("input",{type:"number",value:v.usage_limit,onChange:o=>$({...v,usage_limit:parseInt(o.target.value)}),className:"w-full px-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm"})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("button",{type:"button",onClick:()=>$({...v,is_active:!v.is_active}),className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-10 h-5 rounded-full p-0.5 transition ${v.is_active?"bg-emerald-500":"bg-gray-300"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow transition-transform ${v.is_active?"translate-x-5":""}`})}),e.jsx("span",{className:"text-sm font-medium text-slate-900",children:"Active"})]})})]}),e.jsx("div",{className:"pt-3 border-t border-gray-200 flex justify-end",children:e.jsx("button",{type:"submit",disabled:f,className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition disabled:opacity-50 text-sm",children:f?"Processing...":i?"Save Changes":"Create Promotion"})})]})})]})})]})})}function ea(){var x,i;const{formatPrice:M}=he(),[m,f]=n.useState([]),[T,D]=n.useState(!0),[P,g]=n.useState("");n.useEffect(()=>{N()},[]);const N=async()=>{D(!0);try{const{data:u,error:y}=await _.from("vendor_profiles").select("id, shop_name, user_id");if(y)throw y;if(u){const w=u.map(async $=>{const{data:l}=await _.from("orders").select("total_amount, created_at").eq("vendor_id",$.id).eq("status","completed"),{data:s}=await _.from("products").select("id").eq("vendor_id",$.id).eq("is_active",!0),{data:t}=await _.from("product_reviews").select("rating").in("product_id",(s==null?void 0:s.map(R=>R.id))||[]),a=(l==null?void 0:l.reduce((R,b)=>R+(b.total_amount||0),0))||0,c=(l==null?void 0:l.length)||0,j=t!=null&&t.length?t.reduce((R,b)=>R+b.rating,0)/t.length:0,S=new Date;S.setDate(S.getDate()-30);const o=new Date;o.setDate(o.getDate()-60);const h=(l==null?void 0:l.filter(R=>new Date(R.created_at)>=S))||[],r=(l==null?void 0:l.filter(R=>{const b=new Date(R.created_at);return b>=o&&b<S}))||[],d=h.reduce((R,b)=>R+(b.total_amount||0),0),F=r.reduce((R,b)=>R+(b.total_amount||0),0),E=F>0?(d-F)/F*100:0;return{vendor_id:$.id,shop_name:$.shop_name,total_sales:a,total_orders:c,rating:j,product_count:(s==null?void 0:s.length)||0,growth:E}}),v=await Promise.all(w);f(v)}}catch(u){console.error("Error fetching vendor analytics:",u)}finally{D(!1)}},p=m.filter(u=>u.shop_name.toLowerCase().includes(P.toLowerCase())).sort((u,y)=>y.total_sales-u.total_sales);return e.jsx(I,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(dt,{className:"w-6 h-6 mr-2 text-violet-600"}),"Vendor Performance Analytics"]}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Track vendor performance, revenue trends, and growth metrics"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[e.jsx("p",{className:"text-xs text-slate-600 uppercase mb-1",children:"Top Revenue"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 truncate",children:((x=p[0])==null?void 0:x.shop_name)||"N/A"}),e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[e.jsx("span",{className:"text-xl font-bold text-violet-600",children:M(((i=p[0])==null?void 0:i.total_sales)||0)}),e.jsxs("span",{className:"text-xs text-emerald-500 flex items-center",children:[e.jsx(pe,{className:"w-3 h-3"})," 24%"]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[e.jsx("p",{className:"text-xs text-slate-600 uppercase mb-1",children:"Avg. Rating"}),e.jsxs("h3",{className:"text-lg font-bold text-slate-900",children:[(m.reduce((u,y)=>u+y.rating,0)/(m.length||1)).toFixed(1)," / 5.0"]}),e.jsx("div",{className:"flex gap-0.5 mt-2",children:Array.from({length:5}).map((u,y)=>e.jsx(bt,{className:`w-4 h-4 ${y<4?"fill-amber-400 text-amber-400":"text-gray-300"}`},y))})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[e.jsx("p",{className:"text-xs text-slate-600 uppercase mb-1",children:"Active Products"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:m.reduce((u,y)=>u+y.product_count,0)}),e.jsx("div",{className:"mt-2 h-1.5 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-violet-600 rounded-full w-[65%]"})})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[e.jsx("p",{className:"text-xs text-slate-600 uppercase mb-1",children:"Growth Index"}),e.jsx("h3",{className:"text-lg font-bold text-emerald-500",children:"+18.4%"}),e.jsxs("div",{className:"mt-2 flex items-center gap-1",children:[e.jsx(ue,{className:"w-4 h-4 text-amber-400 fill-amber-400"}),e.jsx("span",{className:"text-xs text-slate-600",children:"Outstanding"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Performance Ranking"}),e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search...",value:P,onChange:u=>g(u.target.value),className:"pl-8 pr-2 py-1 rounded border border-gray-300 text-sm focus:ring-2 focus:ring-violet-500 bg-white"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 bg-gray-100",children:[e.jsx("th",{className:"px-4 py-2 text-xs font-medium text-slate-600 uppercase",children:"Rank"}),e.jsx("th",{className:"px-4 py-2 text-xs font-medium text-slate-600 uppercase",children:"Vendor"}),e.jsx("th",{className:"px-4 py-2 text-xs font-medium text-slate-600 uppercase",children:"Sales"}),e.jsx("th",{className:"px-4 py-2 text-xs font-medium text-slate-600 uppercase",children:"Orders"}),e.jsx("th",{className:"px-4 py-2 text-xs font-medium text-slate-600 uppercase",children:"Growth"}),e.jsx("th",{className:"px-4 py-2 text-xs font-medium text-slate-600 uppercase text-right",children:"Score"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:T?Array.from({length:5}).map((u,y)=>e.jsx("tr",{className:"animate-pulse",children:e.jsx("td",{colSpan:6,className:"px-4 py-3",children:e.jsx("div",{className:"h-6 bg-gray-100 rounded w-full"})})},y)):p.map((u,y)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsxs("td",{className:"px-4 py-3 font-bold text-violet-600 text-sm",children:["#",y+1]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded bg-violet-100 flex items-center justify-center text-violet-600",children:e.jsx(He,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-slate-900",children:u.shop_name}),e.jsxs("p",{className:"text-xs text-slate-600",children:[u.product_count," Products"]})]})]})}),e.jsx("td",{className:"px-4 py-3 font-bold text-sm",children:M(u.total_sales)}),e.jsx("td",{className:"px-4 py-3 font-medium text-sm",children:u.total_orders}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:`flex items-center gap-0.5 text-xs font-bold ${u.growth>=0?"text-emerald-500":"text-rose-500"}`,children:[u.growth>=0?e.jsx(pe,{className:"w-3 h-3"}):e.jsx(Ze,{className:"w-3 h-3"}),Math.abs(u.growth).toFixed(1),"%"]})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("div",{className:"inline-flex items-center justify-center px-2 py-1 rounded bg-violet-100 text-violet-600 font-bold text-xs",children:(u.total_sales/1e3+u.rating).toFixed(1)})})]},u.vendor_id))})]})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-3",children:"Top Performers"}),e.jsx("div",{className:"space-y-3",children:p.slice(0,3).map((u,y)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded bg-white border border-gray-200",children:[e.jsx("div",{className:"w-10 h-10 rounded bg-violet-100 flex items-center justify-center font-bold text-violet-600",children:y+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-900 truncate",children:u.shop_name}),e.jsx("p",{className:"text-xs text-slate-600",children:"Elite Badge"})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-xs font-bold text-violet-600",children:M(u.total_sales)})})]},u.vendor_id))}),e.jsx("button",{className:"w-full mt-3 py-2 bg-violet-100 text-violet-600 rounded font-medium text-xs hover:bg-violet-600 hover:text-white transition",children:"View Full Report"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-gradient-to-br from-violet-600 to-indigo-700 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ue,{className:"w-5 h-5 fill-amber-400 text-amber-400"}),e.jsx("h3",{className:"text-lg font-bold",children:"System Insight"})]}),e.jsxs("p",{className:"text-sm leading-relaxed opacity-90",children:["Total platform revenue is up ",e.jsx("span",{className:"font-bold text-amber-400",children:"12.4%"})," since last week. Electronics remains the top category."]}),e.jsxs("div",{className:"mt-4 p-3 bg-white/10 rounded border border-white/10",children:[e.jsx("span",{className:"text-xs uppercase opacity-70",children:"Projected Growth"}),e.jsxs("div",{className:"flex items-end gap-1 mt-1",children:[e.jsx("span",{className:"text-2xl font-bold",children:"+22%"}),e.jsx("span",{className:"text-xs opacity-70 pb-0.5",children:"by next quarter"})]})]})]})]})]})]})})}function ta(){var y,w,v,$;const[M,m]=n.useState([]),[f,T]=n.useState(!0),[D,P]=n.useState("all"),[g,N]=n.useState(null);n.useEffect(()=>{p()},[D]);const p=async()=>{T(!0);try{let l=_.from("fraud_alerts").select("*, profiles(full_name, email)");D!=="all"&&(l=l.eq("status",D));const{data:s,error:t}=await l.order("created_at",{ascending:!1});if(t)throw t;m(s||[])}catch(l){console.error("Error fetching fraud alerts:",l)}finally{T(!1)}},x=async(l,s)=>{try{const{error:t}=await _.from("fraud_alerts").update({status:s}).eq("id",l);if(t)throw t;p(),N(null)}catch(t){alert("Error: "+t.message)}},i=l=>l>=80?"text-rose-600":l>=50?"text-amber-600":"text-emerald-600",u=l=>l>=80?"bg-rose-100":l>=50?"bg-amber-100":"bg-emerald-100";return e.jsx(I,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(Ie,{className:"w-6 h-6 mr-2 text-rose-600"}),"Fraud & Risk Detection"]}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Monitor suspicious activities and protect the marketplace"})]}),e.jsxs("div",{className:"px-3 py-1 rounded bg-gray-50 border border-gray-200 flex items-center gap-2",children:[e.jsx(Nt,{className:"w-4 h-4 text-emerald-500"}),e.jsxs("span",{className:"text-xs font-medium text-slate-600",children:["Status: ",e.jsx("span",{className:"text-emerald-500",children:"Secure"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Pe,{className:"w-5 h-5 text-indigo-600"}),e.jsx(pe,{className:"w-4 h-4 text-emerald-500"})]}),e.jsx("p",{className:"text-xs text-slate-600 uppercase",children:"Total Scanned"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"14,208"})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Re,{className:"w-5 h-5 text-rose-600"}),e.jsx(Ze,{className:"w-4 h-4 text-rose-500"})]}),e.jsx("p",{className:"text-xs text-slate-600 uppercase",children:"High Risk"}),e.jsx("h2",{className:"text-2xl font-bold text-rose-600",children:M.filter(l=>l.risk_score>80).length})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(qt,{className:"w-5 h-5 text-amber-600"}),e.jsx("span",{className:"text-xs font-medium text-amber-500",children:"+12%"})]}),e.jsx("p",{className:"text-xs text-slate-600 uppercase",children:"Pending"}),e.jsx("h2",{className:"text-2xl font-bold text-amber-600",children:M.filter(l=>l.status==="pending").length})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Le,{className:"w-5 h-5 text-emerald-600"}),e.jsx("span",{className:"text-xs font-medium text-emerald-500",children:"100%"})]}),e.jsx("p",{className:"text-xs text-slate-600 uppercase",children:"Resolved"}),e.jsx("h2",{className:"text-2xl font-bold text-emerald-600",children:M.filter(l=>l.status==="resolved").length})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-3",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(me,{className:"w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search by user or reason...",className:"bg-transparent border-none focus:ring-0 w-full text-sm"})]}),e.jsxs("select",{value:D,onChange:l=>P(l.target.value),className:"bg-transparent border-none focus:ring-0 text-xs font-medium text-slate-600",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"resolved",children:"Resolved"}),e.jsx("option",{value:"dismissed",children:"Dismissed"})]})]}),e.jsxs("div",{className:"space-y-3",children:[f?Array.from({length:3}).map((l,s)=>e.jsx("div",{className:"bg-gray-50 h-24 rounded animate-pulse border border-gray-200"},s)):M.map(l=>{var s,t;return e.jsxs("div",{onClick:()=>N(l),className:"bg-gray-50 p-4 rounded border border-gray-200 hover:shadow-md transition cursor-pointer flex items-center gap-4",children:[e.jsxs("div",{className:`w-12 h-12 rounded flex flex-col items-center justify-center shrink-0 ${u(l.risk_score)}`,children:[e.jsx("span",{className:`text-lg font-bold ${i(l.risk_score)}`,children:l.risk_score}),e.jsx("span",{className:`text-xs ${i(l.risk_score)}`,children:"Risk"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-900",children:(s=l.profiles)==null?void 0:s.full_name}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${l.status==="pending"?"bg-amber-100 text-amber-700":l.status==="resolved"?"bg-emerald-100 text-emerald-700":"bg-gray-100 text-gray-700"}`,children:l.status})]}),e.jsx("p",{className:"text-xs text-slate-600 line-clamp-1",children:l.reason}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsxs("span",{className:"text-xs text-slate-500 flex items-center gap-1",children:[e.jsx(de,{className:"w-3 h-3"})," ",new Date(l.created_at).toLocaleString()]}),e.jsxs("span",{className:"text-xs text-slate-500 flex items-center gap-1",children:[e.jsx(We,{className:"w-3 h-3"})," ",((t=l.metadata)==null?void 0:t.ip)||"Unknown IP"]})]})]}),e.jsx(le,{className:"w-5 h-5 text-indigo-600 opacity-0 group-hover:opacity-100"})]},l.id)}),!f&&M.length===0&&e.jsxs("div",{className:"py-12 text-center flex flex-col items-center",children:[e.jsx("div",{className:"p-4 bg-emerald-100 rounded mb-3",children:e.jsx(Le,{className:"w-10 h-10 text-emerald-600"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"No Security Threats"}),e.jsx("p",{className:"text-sm text-slate-600",children:"All systems operating normally"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-gradient-to-br from-indigo-600 to-violet-700 text-white",children:[e.jsx("h3",{className:"text-lg font-bold mb-3",children:"Quick Security Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{className:"w-full py-2 bg-white/10 hover:bg-white/20 rounded font-medium text-xs transition flex items-center justify-center gap-2",children:[e.jsx(kt,{className:"w-4 h-4"})," Global IP Block"]}),e.jsxs("button",{className:"w-full py-2 bg-white/10 hover:bg-white/20 rounded font-medium text-xs transition flex items-center justify-center gap-2",children:[e.jsx(ft,{className:"w-4 h-4"})," Multi-Ban Users"]}),e.jsxs("button",{className:"w-full py-2 bg-white/10 hover:bg-white/20 rounded font-medium text-xs transition flex items-center justify-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4"})," Purge Risk Orders"]})]})]}),g?e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Alert Details"}),e.jsx("button",{onClick:()=>N(null),children:e.jsx(U,{className:"w-5 h-5 text-gray-400"})})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`w-12 h-12 rounded flex items-center justify-center ${u(g.risk_score)}`,children:e.jsx("span",{className:`text-lg font-bold ${i(g.risk_score)}`,children:g.risk_score})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-slate-900",children:(y=g.profiles)==null?void 0:y.full_name}),e.jsx("p",{className:"text-xs text-slate-600",children:(w=g.profiles)==null?void 0:w.email})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-white rounded border border-gray-200",children:[e.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Risk Analysis"}),e.jsx("p",{className:"text-sm font-medium text-slate-900 mt-1",children:g.reason})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"p-2 bg-white rounded border border-gray-200",children:[e.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Device"}),e.jsx("p",{className:"text-xs font-bold text-slate-900 mt-1",children:((v=g.metadata)==null?void 0:v.device)||"Mobile"})]}),e.jsxs("div",{className:"p-2 bg-white rounded border border-gray-200",children:[e.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Browser"}),e.jsx("p",{className:"text-xs font-bold text-slate-900 mt-1",children:(($=g.metadata)==null?void 0:$.browser)||"Chrome"})]})]}),e.jsxs("div",{className:"pt-3 border-t border-gray-200 flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>x(g.id,"resolved"),className:"w-full py-2 bg-emerald-600 text-white rounded font-medium text-xs hover:bg-emerald-700 transition",children:"Mark as Safe"}),e.jsx("button",{onClick:()=>x(g.id,"dismissed"),className:"w-full py-2 bg-gray-200 text-gray-600 rounded font-medium text-xs hover:bg-gray-300 transition",children:"Dismiss Alert"}),e.jsx("button",{className:"w-full py-2 bg-rose-600 text-white rounded font-medium text-xs hover:bg-rose-700 transition",children:"Ban Account"})]})]})]}):e.jsxs("div",{className:"bg-gray-50 p-8 rounded-lg border-2 border-dashed border-gray-200 flex flex-col items-center text-center opacity-50",children:[e.jsx(Ie,{className:"w-10 h-10 text-gray-300 mb-2"}),e.jsxs("p",{className:"text-xs font-medium text-slate-600",children:["Select an alert",e.jsx("br",{}),"to view details"]})]})]})]})]})})}function sa(){const{theme:M}=ee(),m=M==="dark",[f,T]=n.useState([]),[D,P]=n.useState([]),[g,N]=n.useState(!0),[p,x]=n.useState("categories"),[i,u]=n.useState(!1),[y,w]=n.useState(null),[v,$]=n.useState(null),[l,s]=n.useState({name:"",slug:"",description:"",parent_id:"",image_url:"",is_active:!0,sort_order:0}),t=m?"text-gray-100":"text-gray-900",a=m?"text-gray-400":"text-gray-600",c=m?"border-gray-700":"border-gray-200";n.useEffect(()=>{j()},[p]);const j=async()=>{N(!0);try{if(p==="categories"){const{data:d,error:F}=await _.from("categories").select("*").order("sort_order",{ascending:!0});if(F)throw F;T(d||[])}else{const{data:d,error:F}=await _.from("brands").select("*").order("name",{ascending:!0});if(F)throw F;P(d||[])}}catch(d){$({type:"error",text:d.message})}finally{N(!1)}},S=async d=>{d.preventDefault(),N(!0);const F=p==="categories"?"categories":"brands";try{if(y){const{error:E}=await _.from(F).update(l).eq("id",y.id);if(E)throw E;$({type:"success",text:"Catalog item updated successfully"})}else{const{error:E}=await _.from(F).insert([l]);if(E)throw E;$({type:"success",text:"Catalog item created successfully"})}j(),r()}catch(E){$({type:"error",text:E.message})}finally{N(!1)}},o=d=>{w(d),s(d),u(!0)},h=async d=>{if(!confirm("Are you sure you want to delete this item?"))return;const F=p==="categories"?"categories":"brands";try{const{error:E}=await _.from(F).delete().eq("id",d);if(E)throw E;$({type:"success",text:"Item deleted successfully"}),j()}catch(E){$({type:"error",text:E.message})}},r=()=>{u(!1),w(null),s({name:"",slug:"",description:"",parent_id:"",image_url:"",is_active:!0,sort_order:0})};return e.jsxs(I,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-xl font-bold ${t} mb-1`,children:"Catalog Management"}),e.jsx("p",{className:`text-sm ${a}`,children:"Manage product categories and brands to organize your marketplace."})]}),e.jsxs("button",{onClick:()=>u(!0),className:`px-4 py-2 border ${c} ${t} rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition text-sm font-medium`,children:["Add ",p==="categories"?"Category":"Brand"]})]})}),e.jsxs("div",{className:"flex gap-2 mb-6 border-b ${borderColor}",children:[e.jsx("button",{onClick:()=>x("categories"),className:`px-4 py-2 font-medium text-sm transition-all ${p==="categories"?`${t} border-b-2 border-gray-900 dark:border-white`:`${a} hover:${t}`}`,children:"Categories"}),e.jsx("button",{onClick:()=>x("brands"),className:`px-4 py-2 font-medium text-sm transition-all ${p==="brands"?`${t} border-b-2 border-gray-900 dark:border-white`:`${a} hover:${t}`}`,children:"Brands"})]}),v&&e.jsxs("div",{className:`mb-6 p-4 rounded-2xl flex items-center gap-3 animate-in fade-in slide-in-from-top-4 ${v.type==="success"?"bg-emerald-50 border border-emerald-200 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400":"bg-rose-50 border border-rose-200 text-rose-800 dark:bg-rose-900/20 dark:text-rose-400"}`,children:[e.jsx(Q,{className:"h-5 w-5 shrink-0"}),e.jsx("span",{className:"font-bold flex-1",children:v.text}),e.jsx("button",{onClick:()=>$(null),children:e.jsx(U,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"rounded border border-gray-200 overflow-hidden bg-white",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-xs font-medium text-gray-900 border-r border-gray-200",children:p==="categories"?"Image":"Logo"}),e.jsx("th",{className:"px-3 py-2 text-xs font-medium text-gray-900 border-r border-gray-200",children:"Name"}),p==="categories"&&e.jsx("th",{className:"px-3 py-2 text-xs font-medium text-gray-900 border-r border-gray-200",children:"Description"}),e.jsx("th",{className:"px-3 py-2 text-xs font-medium text-gray-900 border-r border-gray-200",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-xs font-medium text-gray-900 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 bg-white",children:g?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:"Loading..."})}):p==="categories"?f.map(d=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-3 py-2 border-r border-gray-200 w-12",children:e.jsx("div",{className:"w-8 h-8 rounded bg-gray-50 overflow-hidden flex items-center justify-center border border-gray-200",children:d.image_url?e.jsx("img",{src:d.image_url,alt:d.name,className:"w-full h-full object-cover"}):e.jsx(it,{className:"h-4 w-4 text-gray-400"})})}),e.jsxs("td",{className:"px-3 py-2 border-r border-gray-200",children:[e.jsx("div",{className:"text-xs font-bold text-gray-900",children:d.name}),e.jsx("div",{className:"text-xs text-gray-500",children:d.slug})]}),e.jsx("td",{className:"px-3 py-2 border-r border-gray-200 max-w-xs truncate text-xs text-gray-600",children:d.description||"-"}),e.jsx("td",{className:"px-3 py-2 border-r border-gray-200",children:e.jsx("span",{className:"px-2 py-0.5 rounded bg-gray-100 text-gray-900 border border-gray-200 text-xs",children:d.is_active?"Active":"Hidden"})}),e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("button",{onClick:()=>o(d),className:"px-2 py-1 bg-white border border-gray-200 hover:bg-gray-50 text-gray-600 rounded text-xs",children:"Edit"}),e.jsx("button",{onClick:()=>h(d.id),className:"px-2 py-1 text-gray-600 border border-gray-200 hover:bg-gray-50 rounded text-xs",children:e.jsx(Z,{className:"h-3 w-3"})})]})})]},d.id)):D.map(d=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-3 py-2 border-r border-gray-200 w-12",children:e.jsx("div",{className:"w-8 h-8 rounded bg-gray-50 overflow-hidden flex items-center justify-center border border-gray-200",children:d.logo_url?e.jsx("img",{src:d.logo_url,alt:d.name,className:"w-full h-full object-contain"}):e.jsx(Je,{className:"h-4 w-4 text-gray-400"})})}),e.jsxs("td",{className:"px-3 py-2 border-r border-gray-200",children:[e.jsx("div",{className:"text-xs font-bold text-gray-900",children:d.name}),e.jsx("div",{className:"text-xs text-gray-500",children:d.slug})]}),e.jsx("td",{className:"px-3 py-2 border-r border-gray-200",children:e.jsx("span",{className:"px-2 py-0.5 rounded bg-gray-100 text-gray-900 border border-gray-200 text-xs",children:d.is_active?"Active":"Hidden"})}),e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("button",{onClick:()=>o(d),className:"px-2 py-1 bg-white border border-gray-200 hover:bg-gray-50 text-gray-600 rounded text-xs",children:"Edit"}),e.jsx("button",{onClick:()=>h(d.id),className:"px-2 py-1 text-gray-600 border border-gray-200 hover:bg-gray-50 rounded text-xs",children:e.jsx(Z,{className:"h-3 w-3"})})]})})]},d.id))})]})}),i&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded shadow-lg max-w-lg w-full max-h-[90vh] overflow-hidden flex flex-col border border-gray-200",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between bg-white",children:[e.jsx("div",{children:e.jsxs("h2",{className:"text-sm font-bold text-gray-900",children:[y?"Edit ":"New ",p==="categories"?"Category":"Brand"]})}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded transition",children:e.jsx(U,{className:"h-4 w-4 text-gray-500"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-[10px] font-black uppercase tracking-widest ${a} mb-1`,children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:l.name,onChange:d=>s({...l,name:d.target.value}),className:`w-full px-3 py-2 text-xs rounded-lg border ${c} focus:outline-none focus:ring-2 focus:ring-slate-900/10 ${m?"bg-gray-700 text-gray-100":"bg-white text-slate-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-[10px] font-black uppercase tracking-widest ${a} mb-1`,children:"Slug *"}),e.jsx("input",{type:"text",required:!0,value:l.slug,onChange:d=>s({...l,slug:d.target.value.toLowerCase().replace(/ /g,"-")}),className:`w-full px-3 py-2 text-xs rounded-lg border ${c} focus:outline-none focus:ring-2 focus:ring-slate-900/10 ${m?"bg-gray-700 text-gray-100":"bg-white text-slate-900"}`})]}),p==="categories"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-[10px] font-black uppercase tracking-widest ${a} mb-1`,children:"Description"}),e.jsx("textarea",{value:l.description,onChange:d=>s({...l,description:d.target.value}),rows:2,className:`w-full px-3 py-2 text-xs rounded-lg border ${c} focus:outline-none focus:ring-2 focus:ring-slate-900/10 ${m?"bg-gray-700 text-gray-100":"bg-white text-slate-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-[10px] font-black uppercase tracking-widest ${a} mb-1`,children:"Sort Order"}),e.jsx("input",{type:"number",value:l.sort_order,onChange:d=>s({...l,sort_order:parseInt(d.target.value)}),className:`w-full px-3 py-2 text-xs rounded-lg border ${c} focus:outline-none focus:ring-2 focus:ring-slate-900/10 ${m?"bg-gray-700 text-gray-100":"bg-white text-slate-900"}`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-[10px] font-black uppercase tracking-widest ${a} mb-1`,children:p==="categories"?"Image URL":"Logo URL"}),e.jsx("input",{type:"text",value:l.image_url||l.logo_url,onChange:d=>s({...l,[p==="categories"?"image_url":"logo_url"]:d.target.value}),className:`w-full px-3 py-2 text-xs rounded-lg border ${c} focus:outline-none focus:ring-2 focus:ring-slate-900/10 ${m?"bg-gray-700 text-gray-100":"bg-white text-slate-900"}`,placeholder:"URL here"})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("button",{type:"button",onClick:()=>s({...l,is_active:!l.is_active}),className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-6 bg-slate-200 dark:bg-slate-700 rounded-full relative transition-colors ${l.is_active?"bg-emerald-500":""}`,children:e.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${l.is_active?"translate-x-4":""}`})}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-900 dark:text-white",children:"Active"})]})}),e.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-700 flex justify-end",children:e.jsx("button",{type:"submit",className:"px-6 py-2 bg-slate-900 dark:bg-slate-100 text-white dark:text-slate-900 rounded-xl font-black uppercase tracking-widest text-[10px] hover:bg-slate-800 transition-all",children:"Save"})})]})})]})})]})}function aa(){const{theme:M}=ee(),m=M==="dark",[f,T]=n.useState([]),[D,P]=n.useState([]),[g,N]=n.useState(!0),[p,x]=n.useState("list"),[i,u]=n.useState(null),[y,w]=n.useState(null),[v,$]=n.useState("all"),[l,s]=n.useState("all"),[t,a]=n.useState("all"),[c,j]=n.useState(""),[S,o]=n.useState(""),[h,r]=n.useState(""),[d,F]=n.useState([]),E=m?"bg-gray-800":"bg-white",R=m?"text-gray-100":"text-gray-900",b=m?"text-gray-400":"text-gray-600",A=m?"border-gray-700":"border-gray-200";n.useEffect(()=>{L()},[]),n.useEffect(()=>{V()},[f,v,l,t,c,S,h]);const L=async()=>{try{const[C,O]=await Promise.all([_.from("products").select(`
            *,
            vendor:vendor_profiles(shop_name, user_id)
          `).order("created_at",{ascending:!1}),_.from("vendor_profiles").select("id, shop_name").order("shop_name")]);if(C.error)throw C.error;if(O.error)throw O.error;T(C.data||[]),F(O.data||[])}catch(C){w({type:"error",text:C.message})}finally{N(!1)}},V=()=>{let C=[...f];if(v!=="all"&&(C=C.filter(O=>O.vendor_id===v)),l!=="all"){const O=l==="active";C=C.filter(K=>K.is_active===O)}if(t!=="all"){const O=t==="approved";C=C.filter(K=>K.admin_approved===O)}if(c&&(C=C.filter(O=>new Date(O.created_at)>=new Date(c))),S){const O=new Date(S);O.setHours(23,59,59,999),C=C.filter(K=>new Date(K.created_at)<=O)}if(h){const O=h.toLowerCase();C=C.filter(K=>{var te,ge;return K.name.toLowerCase().includes(O)||((te=K.sku)==null?void 0:te.toLowerCase().includes(O))||((ge=K.description)==null?void 0:ge.toLowerCase().includes(O))})}P(C)},Y=()=>{$("all"),s("all"),a("all"),j(""),o(""),r("")},q=async C=>{try{const{error:O}=await _.from("products").update({is_active:!C.is_active,updated_at:new Date().toISOString()}).eq("id",C.id);if(O)throw O;w({type:"success",text:`Product ${C.is_active?"deactivated":"activated"}`}),L()}catch(O){w({type:"error",text:O.message})}},z=async(C,O,K)=>{try{const{error:te}=await _.from("products").update({admin_approved:O,admin_notes:K||null,rejection_reason:O?null:K,updated_at:new Date().toISOString()}).eq("id",C);if(te)throw te;w({type:"success",text:`Product ${O?"approved":"rejected"}`}),u(null),L()}catch(te){w({type:"error",text:te.message})}},G=async()=>{if(i)try{const{error:C}=await _.from("products").update({name:i.name,description:i.description,base_price:i.base_price,stock_quantity:i.stock_quantity,is_featured:i.is_featured,admin_notes:i.admin_notes,updated_at:new Date().toISOString()}).eq("id",i.id);if(C)throw C;w({type:"success",text:"Product updated successfully"}),L()}catch(C){w({type:"error",text:C.message})}},X={total:D.length,active:D.filter(C=>C.is_active).length,approved:D.filter(C=>C.admin_approved).length,pending:D.filter(C=>!C.admin_approved).length};return g?e.jsx(I,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600"})})}):e.jsxs(I,{children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-xl font-bold ${R} mb-1`,children:"Products Management"}),e.jsx("p",{className:`text-sm ${b}`,children:"Manage all vendor products"})]}),e.jsxs("div",{className:`flex items-center border ${A} rounded p-0.5 bg-white dark:bg-gray-900`,children:[e.jsx("button",{onClick:()=>x("grid"),className:`px-2 py-1 rounded text-xs transition ${p==="grid"?`${R} bg-gray-100 dark:bg-gray-700`:`${b} hover:bg-gray-50 dark:hover:bg-gray-700`}`,children:"Grid"}),e.jsx("button",{onClick:()=>x("list"),className:`px-2 py-1 rounded text-xs transition ${p==="list"?`${R} bg-gray-100 dark:bg-gray-700`:`${b} hover:bg-gray-50 dark:hover:bg-gray-700`}`,children:"List"})]})]})}),y&&e.jsxs("div",{className:`mb-4 p-3 rounded-lg flex items-start space-x-2 text-sm ${y.type==="success"?"bg-green-50 border border-green-200 text-green-800 dark:bg-green-900/20 dark:border-green-800 dark:text-green-400":"bg-red-50 border border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-800 dark:text-red-400"}`,children:[y.type==="success"?e.jsx(ie,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}):e.jsx(Q,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:y.text}),e.jsx("button",{onClick:()=>w(null),className:"ml-auto",children:e.jsx(U,{className:"h-3.5 w-3.5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-6",children:[e.jsxs("div",{className:"bg-white rounded border border-gray-200 p-3",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:X.total})]}),e.jsxs("div",{className:"bg-white rounded border border-gray-200 p-3",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Active"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:X.active})]}),e.jsxs("div",{className:"bg-white rounded border border-gray-200 p-3",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Approved"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:X.approved})]}),e.jsxs("div",{className:"bg-white rounded border border-gray-200 p-3",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Pending"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:X.pending})]})]}),e.jsxs("div",{className:"bg-white rounded border border-gray-200 p-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ne,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-xs font-bold text-gray-900",children:"Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-0.5",children:"Vendor"}),e.jsxs("select",{value:v,onChange:C=>$(C.target.value),className:"w-full px-2 py-1 text-xs border border-gray-200 rounded focus:outline-none bg-white text-gray-900",children:[e.jsx("option",{value:"all",children:"All Vendors"}),d.map(C=>e.jsx("option",{value:C.id,children:C.shop_name},C.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-0.5",children:"Status"}),e.jsxs("select",{value:l,onChange:C=>s(C.target.value),className:"w-full px-2 py-1 text-xs border border-gray-200 rounded focus:outline-none bg-white text-gray-900",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-0.5",children:"Approval"}),e.jsxs("select",{value:t,onChange:C=>a(C.target.value),className:"w-full px-2 py-1 text-xs border border-gray-200 rounded focus:outline-none bg-white text-gray-900",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"pending",children:"Pending"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-0.5",children:"From"}),e.jsx("input",{type:"date",value:c,onChange:C=>j(C.target.value),className:"w-full px-2 py-1 text-xs border border-gray-200 rounded focus:outline-none bg-white text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-0.5",children:"To"}),e.jsx("input",{type:"date",value:S,onChange:C=>o(C.target.value),className:"w-full px-2 py-1 text-xs border border-gray-200 rounded focus:outline-none bg-white text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-0.5",children:"Search"}),e.jsx("input",{type:"text",value:h,onChange:C=>r(C.target.value),placeholder:"Name...",className:"w-full px-2 py-1 text-xs border border-gray-200 rounded focus:outline-none bg-white text-gray-900"})]})]}),e.jsx("div",{className:"flex justify-end mt-2",children:e.jsx("button",{onClick:Y,className:"text-xs text-gray-600 hover:text-gray-900 font-medium",children:"Reset"})})]}),p==="list"?e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"border-b border-slate-200 bg-slate-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-[10px] font-black uppercase tracking-widest text-slate-700 border-r border-slate-200",children:"Product"}),e.jsx("th",{className:"px-3 py-2 text-[10px] font-black uppercase tracking-widest text-slate-700 border-r border-slate-200",children:"Vendor"}),e.jsx("th",{className:"px-3 py-2 text-[10px] font-black uppercase tracking-widest text-slate-700 border-r border-slate-200",children:"Price"}),e.jsx("th",{className:"px-3 py-2 text-[10px] font-black uppercase tracking-widest text-slate-700 border-r border-slate-200",children:"Stock"}),e.jsx("th",{className:"px-3 py-2 text-[10px] font-black uppercase tracking-widest text-slate-700 border-r border-slate-200",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-[10px] font-black uppercase tracking-widest text-slate-700 border-r border-slate-200",children:"Approval"}),e.jsx("th",{className:"px-3 py-2 text-[10px] font-black uppercase tracking-widest text-slate-700 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:D.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-8 text-center",children:e.jsx("p",{className:`text-sm ${b}`,children:"No products found"})})}):D.map(C=>{var O;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors bg-white",children:[e.jsx("td",{className:"px-3 py-2 border-r border-gray-200 text-xs",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900",children:C.name}),e.jsx("p",{className:"text-xs text-gray-500",children:C.sku})]})}),e.jsx("td",{className:"px-3 py-2 border-r border-gray-200 text-xs text-gray-600",children:((O=C.vendor)==null?void 0:O.shop_name)||"Unknown"}),e.jsxs("td",{className:"px-3 py-2 border-r border-gray-200 text-xs font-bold text-gray-900",children:["$",C.base_price.toFixed(2)]}),e.jsx("td",{className:"px-3 py-2 border-r border-gray-200 text-xs text-gray-900",children:C.stock_quantity}),e.jsx("td",{className:"px-3 py-2 border-r border-gray-200",children:C.is_active?e.jsx("span",{className:"px-2 py-0.5 rounded bg-green-100 text-green-800 border border-green-200 text-xs",children:"Active"}):e.jsx("span",{className:"px-2 py-0.5 rounded bg-gray-100 text-gray-600 border border-gray-200 text-xs",children:"Inactive"})}),e.jsx("td",{className:"px-3 py-2 border-r border-gray-200",children:C.admin_approved?e.jsx("span",{className:"px-2 py-0.5 rounded bg-blue-100 text-blue-800 border border-blue-200 text-xs",children:"Approved"}):e.jsx("span",{className:"px-2 py-0.5 rounded bg-yellow-100 text-yellow-700 border border-yellow-200 text-xs",children:"Pending"})}),e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("button",{onClick:()=>u(C),className:"p-1 px-2 bg-white border border-gray-200 hover:bg-gray-50 text-gray-600 rounded text-xs",children:e.jsx(J,{className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>q(C),className:"p-1 px-2 border border-gray-200 text-gray-600 hover:bg-gray-50 rounded text-xs",children:C.is_active?e.jsx(ye,{className:"h-3 w-3"}):e.jsx(je,{className:"h-3 w-3"})})]})})]},C.id)})})]})})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:D.map(C=>{var O;return e.jsxs("div",{className:`${E} rounded-lg shadow-sm border ${A} p-4`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`text-sm font-semibold ${R} mb-1`,children:C.name}),e.jsx("p",{className:`text-xs ${b}`,children:(O=C.vendor)==null?void 0:O.shop_name})]}),e.jsx("div",{className:"flex gap-1",children:C.is_active?e.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",children:"Active"}):e.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400",children:"Inactive"})})]}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:b,children:"Price:"}),e.jsxs("span",{className:`font-semibold ${R}`,children:["$",C.base_price.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:b,children:"Stock:"}),e.jsx("span",{className:R,children:C.stock_quantity})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:b,children:"Approval:"}),C.admin_approved?e.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",children:"Approved"}):e.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",children:"Pending"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>u(C),className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 text-xs bg-blue-50 text-blue-700 rounded hover:bg-blue-100 transition dark:bg-blue-900/30 dark:text-blue-400",children:[e.jsx(J,{className:"h-3 w-3"}),"Edit"]}),e.jsxs("button",{onClick:()=>q(C),className:`flex-1 flex items-center justify-center gap-1 px-2 py-1.5 text-xs rounded transition ${C.is_active?"bg-red-50 text-red-700 hover:bg-red-100 dark:bg-red-900/30 dark:text-red-400":"bg-green-50 text-green-700 hover:bg-green-100 dark:bg-green-900/30 dark:text-green-400"}`,children:[C.is_active?e.jsx(ye,{className:"h-3 w-3"}):e.jsx(je,{className:"h-3 w-3"}),C.is_active?"Deactivate":"Activate"]})]})]},C.id)})}),i&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded shadow-lg max-w-lg w-full overflow-hidden border border-gray-200",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-sm font-bold text-gray-900",children:"Edit Product"}),e.jsx("button",{onClick:()=>u(null),className:"p-1.5 hover:bg-gray-100 rounded transition",children:e.jsx(U,{className:"h-4 w-4 text-gray-400"})})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:i.name,onChange:C=>u({...i,name:C.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none bg-white text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Description"}),e.jsx("textarea",{value:i.description||"",onChange:C=>u({...i,description:C.target.value}),rows:2,className:"w-full px-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none bg-white text-gray-900"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:i.base_price,onChange:C=>u({...i,base_price:parseFloat(C.target.value)}),className:"w-full px-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none bg-white text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Stock"}),e.jsx("input",{type:"number",value:i.stock_quantity,onChange:C=>u({...i,stock_quantity:parseInt(C.target.value)}),className:"w-full px-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none bg-white text-gray-900"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Admin Notes"}),e.jsx("textarea",{value:i.admin_notes||"",onChange:C=>u({...i,admin_notes:C.target.value}),rows:2,placeholder:"Notes...",className:"w-full px-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none bg-white text-gray-900"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[!i.admin_approved&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>z(i.id,!0,i.admin_notes||void 0),className:"flex-1 py-2 bg-green-600 text-white rounded hover:bg-green-700 text-xs font-medium",children:"Approve"}),e.jsx("button",{onClick:()=>z(i.id,!1,i.admin_notes||"Product rejected"),className:"flex-1 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-xs font-medium",children:"Reject"})]}),e.jsx("button",{onClick:G,className:"flex-1 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-xs font-medium",children:"Save"})]})]})]})})]})}function ra(){var V,Y;const{theme:M}=ee(),m=M==="dark",{formatPrice:f}=he(),[T,D]=n.useState([]),[P,g]=n.useState(!0),[N,p]=n.useState(""),[x,i]=n.useState("all"),[u,y]=n.useState(1),[w,v]=n.useState(0),$=10,[l,s]=n.useState(null),[t,a]=n.useState(!1),[c,j]=n.useState(!1),[S,o]=n.useState([]),[h,r]=n.useState(!1),d=m?"text-gray-400":"text-gray-600",F=m?"border-gray-700":"border-gray-200";n.useEffect(()=>{E()},[x,u]);const E=async()=>{g(!0);try{let q=_.from("orders").select("*, profiles(full_name, email), vendor_profiles(shop_name)",{count:"exact"});x!=="all"&&(q=q.eq("status",x)),N&&(q=q.or(`order_number.ilike.%${N}%`));const{data:z,count:G,error:X}=await q.order("created_at",{ascending:!1}).range((u-1)*$,u*$-1);if(X)throw X;D(z||[]),v(G||0)}catch(q){console.error("Error fetching orders:",q)}finally{g(!1)}},R=async(q,z)=>{j(!0);try{const{error:G}=await _.from("orders").update({status:z}).eq("id",q);if(G)throw G;E(),(l==null?void 0:l.id)===q&&s({...l,status:z})}catch(G){alert("Error updating status: "+G.message)}finally{j(!1)}},b=async q=>{r(!0);try{const{data:z,error:G}=await _.from("order_items").select("*, products(name, images, sku)").eq("order_id",q);if(G)throw G;o(z||[])}catch(z){console.error("Error fetching order items:",z)}finally{r(!1)}},A=q=>{s(q),a(!0),b(q.id)},L=q=>{switch(q){case"paid":return"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400";case"pending":return"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400";case"failed":return"bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400";case"refunded":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400";default:return"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"}};return e.jsxs(I,{children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1",children:"Orders Management"}),e.jsx("p",{className:d,children:"Monitor and manage all customer orders across the platform."})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-6",children:[e.jsxs("div",{className:"bg-white p-3 rounded border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Total"}),e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:w})]}),e.jsxs("div",{className:"bg-white p-3 rounded border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Pending"}),e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:T.filter(q=>q.status==="pending").length})]}),e.jsxs("div",{className:"bg-white p-3 rounded border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Delivered"}),e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:T.filter(q=>q.status==="delivered").length})]}),e.jsxs("div",{className:"bg-white p-3 rounded border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Revenue"}),e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:f(T.reduce((q,z)=>q+z.total,0))})]})]}),e.jsx("div",{className:"bg-white p-2 rounded border border-gray-200 mb-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(me,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-3.5 w-3.5"}),e.jsx("input",{type:"text",placeholder:"Order #...",value:N,onChange:q=>p(q.target.value),onKeyDown:q=>q.key==="Enter"&&E(),className:"w-full pl-9 pr-3 py-1.5 text-xs rounded border border-gray-200 focus:outline-none bg-white text-gray-900"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{value:x,onChange:q=>i(q.target.value),className:"px-3 py-1.5 text-xs border border-gray-200 rounded focus:outline-none bg-white text-gray-900",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"refunded",children:"Refunded"})]})})]})}),e.jsxs("div",{className:"bg-white rounded border border-gray-200 overflow-hidden mb-8",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[e.jsx("th",{className:"px-4 py-2 text-xs font-medium text-gray-900 border-r border-gray-200",children:"Order #"}),e.jsx("th",{className:"px-4 py-2 text-xs font-medium text-gray-900 border-r border-gray-200",children:"Customer"}),e.jsx("th",{className:"px-4 py-2 text-xs font-medium text-gray-900 border-r border-gray-200",children:"Shop"}),e.jsx("th",{className:"px-4 py-2 text-xs font-medium text-gray-900 border-r border-gray-200",children:"Amount"}),e.jsx("th",{className:"px-4 py-2 text-xs font-medium text-gray-900 border-r border-gray-200",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-xs font-medium text-gray-900 border-r border-gray-200",children:"Payment"}),e.jsx("th",{className:"px-4 py-2 text-xs font-medium text-gray-900 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:P?Array.from({length:5}).map((q,z)=>e.jsx("tr",{className:"animate-pulse",children:e.jsx("td",{colSpan:7,className:"px-4 py-2",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-full"})})},z)):T.map(q=>{var z,G,X;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"px-4 py-2 border-r border-gray-200",children:[e.jsx("span",{className:"font-bold text-xs text-gray-900",children:q.order_number}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(q.created_at).toLocaleDateString()})]}),e.jsxs("td",{className:"px-4 py-2 border-r border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-900",children:((z=q.profiles)==null?void 0:z.full_name)||"Walk-in"}),e.jsx("p",{className:"text-xs text-gray-500",children:(G=q.profiles)==null?void 0:G.email})]}),e.jsx("td",{className:"px-4 py-2 border-r border-gray-200",children:e.jsx("span",{className:"text-xs text-gray-900",children:(X=q.vendor_profiles)==null?void 0:X.shop_name})}),e.jsx("td",{className:"px-4 py-2 border-r border-gray-200",children:e.jsx("span",{className:"text-xs font-bold text-gray-900",children:f(q.total)})}),e.jsx("td",{className:"px-4 py-2 border-r border-gray-200",children:e.jsx("span",{className:"px-2 py-0.5 rounded bg-gray-100 text-gray-900 border border-gray-200 text-xs",children:q.status})}),e.jsx("td",{className:"px-4 py-2 border-r border-gray-200",children:e.jsx("span",{className:"px-2 py-0.5 rounded bg-gray-100 text-gray-900 border border-gray-200 text-xs",children:q.payment_status})}),e.jsx("td",{className:"px-4 py-2 text-right",children:e.jsx("button",{onClick:()=>A(q),className:"px-2 py-1 border border-gray-200 hover:bg-gray-50 text-gray-600 rounded text-xs",children:"View"})})]},q.id)})})]})}),e.jsxs("div",{className:`px-8 py-6 border-t ${F} flex items-center justify-between`,children:[e.jsxs("p",{className:`text-sm ${d} font-bold`,children:["Showing ",e.jsx("span",{className:"text-slate-900 dark:text-white",children:(u-1)*$+1})," to ",e.jsx("span",{className:"text-slate-900 dark:text-white",children:Math.min(u*$,w)})," of ",e.jsx("span",{className:"text-slate-900 dark:text-white",children:w})," orders"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{disabled:u===1,onClick:()=>y(q=>q-1),className:"p-2 rounded-xl border border-gray-200 dark:border-gray-700 disabled:opacity-30 hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:e.jsx(Qe,{className:"h-5 w-5"})}),e.jsx("span",{className:"px-4 py-2 font-black text-slate-900 dark:text-white",children:u}),e.jsx("button",{disabled:u*$>=w,onClick:()=>y(q=>q+1),className:"p-2 rounded-xl border border-gray-200 dark:border-gray-700 disabled:opacity-30 hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:e.jsx(be,{className:"h-5 w-5"})})]})]})]}),t&&l&&e.jsxs("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in duration-300 font-mono",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col border border-slate-200",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-black uppercase tracking-widest flex items-center gap-2 text-slate-900 dark:text-white",children:"Order Detail"}),e.jsxs("p",{className:"text-slate-400 font-bold uppercase text-[8px] tracking-widest mt-0.5",children:["# ",l.order_number]})]}),e.jsx("button",{onClick:()=>a(!1),className:"p-2 hover:bg-slate-50 rounded-xl transition-all",children:e.jsx(U,{className:"h-4 w-4 text-slate-400"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-[8px] font-black uppercase tracking-widest text-slate-400 mb-2",children:"Status Control"}),e.jsx("div",{className:"grid grid-cols-3 gap-1",children:["pending","processing","shipped","delivered","cancelled","refunded"].map(q=>e.jsx("button",{onClick:()=>R(l.id,q),disabled:c||l.status===q,className:`px-2 py-1.5 rounded-lg text-[8px] font-black uppercase tracking-tighter border transition-all ${l.status===q?"bg-slate-900 border-slate-900 text-white":"bg-transparent border-slate-200 text-slate-400 hover:border-slate-900"}`,children:q},q))})]}),e.jsxs("section",{className:"p-4 bg-white dark:bg-gray-900/40 rounded-xl border border-slate-200",children:[e.jsx("h3",{className:"text-[8px] font-black uppercase tracking-widest text-slate-400 mb-2 flex items-center gap-1",children:"Buyer"}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-xs font-black text-slate-900 dark:text-white uppercase",children:((V=l.profiles)==null?void 0:V.full_name)||"Walk-in"}),e.jsx("p",{className:"text-[10px] font-bold text-slate-500",children:(Y=l.profiles)==null?void 0:Y.email})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-dashed border-slate-200",children:[e.jsx("p",{className:"text-[8px] font-black uppercase tracking-widest text-slate-400 mb-1",children:"Shipping"}),e.jsx("div",{className:"text-[10px] text-slate-600",children:l.shipping_address?e.jsx("pre",{className:"whitespace-pre-wrap font-sans",children:typeof l.shipping_address=="string"?l.shipping_address:JSON.stringify(l.shipping_address,null,2)}):"Empty"})]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("section",{className:"p-4 bg-white dark:bg-gray-900/40 rounded-xl border border-slate-200",children:[e.jsx("h3",{className:"text-[8px] font-black uppercase tracking-widest text-slate-400 mb-2",children:"Payment"}),e.jsxs("div",{className:"flex items-center justify-between py-1.5 border-b border-dashed border-slate-100",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-500",children:"Method"}),e.jsx("span",{className:"text-[10px] font-black text-slate-900 dark:text-white uppercase",children:l.payment_method})]}),e.jsxs("div",{className:"flex items-center justify-between py-1.5 border-b border-dashed border-slate-100",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-500",children:"Status"}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-[8px] font-black uppercase tracking-widest ${L(l.payment_status)}`,children:l.payment_status})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsx("span",{className:"text-xs font-black text-slate-400 uppercase",children:"Total"}),e.jsx("span",{className:"text-xl font-black text-slate-900 dark:text-white tracking-tighter",children:f(l.total)})]})]})})]})}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-[8px] font-black uppercase tracking-widest text-slate-400 mb-3",children:"Line Items"}),h?e.jsx("div",{className:"flex justify-center py-6",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-slate-900"})}):e.jsx("div",{className:"rounded-xl border border-slate-200 overflow-hidden",children:e.jsxs("table",{className:"w-full text-left font-mono",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 bg-slate-50",children:[e.jsx("th",{className:"px-3 py-1.5 text-[8px] font-black uppercase text-slate-400",children:"Product"}),e.jsx("th",{className:"px-3 py-1.5 text-[8px] font-black uppercase text-slate-400",children:"Price"}),e.jsx("th",{className:"px-3 py-1.5 text-[8px] font-black uppercase text-slate-400 text-right",children:"Total"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:S.map(q=>{var z,G;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-1.5",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-black text-slate-900 uppercase",children:(z=q.products)==null?void 0:z.name}),e.jsxs("span",{className:"text-[8px] text-slate-400",children:[(G=q.products)==null?void 0:G.sku," x ",q.quantity]})]})}),e.jsx("td",{className:"px-3 py-1.5 text-[10px] text-slate-600",children:f(q.unit_price)}),e.jsx("td",{className:"px-3 py-1.5 text-right text-[10px] font-black text-slate-900",children:f(q.total_price)})]},q.id)})})]})})]})]}),e.jsxs("div",{className:"p-4 border-t border-slate-100 bg-slate-50 flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>a(!1),className:"px-4 py-1.5 rounded-lg font-black uppercase text-[10px] border border-slate-200 text-slate-400 hover:bg-white transition",children:"Close"}),e.jsx("button",{className:"px-4 py-1.5 bg-slate-900 text-white rounded-lg font-black uppercase text-[10px] shadow-sm hover:bg-slate-800 transition-all",children:"Invoice"})]})]})]})}function la(){const{theme:M}=ee(),m=M==="dark",{formatPrice:f}=he(),[T,D]=n.useState([]),[P,g]=n.useState([]),[N,p]=n.useState(!0),[x,i]=n.useState("methods"),[u,y]=n.useState(!1),[w,v]=n.useState(null),[$,l]=n.useState(null),[s,t]=n.useState("list"),[a,c]=n.useState({name:"",display_name:"",description:"",base_cost:0,base_rate:0,per_kg_rate:0,delivery_time_min:1,delivery_time_max:3,is_active:!0,is_global:!0,regions:[],min_order_total:0,max_order_total:null}),j=m?"bg-gray-800":"bg-white",S=m?"text-gray-100":"text-gray-900",o=m?"text-gray-400":"text-gray-600",h=m?"border-gray-700":"border-gray-200";n.useEffect(()=>{r()},[x]);const r=async()=>{p(!0);try{if(x==="methods"){const{data:b,error:A}=await _.from("shipping_methods").select("*").order("base_cost",{ascending:!0});if(A)throw A;D(b||[])}else{const{data:b,error:A}=await _.from("shipping_zones").select("*").order("name",{ascending:!0});if(A)throw A;g(b||[])}}catch(b){l({type:"error",text:b.message})}finally{p(!1)}},d=async b=>{b.preventDefault(),p(!0);const A=x==="methods"?"shipping_methods":"shipping_zones",L={...a};w||delete L.id,x==="methods"?(delete L.regions,L.is_global=L.is_global??!0):(delete L.display_name,delete L.description,delete L.base_cost,delete L.delivery_time_min,delete L.delivery_time_max,delete L.is_global),L.logistics_id||(L.logistics_id=null);try{if(w){const{error:V}=await _.from(A).update(L).eq("id",w.id);if(V)throw V;l({type:"success",text:"Shipping item updated successfully"})}else{const{error:V}=await _.from(A).insert([L]);if(V)throw V;l({type:"success",text:"Shipping item created successfully"})}r(),R()}catch(V){l({type:"error",text:V.message})}finally{p(!1)}},F=b=>{v(b),c(b),y(!0)},E=async b=>{if(!confirm("Are you sure you want to delete this shipping option?"))return;const A=x==="methods"?"shipping_methods":"shipping_zones";try{const{error:L}=await _.from(A).delete().eq("id",b);if(L)throw L;l({type:"success",text:"Item deleted successfully"}),r()}catch(L){l({type:"error",text:L.message})}},R=()=>{y(!1),v(null),c({name:"",display_name:"",description:"",base_cost:0,base_rate:0,per_kg_rate:0,delivery_time_min:1,delivery_time_max:3,is_active:!0,is_global:!0,regions:[],min_order_total:0,max_order_total:null})};return e.jsxs(I,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/30 rounded-2xl",children:e.jsx(_e,{className:"h-6 w-6 text-orange-600 dark:text-orange-400"})}),e.jsx("h1",{className:`text-3xl font-black uppercase tracking-tight ${S}`,children:"Shipping Management"})]}),e.jsx("p",{className:o,children:"Configure shipping methods, rates, and zones for your logistics network."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>t("grid"),className:`p-2 rounded-lg transition-all ${s==="grid"?"bg-white dark:bg-gray-700 shadow text-orange-600":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-layout-grid",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"})]})}),e.jsx("button",{onClick:()=>t("list"),className:`p-2 rounded-lg transition-all ${s==="list"?"bg-white dark:bg-gray-700 shadow text-orange-600":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-list",children:[e.jsx("line",{x1:"8",x2:"21",y1:"6",y2:"6"}),e.jsx("line",{x1:"8",x2:"21",y1:"12",y2:"12"}),e.jsx("line",{x1:"8",x2:"21",y1:"18",y2:"18"}),e.jsx("line",{x1:"3",x2:"3.01",y1:"6",y2:"6"}),e.jsx("line",{x1:"3",x2:"3.01",y1:"12",y2:"12"}),e.jsx("line",{x1:"3",x2:"3.01",y1:"18",y2:"18"})]})})]}),e.jsxs("button",{onClick:()=>y(!0),className:"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-600 to-rose-600 text-white rounded-2xl font-bold hover:scale-105 transition-all shadow-lg active:scale-95",children:[e.jsx(re,{className:"h-5 w-5"}),"Add ",x==="methods"?"Method":"Zone"]})]})]})}),e.jsxs("div",{className:"flex gap-4 mb-8",children:[e.jsx("button",{onClick:()=>i("methods"),className:`px-8 py-3 rounded-2xl font-black uppercase tracking-widest text-xs transition-all ${x==="methods"?"bg-orange-600 text-white shadow-lg":`${j} ${o} border ${h} hover:bg-gray-50 dark:hover:bg-gray-700`}`,children:"Shipping Methods"}),e.jsx("button",{onClick:()=>i("zones"),className:`px-8 py-3 rounded-2xl font-black uppercase tracking-widest text-xs transition-all ${x==="zones"?"bg-orange-600 text-white shadow-lg":`${j} ${o} border ${h} hover:bg-gray-50 dark:hover:bg-gray-700`}`,children:"Delivery Zones"})]}),$&&e.jsxs("div",{className:`mb-6 p-4 rounded-2xl flex items-center gap-3 animate-in fade-in slide-in-from-top-4 ${$.type==="success"?"bg-green-50 border border-green-200 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-rose-50 border border-rose-200 text-rose-800 dark:bg-rose-900/20 dark:text-rose-400"}`,children:[e.jsx(Q,{className:"h-5 w-5 shrink-0"}),e.jsx("span",{className:"font-bold flex-1",children:$.text}),e.jsx("button",{onClick:()=>l(null),children:e.jsx(U,{className:"h-5 w-5"})})]}),N?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:4}).map((b,A)=>e.jsx("div",{className:`${j} h-64 rounded-3xl animate-pulse border ${h}`},A))}):x==="methods"?s==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:T.map(b=>e.jsxs("div",{className:`${j} rounded-3xl border ${h} shadow-sm group hover:shadow-xl transition-all duration-300 relative overflow-hidden`,children:[e.jsxs("div",{className:"absolute top-0 right-0 p-4 flex gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${b.is_active?"bg-emerald-500 animate-pulse":"bg-slate-300"}`}),b.is_global&&e.jsx(fe,{className:"h-3 w-3 text-indigo-500"})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-2xl text-orange-600 dark:text-orange-400 w-fit mb-4",children:e.jsx(_e,{className:"h-5 w-5"})}),e.jsx("h3",{className:`font-bold ${S} truncate mb-1`,children:b.display_name}),e.jsx("p",{className:`text-xs ${o} line-clamp-2 min-h-[2rem]`,children:b.description||"No description"}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-slate-400 font-bold mb-1",children:"Rate"}),e.jsx("p",{className:`text-lg font-black ${S}`,children:f(b.base_cost)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-slate-400 font-bold mb-1",children:"ETA"}),e.jsxs("p",{className:`text-sm font-bold ${S}`,children:[b.delivery_time_min,"-",b.delivery_time_max,"d"]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-indigo-50 dark:bg-indigo-900/10 rounded-xl border border-indigo-100 dark:border-indigo-800/20",children:[e.jsx("p",{className:"text-[9px] uppercase font-black text-indigo-400 mb-1",children:"Order Value Trigger"}),e.jsxs("p",{className:`text-xs font-bold ${S}`,children:[b.min_order_total>0?f(b.min_order_total):"$0",b.max_order_total?` - ${f(b.max_order_total)}`:" +"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[e.jsx("button",{onClick:()=>F(b),className:"flex-1 py-2 bg-slate-900 dark:bg-slate-700 text-white dark:text-gray-100 rounded-xl font-bold text-xs hover:bg-orange-600 transition-all",children:"Edit"}),e.jsx("button",{onClick:()=>E(b.id),className:"p-2 text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-xl transition",children:e.jsx(Z,{className:"h-4 w-4"})})]})]})]},b.id))}):e.jsx("div",{className:`${j} rounded-3xl border ${h} shadow-sm overflow-hidden`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:`bg-gray-50 dark:bg-gray-700/50 border-b ${h}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-4 font-black uppercase tracking-widest text-[10px] ${o}`,children:"Method Name"}),e.jsx("th",{className:`px-6 py-4 font-black uppercase tracking-widest text-[10px] ${o}`,children:"Rate & ETA"}),e.jsx("th",{className:`px-6 py-4 font-black uppercase tracking-widest text-[10px] ${o}`,children:"Status"}),e.jsx("th",{className:`px-6 py-4 font-black uppercase tracking-widest text-[10px] ${o} text-right`,children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:T.map(b=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`font-bold text-sm ${S}`,children:b.display_name}),e.jsx("span",{className:`text-xs ${o}`,children:b.description||"No description"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`font-bold text-sm ${S}`,children:f(b.base_cost)}),e.jsxs("span",{className:`text-xs ${o}`,children:[b.delivery_time_min,"-",b.delivery_time_max," Days"]}),e.jsxs("span",{className:"text-[9px] text-indigo-500 font-black uppercase",children:["Range: ",f(b.min_order_total)," ",b.max_order_total?`- ${f(b.max_order_total)}`:"+"]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-black uppercase tracking-widest ${b.is_active?"bg-emerald-500/10 text-emerald-600":"bg-slate-100 text-slate-500"}`,children:b.is_active?"Active":"Inactive"}),b.is_global&&e.jsx("span",{className:"px-2 py-1 rounded text-[10px] font-black uppercase tracking-widest bg-indigo-500/10 text-indigo-600",children:"Global"})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>F(b),className:"p-2 text-slate-400 hover:text-orange-600 transition-colors",children:e.jsx(J,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>E(b.id),className:"p-2 text-slate-400 hover:text-rose-600 transition-colors",children:e.jsx(Z,{className:"h-4 w-4"})})]})})]},b.id))})]})})}):s==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:P.map(b=>e.jsx("div",{className:`${j} rounded-3xl border ${h} shadow-sm group hover:shadow-xl transition-all duration-300`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-3 bg-rose-50 dark:bg-rose-900/20 rounded-2xl text-rose-600 dark:text-rose-400",children:e.jsx(We,{className:"h-5 w-5"})}),e.jsx("span",{className:`w-2 h-2 rounded-full ${b.is_active?"bg-emerald-500":"bg-slate-300"}`})]}),e.jsx("h3",{className:`font-bold ${S} mb-3`,children:b.name}),e.jsxs("div",{className:"flex justify-between items-center mb-4 p-3 bg-slate-50 dark:bg-slate-900/30 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] uppercase font-black text-slate-400",children:"Base Rate"}),e.jsx("p",{className:`text-sm font-black ${S}`,children:f(b.base_rate)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[9px] uppercase font-black text-slate-400",children:"Add. Per KG"}),e.jsxs("p",{className:`text-sm font-black ${S}`,children:["+",f(b.per_kg_rate)]})]})]}),e.jsxs("div",{className:"mb-4 p-2.5 bg-indigo-50 dark:bg-indigo-900/10 rounded-lg border border-indigo-100 dark:border-indigo-800/20",children:[e.jsx("p",{className:"text-[9px] uppercase font-black text-indigo-400 mb-0.5",children:"Price Range Trigger"}),e.jsxs("p",{className:`text-[11px] font-bold ${S}`,children:[f(b.min_order_total)," ",b.max_order_total?`- ${f(b.max_order_total)}`:"+"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1.5 line-clamp-2 overflow-hidden h-[3.5rem]",children:[b.regions.map((A,L)=>e.jsx("span",{className:"px-2 py-0.5 bg-slate-100 dark:bg-slate-700 rounded-md text-[9px] font-bold text-slate-500 dark:text-slate-400",children:A},L)),b.regions.length===0&&e.jsx("span",{className:`text-[10px] ${o} italic`,children:"No regions"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-6",children:[e.jsx("button",{onClick:()=>F(b),className:"flex-1 py-2 bg-slate-900 dark:bg-slate-700 text-white dark:text-gray-100 rounded-xl font-bold text-xs hover:bg-rose-600 transition-all",children:"Configure"}),e.jsx("button",{onClick:()=>E(b.id),className:"p-2 text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-xl transition",children:e.jsx(Z,{className:"h-4 w-4"})})]})]})},b.id))}):e.jsx("div",{className:`${j} rounded-3xl border ${h} shadow-sm overflow-hidden`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:`bg-gray-50 dark:bg-gray-700/50 border-b ${h}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-4 font-black uppercase tracking-widest text-[10px] ${o}`,children:"Zone Name"}),e.jsx("th",{className:`px-6 py-4 font-black uppercase tracking-widest text-[10px] ${o}`,children:"Rates"}),e.jsx("th",{className:`px-6 py-4 font-black uppercase tracking-widest text-[10px] ${o}`,children:"Regions"}),e.jsx("th",{className:`px-6 py-4 font-black uppercase tracking-widest text-[10px] ${o}`,children:"Status"}),e.jsx("th",{className:`px-6 py-4 font-black uppercase tracking-widest text-[10px] ${o} text-right`,children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:P.map(b=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`font-bold text-sm ${S}`,children:b.name})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`font-bold text-sm ${S}`,children:f(b.base_rate)}),e.jsxs("span",{className:`text-[10px] ${o}`,children:["+",f(b.per_kg_rate),"/kg"]}),e.jsxs("span",{className:"text-[9px] text-indigo-500 font-black uppercase",children:["Cart: ",f(b.min_order_total)," ",b.max_order_total?`- ${f(b.max_order_total)}`:"+"]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[b.regions.slice(0,5).map((A,L)=>e.jsx("span",{className:"px-1.5 py-0.5 bg-slate-100 dark:bg-slate-800 rounded text-[9px] font-bold text-slate-500 dark:text-slate-400",children:A},L)),b.regions.length>5&&e.jsxs("span",{className:"px-1.5 py-0.5 bg-slate-100 dark:bg-slate-800 rounded text-[9px] font-bold text-slate-500 dark:text-slate-400",children:["+",b.regions.length-5," more"]}),b.regions.length===0&&e.jsx("span",{className:`text-[10px] ${o} italic`,children:"No regions"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-black uppercase tracking-widest ${b.is_active?"bg-emerald-500/10 text-emerald-600":"bg-slate-100 text-slate-500"}`,children:b.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>F(b),className:"p-2 text-slate-400 hover:text-rose-600 transition-colors",children:e.jsx(J,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>E(b.id),className:"p-2 text-slate-400 hover:text-rose-600 transition-colors",children:e.jsx(Z,{className:"h-4 w-4"})})]})})]},b.id))})]})})}),u&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in zoom-in-95 duration-200",children:e.jsxs("div",{className:`${j} rounded-[32px] shadow-2xl max-w-lg w-full overflow-hidden flex flex-col border ${h}`,children:[e.jsxs("div",{className:"p-6 border-b ${borderColor} flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-black uppercase tracking-tight flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center",children:e.jsx(_e,{className:"h-4 w-4 text-orange-600"})}),w?"Edit":"Create"," ",x==="methods"?"Method":"Zone"]}),e.jsx("button",{onClick:R,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-all",children:e.jsx(U,{className:"h-5 w-5 text-slate-400"})})]}),e.jsx("div",{className:"p-8",children:e.jsxs("form",{onSubmit:d,className:"space-y-5",children:[x==="methods"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 block mb-1.5 ml-1",children:"Label Name"}),e.jsx("input",{type:"text",required:!0,value:a.display_name,onChange:b=>c({...a,display_name:b.target.value,name:b.target.value.toLowerCase().replace(/ /g,"_")}),className:`w-full px-4 py-3 rounded-xl border ${h} focus:outline-none focus:ring-2 focus:ring-orange-500/20 ${m?"bg-slate-800 text-gray-100":"bg-slate-50"}`,placeholder:"e.g. Express Priority"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 block mb-1.5 ml-1",children:"Base Cost ($)"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:a.base_cost,onChange:b=>c({...a,base_cost:parseFloat(b.target.value)}),className:`w-full px-4 py-3 rounded-xl border ${h} focus:outline-none focus:ring-2 focus:ring-orange-500/20 ${m?"bg-slate-800 text-gray-100":"bg-slate-50"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 block mb-1.5 ml-1",children:"Delivery Time (Days)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",required:!0,value:a.delivery_time_min,onChange:b=>c({...a,delivery_time_min:parseInt(b.target.value)}),className:`w-full px-4 py-3 rounded-xl border ${h} focus:outline-none focus:ring-2 focus:ring-orange-500/20 ${m?"bg-slate-800 text-gray-100":"bg-slate-50"} text-center`,placeholder:"Min"}),e.jsx("span",{className:"text-slate-300",children:"-"}),e.jsx("input",{type:"number",required:!0,value:a.delivery_time_max,onChange:b=>c({...a,delivery_time_max:parseInt(b.target.value)}),className:`w-full px-4 py-3 rounded-xl border ${h} focus:outline-none focus:ring-2 focus:ring-orange-500/20 ${m?"bg-slate-800 text-gray-100":"bg-slate-50"} text-center`,placeholder:"Max"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 block mb-1.5 ml-1",children:"Internal Notes / Description"}),e.jsx("textarea",{value:a.description,onChange:b=>c({...a,description:b.target.value}),rows:2,className:`w-full px-4 py-3 rounded-xl border ${h} focus:outline-none focus:ring-2 focus:ring-orange-500/20 ${m?"bg-slate-800 text-gray-100":"bg-slate-50"} resize-none text-sm`,placeholder:"Brief description for customer and admin..."})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 block mb-1.5 ml-1",children:"Zone Identity"}),e.jsx("input",{type:"text",required:!0,value:a.name,onChange:b=>c({...a,name:b.target.value}),className:`w-full px-4 py-3 rounded-xl border ${h} focus:outline-none focus:ring-2 focus:ring-rose-500/20 ${m?"bg-slate-800 text-gray-100":"bg-slate-50"}`,placeholder:"e.g. Northern Highveld"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 block mb-1.5 ml-1",children:"Base Rate ($)"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:a.base_rate,onChange:b=>c({...a,base_rate:parseFloat(b.target.value)}),className:`w-full px-4 py-3 rounded-xl border ${h} focus:outline-none focus:ring-2 focus:ring-rose-500/20 ${m?"bg-slate-800 text-gray-100":"bg-slate-50"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 block mb-1.5 ml-1",children:"Add. Per KG ($)"}),e.jsx("input",{type:"number",step:"0.01",value:a.per_kg_rate,onChange:b=>c({...a,per_kg_rate:parseFloat(b.target.value)}),className:`w-full px-4 py-3 rounded-xl border ${h} focus:outline-none focus:ring-2 focus:ring-rose-500/20 ${m?"bg-slate-800 text-gray-100":"bg-slate-50"}`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 block mb-1.5 ml-1",children:"Assigned Regions (Comma separated)"}),e.jsx("textarea",{value:a.regions.join(", "),onChange:b=>c({...a,regions:b.target.value.split(",").map(A=>A.trim()).filter(A=>A!=="")}),rows:3,className:`w-full px-4 py-3 rounded-xl border ${h} focus:outline-none focus:ring-2 focus:ring-rose-500/20 ${m?"bg-slate-800 text-gray-100":"bg-slate-50"} resize-none text-sm`,placeholder:"Suburb 1, Area 2, District 3..."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 py-2 border-t border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 block mb-1.5 ml-1",children:"Min Order Value ($)"}),e.jsx("input",{type:"number",step:"0.01",value:a.min_order_total,onChange:b=>c({...a,min_order_total:parseFloat(b.target.value)}),className:`w-full px-4 py-3 rounded-xl border ${h} focus:outline-none focus:ring-2 focus:ring-indigo-500/20 ${m?"bg-slate-800 text-gray-100":"bg-slate-50"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 block mb-1.5 ml-1",children:"Max Order Value (Optional)"}),e.jsx("input",{type:"number",step:"0.01",value:a.max_order_total||"",onChange:b=>c({...a,max_order_total:b.target.value?parseFloat(b.target.value):null}),className:`w-full px-4 py-3 rounded-xl border ${h} focus:outline-none focus:ring-2 focus:ring-indigo-500/20 ${m?"bg-slate-800 text-gray-100":"bg-slate-50"}`,placeholder:"No limit"})]})]}),e.jsxs("div",{className:"flex gap-4 pt-2",children:[e.jsxs("button",{type:"button",onClick:()=>c({...a,is_active:!a.is_active}),className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-xl border transition-all ${a.is_active?"bg-emerald-500/10 border-emerald-500/30 text-emerald-600":"bg-slate-100 border-slate-200 text-slate-400 dark:bg-slate-700/50 dark:border-slate-600"}`,children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${a.is_active?"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]":"bg-slate-300"}`}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Active Status"})]}),x==="methods"&&e.jsxs("button",{type:"button",onClick:()=>c({...a,is_global:!a.is_global}),className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-xl border transition-all ${a.is_global?"bg-indigo-500/10 border-indigo-500/30 text-indigo-600":"bg-slate-100 border-slate-200 text-slate-400 dark:bg-slate-700/50 dark:border-slate-600"}`,children:[e.jsx(fe,{className:"h-3 w-3"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Global Access"})]})]}),e.jsx("button",{type:"submit",className:"w-full py-4 bg-slate-900 dark:bg-slate-100 text-white dark:text-slate-900 rounded-2xl font-black uppercase tracking-[0.2em] shadow-lg hover:scale-[1.02] active:scale-98 transition-all text-xs mt-4",children:w?"Publish Updates":"Confirm & Create"})]})})]})})]})}function na(){const{theme:M}=ee(),m=M==="dark",[f,T]=n.useState([]),[D,P]=n.useState(!0),[g,N]=n.useState(null),[p,x]=n.useState(null),[i,u]=n.useState(null),[y,w]=n.useState("list"),[v,$]=n.useState({title:"",content:"",version:""}),l=m?"bg-gray-800":"bg-white",s=m?"text-gray-100":"text-gray-900",t=m?"text-gray-400":"text-gray-600",a=m?"border-gray-700":"border-gray-200";n.useEffect(()=>{c()},[]);const c=async()=>{P(!0);try{const{data:r,error:d}=await _.from("contracts").select("*").in("contract_type",["vendor_terms","vendor_privacy"]).order("created_at",{ascending:!1});if(d)throw d;T(r||[])}catch(r){u({type:"error",text:r.message})}finally{P(!1)}},j=r=>{N(r),$({title:r.title,content:r.content,version:r.version})},S=async r=>{if(r.preventDefault(),!!g){P(!0);try{const{error:d}=await _.from("contracts").update({title:v.title,content:v.content,version:v.version}).eq("id",g.id);if(d)throw d;u({type:"success",text:"Contract updated successfully"}),N(null),c()}catch(d){u({type:"error",text:d.message})}finally{P(!1)}}},o=async r=>{try{const{error:d}=await _.from("contracts").update({is_active:!r.is_active}).eq("id",r.id);if(d)throw d;u({type:"success",text:`Contract ${r.is_active?"deactivated":"activated"} successfully`}),c()}catch(d){u({type:"error",text:d.message})}},h=r=>{switch(r){case"vendor_terms":return"Vendor Terms & Conditions";case"vendor_privacy":return"Vendor Privacy Policy";default:return r}};return D&&f.length===0?e.jsx(I,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600"})})}):e.jsxs(I,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{className:"h-8 w-8 text-cyan-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${s}`,children:"Vendor Contracts"}),e.jsx("p",{className:t,children:"Manage vendor terms and conditions and privacy policy"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>w("list"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition ${y==="list"?"bg-cyan-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[e.jsx(ve,{className:"h-4 w-4"}),"List"]}),e.jsxs("button",{onClick:()=>w("grid"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition ${y==="grid"?"bg-cyan-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[e.jsx(ke,{className:"h-4 w-4"}),"Grid"]})]})]})}),i&&e.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-start space-x-3 ${i.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:[e.jsx(Q,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:i.text}),e.jsx("button",{onClick:()=>u(null),className:"ml-auto",children:e.jsx(U,{className:"h-4 w-4"})})]}),y==="list"?e.jsxs("div",{className:`${l} rounded-lg shadow-sm border ${a} overflow-hidden mb-8`,children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Contract Type"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Title"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Version"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Last Updated"}),e.jsx("th",{className:`px-6 py-3 text-center text-xs font-medium ${t} uppercase`,children:"Actions"})]})}),e.jsx("tbody",{className:`${l} divide-y divide-gray-200 dark:divide-gray-700`,children:f.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-5 w-5 text-cyan-600"}),e.jsx("span",{className:`text-sm font-medium ${s}`,children:h(r.contract_type)})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:`text-sm ${s}`,children:r.title})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`text-sm ${t}`,children:r.version})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${r.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:r.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:`text-sm ${t}`,children:new Date(r.updated_at).toLocaleString()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>x(r),className:"p-2 text-cyan-600 hover:bg-cyan-50 rounded-lg transition",title:"View",children:e.jsx(le,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>j(r),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition",title:"Edit",children:e.jsx(J,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>o(r),className:`p-2 rounded-lg transition ${r.is_active?"text-red-600 hover:bg-red-50":"text-green-600 hover:bg-green-50"}`,title:r.is_active?"Deactivate":"Activate",children:r.is_active?e.jsx(U,{className:"h-4 w-4"}):e.jsx(xe,{className:"h-4 w-4"})})]})})]},r.id))})]}),f.length===0&&e.jsx("div",{className:`text-center py-12 ${t}`,children:"No contracts found."})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[f.map(r=>e.jsxs("div",{className:`${l} rounded-lg shadow-sm border ${a} p-6`,children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ne,{className:"h-5 w-5 text-cyan-600"}),e.jsx("h3",{className:`text-lg font-semibold ${s}`,children:h(r.contract_type)})]}),e.jsx("p",{className:`text-sm ${t} mb-3`,children:r.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:`flex items-center gap-1 ${t}`,children:["Version: ",r.version]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${r.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:r.is_active?"Active":"Inactive"})]})]})}),e.jsxs("div",{className:`text-sm ${t} mb-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Last Updated:"})]}),e.jsx("span",{children:new Date(r.updated_at).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>x(r),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-cyan-50 text-cyan-700 rounded-lg hover:bg-cyan-100 transition",children:[e.jsx(le,{className:"h-4 w-4"}),"View"]}),e.jsxs("button",{onClick:()=>j(r),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition",children:[e.jsx(J,{className:"h-4 w-4"}),"Edit"]}),e.jsx("button",{onClick:()=>o(r),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg transition ${r.is_active?"bg-red-50 text-red-700 hover:bg-red-100":"bg-green-50 text-green-700 hover:bg-green-100"}`,children:r.is_active?"Deactivate":"Activate"})]})]},r.id)),f.length===0&&e.jsx("div",{className:`text-center py-12 ${t} col-span-full`,children:"No contracts found."})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:`${l} rounded-lg shadow-xl max-w-4xl w-full my-8`,children:[e.jsxs("div",{className:`p-6 border-b ${a} flex items-center justify-between`,children:[e.jsxs("h2",{className:`text-2xl font-bold ${s} flex items-center gap-2`,children:[e.jsx(J,{className:"h-6 w-6 text-cyan-600"}),"Edit Contract"]}),e.jsx("button",{onClick:()=>N(null),className:`${t} hover:text-gray-600 transition`,children:e.jsx(U,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:S,className:"p-6",children:[e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s} mb-2`,children:"Contract Type"}),e.jsx("input",{type:"text",value:h(g.contract_type),disabled:!0,className:`w-full px-4 py-2 border ${a} rounded-lg bg-gray-100 dark:bg-gray-700 ${t}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s} mb-2`,children:"Title *"}),e.jsx("input",{type:"text",required:!0,value:v.title,onChange:r=>$({...v,title:r.target.value}),className:`w-full px-4 py-2 border ${a} rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s} mb-2`,children:"Version *"}),e.jsx("input",{type:"text",required:!0,value:v.version,onChange:r=>$({...v,version:r.target.value}),className:`w-full px-4 py-2 border ${a} rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"e.g., 2.0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s} mb-2`,children:"Content * (Markdown supported)"}),e.jsx("textarea",{required:!0,value:v.content,onChange:r=>$({...v,content:r.target.value}),rows:20,className:`w-full px-4 py-2 border ${a} rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 font-mono text-sm ${m?"bg-gray-700 text-gray-100":"bg-white"}`})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>N(null),className:`px-6 py-2 border ${a} rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition`,children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:D,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-cyan-600 to-green-600 text-white rounded-lg hover:from-cyan-700 hover:to-green-700 transition disabled:opacity-50",children:[e.jsx(ae,{className:"h-5 w-5"}),D?"Saving...":"Save Changes"]})]})]})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:`${l} rounded-lg shadow-xl max-w-4xl w-full my-8`,children:[e.jsxs("div",{className:`p-6 border-b ${a} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsxs("h2",{className:`text-2xl font-bold ${s} flex items-center gap-2 mb-1`,children:[e.jsx(ne,{className:"h-6 w-6 text-cyan-600"}),p.title]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsxs("span",{className:t,children:["Version ",p.version]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${p.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:p.is_active?"Active":"Inactive"})]})]}),e.jsx("button",{onClick:()=>x(null),className:`${t} hover:text-gray-600 transition`,children:e.jsx(U,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:e.jsx("div",{className:`prose max-w-none ${m?"prose-invert":""}`,children:e.jsx("pre",{className:"whitespace-pre-wrap font-sans",children:p.content})})})]})})]})}function ia(){const{theme:M}=ee(),m=M==="dark",[f,T]=n.useState([]),[D,P]=n.useState(!0),[g,N]=n.useState(null),[p,x]=n.useState(null),[i,u]=n.useState(null),[y,w]=n.useState("list"),[v,$]=n.useState({title:"",content:"",version:""}),l=m?"bg-gray-800":"bg-white",s=m?"text-gray-100":"text-gray-900",t=m?"text-gray-400":"text-gray-600",a=m?"border-gray-700":"border-gray-200";n.useEffect(()=>{c()},[]);const c=async()=>{P(!0);try{const{data:r,error:d}=await _.from("contracts").select("*").in("contract_type",["customer_terms","customer_privacy"]).order("created_at",{ascending:!1});if(d)throw d;T(r||[])}catch(r){u({type:"error",text:r.message})}finally{P(!1)}},j=r=>{N(r),$({title:r.title,content:r.content,version:r.version})},S=async r=>{if(r.preventDefault(),!!g){P(!0);try{const{error:d}=await _.from("contracts").update({title:v.title,content:v.content,version:v.version}).eq("id",g.id);if(d)throw d;u({type:"success",text:"Contract updated successfully"}),N(null),c()}catch(d){u({type:"error",text:d.message})}finally{P(!1)}}},o=async r=>{try{const{error:d}=await _.from("contracts").update({is_active:!r.is_active}).eq("id",r.id);if(d)throw d;u({type:"success",text:`Contract ${r.is_active?"deactivated":"activated"} successfully`}),c()}catch(d){u({type:"error",text:d.message})}},h=r=>{switch(r){case"customer_terms":return"Customer Terms & Conditions";case"customer_privacy":return"Customer Privacy Policy";default:return r}};return D&&f.length===0?e.jsx(I,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600"})})}):e.jsxs(I,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(se,{className:"h-8 w-8 text-cyan-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${s}`,children:"Customer Contracts"}),e.jsx("p",{className:t,children:"Manage customer terms and conditions and privacy policy"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>w("list"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition ${y==="list"?"bg-cyan-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[e.jsx(ve,{className:"h-4 w-4"}),"List"]}),e.jsxs("button",{onClick:()=>w("grid"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition ${y==="grid"?"bg-cyan-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[e.jsx(ke,{className:"h-4 w-4"}),"Grid"]})]})]})}),i&&e.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-start space-x-3 ${i.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:[e.jsx(Q,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:i.text}),e.jsx("button",{onClick:()=>u(null),className:"ml-auto",children:e.jsx(U,{className:"h-4 w-4"})})]}),y==="list"?e.jsxs("div",{className:`${l} rounded-lg shadow-sm border ${a} overflow-hidden mb-8`,children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Contract Type"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Title"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Version"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Last Updated"}),e.jsx("th",{className:`px-6 py-3 text-center text-xs font-medium ${t} uppercase`,children:"Actions"})]})}),e.jsx("tbody",{className:`${l} divide-y divide-gray-200 dark:divide-gray-700`,children:f.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5 text-cyan-600"}),e.jsx("span",{className:`text-sm font-medium ${s}`,children:h(r.contract_type)})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:`text-sm ${s}`,children:r.title})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`text-sm ${t}`,children:r.version})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${r.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:r.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:`text-sm ${t}`,children:new Date(r.updated_at).toLocaleString()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>x(r),className:"p-2 text-cyan-600 hover:bg-cyan-50 rounded-lg transition",title:"View",children:e.jsx(le,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>j(r),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition",title:"Edit",children:e.jsx(J,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>o(r),className:`p-2 rounded-lg transition ${r.is_active?"text-red-600 hover:bg-red-50":"text-green-600 hover:bg-green-50"}`,title:r.is_active?"Deactivate":"Activate",children:r.is_active?e.jsx(U,{className:"h-4 w-4"}):e.jsx(xe,{className:"h-4 w-4"})})]})})]},r.id))})]}),f.length===0&&e.jsx("div",{className:`text-center py-12 ${t}`,children:"No contracts found."})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[f.map(r=>e.jsxs("div",{className:`${l} rounded-lg shadow-sm border ${a} p-6`,children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(se,{className:"h-5 w-5 text-cyan-600"}),e.jsx("h3",{className:`text-lg font-semibold ${s}`,children:h(r.contract_type)})]}),e.jsx("p",{className:`text-sm ${t} mb-3`,children:r.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:`flex items-center gap-1 ${t}`,children:["Version: ",r.version]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${r.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:r.is_active?"Active":"Inactive"})]})]})}),e.jsxs("div",{className:`text-sm ${t} mb-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Last Updated:"})]}),e.jsx("span",{children:new Date(r.updated_at).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>x(r),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-cyan-50 text-cyan-700 rounded-lg hover:bg-cyan-100 transition",children:[e.jsx(le,{className:"h-4 w-4"}),"View"]}),e.jsxs("button",{onClick:()=>j(r),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition",children:[e.jsx(J,{className:"h-4 w-4"}),"Edit"]}),e.jsx("button",{onClick:()=>o(r),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg transition ${r.is_active?"bg-red-50 text-red-700 hover:bg-red-100":"bg-green-50 text-green-700 hover:bg-green-100"}`,children:r.is_active?"Deactivate":"Activate"})]})]},r.id)),f.length===0&&e.jsx("div",{className:`text-center py-12 ${t} col-span-full`,children:"No contracts found."})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:`${l} rounded-lg shadow-xl max-w-4xl w-full my-8`,children:[e.jsxs("div",{className:`p-6 border-b ${a} flex items-center justify-between`,children:[e.jsxs("h2",{className:`text-2xl font-bold ${s} flex items-center gap-2`,children:[e.jsx(J,{className:"h-6 w-6 text-cyan-600"}),"Edit Contract"]}),e.jsx("button",{onClick:()=>N(null),className:`${t} hover:text-gray-600 transition`,children:e.jsx(U,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:S,className:"p-6",children:[e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s} mb-2`,children:"Contract Type"}),e.jsx("input",{type:"text",value:h(g.contract_type),disabled:!0,className:`w-full px-4 py-2 border ${a} rounded-lg bg-gray-100 dark:bg-gray-700 ${t}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s} mb-2`,children:"Title *"}),e.jsx("input",{type:"text",required:!0,value:v.title,onChange:r=>$({...v,title:r.target.value}),className:`w-full px-4 py-2 border ${a} rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s} mb-2`,children:"Version *"}),e.jsx("input",{type:"text",required:!0,value:v.version,onChange:r=>$({...v,version:r.target.value}),className:`w-full px-4 py-2 border ${a} rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"e.g., 2.0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s} mb-2`,children:"Content * (Markdown supported)"}),e.jsx("textarea",{required:!0,value:v.content,onChange:r=>$({...v,content:r.target.value}),rows:20,className:`w-full px-4 py-2 border ${a} rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 font-mono text-sm ${m?"bg-gray-700 text-gray-100":"bg-white"}`})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>N(null),className:`px-6 py-2 border ${a} rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition`,children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:D,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-cyan-600 to-green-600 text-white rounded-lg hover:from-cyan-700 hover:to-green-700 transition disabled:opacity-50",children:[e.jsx(ae,{className:"h-5 w-5"}),D?"Saving...":"Save Changes"]})]})]})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:`${l} rounded-lg shadow-xl max-w-4xl w-full my-8`,children:[e.jsxs("div",{className:`p-6 border-b ${a} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsxs("h2",{className:`text-2xl font-bold ${s} flex items-center gap-2 mb-1`,children:[e.jsx(se,{className:"h-6 w-6 text-cyan-600"}),p.title]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsxs("span",{className:t,children:["Version ",p.version]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${p.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:p.is_active?"Active":"Inactive"})]})]}),e.jsx("button",{onClick:()=>x(null),className:`${t} hover:text-gray-600 transition`,children:e.jsx(U,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:e.jsx("div",{className:`prose max-w-none ${m?"prose-invert":""}`,children:e.jsx("pre",{className:"whitespace-pre-wrap font-sans",children:p.content})})})]})})]})}function da(){const{theme:M}=ee(),m=M==="dark",[f,T]=n.useState([]),[D,P]=n.useState(!0),[g,N]=n.useState(null),[p,x]=n.useState(null),[i,u]=n.useState(null),[y,w]=n.useState("list"),[v,$]=n.useState({title:"",content:"",version:""}),l=m?"bg-gray-800":"bg-white",s=m?"text-gray-100":"text-gray-900",t=m?"text-gray-400":"text-gray-600",a=m?"border-gray-700":"border-gray-200";n.useEffect(()=>{c()},[]);const c=async()=>{P(!0);try{const{data:r,error:d}=await _.from("contracts").select("*").in("contract_type",["logistic_terms","logistic_privacy"]).order("created_at",{ascending:!1});if(d)throw d;T(r||[])}catch(r){u({type:"error",text:r.message})}finally{P(!1)}},j=r=>{N(r),$({title:r.title,content:r.content,version:r.version})},S=async r=>{if(r.preventDefault(),!!g){P(!0);try{const{error:d}=await _.from("contracts").update({title:v.title,content:v.content,version:v.version}).eq("id",g.id);if(d)throw d;u({type:"success",text:"Contract updated successfully"}),N(null),c()}catch(d){u({type:"error",text:d.message})}finally{P(!1)}}},o=async r=>{try{const{error:d}=await _.from("contracts").update({is_active:!r.is_active}).eq("id",r.id);if(d)throw d;u({type:"success",text:`Contract ${r.is_active?"deactivated":"activated"} successfully`}),c()}catch(d){u({type:"error",text:d.message})}},h=r=>{switch(r){case"logistic_terms":return"Logistic Terms & Conditions";case"logistic_privacy":return"Logistic Privacy Policy";default:return r}};return D&&f.length===0?e.jsx(I,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600"})})}):e.jsxs(I,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{className:"h-8 w-8 text-cyan-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${s}`,children:"Logistic Contracts"}),e.jsx("p",{className:t,children:"Manage logistic terms and conditions and privacy policy"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>w("list"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition ${y==="list"?"bg-cyan-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[e.jsx(ve,{className:"h-4 w-4"}),"List"]}),e.jsxs("button",{onClick:()=>w("grid"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition ${y==="grid"?"bg-cyan-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[e.jsx(ke,{className:"h-4 w-4"}),"Grid"]})]})]})}),i&&e.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-start space-x-3 ${i.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:[e.jsx(Q,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:i.text}),e.jsx("button",{onClick:()=>u(null),className:"ml-auto",children:e.jsx(U,{className:"h-4 w-4"})})]}),y==="list"?e.jsxs("div",{className:`${l} rounded-lg shadow-sm border ${a} overflow-hidden mb-8`,children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Contract Type"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Title"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Version"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Last Updated"}),e.jsx("th",{className:`px-6 py-3 text-center text-xs font-medium ${t} uppercase`,children:"Actions"})]})}),e.jsx("tbody",{className:`${l} divide-y divide-gray-200 dark:divide-gray-700`,children:f.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-5 w-5 text-cyan-600"}),e.jsx("span",{className:`text-sm font-medium ${s}`,children:h(r.contract_type)})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:`text-sm ${s}`,children:r.title})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`text-sm ${t}`,children:r.version})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${r.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:r.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:`text-sm ${t}`,children:new Date(r.updated_at).toLocaleString()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>x(r),className:"p-2 text-cyan-600 hover:bg-cyan-50 rounded-lg transition",title:"View",children:e.jsx(le,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>j(r),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition",title:"Edit",children:e.jsx(J,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>o(r),className:`p-2 rounded-lg transition ${r.is_active?"text-red-600 hover:bg-red-50":"text-green-600 hover:bg-green-50"}`,title:r.is_active?"Deactivate":"Activate",children:r.is_active?e.jsx(U,{className:"h-4 w-4"}):e.jsx(xe,{className:"h-4 w-4"})})]})})]},r.id))})]}),f.length===0&&e.jsx("div",{className:`text-center py-12 ${t}`,children:"No contracts found."})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[f.map(r=>e.jsxs("div",{className:`${l} rounded-lg shadow-sm border ${a} p-6`,children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ne,{className:"h-5 w-5 text-cyan-600"}),e.jsx("h3",{className:`text-lg font-semibold ${s}`,children:h(r.contract_type)})]}),e.jsx("p",{className:`text-sm ${t} mb-3`,children:r.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:`flex items-center gap-1 ${t}`,children:["Version: ",r.version]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${r.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:r.is_active?"Active":"Inactive"})]})]})}),e.jsxs("div",{className:`text-sm ${t} mb-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Last Updated:"})]}),e.jsx("span",{children:new Date(r.updated_at).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>x(r),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-cyan-50 text-cyan-700 rounded-lg hover:bg-cyan-100 transition",children:[e.jsx(le,{className:"h-4 w-4"}),"View"]}),e.jsxs("button",{onClick:()=>j(r),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition",children:[e.jsx(J,{className:"h-4 w-4"}),"Edit"]}),e.jsx("button",{onClick:()=>o(r),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg transition ${r.is_active?"bg-red-50 text-red-700 hover:bg-red-100":"bg-green-50 text-green-700 hover:bg-green-100"}`,children:r.is_active?"Deactivate":"Activate"})]})]},r.id)),f.length===0&&e.jsx("div",{className:`text-center py-12 ${t} col-span-full`,children:"No contracts found."})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:`${l} rounded-lg shadow-xl max-w-4xl w-full my-8`,children:[e.jsxs("div",{className:`p-6 border-b ${a} flex items-center justify-between`,children:[e.jsxs("h2",{className:`text-2xl font-bold ${s} flex items-center gap-2`,children:[e.jsx(J,{className:"h-6 w-6 text-cyan-600"}),"Edit Contract"]}),e.jsx("button",{onClick:()=>N(null),className:`${t} hover:text-gray-600 transition`,children:e.jsx(U,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:S,className:"p-5",children:[e.jsxs("div",{className:"space-y-3 mb-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-bold uppercase tracking-wider ${t} mb-1.5`,children:"Contract Type"}),e.jsx("input",{type:"text",value:h(g.contract_type),disabled:!0,className:`w-full px-3 py-1.5 text-xs border ${a} rounded-md bg-gray-100 dark:bg-gray-700 ${t}`})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-bold uppercase tracking-wider ${t} mb-1.5`,children:"Title *"}),e.jsx("input",{type:"text",required:!0,value:v.title,onChange:r=>$({...v,title:r.target.value}),className:`w-full px-3 py-1.5 text-xs border ${a} rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-bold uppercase tracking-wider ${t} mb-1.5`,children:"Version *"}),e.jsx("input",{type:"text",required:!0,value:v.version,onChange:r=>$({...v,version:r.target.value}),className:`w-full px-3 py-1.5 text-xs border ${a} rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500 ${m?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"e.g., 2.0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-bold uppercase tracking-wider ${t} mb-1.5`,children:"Content * (Markdown supported)"}),e.jsx("textarea",{required:!0,value:v.content,onChange:r=>$({...v,content:r.target.value}),rows:12,className:`w-full px-3 py-2 text-xs border ${a} rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500 font-mono ${m?"bg-gray-700 text-gray-100":"bg-white"}`})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>N(null),className:`px-4 py-1.5 text-xs font-medium border ${a} rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition`,children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:D,className:"flex items-center gap-1.5 px-4 py-1.5 text-xs font-bold bg-gradient-to-r from-cyan-600 to-green-600 text-white rounded-md hover:from-cyan-700 hover:to-green-700 transition disabled:opacity-50",children:[e.jsx(ae,{className:"h-3.5 w-3.5"}),D?"Saving...":"Save Changes"]})]})]})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:`${l} rounded-lg shadow-xl max-w-4xl w-full my-8`,children:[e.jsxs("div",{className:`p-6 border-b ${a} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsxs("h2",{className:`text-2xl font-bold ${s} flex items-center gap-2 mb-1`,children:[e.jsx(ne,{className:"h-6 w-6 text-cyan-600"}),p.title]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsxs("span",{className:t,children:["Version ",p.version]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${p.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:p.is_active?"Active":"Inactive"})]})]}),e.jsx("button",{onClick:()=>x(null),className:`${t} hover:text-gray-600 transition`,children:e.jsx(U,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:e.jsx("div",{className:`prose max-w-none ${m?"prose-invert":""}`,children:e.jsx("pre",{className:"whitespace-pre-wrap font-sans",children:p.content})})})]})})]})}const Qt=[{id:"daily_sales",name:"Daily Sales Report",description:"Complete breakdown of sales for the last 24 hours.",category:"sales"},{id:"monthly_revenue",name:"Monthly Revenue Summary",description:"A high-level view of revenue trends by month.",category:"sales"},{id:"inventory_levels",name:"Low Stock Alert Report",description:"List of products with stock levels below threshold.",category:"inventory"},{id:"customer_growth",name:"New Customer Registrations",description:"Analysis of customer acquisition over time.",category:"customers"},{id:"vendor_payouts",name:"Vendor Payout History",description:"Status and history of all vendor commission payments.",category:"vendors"},{id:"top_products",name:"Best Selling Products",description:"Performance analysis of top 50 selling items.",category:"sales"}];function ca(){const{formatPrice:M}=he(),[m,f]=n.useState("7d"),[T,D]=n.useState("all"),[P,g]=n.useState(null),[N,p]=n.useState(!0),[x,i]=n.useState({revenue:0,orders:0,lowStock:0,pendingPayouts:0,pendingPayoutsCount:0}),[u,y]=n.useState(null);n.useEffect(()=>{w()},[m]);const w=async()=>{p(!0),y(null);try{const c=new Date;let j=new Date;m==="24h"?j.setHours(c.getHours()-24):m==="7d"?j.setDate(c.getDate()-7):m==="30d"?j.setDate(c.getDate()-30):m==="90d"&&j.setDate(c.getDate()-90);const{data:S,error:o}=await _.from("orders").select("total").eq("payment_status","paid").gte("created_at",j.toISOString());if(o)throw o;const h=(S==null?void 0:S.reduce((L,V)=>L+(Number(V.total)||0),0))||0,r=(S==null?void 0:S.length)||0,{count:d,error:F}=await _.from("products").select("*",{count:"exact",head:!0}).lt("stock_quantity",10).eq("is_active",!0);if(F)throw F;const{data:E,error:R}=await _.from("commissions").select("commission_amount").eq("status","pending");R&&console.warn("Commissions table check failed, might not be created yet:",R);const b=(E==null?void 0:E.reduce((L,V)=>L+(Number(V.commission_amount)||0),0))||0,A=(E==null?void 0:E.length)||0;i({revenue:h,orders:r,lowStock:d||0,pendingPayouts:b,pendingPayoutsCount:A})}catch(c){console.error("Error fetching report stats:",c),y(c.message)}finally{p(!1)}},v=async(c,j="pdf")=>{g(c);try{const S=new Date;let o=new Date;m==="24h"?o.setHours(S.getHours()-24):m==="7d"?o.setDate(S.getDate()-7):m==="30d"?o.setDate(S.getDate()-30):m==="90d"&&o.setDate(S.getDate()-90);let h=[],r="";if(c==="daily_sales"){r="Daily Sales Report";const{data:d}=await _.from("orders").select("order_number, total, status, payment_status, created_at").gte("created_at",o.toISOString()).order("created_at",{ascending:!1});h=d||[]}else if(c==="monthly_revenue"){r="Monthly Revenue Summary";const{data:d}=await _.from("orders").select("total, created_at").eq("payment_status","paid").gte("created_at",o.toISOString());h=d||[]}else if(c==="inventory_levels"){r="Low Stock Alert Report";const{data:d}=await _.from("products").select("name, stock_quantity, base_price").lt("stock_quantity",10).eq("is_active",!0);h=d||[]}else if(c==="customer_growth"){r="New Customer Registrations";const{data:d}=await _.from("profiles").select("full_name, email, created_at").eq("role","customer").gte("created_at",o.toISOString());h=d||[]}else if(c==="vendor_payouts"){r="Vendor Payout History";const{data:d}=await _.from("commissions").select("*, vendor:vendor_profiles(shop_name)").gte("created_at",o.toISOString());h=d||[]}else if(c==="top_products"){r="Best Selling Products";const{data:d}=await _.from("products").select("name, sales_count, base_price").order("sales_count",{ascending:!1}).limit(50);h=d||[]}if(j==="csv"){if(h.length===0){alert("No data available for this report and date range.");return}const d=Object.keys(h[0]),F=[d.join(","),...h.map(b=>d.map(A=>{let L=b[A];return typeof L=="object"&&(L=JSON.stringify(L)),`"${String(L).replace(/"/g,'""')}"`}).join(","))].join(`
`),E=new Blob([F],{type:"text/csv;charset=utf-8;"}),R=document.createElement("a");R.href=URL.createObjectURL(E),R.setAttribute("download",`${c}_${new Date().getTime()}.csv`),document.body.appendChild(R),R.click(),document.body.removeChild(R)}else{const d=new mt,F=d.internal.pageSize.getWidth();d.setFillColor(79,70,229),d.rect(0,0,F,40,"F"),d.setTextColor(255,255,255),d.setFontSize(22),d.text("ZimAIO Business Intelligence",15,20),d.setFontSize(12),d.text(r||c.toUpperCase(),15,30),d.setTextColor(51,65,85),d.setFontSize(10),d.text(`Generation Date: ${new Date().toLocaleString()}`,150,20,{align:"right"}),d.text("Region: Zimbabwe / Global",150,26,{align:"right"});let E=55;if(h.length===0)d.text("No data records found for the selected criteria.",15,E);else{const R=Object.keys(h[0]);d.setFontSize(9),d.setTextColor(100,116,139),d.setFont("helvetica","bold"),R.forEach((b,A)=>{d.text(b.replace("_"," ").toUpperCase(),15+A*35,E)}),E+=5,d.setDrawColor(226,232,240),d.line(15,E,F-15,E),E+=8,d.setFont("helvetica","normal"),d.setTextColor(51,65,85),h.slice(0,30).forEach(b=>{R.forEach((A,L)=>{let V=b[A];V&&typeof V=="object"&&V.shop_name?V=V.shop_name:typeof V=="object"&&(V="Data"),d.text(String(V).slice(0,20),15+L*35,E)}),E+=8,E>275&&(d.addPage(),E=20)})}d.save(`${c}_${new Date().getTime()}.pdf`)}}catch(S){console.error("Export failed:",S),y(`Export failed: ${S.message}`)}finally{g(null)}},$=Qt.filter(c=>T==="all"||c.category===T),l="bg-white",s="text-slate-900",t="text-slate-500",a="border-slate-200";return e.jsx(I,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-xl font-black uppercase tracking-tight ${s}`,children:"Reports & Analytics"}),e.jsx("p",{className:`text-xs ${t} font-medium`,children:"Real-time business intelligence and data export"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:w,disabled:N,className:"px-4 py-2 bg-white text-slate-600 border border-slate-200 text-xs font-black uppercase tracking-wider rounded-lg shadow-sm hover:bg-slate-50 transition-colors flex items-center gap-2 disabled:opacity-50",children:[e.jsx(de,{className:`h-3 w-3 ${N?"animate-spin":""}`})," Refresh"]}),e.jsxs("button",{className:"px-4 py-2 bg-indigo-600 text-white text-xs font-black uppercase tracking-wider rounded-lg shadow-sm hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[e.jsx(Ce,{className:"h-3 w-3"})," Export Dashboard"]})]})]}),u&&e.jsxs("div",{className:"p-4 bg-red-50 border border-red-100 rounded-xl flex items-start gap-4 text-red-700",children:[e.jsx(Q,{className:"h-5 w-5 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-black uppercase tracking-wider mb-1",children:"Data Connection Error"}),e.jsx("p",{className:"text-xs font-medium opacity-80",children:u})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:`${l} p-4 rounded-xl border ${a} shadow-sm`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-black",children:"Gross Revenue"}),e.jsx("span",{className:"p-1 bg-emerald-50 text-emerald-600 rounded-md",children:e.jsx(tt,{className:"h-3 w-3"})})]}),e.jsx("div",{className:`text-2xl font-black ${s}`,children:N?"...":M(x.revenue)}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-[10px] font-bold text-slate-400",children:[e.jsxs("span",{className:"text-emerald-600 flex items-center",children:[e.jsx(pe,{className:"h-3 w-3"})," Paid"]})," ",e.jsx("span",{className:"text-slate-300",children:"|"})," last ",m]})]}),e.jsxs("div",{className:`${l} p-4 rounded-xl border ${a} shadow-sm`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-black",children:"Orders"}),e.jsx("span",{className:"p-1 bg-blue-50 text-blue-600 rounded-md",children:e.jsx(se,{className:"h-3 w-3"})})]}),e.jsx("div",{className:`text-2xl font-black ${s}`,children:N?"...":x.orders}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-[10px] font-bold text-slate-400",children:[e.jsxs("span",{className:"text-blue-600 flex items-center",children:[e.jsx(pe,{className:"h-3 w-3"})," Live"]})," ",e.jsx("span",{className:"text-slate-300",children:"|"})," last ",m]})]}),e.jsxs("div",{className:`${l} p-4 rounded-xl border ${a} shadow-sm`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-black",children:"Low Stock Items"}),e.jsx("span",{className:"p-1 bg-amber-50 text-amber-600 rounded-md",children:e.jsx(Ve,{className:"h-3 w-3"})})]}),e.jsx("div",{className:`text-2xl font-black ${s}`,children:N?"...":x.lowStock}),e.jsx("div",{className:"flex items-center gap-1 mt-1 text-[10px] font-bold text-rose-600",children:x.lowStock>0?"Restock Needed":"Healthy Levels"})]}),e.jsxs("div",{className:`${l} p-4 rounded-xl border ${a} shadow-sm`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-black",children:"Pending Payouts"}),e.jsx("span",{className:"p-1 bg-violet-50 text-violet-600 rounded-md",children:e.jsx(Oe,{className:"h-3 w-3"})})]}),e.jsx("div",{className:`text-2xl font-black ${s}`,children:N?"...":M(x.pendingPayouts)}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-[10px] font-bold text-slate-500",children:[x.pendingPayoutsCount," commissions pending"]})]})]}),e.jsxs("div",{className:`${l} p-3 rounded-xl border ${a} shadow-sm flex flex-col md:flex-row items-center justify-between gap-4`,children:[e.jsx("div",{className:"flex items-center gap-2 overflow-x-auto w-full md:w-auto pb-2 md:pb-0",children:["all","sales","inventory","customers","vendors"].map(c=>e.jsx("button",{onClick:()=>D(c),className:`px-3 py-1.5 rounded-lg font-bold uppercase text-[9px] tracking-wider transition-all whitespace-nowrap ${T===c?"bg-slate-900 text-white":"bg-slate-50 text-slate-500 hover:bg-slate-100 hover:text-slate-700"}`,children:c},c))}),e.jsx("div",{className:"flex bg-slate-100 rounded-lg p-1",children:["24h","7d","30d","90d"].map(c=>e.jsx("button",{onClick:()=>f(c),className:`px-3 py-1 rounded-md text-[9px] font-black uppercase tracking-wider transition-all ${m===c?"bg-white text-slate-900 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:c},c))})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:$.map(c=>e.jsxs("div",{className:`${l} p-4 rounded-xl border ${a} shadow-sm group hover:border-indigo-500/30 transition-all`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs("div",{className:`p-2 rounded-lg ${c.category==="sales"?"bg-blue-50 text-blue-600":c.category==="inventory"?"bg-amber-50 text-amber-600":c.category==="customers"?"bg-emerald-50 text-emerald-600":"bg-violet-50 text-violet-600"}`,children:[c.category==="sales"&&e.jsx(St,{className:"h-4 w-4"}),c.category==="inventory"&&e.jsx(Ve,{className:"h-4 w-4"}),c.category==="customers"&&e.jsx(Oe,{className:"h-4 w-4"}),c.category==="vendors"&&e.jsx(se,{className:"h-4 w-4"})]}),e.jsx("h3",{className:`text-sm font-bold ${s} truncate`,children:c.name})]}),e.jsx("p",{className:"text-[10px] text-slate-500 font-medium mb-4 h-8 leading-snug line-clamp-2",children:c.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-auto",children:[e.jsxs("button",{onClick:()=>v(c.id,"pdf"),disabled:!!P,className:"px-3 py-2 bg-slate-900 text-white rounded-lg text-[9px] font-black uppercase tracking-wider hover:bg-slate-800 transition-colors flex items-center justify-center gap-2",children:[P===c.id?e.jsx(de,{className:"h-3 w-3 animate-spin"}):e.jsx(Ce,{className:"h-3 w-3"}),"PDF"]}),e.jsxs("button",{onClick:()=>v(c.id,"csv"),disabled:!!P,className:"px-3 py-2 bg-slate-50 text-slate-600 border border-slate-200 rounded-lg text-[9px] font-black uppercase tracking-wider hover:bg-slate-100 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Jt,{className:"h-3 w-3"}),"CSV"]})]})]},c.id))})]})})}function oa(){const{theme:M}=ee(),m=M==="dark",{formatPrice:f}=he(),[T,D]=n.useState([]),[P,g]=n.useState(!0),[N,p]=n.useState(""),[x,i]=n.useState("all"),[u,y]=n.useState(1),[w,v]=n.useState(0),$=10,[l,s]=n.useState({totalEarned:0,pendingAmount:0,monthlyGrowth:0,topVendor:"N/A"}),t=m?"bg-gray-800":"bg-white",a=m?"text-gray-100":"text-gray-900",c=m?"text-gray-400":"text-gray-600",j=m?"border-gray-700":"border-gray-200";n.useEffect(()=>{S(),o()},[x,u]);const S=async()=>{g(!0);try{let h=_.from("orders").select("*, vendor_profiles(shop_name)",{count:"exact"}).gt("commission_amount",0);x!=="all"&&(x==="paid"&&(h=h.or("payment_status.eq.paid,payment_status.eq.completed")),x==="pending"&&(h=h.neq("payment_status","paid").neq("payment_status","completed")));const{data:r,count:d,error:F}=await h.order("created_at",{ascending:!1}).range((u-1)*$,u*$-1);if(F)throw F;const E=(r||[]).map(R=>{var b;return{id:R.id,order_id:R.id,vendor_id:R.vendor_id,order_amount:R.subtotal+R.commission_amount,commission_rate:0,commission_amount:R.commission_amount,status:R.payment_status==="paid"||R.payment_status==="completed"?"paid":"pending",paid_at:R.created_at,created_at:R.created_at,orders:{order_number:R.id.substring(0,8).toUpperCase()},vendor_profiles:{shop_name:((b=R.vendor_profiles)==null?void 0:b.shop_name)||"N/A"}}});D(E),v(d||0)}catch(h){console.error("Error fetching commissions:",h)}finally{g(!1)}},o=async()=>{try{const{data:h}=await _.from("orders").select("commission_amount, payment_status");if(h){const r=h.reduce((F,E)=>E.payment_status==="paid"||E.payment_status==="completed"?F+(E.commission_amount||0):F,0),d=h.reduce((F,E)=>E.payment_status==="paid"||E.payment_status==="completed"?F:F+(E.commission_amount||0),0);s(F=>({...F,totalEarned:r,pendingAmount:d}))}}catch(h){console.error("Error fetching stats:",h)}};return e.jsx(I,{children:e.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-black ${a} uppercase tracking-tighter`,children:"Handling Fee Management"}),e.jsx("p",{className:c,children:"Monitor and oversee platform revenue from handling fees on vendor sales"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:`${t} p-6 rounded-[2.5rem] border ${j} shadow-xl shadow-emerald-500/5`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-emerald-500/10 rounded-2xl",children:e.jsx(tt,{className:"w-6 h-6 text-emerald-500"})}),e.jsx("span",{className:"text-emerald-500 bg-emerald-500/10 px-2 py-1 rounded-lg text-xs font-black",children:"+12.5%"})]}),e.jsx("p",{className:`text-xs font-black ${c} uppercase tracking-widest mb-1`,children:"Total Handling Fees"}),e.jsx("h3",{className:`text-3xl font-black ${a} tracking-tight`,children:f(l.totalEarned)})]}),e.jsxs("div",{className:`${t} p-6 rounded-[2.5rem] border ${j} shadow-xl shadow-amber-500/5`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-amber-500/10 rounded-2xl",children:e.jsx(yt,{className:"w-6 h-6 text-amber-500"})})}),e.jsx("p",{className:`text-xs font-black ${c} uppercase tracking-widest mb-1`,children:"Pending Payouts"}),e.jsx("h3",{className:`text-3xl font-black ${a} tracking-tight`,children:f(l.pendingAmount)})]})]}),e.jsxs("div",{className:`${t} rounded-[2.5rem] border ${j} overflow-hidden shadow-2xl shadow-gray-950/5`,children:[e.jsxs("div",{className:"p-8 border-b border-gray-100 flex flex-col md:flex-row md:items-center justify-between gap-6 bg-gray-50/50",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-3",children:["all","pending","paid"].map(h=>e.jsx("button",{onClick:()=>i(h),className:`px-6 py-2.5 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all ${x===h?"bg-emerald-600 text-white shadow-lg shadow-emerald-200":"bg-white text-gray-400 hover:text-emerald-600 border border-gray-100"}`,children:h},h))}),e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(me,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by Order ID...",value:N,onChange:h=>p(h.target.value),className:"w-full pl-12 pr-4 py-3 bg-white border border-gray-100 rounded-2xl text-xs font-bold focus:ring-4 focus:ring-emerald-500/10 outline-none"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50/50 border-b border-gray-100",children:[e.jsx("th",{className:"px-8 py-6 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Order Details"}),e.jsx("th",{className:"px-8 py-6 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Vendor"}),e.jsx("th",{className:"px-8 py-6 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Order Amount"}),e.jsx("th",{className:"px-8 py-6 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Handling Fee"}),e.jsx("th",{className:"px-8 py-6 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Status"}),e.jsx("th",{className:"px-8 py-6 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Date"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50",children:P?e.jsx("tr",{children:e.jsxs("td",{colSpan:6,className:"px-8 py-20 text-center",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-emerald-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400 font-black uppercase tracking-widest text-[10px]",children:"Processing revenue data..."})]})}):T.map(h=>{var r,d;return e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors group",children:[e.jsx("td",{className:"px-8 py-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-xl group-hover:bg-emerald-50 transition-colors",children:e.jsx(se,{className:"w-4 h-4 text-gray-400 group-hover:text-emerald-600"})}),e.jsx("div",{children:e.jsxs("p",{className:`text-sm font-black ${a} group-hover:text-emerald-600 transition-colors`,children:["#",(r=h.orders)==null?void 0:r.order_number]})})]})}),e.jsx("td",{className:"px-8 py-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-gray-600",children:[e.jsx(He,{className:"w-4 h-4 text-gray-400"}),(d=h.vendor_profiles)==null?void 0:d.shop_name]})}),e.jsxs("td",{className:"px-8 py-6 text-sm font-black text-gray-600 font-mono",children:[f(h.order_amount),e.jsxs("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:["Rate: ",h.commission_rate,"%"]})]}),e.jsxs("td",{className:"px-8 py-6",children:[e.jsx("p",{className:"text-sm font-black text-emerald-600 font-mono",children:f(h.commission_amount)}),e.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:"(Earned Fee)"})]}),e.jsx("td",{className:"px-8 py-6",children:e.jsx("span",{className:`px-4 py-1.5 rounded-full text-[9px] font-black uppercase tracking-widest ${h.status==="paid"?"bg-emerald-50 text-emerald-600":"bg-amber-50 text-amber-600"}`,children:h.status})}),e.jsx("td",{className:"px-8 py-6 text-sm font-bold text-gray-400 tabular-nums",children:new Date(h.created_at).toLocaleDateString()})]},h.id)})})]})}),e.jsxs("div",{className:"p-8 bg-gray-50/50 border-t border-gray-100 flex items-center justify-between",children:[e.jsxs("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:["Showing ",T.length," of ",w," commission entries"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>y(h=>Math.max(1,h-1)),disabled:u===1,className:"p-2 bg-white border border-gray-100 rounded-xl hover:bg-gray-100 disabled:opacity-50 transition-all shadow-sm",children:e.jsx(Qe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>y(h=>h+1),disabled:u*$>=w,className:"p-2 bg-white border border-gray-100 rounded-xl hover:bg-gray-100 disabled:opacity-50 transition-all shadow-sm",children:e.jsx(be,{className:"w-4 h-4"})})]})]})]})]})})}function rt({title:M,description:m,icon:f,children:T}){return e.jsxs(I,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(f,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:M}),e.jsx("p",{className:"text-gray-600",children:m})]})]})}),T||e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[e.jsx(f,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:M}),e.jsx("p",{className:"text-gray-600 mb-6",children:m}),e.jsx("p",{className:"text-sm text-gray-500",children:"This feature is available and ready to be configured with your specific business requirements."})]})]})}function xa(){return e.jsx(rt,{title:"Email Management",description:"Manage email templates and notifications",icon:De})}function ma(){return e.jsx(rt,{title:"Notifications Management",description:"Configure system-wide notifications and alerts",icon:jt})}export{oa as AdminCommissions,Xs as AdsManagement,sa as CatalogManagement,zs as CurrencyManagement,ia as CustomerContracts,Gs as Documentation,Zs as EmailConfiguration,xa as EmailManagement,ta as FraudDetection,Bs as ImmutableLedger,Hs as LanguageManagement,da as LogisticContracts,pa as LogisticManagement,ma as NotificationsManagement,ra as OrdersManagement,Vs as PaymentGateways,aa as ProductsManagement,Ys as PromotionManagement,Us as RefundManagement,ca as Reports,Js as SMSConfiguration,la as ShippingManagement,Ks as SliderManagement,Qs as SystemConfigurations,Ws as TriggerModule,Os as VATManagement,ea as VendorAnalytics,na as VendorContracts,ba as VendorPackages};
