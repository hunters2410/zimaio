import{n as W,v as te,r as n,j as e,S as me,m as Y,e as he,s as S,M as _e,g as it,D as Ae,h as ct,P as We,k as Je}from"./index-DO0RgZ49.js";import{A as B,P as qe,T as Ze,C as dt,F as de}from"./AdminLayout-BKwUxqku.js";import{p as ge}from"./paymentService-Cuar7UO3.js";import{C as ot}from"./credit-card-CQ2BKawh.js";import{L as ke,P as fe,M as xt,E as mt,A as Ke}from"./pen-9U-_mshZ.js";import{P as ae}from"./plus-CieQo9lf.js";import{C as oe}from"./circle-check-big-9UdHLz61.js";import{X as G}from"./x-DeAqnK16.js";import{S as K}from"./square-pen-Ca560LGD.js";import{T as Q}from"./trash-2-CW2OSWI5.js";import{S as le}from"./save-S5CdEeT-.js";import{T as pe}from"./truck-B6XH1kda.js";import{B as ut}from"./building-2-CofwNNFe.js";import{Z as ie}from"./zap-BYU6Jgn-.js";import{S as ye}from"./shield-check-VbxTMbN4.js";import{S as Pe,a as gt}from"./shield-alert-D8SJFemx.js";import{E as ne}from"./eye-DPlbvRrL.js";import{C as pt}from"./circle-check-CHFZCnRk.js";import{C as Ee}from"./calendar-BWzpL3kO.js";import{F as $e}from"./funnel-BlC9_99m.js";import{C as Te}from"./circle-x-TK2e516B.js";import{F as re}from"./file-text-CE8OtNx3.js";import{S as Se}from"./shield-DcS4_U9J.js";import{D as Me,E as ht}from"./jspdf.es.min-CPoyD47i.js";import{C as je}from"./chevron-right-Q63LQqcu.js";import{E as Xe,M as Re,a as bt,T as Ie}from"./triangle-alert-BGFUz6oR.js";import{U as ft}from"./users-BSjrVskw.js";import{S as Qe}from"./settings-CrPpwdBJ.js";import{C as se}from"./check-BpY1kcmu.js";import{G as ve}from"./globe-D32u69CK.js";import{M as yt}from"./message-square-CN4SiCqS.js";import{S as Ve}from"./send-DpZEbJeI.js";import{C as xe}from"./clock-BObq69c6.js";import{U as Ye}from"./upload-DKro60YK.js";import{E as jt}from"./ellipsis-vertical-B-H3RZjS.js";import{S as et}from"./star-DAVgxyIY.js";import{L as vt}from"./lock-CYkULL1F.js";import{A as be}from"./arrow-up-right-Dg7K0HEg.js";import{S as tt}from"./store-66_jksTa.js";import{U as Nt}from"./user-x-BxygX628.js";import{C as st,B as wt}from"./chevron-left-41R8eOj5.js";import{T as at}from"./trending-up-wwL8Hvm9.js";import{W as _t}from"./wallet-C3LNpqMM.js";import"./maximize-Bk65GDgD.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],$t=W("activity",kt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ct=W("ban",St);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],rt=W("book",Dt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],Pt=W("chart-line",At);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],Oe=W("chart-no-axes-column-increasing",Mt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Ue=W("chart-pie",Et);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Be=W("circle-question-mark",Tt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],Ft=W("code",Lt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Rt=W("crown",qt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Vt=W("database",It);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],Ut=W("flag",Ot);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Ce=W("grid-3x3",Bt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],lt=W("key",Gt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=[["path",{d:"M8 18L12 22L16 18",key:"cskvfv"}],["path",{d:"M12 2V22",key:"r89rzk"}]],Ht=W("move-down",zt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=[["path",{d:"M8 6L12 2L16 6",key:"1yvkyx"}],["path",{d:"M12 2V22",key:"r89rzk"}]],Jt=W("move-up",Wt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Kt=W("panels-top-left",Zt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ne=W("power-off",Xt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],we=W("power",Qt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],es=W("table",Yt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],Ge=W("ticket",ts);function Zs(){var J,q,k,I,H,P,U,Z,ee,ce,Le,Fe;const{theme:L}=te(),c=L==="dark",[j,F]=n.useState([]),[M,E]=n.useState(!0),[b,$]=n.useState(null),[h,x]=n.useState(!1),[m,g]=n.useState(null),[v,y]=n.useState([]),[w,N]=n.useState("list"),[l,a]=n.useState(""),t=c?"bg-gray-800":"bg-white",r=c?"text-gray-100":"text-gray-900",u=c?"text-gray-400":"text-gray-600",_=c?"border-gray-700":"border-gray-200";n.useEffect(()=>{C()},[]);const C=async()=>{E(!0);try{const D=await ge.getAllGateways();F(D)}catch(D){g({type:"error",text:D.message})}finally{E(!1)}},d=async D=>{if($({...D,configuration:D.configuration||{}}),D.gateway_type==="manual")try{const z=await ge.getInstructions(D.id);y(z)}catch(z){g({type:"error",text:z.message})}},p=async D=>{if(D.preventDefault(),!!b){E(!0);try{await ge.updateGateway(b.id,{display_name:b.display_name,description:b.description,is_active:b.is_active,configuration:b.configuration,instructions:b.instructions,logo_url:b.logo_url}),b.gateway_type==="manual"&&v.length>0&&await ge.saveInstructions(b.id,v),g({type:"success",text:"Payment gateway updated successfully"}),$(null),y([]),C()}catch(z){g({type:"error",text:z.message})}finally{E(!1)}}},s=async D=>{const z=[...j];F(j.map(X=>X.id===D.id?{...X,is_active:!X.is_active}:X));try{await ge.updateGateway(D.id,{is_active:!D.is_active}),g({type:"success",text:`${D.display_name} ${D.is_active?"disabled":"enabled"} successfully`}),C()}catch(X){F(z),g({type:"error",text:X.message})}},i=async D=>{if(confirm(`Are you sure you want to delete ${D.display_name}?`))try{await ge.deleteGateway(D.id),g({type:"success",text:"Payment gateway deleted successfully"}),C()}catch(z){g({type:"error",text:z.message})}},V=async D=>{D.preventDefault();const z=new FormData(D.target);try{await ge.createManualGateway({gateway_name:z.get("gateway_name"),gateway_type:"manual",display_name:z.get("display_name"),description:z.get("description"),is_active:!1,is_default:!1,configuration:{},supported_currencies:["USD","ZWL"],instructions:z.get("instructions"),logo_url:z.get("logo_url"),sort_order:j.length+1}),g({type:"success",text:"Manual payment gateway added successfully"}),x(!1),C()}catch(X){g({type:"error",text:X.message})}},o=(D,z)=>{b&&$({...b,configuration:{...b.configuration,[D]:z}})},A=()=>{y([...v,{id:`temp-${Date.now()}`,gateway_id:b.id,step_number:v.length+1,title:"",description:"",created_at:new Date().toISOString()}])},f=(D,z,X)=>{const ue=[...v];ue[D]={...ue[D],[z]:X},y(ue)},T=D=>{const z=v.filter((X,ue)=>ue!==D);z.forEach((X,ue)=>{X.step_number=ue+1}),y(z)},R=D=>{switch(D){case"paynow":return"ðŸ’³";case"paypal":return"ðŸ…¿ï¸";case"stripe":return"ðŸ’ ";case"cash":return"ðŸ’µ";default:return"ðŸ¦"}},O=j.filter(D=>{var z;return D.display_name.toLowerCase().includes(l.toLowerCase())||D.gateway_type.toLowerCase().includes(l.toLowerCase())||((z=D.description)==null?void 0:z.toLowerCase().includes(l.toLowerCase()))});return M&&j.length===0?e.jsx(B,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600"})})}):e.jsxs(B,{children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ot,{className:"h-6 w-6 text-cyan-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${r}`,children:"Payment Gateways"}),e.jsx("p",{className:`text-sm ${u}`,children:"Configure payment methods for your store"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:`absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 ${u}`}),e.jsx("input",{type:"text",placeholder:"Search gateways...",value:l,onChange:D=>a(D.target.value),className:`pl-9 pr-4 py-1.5 text-sm border ${_} rounded-lg focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-800 text-gray-100":"bg-white"} w-full md:w-64`})]}),e.jsxs("div",{className:`flex items-center border ${_} rounded-lg p-1`,children:[e.jsx("button",{onClick:()=>N("grid"),className:`p-1.5 rounded transition ${w==="grid"?"bg-cyan-600 text-white":`${u} hover:bg-gray-100 dark:hover:bg-gray-700`}`,title:"Grid view",children:e.jsx(Ce,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>N("list"),className:`p-1.5 rounded transition ${w==="list"?"bg-cyan-600 text-white":`${u} hover:bg-gray-100 dark:hover:bg-gray-700`}`,title:"List view",children:e.jsx(ke,{className:"h-4 w-4"})})]}),e.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-1.5 px-3 py-1.5 text-sm bg-gradient-to-r from-cyan-600 to-green-600 text-white rounded-lg hover:from-cyan-700 hover:to-green-700 transition",children:[e.jsx(ae,{className:"h-4 w-4"}),"Add Gateway"]})]})]})}),m&&e.jsxs("div",{className:`mb-4 p-3 rounded-lg flex items-start space-x-2 text-sm ${m.type==="success"?"bg-green-50 border border-green-200 text-green-800 dark:bg-green-900/20 dark:border-green-800 dark:text-green-400":"bg-red-50 border border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-800 dark:text-red-400"}`,children:[m.type==="success"?e.jsx(oe,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}):e.jsx(Y,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:m.text}),e.jsx("button",{onClick:()=>g(null),className:"ml-auto",children:e.jsx(G,{className:"h-3.5 w-3.5"})})]}),w==="grid"?e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:O.map(D=>e.jsxs("div",{className:`${t} rounded-2xl shadow-sm border ${_} p-6 transition-all hover:shadow-xl hover:-translate-y-1 group duration-300 relative overflow-hidden`,children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx("span",{className:"text-6xl grayscale",children:R(D.gateway_type)})}),e.jsx("div",{className:"flex items-start justify-between mb-4 relative z-10",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-4xl shadow-sm bg-gray-50 dark:bg-gray-700/50 rounded-xl p-2",children:R(D.gateway_type)}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-bold ${r} tracking-tight`,children:D.display_name}),D.is_active?e.jsxs("span",{className:"inline-flex items-center gap-1.5 mt-1 px-2.5 py-0.5 text-[10px] font-bold uppercase tracking-wider rounded-full bg-emerald-100/50 text-emerald-700 dark:bg-emerald-500/10 dark:text-emerald-400",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),"Active"]}):e.jsx("span",{className:"inline-flex items-center mt-1 px-2.5 py-0.5 text-[10px] font-bold uppercase tracking-wider rounded-full bg-gray-100 text-gray-500 dark:bg-gray-700 dark:text-gray-400",children:"Inactive"})]})]})}),e.jsx("p",{className:`text-xs ${u} mb-6 line-clamp-2 min-h-[2.5em] relative z-10 font-medium leading-relaxed`,children:D.description}),e.jsxs("div",{className:"flex items-center gap-3 mt-auto relative z-10",children:[e.jsxs("button",{onClick:()=>d(D),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 text-xs font-bold uppercase tracking-wider bg-gray-50 text-gray-700 rounded-xl hover:bg-gray-100 transition dark:bg-gray-700/50 dark:text-gray-300 dark:hover:bg-gray-700",children:[e.jsx(K,{className:"h-3.5 w-3.5"}),"Configure"]}),e.jsx("button",{onClick:()=>s(D),className:`flex items-center justify-center p-2.5 rounded-xl transition ${D.is_active?"bg-emerald-50 text-emerald-600 hover:bg-red-50 hover:text-red-600 dark:bg-emerald-900/20 dark:text-emerald-400":"bg-gray-50 text-gray-400 hover:bg-emerald-50 hover:text-emerald-600 dark:bg-gray-800 dark:text-gray-500"}`,title:D.is_active?"Disable Gateway":"Enable Gateway",children:D.is_active?e.jsx(Ne,{className:"h-4 w-4"}):e.jsx(we,{className:"h-4 w-4"})}),D.gateway_type==="manual"&&e.jsx("button",{onClick:()=>i(D),className:"p-2.5 text-gray-400 hover:bg-red-50 hover:text-red-600 rounded-xl transition dark:hover:bg-red-900/30",title:"Delete",children:e.jsx(Q,{className:"h-4 w-4"})})]})]},D.id))}):e.jsx("div",{className:"flex flex-col gap-4",children:O.map(D=>e.jsxs("div",{className:`${t} rounded-xl shadow-sm border border-transparent hover:border-gray-200 dark:hover:border-gray-700 p-5 transition-all hover:shadow-lg group flex items-center gap-6 relative overflow-hidden`,children:[e.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1 ${D.is_active?"bg-emerald-500":"bg-gray-200 dark:bg-gray-700"}`}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-2xl ${D.is_active?"bg-emerald-50 text-emerald-600 dark:bg-emerald-900/20 dark:text-emerald-400":"bg-gray-100 text-gray-400 dark:bg-gray-800 dark:text-gray-500"}`,children:R(D.gateway_type)})}),e.jsxs("div",{className:"flex-1 min-w-0 grid grid-cols-1 md:grid-cols-12 gap-6 items-center",children:[e.jsxs("div",{className:"md:col-span-4",children:[e.jsxs("h3",{className:`text-base font-bold ${r} flex items-center gap-3`,children:[D.display_name,D.is_default&&e.jsx("span",{className:"text-[9px] bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full uppercase tracking-wider font-extrabold",children:"Default"})]}),e.jsx("p",{className:`text-xs ${u} mt-1 truncate`,children:D.description})]}),e.jsx("div",{className:"md:col-span-4 hidden md:flex flex-wrap gap-1.5",children:D.supported_currencies.map(z=>e.jsx("span",{className:"px-2 py-0.5 bg-blue-50 text-blue-600 border border-blue-100 rounded text-[10px] font-bold dark:bg-blue-900/20 dark:text-blue-400 dark:border-blue-800",children:z},z))}),e.jsx("div",{className:"md:col-span-2 flex items-center",children:D.is_active?e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 text-[10px] font-bold uppercase tracking-wider rounded-full bg-emerald-50 text-emerald-700 dark:bg-emerald-500/10 dark:text-emerald-400 ring-1 ring-emerald-500/20",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),"Active"]}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 text-[10px] font-bold uppercase tracking-wider rounded-full bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400 ring-1 ring-gray-200 dark:ring-gray-700",children:"Inactive"})})]}),e.jsxs("div",{className:"flex items-center gap-2 opacity-100 md:opacity-0 group-hover:opacity-100 transition-opacity ml-auto",children:[e.jsx("button",{onClick:()=>d(D),className:"p-2 text-gray-500 hover:text-cyan-600 hover:bg-cyan-50 rounded-lg transition dark:text-gray-400 dark:hover:bg-cyan-900/20",title:"Configure",children:e.jsx(K,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>s(D),className:`p-2 rounded-lg transition ${D.is_active?"text-emerald-600 hover:bg-red-50 hover:text-red-600 dark:text-emerald-400":"text-gray-400 hover:text-emerald-600 hover:bg-emerald-50 dark:text-gray-500"}`,title:D.is_active?"Disable":"Enable",children:D.is_active?e.jsx(Ne,{className:"h-4 w-4"}):e.jsx(we,{className:"h-4 w-4"})}),D.gateway_type==="manual"&&e.jsx("button",{onClick:()=>i(D),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition dark:hover:bg-red-900/20",title:"Delete",children:e.jsx(Q,{className:"h-4 w-4"})})]})]},D.id))}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:`${t} rounded-lg shadow-xl max-w-3xl w-full my-8`,children:[e.jsxs("div",{className:`p-4 border-b ${_} flex items-center justify-between`,children:[e.jsxs("h2",{className:`text-lg font-bold ${r} flex items-center gap-2`,children:[e.jsx(K,{className:"h-5 w-5 text-cyan-600"}),"Configure ",b.display_name]}),e.jsx("button",{onClick:()=>{$(null),y([])},className:`${u} hover:text-gray-600 transition`,children:e.jsx(G,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:p,className:"p-4 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${r} mb-1.5`,children:"Display Name *"}),e.jsx("input",{type:"text",required:!0,value:b.display_name,onChange:D=>$({...b,display_name:D.target.value}),className:`w-full px-3 py-1.5 text-sm border ${_} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${r} mb-1.5`,children:"Description"}),e.jsx("textarea",{value:b.description||"",onChange:D=>$({...b,description:D.target.value}),rows:2,className:`w-full px-3 py-1.5 text-sm border ${_} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`})]}),b.gateway_type==="paynow"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:`text-sm font-semibold ${r}`,children:"PayNow Configuration"}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${r} mb-1.5`,children:"Integration ID *"}),e.jsx("input",{type:"text",required:!0,value:((J=b.configuration)==null?void 0:J.integration_id)||"",onChange:D=>o("integration_id",D.target.value),className:`w-full px-3 py-1.5 text-sm border ${_} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"Enter your PayNow Integration ID"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${r} mb-1.5`,children:"Integration Key *"}),e.jsx("input",{type:"password",required:!0,value:((q=b.configuration)==null?void 0:q.integration_key)||"",onChange:D=>o("integration_key",D.target.value),className:`w-full px-3 py-1.5 text-sm border ${_} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"Enter your PayNow Integration Key"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${r} mb-1.5`,children:"Return URL *"}),e.jsx("input",{type:"url",required:!0,value:((k=b.configuration)==null?void 0:k.return_url)||"",onChange:D=>o("return_url",D.target.value),className:`w-full px-3 py-1.5 text-sm border ${_} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"https://yourdomain.com/payment/return"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${r} mb-1.5`,children:"Result URL *"}),e.jsx("input",{type:"url",required:!0,value:((I=b.configuration)==null?void 0:I.result_url)||"",onChange:D=>o("result_url",D.target.value),className:`w-full px-3 py-1.5 text-sm border ${_} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"https://yourdomain.com/payment/result"})]})]}),b.gateway_type==="paypal"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:`text-sm font-semibold ${r}`,children:"PayPal Configuration"}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${r} mb-1.5`,children:"Client ID *"}),e.jsx("input",{type:"text",required:!0,value:((H=b.configuration)==null?void 0:H.client_id)||"",onChange:D=>o("client_id",D.target.value),className:`w-full px-3 py-1.5 text-sm border ${_} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"Enter your PayPal Client ID"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${r} mb-1.5`,children:"Client Secret *"}),e.jsx("input",{type:"password",required:!0,value:((P=b.configuration)==null?void 0:P.client_secret)||"",onChange:D=>o("client_secret",D.target.value),className:`w-full px-3 py-1.5 text-sm border ${_} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"Enter your PayPal Client Secret"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${r} mb-1.5`,children:"Mode *"}),e.jsxs("select",{value:((U=b.configuration)==null?void 0:U.mode)||"sandbox",onChange:D=>o("mode",D.target.value),className:`w-full px-3 py-1.5 text-sm border ${_} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`,children:[e.jsx("option",{value:"sandbox",children:"Sandbox (Testing)"}),e.jsx("option",{value:"live",children:"Live (Production)"})]})]})]}),b.gateway_type==="stripe"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:`text-sm font-semibold ${r}`,children:"Stripe Configuration"}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${r} mb-1.5`,children:"Publishable Key *"}),e.jsx("input",{type:"text",required:!0,value:((Z=b.configuration)==null?void 0:Z.publishable_key)||"",onChange:D=>o("publishable_key",D.target.value),className:`w-full px-3 py-1.5 text-sm border ${_} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"pk_test_..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${r} mb-1.5`,children:"Secret Key *"}),e.jsx("input",{type:"password",required:!0,value:((ee=b.configuration)==null?void 0:ee.secret_key)||"",onChange:D=>o("secret_key",D.target.value),className:`w-full px-3 py-1.5 text-sm border ${_} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"sk_test_..."})]})]}),b.gateway_type==="iveri"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:`text-sm font-semibold ${r}`,children:"iVeri Configuration"}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${r} mb-1.5`,children:"Application ID *"}),e.jsx("input",{type:"text",required:!0,value:((ce=b.configuration)==null?void 0:ce.application_id)||"",onChange:D=>o("application_id",D.target.value),className:`w-full px-3 py-1.5 text-sm border ${_} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"{3b80...}"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${r} mb-1.5`,children:"Certificate ID *"}),e.jsx("input",{type:"text",required:!0,value:((Le=b.configuration)==null?void 0:Le.certificate_id)||"",onChange:D=>o("certificate_id",D.target.value),className:`w-full px-3 py-1.5 text-sm border ${_} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"{4c96...}"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${r} mb-1.5`,children:"Mode *"}),e.jsxs("select",{value:((Fe=b.configuration)==null?void 0:Fe.mode)||"Live",onChange:D=>o("mode",D.target.value),className:`w-full px-3 py-1.5 text-sm border ${_} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`,children:[e.jsx("option",{value:"Live",children:"Live (Production)"}),e.jsx("option",{value:"Test",children:"Test (Sandbox)"})]})]})]}),b.gateway_type==="manual"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:`text-sm font-semibold ${r} flex items-center justify-between`,children:["Payment Instructions",e.jsxs("button",{type:"button",onClick:A,className:"flex items-center gap-1 px-2 py-1 text-xs bg-cyan-600 text-white rounded hover:bg-cyan-700 transition",children:[e.jsx(ae,{className:"h-3.5 w-3.5"}),"Add Step"]})]}),v.map((D,z)=>e.jsxs("div",{className:`p-3 border ${_} rounded`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:`text-xs font-medium ${r}`,children:["Step ",D.step_number]}),e.jsx("button",{type:"button",onClick:()=>T(z),className:"text-red-600 hover:text-red-700",children:e.jsx(Q,{className:"h-3.5 w-3.5"})})]}),e.jsx("input",{type:"text",value:D.title,onChange:X=>f(z,"title",X.target.value),placeholder:"Step title",className:`w-full px-2.5 py-1.5 mb-2 text-sm border ${_} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`}),e.jsx("textarea",{value:D.description,onChange:X=>f(z,"description",X.target.value),placeholder:"Step description",rows:2,className:`w-full px-2.5 py-1.5 text-sm border ${_} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`})]},D.id))]}),e.jsx("div",{className:"pt-2",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",className:"sr-only",checked:b.is_active,onChange:D=>$({...b,is_active:D.target.checked})}),e.jsx("div",{className:`block w-10 h-6 rounded-full transition-colors ${b.is_active?"bg-emerald-500":"bg-gray-400"}`}),e.jsx("div",{className:`absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${b.is_active?"translate-x-4":""}`})]}),e.jsxs("div",{children:[e.jsx("span",{className:`block text-xs font-bold ${r} group-hover:text-cyan-600 transition-colors`,children:b.is_active?"Gateway is Active":"Gateway is Inactive"}),e.jsx("span",{className:`text-[10px] ${u}`,children:"Toggle to enable or disable this payment method for checkouts"})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${r} mb-1.5`,children:"General Instructions"}),e.jsx("textarea",{value:b.instructions||"",onChange:D=>$({...b,instructions:D.target.value}),rows:3,className:`w-full px-3 py-1.5 text-sm border ${_} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"Additional instructions for users"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:()=>{$(null),y([])},className:`px-4 py-1.5 text-sm border ${_} rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition`,children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:M,className:"flex items-center gap-1.5 px-4 py-1.5 text-sm bg-gradient-to-r from-cyan-600 to-green-600 text-white rounded hover:from-cyan-700 hover:to-green-700 transition disabled:opacity-50",children:[e.jsx(le,{className:"h-4 w-4"}),M?"Saving...":"Save"]})]})]})]})}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${t} rounded-lg shadow-xl max-w-xl w-full`,children:[e.jsxs("div",{className:`p-4 border-b ${_} flex items-center justify-between`,children:[e.jsx("h2",{className:`text-lg font-bold ${r}`,children:"Add Manual Payment Gateway"}),e.jsx("button",{onClick:()=>x(!1),className:`${u} hover:text-gray-600 transition`,children:e.jsx(G,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:V,className:"p-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${r} mb-1.5`,children:"Gateway Name * (lowercase, no spaces)"}),e.jsx("input",{type:"text",name:"gateway_name",required:!0,pattern:"[a-z_]+",className:`w-full px-3 py-1.5 text-sm border ${_} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"bank_transfer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${r} mb-1.5`,children:"Display Name *"}),e.jsx("input",{type:"text",name:"display_name",required:!0,className:`w-full px-3 py-1.5 text-sm border ${_} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"Bank Transfer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${r} mb-1.5`,children:"Description"}),e.jsx("textarea",{name:"description",rows:2,className:`w-full px-3 py-1.5 text-sm border ${_} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"Pay via direct bank transfer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${r} mb-1.5`,children:"Instructions *"}),e.jsx("textarea",{name:"instructions",required:!0,rows:4,className:`w-full px-3 py-1.5 text-sm border ${_} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:`To pay via bank transfer:
1. Transfer to: Account Name
2. Bank: Bank Name
3. Account Number: 1234567890
4. Reference: Your Order Number`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${r} mb-1.5`,children:"Logo URL (optional)"}),e.jsx("input",{type:"url",name:"logo_url",className:`w-full px-3 py-1.5 text-sm border ${_} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"https://example.com/logo.png"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:`px-4 py-1.5 text-sm border ${_} rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition`,children:"Cancel"}),e.jsxs("button",{type:"submit",className:"flex items-center gap-1.5 px-4 py-1.5 text-sm bg-gradient-to-r from-cyan-600 to-green-600 text-white rounded hover:from-cyan-700 hover:to-green-700 transition",children:[e.jsx(ae,{className:"h-4 w-4"}),"Add Gateway"]})]})]})]})})]})}function Ks(){const{formatPrice:L}=he(),[c,j]=n.useState([]),[F,M]=n.useState([]),[E,b]=n.useState([]),[$,h]=n.useState(!0),[x,m]=n.useState("partners"),[g,v]=n.useState(""),[y,w]=n.useState(null),[N,l]=n.useState(!1),[a,t]=n.useState(!1),[r,u]=n.useState(!1),[_,C]=n.useState(null),[d,p]=n.useState({company_name:"",business_email:"",business_phone:"",description:"",is_active:!0}),[s,i]=n.useState({email:"",password:"",full_name:"",company_name:"",business_phone:""});n.useEffect(()=>{V()},[x]);const V=async()=>{h(!0);try{if(x==="partners"){const{data:k,error:I}=await S.from("logistics_profiles").select("*, driver_count:delivery_drivers(count), method_count:shipping_methods(count)").order("created_at",{ascending:!1});if(I)throw I;const H=(k||[]).map(P=>{var U,Z,ee,ce;return{...P,driver_count:((Z=(U=P.driver_count)==null?void 0:U[0])==null?void 0:Z.count)||0,method_count:((ce=(ee=P.method_count)==null?void 0:ee[0])==null?void 0:ce.count)||0}});j(H)}else if(x==="fleet"){const{data:k,error:I}=await S.from("delivery_drivers").select("*, logistics_profiles(company_name)").order("driver_name");if(I)throw I;M(k||[])}else if(x==="rates"){const{data:k,error:I}=await S.from("shipping_methods").select("*, logistics_profiles(company_name)").not("logistics_id","is",null).order("base_cost");if(I)throw I;b(k||[])}}catch(k){C({type:"error",text:k.message})}finally{h(!1)}},o=async k=>{try{const{error:I}=await S.from("logistics_profiles").update({is_verified:!k.is_verified}).eq("id",k.id);if(I)throw I;C({type:"success",text:`Verification status updated for ${k.company_name}.`}),V(),(y==null?void 0:y.id)===k.id&&w({...k,is_verified:!k.is_verified})}catch(I){C({type:"error",text:`Update failed: ${I.message}`})}},A=async k=>{try{const{error:I}=await S.from("logistics_profiles").update({is_active:!k.is_active}).eq("id",k.id);if(I)throw I;C({type:"success",text:`Courier status updated for ${k.company_name}.`}),V(),(y==null?void 0:y.id)===k.id&&w({...k,is_active:!k.is_active})}catch(I){C({type:"error",text:`Update failed: ${I.message}`})}},f=k=>{p({company_name:k.company_name,business_email:k.business_email,business_phone:k.business_phone||"",description:k.description||"",is_active:k.is_active}),w(k),t(!0)},T=async k=>{if(k.preventDefault(),!!y){h(!0);try{const{error:I}=await S.from("logistics_profiles").update({company_name:d.company_name,business_email:d.business_email,business_phone:d.business_phone,description:d.description,is_active:d.is_active}).eq("id",y.id);if(I)throw I;C({type:"success",text:`${d.company_name} updated successfully!`}),t(!1),w(null),V()}catch(I){C({type:"error",text:`Save failed: ${I.message}`})}finally{h(!1)}}},R=async k=>{k.preventDefault(),h(!0);try{const{data:I,error:H}=await S.auth.signUp({email:s.email,password:s.password,options:{data:{full_name:s.full_name,role:"logistic"}}});if(H)throw H;if(I.user){const{error:P}=await S.from("profiles").upsert({id:I.user.id,email:s.email,full_name:s.full_name,role:"logistic",is_active:!0,is_verified:!0});if(P)throw P;const{error:U}=await S.from("logistics_profiles").insert({user_id:I.user.id,company_name:s.company_name,business_email:s.email,business_phone:s.business_phone,is_active:!0,is_verified:!0});if(U)throw U;C({type:"success",text:`Logistics partner ${s.company_name} registered successfully!`}),u(!1),i({email:"",password:"",full_name:"",company_name:"",business_phone:""}),V()}}catch(I){C({type:"error",text:`Registration failed: ${I.message}`})}finally{h(!1)}},O="border-slate-200",J="text-slate-900",q="text-slate-500";return e.jsxs(B,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white rounded-lg shadow-lg shadow-emerald-500/20 border border-slate-100",children:e.jsx(pe,{className:"h-5 w-5 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-xl font-black tracking-tight ${J} uppercase`,children:"Logistics Oversight"}),e.jsx("p",{className:`text-[10px] font-bold ${q} tracking-wide`,children:"Global Infrastructure Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-emerald-600 text-white rounded-lg font-bold text-[10px] hover:bg-emerald-700 transition-all shadow-sm uppercase tracking-widest",children:[e.jsx(ae,{className:"h-3 w-3"})," Register Carrier"]}),e.jsx("div",{className:"flex bg-slate-100 p-1 rounded-lg border border-slate-200 shadow-sm",children:["partners","fleet","rates"].map(k=>e.jsx("button",{onClick:()=>m(k),className:`px-4 py-1.5 rounded-md text-[10px] font-black uppercase tracking-wider transition-all ${x===k?"bg-white text-emerald-600 shadow-sm border border-emerald-100":"text-slate-500 hover:text-slate-900"}`,children:k},k))})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{label:"Carriers",value:c.length,icon:ut,color:"text-blue-600",bg:"bg-blue-50"},{label:"Fleet",value:F.length,icon:pe,color:"text-emerald-600",bg:"bg-emerald-50"},{label:"Routes",value:E.length,icon:ie,color:"text-violet-600",bg:"bg-violet-50"},{label:"Rating",value:"4.9",icon:ye,color:"text-amber-600",bg:"bg-amber-50"}].map((k,I)=>e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-wider",children:k.label}),e.jsx("h3",{className:`text-xl font-black ${J} mt-1`,children:k.value})]}),e.jsx("div",{className:`p-2.5 rounded-xl ${k.bg}`,children:e.jsx(k.icon,{className:`h-5 w-5 ${k.color}`})})]},I))}),e.jsx("div",{className:"flex items-center justify-between gap-4",children:e.jsxs("div",{className:"relative max-w-xs w-full",children:[e.jsx(me,{className:`absolute left-3 top-1/2 -translate-y-1/2 ${q} h-3.5 w-3.5`}),e.jsx("input",{type:"text",placeholder:"Search...",value:g,onChange:k=>v(k.target.value),className:`w-full pl-9 pr-4 py-2.5 bg-white border ${O} rounded-xl text-xs font-bold focus:ring-2 focus:ring-slate-900/10 outline-none ${J} shadow-sm`})]})}),_&&e.jsxs("div",{className:`px-4 py-2 rounded-lg flex items-center gap-2 text-xs font-bold animate-in slide-in-from-top-2 ${_.type==="success"?"bg-emerald-50 text-emerald-700 border border-emerald-100":"bg-red-50 text-red-700 border border-red-100"}`,children:[e.jsx(Y,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:_.text}),e.jsx("button",{onClick:()=>C(null),className:"ml-auto",children:e.jsx(G,{className:"h-3.5 w-3.5"})})]}),e.jsx("div",{className:`bg-white rounded-xl border ${O} shadow-sm overflow-hidden`,children:$?e.jsx("div",{className:"p-12 flex justify-center",children:e.jsx("div",{className:"w-6 h-6 border-2 border-emerald-600/20 border-t-emerald-600 rounded-full animate-spin"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:`bg-slate-50 border-b ${O}`,children:e.jsxs("tr",{children:[x==="partners"&&e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-5 py-3 text-[9px] font-black text-slate-500 uppercase tracking-widest",children:"Entity & Status"}),e.jsx("th",{className:"px-5 py-3 text-[9px] font-black text-slate-500 uppercase tracking-widest",children:"Resources"}),e.jsx("th",{className:"px-5 py-3 text-[9px] font-black text-slate-500 uppercase tracking-widest",children:"Verification"}),e.jsx("th",{className:"px-5 py-3 text-[9px] font-black text-slate-500 uppercase tracking-widest text-right",children:"Actions"})]}),x==="fleet"&&e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-5 py-3 text-[9px] font-black text-slate-500 uppercase tracking-widest",children:"Driver"}),e.jsx("th",{className:"px-5 py-3 text-[9px] font-black text-slate-500 uppercase tracking-widest",children:"Vehicle"}),e.jsx("th",{className:"px-5 py-3 text-[9px] font-black text-slate-500 uppercase tracking-widest",children:"Partner"}),e.jsx("th",{className:"px-5 py-3 text-[9px] font-black text-slate-500 uppercase tracking-widest text-right",children:"Status"})]}),x==="rates"&&e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-5 py-3 text-[9px] font-black text-slate-500 uppercase tracking-widest",children:"Service"}),e.jsx("th",{className:"px-5 py-3 text-[9px] font-black text-slate-500 uppercase tracking-widest",children:"Provider"}),e.jsx("th",{className:"px-5 py-3 text-[9px] font-black text-slate-500 uppercase tracking-widest",children:"Cost"}),e.jsx("th",{className:"px-5 py-3 text-[9px] font-black text-slate-500 uppercase tracking-widest text-right",children:"Status"})]})]})}),e.jsxs("tbody",{className:`divide-y ${O}`,children:[x==="partners"&&c.map(k=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[e.jsx("td",{className:"px-5 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 bg-slate-100 rounded-lg flex items-center justify-center font-black text-xs text-slate-700",children:k.company_name.charAt(0)}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:`text-sm font-black ${J}`,children:k.company_name}),e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[8px] font-black uppercase tracking-wider ${k.is_active?"bg-emerald-100 text-emerald-700":"bg-rose-100 text-rose-700"}`,children:k.is_active?"Active":"Inactive"})]}),e.jsx("p",{className:`text-[10px] font-bold ${q} mt-0.5`,children:k.business_email})]})]})}),e.jsx("td",{className:"px-5 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{className:"px-2 py-1 bg-slate-100 rounded-md text-[9px] font-bold text-slate-600 border border-slate-200",children:[k.driver_count," Drivers"]}),e.jsxs("span",{className:"px-2 py-1 bg-slate-100 rounded-md text-[9px] font-bold text-slate-600 border border-slate-200",children:[k.method_count," Lanes"]})]})}),e.jsx("td",{className:"px-5 py-4",children:e.jsx("div",{className:"flex gap-1.5",children:k.is_verified?e.jsxs("span",{className:"flex items-center gap-1.5 text-[10px] font-black text-emerald-600 uppercase tracking-wider",children:[e.jsx(ye,{className:"h-3 w-3"})," Verified"]}):e.jsxs("span",{className:"flex items-center gap-1.5 text-[10px] font-black text-amber-600 uppercase tracking-wider",children:[e.jsx(Pe,{className:"h-3 w-3"})," Pending"]})})}),e.jsx("td",{className:"px-5 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>f(k),className:"p-2 bg-slate-100 text-cyan-600 rounded-lg hover:bg-cyan-50 transition-all",children:e.jsx(K,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>{w(k),l(!0)},className:"p-2 bg-slate-100 text-slate-600 rounded-lg hover:bg-slate-900 hover:text-white transition-all",children:e.jsx(ne,{className:"h-4 w-4"})})]})})]},k.id)),x==="fleet"&&F.map(k=>{var I;return e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsxs("td",{className:"px-5 py-4",children:[e.jsx("p",{className:`text-xs font-bold ${J}`,children:k.driver_name}),e.jsx("p",{className:`text-[10px] font-semibold ${q}`,children:k.phone_number})]}),e.jsxs("td",{className:"px-5 py-4 text-xs font-semibold text-slate-500 capitalize",children:[k.vehicle_type," - ",e.jsx("span",{className:"font-mono uppercase text-slate-900 font-bold",children:k.vehicle_number})]}),e.jsx("td",{className:"px-5 py-4 text-xs font-bold text-slate-700",children:(I=k.logistics_profiles)==null?void 0:I.company_name}),e.jsx("td",{className:"px-5 py-4 text-right",children:e.jsx("span",{className:`text-[9px] font-black uppercase tracking-wider ${k.is_available?"text-emerald-600":"text-slate-400"}`,children:k.is_available?"Online":"Offline"})})]},k.id)}),x==="rates"&&E.map(k=>{var I;return e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"px-5 py-4 text-xs font-bold text-slate-800",children:k.display_name}),e.jsx("td",{className:"px-5 py-4 text-xs font-semibold text-slate-500",children:(I=k.logistics_profiles)==null?void 0:I.company_name}),e.jsx("td",{className:"px-5 py-4 text-xs font-black text-emerald-600",children:L(k.base_cost)}),e.jsx("td",{className:"px-5 py-4 text-right",children:e.jsx("span",{className:`text-[9px] font-black uppercase tracking-wider ${k.is_active?"text-emerald-600":"text-rose-600"}`,children:k.is_active?"Active":"Locked"})})]},k.id)})]})]})})})]}),a&&y&&e.jsx("div",{className:"fixed inset-0 bg-slate-950/40 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full overflow-hidden border border-slate-200",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-black text-slate-900 uppercase tracking-tight",children:"Edit Courier Partner"}),e.jsx("button",{onClick:()=>t(!1),className:"text-slate-400 hover:text-slate-600",children:e.jsx(G,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:T,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-slate-500 mb-1.5 tracking-wider",children:"Company Name"}),e.jsx("input",{type:"text",required:!0,value:d.company_name,onChange:k=>p({...d,company_name:k.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none font-bold text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-slate-500 mb-1.5 tracking-wider",children:"Business Email"}),e.jsx("input",{type:"email",required:!0,value:d.business_email,onChange:k=>p({...d,business_email:k.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none font-bold text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-slate-500 mb-1.5 tracking-wider",children:"Phone Number"}),e.jsx("input",{type:"tel",value:d.business_phone,onChange:k=>p({...d,business_phone:k.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none font-bold text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-slate-500 mb-1.5 tracking-wider",children:"Service Description"}),e.jsx("textarea",{rows:3,value:d.description,onChange:k=>p({...d,description:k.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none font-medium text-sm"})]}),e.jsxs("div",{className:"flex items-center gap-2 py-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:d.is_active,onChange:k=>p({...d,is_active:k.target.checked}),className:"w-4 h-4 text-emerald-600 rounded"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-bold text-slate-700 cursor-pointer",children:"Entity Operational (Active)"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>t(!1),className:"flex-1 py-3 text-xs font-black uppercase tracking-widest text-slate-500 bg-slate-100 rounded-xl hover:bg-slate-200 transition-all",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:$,className:"flex-1 py-3 text-xs font-black uppercase tracking-widest text-white bg-emerald-600 rounded-xl hover:bg-emerald-700 shadow-lg shadow-emerald-500/20 transition-all disabled:opacity-50",children:"Save Changes"})]})]})]})}),N&&y&&e.jsx("div",{className:"fixed inset-0 bg-slate-950/40 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:`bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden border ${O}`,children:[e.jsxs("div",{className:"p-5 border-b border-slate-100 flex justify-between items-start bg-white",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900",children:y.company_name}),e.jsxs("p",{className:"text-[10px] text-slate-500 font-mono uppercase mt-1",children:["ID: ",y.id.slice(0,8)]})]}),e.jsx("button",{onClick:()=>l(!1),className:"text-slate-400 hover:text-slate-600",children:e.jsx(G,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl border border-slate-100",children:[e.jsx("p",{className:"text-[9px] uppercase tracking-wider text-slate-400 font-bold",children:"Performance"}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[e.jsx("span",{className:"text-base font-black text-slate-900",children:y.rating}),e.jsx(pt,{className:"h-3.5 w-3.5 text-emerald-500"})]})]}),e.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl border border-slate-100",children:[e.jsx("p",{className:"text-[9px] uppercase tracking-wider text-slate-400 font-bold",children:"Resources"}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[e.jsx("span",{className:"text-base font-black text-slate-900",children:y.driver_count}),e.jsx(pe,{className:"h-3.5 w-3.5 text-blue-500"})]})]})]}),e.jsxs("div",{className:"space-y-3 pt-2",children:[e.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[e.jsx(_e,{className:"h-3.5 w-3.5 text-slate-400"}),e.jsx("span",{className:"text-slate-900",children:y.business_email})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[e.jsx(it,{className:"h-3.5 w-3.5 text-slate-400"}),e.jsx("span",{className:"text-slate-900",children:y.business_phone||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[e.jsx(Ee,{className:"h-3.5 w-3.5 text-slate-400"}),e.jsxs("span",{className:"text-slate-900",children:["Joined ",new Date(y.created_at).toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"p-5 border-t border-slate-100 bg-slate-50/50 grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:()=>o(y),className:`py-2 px-4 rounded-lg text-[10px] font-bold uppercase tracking-wider border transition-all ${y.is_verified?"border-amber-200 bg-amber-50 text-amber-700 hover:bg-amber-100":"border-emerald-200 bg-emerald-50 text-emerald-700 hover:bg-emerald-100"}`,children:y.is_verified?"Revoke Verify":"Verify Entity"}),e.jsx("button",{onClick:()=>A(y),className:`py-2 px-4 rounded-lg text-[10px] font-bold uppercase tracking-wider border transition-all ${y.is_active?"border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100":"border-blue-200 bg-blue-50 text-blue-700 hover:bg-blue-100"}`,children:y.is_active?"Suspend Ops":"Activate Ops"})]})]})}),r&&e.jsx("div",{className:"fixed inset-0 bg-slate-950/40 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full overflow-hidden border border-slate-200",children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-black text-slate-900 uppercase tracking-tight",children:"Register New Carrier"}),e.jsx("button",{onClick:()=>u(!1),className:"text-slate-400 hover:text-slate-600",children:e.jsx(G,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:R,className:"p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-slate-500 mb-1 tracking-wider",children:"Contact Person Full Name"}),e.jsx("input",{type:"text",required:!0,value:s.full_name,onChange:k=>i({...s,full_name:k.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none font-bold text-sm",placeholder:"John Doe"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-slate-500 mb-1 tracking-wider",children:"Login Email"}),e.jsx("input",{type:"email",required:!0,value:s.email,onChange:k=>i({...s,email:k.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none font-bold text-sm",placeholder:"carrier@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-slate-500 mb-1 tracking-wider",children:"Account Password"}),e.jsx("input",{type:"password",required:!0,value:s.password,onChange:k=>i({...s,password:k.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none font-bold text-sm",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",minLength:6})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-slate-500 mb-1 tracking-wider",children:"Company Name"}),e.jsx("input",{type:"text",required:!0,value:s.company_name,onChange:k=>i({...s,company_name:k.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none font-bold text-sm",placeholder:"Apex Logistics"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-slate-500 mb-1 tracking-wider",children:"Contact Phone"}),e.jsx("input",{type:"tel",value:s.business_phone,onChange:k=>i({...s,business_phone:k.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none font-bold text-sm",placeholder:"+263..."})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>u(!1),className:"flex-1 py-2 text-xs font-black uppercase tracking-widest text-slate-500 bg-slate-100 rounded-xl hover:bg-slate-200 transition-all",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:$,className:"flex-1 py-2 text-xs font-black uppercase tracking-widest text-white bg-emerald-600 rounded-xl hover:bg-emerald-700 shadow-lg shadow-emerald-500/20 transition-all disabled:opacity-50",children:$?"Registering...":"Register Carrier"})]})]})]})})]})}function Xs(){const{theme:L}=te(),c=L==="dark",[j,F]=n.useState(null),[M,E]=n.useState([]),[b,$]=n.useState(!0),[h,x]=n.useState(!1),[m,g]=n.useState(null),v=c?"bg-gray-800":"bg-white",y=c?"text-gray-100":"text-gray-900",w=c?"text-gray-400":"text-gray-600",N=c?"border-gray-700":"border-gray-200";n.useEffect(()=>{l()},[]);const l=async()=>{try{const{data:r,error:u}=await S.from("vat_settings").select("*").single();if(u)throw u;F(r);const{data:_,error:C}=await S.from("product_vat_overrides").select(`
          *,
          product:products(
            name,
            vendor:vendor_profiles(shop_name)
          )
        `).order("created_at",{ascending:!1}).limit(50);if(C)throw C;E(_||[])}catch(r){g({type:"error",text:r.message})}finally{$(!1)}},a=async()=>{if(j){x(!0);try{const{error:r}=await S.from("vat_settings").update({is_enabled:j.is_enabled,default_rate:j.default_rate,applies_to_products:j.applies_to_products,applies_to_shipping:j.applies_to_shipping,commission_enabled:j.commission_enabled,commission_rate:j.commission_rate,updated_at:new Date().toISOString()}).eq("id",j.id);if(r)throw r;g({type:"success",text:"VAT settings saved successfully"})}catch(r){g({type:"error",text:r.message})}finally{x(!1)}}},t=async r=>{if(confirm("Remove this VAT override?"))try{const{error:u}=await S.from("product_vat_overrides").delete().eq("id",r);if(u)throw u;g({type:"success",text:"VAT override removed"}),l()}catch(u){g({type:"error",text:u.message})}};return b?e.jsx(B,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600"})})}):e.jsxs(B,{children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"h-6 w-6 text-cyan-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${y}`,children:"VAT Management"}),e.jsx("p",{className:`text-sm ${w}`,children:"Configure value-added tax settings"})]})]})}),m&&e.jsxs("div",{className:`mb-4 p-3 rounded-lg flex items-start space-x-2 text-sm ${m.type==="success"?"bg-green-50 border border-green-200 text-green-800 dark:bg-green-900/20 dark:border-green-800 dark:text-green-400":"bg-red-50 border border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-800 dark:text-red-400"}`,children:[m.type==="success"?e.jsx(oe,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}):e.jsx(Y,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:m.text}),e.jsx("button",{onClick:()=>g(null),className:"ml-auto",children:e.jsx(G,{className:"h-3.5 w-3.5"})})]}),j&&e.jsxs("div",{className:`${v} rounded-lg shadow-sm border ${N} p-4 mb-6`,children:[e.jsx("h2",{className:`text-base font-semibold ${y} mb-4`,children:"Global VAT Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${y}`,children:"Enable VAT"}),e.jsx("p",{className:`text-xs ${w}`,children:"Apply VAT to transactions"})]}),e.jsx("button",{onClick:()=>F({...j,is_enabled:!j.is_enabled}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition ${j.is_enabled?"bg-cyan-600":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${j.is_enabled?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${y} mb-1.5`,children:"Default VAT Rate (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",value:j.default_rate,onChange:r=>F({...j,default_rate:parseFloat(r.target.value)||0}),className:`w-full px-3 py-1.5 text-sm border ${N} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${y}`,children:"Apply to Products"}),e.jsx("p",{className:`text-xs ${w}`,children:"Include VAT in product prices"})]}),e.jsx("button",{onClick:()=>F({...j,applies_to_products:!j.applies_to_products}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition ${j.applies_to_products?"bg-cyan-600":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${j.applies_to_products?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${y}`,children:"Apply to Shipping"}),e.jsx("p",{className:`text-xs ${w}`,children:"Include VAT in shipping costs"})]}),e.jsx("button",{onClick:()=>F({...j,applies_to_shipping:!j.applies_to_shipping}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition ${j.applies_to_shipping?"bg-cyan-600":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${j.applies_to_shipping?"translate-x-6":"translate-x-1"}`})})]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs("button",{onClick:a,disabled:h,className:"flex items-center gap-1.5 px-4 py-1.5 text-sm bg-gradient-to-r from-cyan-600 to-green-600 text-white rounded hover:from-cyan-700 hover:to-green-700 transition disabled:opacity-50",children:[e.jsx(le,{className:"h-4 w-4"}),h?"Saving...":"Save Settings"]})})]})]}),j&&e.jsxs("div",{className:`${v} rounded-lg shadow-sm border ${N} p-4 mb-6`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(qe,{className:"h-5 w-5 text-emerald-600"}),e.jsx("h2",{className:`text-base font-semibold ${y}`,children:"Handling Fee Settings"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${y}`,children:"Enable Commission"}),e.jsx("p",{className:`text-xs ${w}`,children:"Add admin commission on top of vendor products"})]}),e.jsx("button",{onClick:()=>F({...j,commission_enabled:!j.commission_enabled}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition ${j.commission_enabled?"bg-emerald-600":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${j.commission_enabled?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${y} mb-1.5`,children:"Default Commission Rate (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",value:j.commission_rate,onChange:r=>F({...j,commission_rate:parseFloat(r.target.value)||0}),className:`w-full px-3 py-1.5 text-sm border ${N} rounded focus:outline-none focus:ring-1 focus:ring-emerald-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`})]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs("button",{onClick:a,disabled:h,className:"flex items-center gap-1.5 px-4 py-1.5 text-sm bg-emerald-600 text-white rounded hover:bg-emerald-700 transition disabled:opacity-50",children:[e.jsx(le,{className:"h-4 w-4"}),h?"Saving...":"Save Handling Fee Settings"]})})]})]}),e.jsxs("div",{className:`${v} rounded-lg shadow-sm border ${N} p-4`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:`text-base font-semibold ${y}`,children:"Product VAT Overrides"}),e.jsxs("span",{className:`text-xs ${w}`,children:[M.length," overrides"]})]}),M.length===0?e.jsx("p",{className:`text-sm ${w} text-center py-8`,children:"No product-specific VAT overrides configured"}):e.jsx("div",{className:"space-y-2",children:M.map(r=>{var u,_,C;return e.jsxs("div",{className:`flex items-center justify-between p-3 border ${N} rounded hover:bg-gray-50 dark:hover:bg-gray-700/50 transition`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm font-medium ${y}`,children:((u=r.product)==null?void 0:u.name)||"Unknown Product"}),e.jsx("p",{className:`text-xs ${w}`,children:((C=(_=r.product)==null?void 0:_.vendor)==null?void 0:C.shop_name)||"Unknown Vendor"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[r.vat_exempt?e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",children:"VAT Exempt"}):e.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",children:[r.vat_rate,"%"]}),e.jsx("button",{onClick:()=>t(r.id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition dark:hover:bg-red-900/30",title:"Remove override",children:e.jsx(Q,{className:"h-3.5 w-3.5"})})]})]},r.id)})})]})]})}function Qs(){var p;const{theme:L}=te(),c=L==="dark",[j,F]=n.useState([]),[M,E]=n.useState([]),[b,$]=n.useState(!0),[h,x]=n.useState("all"),[m,g]=n.useState(null),[v,y]=n.useState(""),[w,N]=n.useState(null),l=c?"bg-gray-800":"bg-white",a=c?"text-gray-100":"text-gray-900",t=c?"text-gray-400":"text-gray-600",r=c?"border-gray-700":"border-gray-200";n.useEffect(()=>{u()},[]),n.useEffect(()=>{E(h==="all"?j:j.filter(s=>s.status===h))},[h,j]);const u=async()=>{try{const{data:s,error:i}=await S.from("order_refunds").select(`
          *,
          orders (
            order_number
          ),
          profiles:customer_id (
            full_name,
            email
          )
        `).order("created_at",{ascending:!1});if(i)throw i;F(s||[])}catch(s){N({type:"error",text:s.message})}finally{$(!1)}},_=async(s,i)=>{try{const{error:V}=await S.from("order_refunds").update({status:i,admin_notes:v||null}).eq("id",s);if(V)throw V;N({type:"success",text:`Refund ${i} successfully`}),g(null),y(""),u()}catch(V){N({type:"error",text:V.message})}},C=s=>{const i={pending:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",approved:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",rejected:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",processed:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"};return e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${i[s]||i.pending}`,children:s.charAt(0).toUpperCase()+s.slice(1)})},d={total:j.length,pending:j.filter(s=>s.status==="pending").length,approved:j.filter(s=>s.status==="approved").length,processed:j.filter(s=>s.status==="processed").length};return b?e.jsx(B,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600"})})}):e.jsxs(B,{children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-6 w-6 text-cyan-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${a}`,children:"Refund Management"}),e.jsx("p",{className:`text-sm ${t}`,children:"Process and manage customer refunds"})]})]})})}),w&&e.jsxs("div",{className:`mb-4 p-3 rounded-lg flex items-start space-x-2 text-sm ${w.type==="success"?"bg-green-50 border border-green-200 text-green-800 dark:bg-green-900/20 dark:border-green-800 dark:text-green-400":"bg-red-50 border border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-800 dark:text-red-400"}`,children:[w.type==="success"?e.jsx(oe,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}):e.jsx(Y,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:w.text}),e.jsx("button",{onClick:()=>N(null),className:"ml-auto",children:e.jsx(G,{className:"h-3.5 w-3.5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:`${l} rounded-lg shadow-sm border ${r} p-4`,children:[e.jsx("p",{className:`text-xs ${t} mb-1`,children:"Total Refunds"}),e.jsx("p",{className:`text-2xl font-bold ${a}`,children:d.total})]}),e.jsxs("div",{className:`${l} rounded-lg shadow-sm border ${r} p-4`,children:[e.jsx("p",{className:`text-xs ${t} mb-1`,children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:d.pending})]}),e.jsxs("div",{className:`${l} rounded-lg shadow-sm border ${r} p-4`,children:[e.jsx("p",{className:`text-xs ${t} mb-1`,children:"Approved"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:d.approved})]}),e.jsxs("div",{className:`${l} rounded-lg shadow-sm border ${r} p-4`,children:[e.jsx("p",{className:`text-xs ${t} mb-1`,children:"Processed"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:d.processed})]})]}),e.jsx("div",{className:`${l} rounded-lg shadow-sm border ${r} p-4 mb-4`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-4 w-4 text-cyan-600"}),e.jsx("span",{className:`text-sm font-medium ${a}`,children:"Filter by Status:"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["all","pending","approved","rejected","processed"].map(s=>e.jsx("button",{onClick:()=>x(s),className:`px-3 py-1 text-xs rounded transition ${h===s?"bg-cyan-600 text-white":`${t} hover:bg-gray-100 dark:hover:bg-gray-700`}`,children:s.charAt(0).toUpperCase()+s.slice(1)},s))})]})}),e.jsx("div",{className:`${l} rounded-lg shadow-sm border ${r}`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`border-b ${r}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${t}`,children:"Order"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${t}`,children:"Customer"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${t}`,children:"Amount"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${t}`,children:"Reason"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${t}`,children:"Status"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${t}`,children:"Date"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${t}`,children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:M.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-8 text-center",children:e.jsx("p",{className:`text-sm ${t}`,children:"No refunds found"})})}):M.map(s=>{var i,V,o;return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:`px-4 py-3 text-sm ${a}`,children:((i=s.orders)==null?void 0:i.order_number)||"N/A"}),e.jsx("td",{className:`px-4 py-3 text-sm ${a}`,children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:((V=s.profiles)==null?void 0:V.full_name)||"Unknown"}),e.jsx("p",{className:`text-xs ${t}`,children:(o=s.profiles)==null?void 0:o.email})]})}),e.jsxs("td",{className:`px-4 py-3 text-sm font-semibold ${a}`,children:["$",s.amount.toFixed(2)]}),e.jsx("td",{className:`px-4 py-3 text-sm ${t} max-w-xs truncate`,children:s.reason}),e.jsx("td",{className:"px-4 py-3 text-sm",children:C(s.status)}),e.jsx("td",{className:`px-4 py-3 text-xs ${t}`,children:new Date(s.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{onClick:()=>{g(s),y(s.admin_notes||"")},className:"text-xs text-cyan-600 hover:text-cyan-700 font-medium",children:"Manage"})})]},s.id)})})]})})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${l} rounded-lg shadow-xl max-w-2xl w-full`,children:[e.jsxs("div",{className:`p-4 border-b ${r} flex items-center justify-between`,children:[e.jsx("h2",{className:`text-lg font-bold ${a}`,children:"Manage Refund"}),e.jsx("button",{onClick:()=>{g(null),y("")},className:`${t} hover:text-gray-600 transition`,children:e.jsx(G,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t}`,children:"Order Number"}),e.jsx("p",{className:`text-sm font-medium ${a}`,children:(p=m.orders)==null?void 0:p.order_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t}`,children:"Refund Amount"}),e.jsxs("p",{className:`text-lg font-bold ${a}`,children:["$",m.amount.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t} mb-1`,children:"Reason"}),e.jsx("p",{className:`text-sm ${a}`,children:m.reason})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t}`,children:"Current Status"}),C(m.status)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${a} mb-1.5`,children:"Admin Notes"}),e.jsx("textarea",{value:v,onChange:s=>y(s.target.value),rows:3,placeholder:"Add notes about this refund...",className:`w-full px-3 py-1.5 text-sm border ${r} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[m.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>_(m.id,"approved"),className:"flex-1 flex items-center justify-center gap-1.5 px-4 py-1.5 text-sm bg-green-600 text-white rounded hover:bg-green-700 transition",children:[e.jsx(oe,{className:"h-4 w-4"}),"Approve"]}),e.jsxs("button",{onClick:()=>_(m.id,"rejected"),className:"flex-1 flex items-center justify-center gap-1.5 px-4 py-1.5 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition",children:[e.jsx(Te,{className:"h-4 w-4"}),"Reject"]})]}),m.status==="approved"&&e.jsxs("button",{onClick:()=>_(m.id,"processed"),className:"flex-1 flex items-center justify-center gap-1.5 px-4 py-1.5 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:[e.jsx(Ae,{className:"h-4 w-4"}),"Mark as Processed"]})]})]})]})})]})}function Ys(){const{theme:L}=te(),c=L==="dark",[j,F]=n.useState([]),[M,E]=n.useState([]),[b,$]=n.useState(!0),[h,x]=n.useState(null),[m,g]=n.useState("all"),[v,y]=n.useState("all"),[w,N]=n.useState(""),[l,a]=n.useState(""),[t,r]=n.useState(""),u=c?"bg-gray-800":"bg-white",_=c?"text-gray-100":"text-gray-900",C=c?"text-gray-400":"text-gray-600",d=c?"border-gray-700":"border-gray-200";n.useEffect(()=>{p()},[]),n.useEffect(()=>{s()},[j,m,v,w,l,t]);const p=async()=>{try{const{data:T,error:R}=await S.from("transaction_ledger").select("*").order("created_at",{ascending:!1}).limit(500);if(R)throw R;F(T||[])}catch(T){x({type:"error",text:T.message})}finally{$(!1)}},s=()=>{let T=[...j];if(m!=="all"&&(T=T.filter(R=>R.transaction_type===m)),v!=="all"&&(T=T.filter(R=>R.status===v)),w&&(T=T.filter(R=>new Date(R.created_at)>=new Date(w))),l){const R=new Date(l);R.setHours(23,59,59,999),T=T.filter(O=>new Date(O.created_at)<=R)}if(t){const R=t.toLowerCase();T=T.filter(O=>{var J,q;return((J=O.reference_id)==null?void 0:J.toLowerCase().includes(R))||((q=O.description)==null?void 0:q.toLowerCase().includes(R))||O.id.toLowerCase().includes(R)})}E(T)},i=()=>{g("all"),y("all"),N(""),a(""),r("")},V=()=>{const T=["Date","Type","Amount","Currency","Status","Reference","Description"],R=M.map(I=>[new Date(I.created_at).toLocaleString(),I.transaction_type,I.amount,I.currency_code,I.status,I.reference_id||"",I.description||""]),O=[T.join(","),...R.map(I=>I.map(H=>`"${H}"`).join(","))].join(`
`),J=new Blob([O],{type:"text/csv"}),q=window.URL.createObjectURL(J),k=document.createElement("a");k.href=q,k.download=`transactions-${new Date().toISOString().split("T")[0]}.csv`,k.click()},o=T=>{const R={completed:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",pending:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",failed:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",cancelled:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-400"};return R[T]||R.pending},A=T=>({deposit:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",withdrawal:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",payment:"bg-cyan-100 text-cyan-700 dark:bg-cyan-900/30 dark:text-cyan-400",refund:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400",commission:"bg-pink-100 text-pink-700 dark:bg-pink-900/30 dark:text-pink-400"})[T]||"bg-gray-100 text-gray-700",f={total:M.length,totalAmount:M.reduce((T,R)=>T+parseFloat(R.amount.toString()),0),completed:M.filter(T=>T.status==="completed").length,pending:M.filter(T=>T.status==="pending").length};return b?e.jsx(B,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600"})})}):e.jsxs(B,{children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-6 w-6 text-cyan-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${_}`,children:"Transaction Ledger"}),e.jsxs("p",{className:`text-sm ${C} flex items-center gap-1`,children:[e.jsx(Se,{className:"h-3.5 w-3.5"}),"Immutable transaction history"]})]})]}),e.jsxs("button",{onClick:V,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm bg-gradient-to-r from-cyan-600 to-green-600 text-white rounded hover:from-cyan-700 hover:to-green-700 transition",children:[e.jsx(Me,{className:"h-4 w-4"}),"Export CSV"]})]})}),h&&e.jsxs("div",{className:`mb-4 p-3 rounded-lg flex items-start space-x-2 text-sm ${h.type==="success"?"bg-green-50 border border-green-200 text-green-800 dark:bg-green-900/20 dark:border-green-800 dark:text-green-400":"bg-red-50 border border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-800 dark:text-red-400"}`,children:[e.jsx(Y,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:h.text}),e.jsx("button",{onClick:()=>x(null),className:"ml-auto",children:e.jsx(G,{className:"h-3.5 w-3.5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:`${u} rounded-lg shadow-sm border ${d} p-4`,children:[e.jsx("p",{className:`text-xs ${C} mb-1`,children:"Total Transactions"}),e.jsx("p",{className:`text-2xl font-bold ${_}`,children:f.total})]}),e.jsxs("div",{className:`${u} rounded-lg shadow-sm border ${d} p-4`,children:[e.jsx("p",{className:`text-xs ${C} mb-1`,children:"Total Volume"}),e.jsxs("p",{className:`text-2xl font-bold ${_}`,children:["$",f.totalAmount.toFixed(2)]})]}),e.jsxs("div",{className:`${u} rounded-lg shadow-sm border ${d} p-4`,children:[e.jsx("p",{className:`text-xs ${C} mb-1`,children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:f.completed})]}),e.jsxs("div",{className:`${u} rounded-lg shadow-sm border ${d} p-4`,children:[e.jsx("p",{className:`text-xs ${C} mb-1`,children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:f.pending})]})]}),e.jsxs("div",{className:`${u} rounded-lg shadow-sm border ${d} p-4 mb-4`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx($e,{className:"h-4 w-4 text-cyan-600"}),e.jsx("span",{className:`text-sm font-medium ${_}`,children:"Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${_} mb-1`,children:"Type"}),e.jsxs("select",{value:m,onChange:T=>g(T.target.value),className:`w-full px-2 py-1.5 text-sm border ${d} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`,children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"deposit",children:"Deposit"}),e.jsx("option",{value:"withdrawal",children:"Withdrawal"}),e.jsx("option",{value:"payment",children:"Payment"}),e.jsx("option",{value:"refund",children:"Refund"}),e.jsx("option",{value:"commission",children:"Commission"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${_} mb-1`,children:"Status"}),e.jsxs("select",{value:v,onChange:T=>y(T.target.value),className:`w-full px-2 py-1.5 text-sm border ${d} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`,children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${_} mb-1`,children:"From Date"}),e.jsx("input",{type:"date",value:w,onChange:T=>N(T.target.value),className:`w-full px-2 py-1.5 text-sm border ${d} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${_} mb-1`,children:"To Date"}),e.jsx("input",{type:"date",value:l,onChange:T=>a(T.target.value),className:`w-full px-2 py-1.5 text-sm border ${d} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${_} mb-1`,children:"Search"}),e.jsx("input",{type:"text",value:t,onChange:T=>r(T.target.value),placeholder:"ID, reference...",className:`w-full px-2 py-1.5 text-sm border ${d} rounded focus:outline-none focus:ring-1 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`})]})]}),e.jsx("div",{className:"flex justify-end mt-3",children:e.jsx("button",{onClick:i,className:"text-xs text-cyan-600 hover:text-cyan-700 font-medium",children:"Reset Filters"})})]}),e.jsx("div",{className:`${u} rounded-lg shadow-sm border ${d}`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`border-b ${d}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${C}`,children:"Date/Time"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${C}`,children:"Type"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${C}`,children:"Amount"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${C}`,children:"Status"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${C}`,children:"Reference"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${C}`,children:"Description"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:M.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-8 text-center",children:e.jsx("p",{className:`text-sm ${C}`,children:"No transactions found"})})}):M.map(T=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:`px-4 py-3 text-xs ${C}`,children:new Date(T.created_at).toLocaleString()}),e.jsx("td",{className:"px-4 py-3 text-xs",children:e.jsx("span",{className:`px-2 py-0.5 rounded-full font-medium ${A(T.transaction_type)}`,children:T.transaction_type})}),e.jsxs("td",{className:`px-4 py-3 text-sm font-semibold ${_}`,children:[T.currency_code," ",parseFloat(T.amount.toString()).toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-xs",children:e.jsx("span",{className:`px-2 py-0.5 rounded-full font-medium ${o(T.status)}`,children:T.status})}),e.jsx("td",{className:`px-4 py-3 text-xs ${C} font-mono`,children:T.reference_id||"N/A"}),e.jsx("td",{className:`px-4 py-3 text-xs ${C} max-w-xs truncate`,children:T.description||"-"})]},T.id))})]})})})]})}const De=[{id:"getting-started",title:"Getting Started",icon:rt,description:"Learn the basics of the ZimAIO marketplace platform",topics:[{id:"intro",title:"Introduction",content:`# Welcome to ZimAIO Marketplace

ZimAIO is a comprehensive multi-vendor e-commerce platform built with modern technologies. This documentation will guide you through all features and functionalities.

## Key Features
- **Multi-vendor Support**: Allow multiple vendors to sell on your platform
- **Advanced Analytics**: Track sales, performance, and user behavior
- **Fraud Detection**: Built-in security and fraud prevention
- **Multi-currency**: Support for multiple currencies and languages
- **Responsive Design**: Works seamlessly on all devices

## Quick Start
1. Configure your system settings
2. Add currencies and languages
3. Set up email and SMS notifications
4. Create promotional campaigns
5. Monitor vendor performance`},{id:"dashboard",title:"Admin Dashboard Overview",content:`# Admin Dashboard

The admin dashboard provides a comprehensive overview of your marketplace.

## Main Sections
- **Overview**: Key metrics and statistics
- **Sales Analytics**: Revenue trends and performance
- **User Management**: Manage customers and vendors
- **Order Management**: Track and process orders
- **Product Catalog**: Manage products and categories

## Quick Actions
- View recent orders
- Approve vendor applications
- Monitor fraud alerts
- Review customer feedback`}]},{id:"user-management",title:"User Management",icon:ft,description:"Manage customers, vendors, and admin users",topics:[{id:"customers",title:"Customer Management",content:`# Managing Customers

## Customer Profiles
View and manage customer information including:
- Personal details
- Order history
- Wallet balance
- Activity logs

## Customer Actions
- **View Details**: Access complete customer profile
- **Edit Information**: Update customer details
- **Suspend Account**: Temporarily disable access
- **Delete Account**: Permanently remove customer

## Customer Insights
- Total orders placed
- Lifetime value
- Average order value
- Last activity date`},{id:"vendors",title:"Vendor Management",content:`# Managing Vendors

## Vendor Approval Process
1. Vendor submits application
2. Admin reviews business details
3. Verify documents and credentials
4. Approve or reject application
5. Vendor receives notification

## Vendor Dashboard
Vendors have access to:
- Sales analytics
- Product management
- Order fulfillment
- Customer reviews
- Payout history

## Vendor Performance Metrics
- Total sales revenue
- Number of products
- Customer ratings
- Order fulfillment rate
- Response time`}]},{id:"orders",title:"Order Management",icon:ct,description:"Process and track customer orders",topics:[{id:"order-processing",title:"Order Processing",content:`# Order Management

## Order Lifecycle
1. **Pending**: Order placed, awaiting payment
2. **Processing**: Payment confirmed, preparing shipment
3. **Shipped**: Order dispatched to customer
4. **Delivered**: Order received by customer
5. **Completed**: Transaction finalized

## Order Actions
- View order details
- Update order status
- Process refunds
- Generate invoices
- Track shipments

## Bulk Operations
- Export orders to CSV
- Bulk status updates
- Mass invoice generation
- Batch shipping labels`},{id:"refunds",title:"Refunds & Returns",content:`# Refund Management

## Refund Process
1. Customer requests refund
2. Admin reviews request
3. Approve or reject
4. Process payment reversal
5. Update inventory

## Refund Policies
- Full refund within 30 days
- Partial refund for damaged items
- Store credit option
- Restocking fees may apply

## Return Shipping
- Customer pays return shipping
- Free returns for defective items
- Provide return labels
- Track return shipments`}]},{id:"products",title:"Product Catalog",icon:Vt,description:"Manage products, categories, and inventory",topics:[{id:"product-management",title:"Product Management",content:`# Product Management

## Adding Products
Required information:
- Product name and description
- Category and subcategory
- Price and SKU
- Images (multiple angles)
- Inventory quantity
- Shipping details

## Product Attributes
- Size, color, material
- Brand and manufacturer
- Weight and dimensions
- Custom attributes

## Inventory Management
- Track stock levels
- Low stock alerts
- Automatic reordering
- Multi-location inventory
- Variant management`},{id:"categories",title:"Categories & Tags",content:`# Category Management

## Category Structure
- Main categories
- Subcategories (unlimited depth)
- Category images
- SEO optimization

## Category Features
- Custom sorting
- Featured categories
- Category banners
- Filter options

## Product Tags
- Searchable keywords
- Trending tags
- Seasonal tags
- Brand tags
- Custom tags`}]},{id:"marketing",title:"Marketing & Promotions",icon:ie,description:"Create campaigns, coupons, and advertisements",topics:[{id:"promotions",title:"Promotion Management",content:`# Promotions & Discounts

## Promotion Types
- **Coupon Codes**: Unique discount codes
- **Flash Sales**: Time-limited offers
- **Banner Promotions**: Homepage campaigns

## Creating Promotions
1. Set promotion name
2. Choose discount type (% or fixed)
3. Set validity period
4. Define usage limits
5. Set minimum purchase amount

## Promotion Analytics
- Total usage count
- Revenue impact
- Customer acquisition
- Conversion rates`},{id:"ads",title:"Advertisement Management",content:`# Vendor Advertisements

## Ad Approval Process
1. Vendor submits ad request
2. Admin reviews content
3. Approve or reject
4. Set display duration
5. Monitor performance

## Ad Types
- Banner ads
- Sponsored products
- Category promotions
- Homepage features

## Ad Metrics
- Impressions
- Click-through rate
- Conversions
- Revenue generated`}]},{id:"settings",title:"System Configuration",icon:Qe,description:"Configure platform settings and integrations",topics:[{id:"general",title:"General Settings",content:`# System Configuration

## Site Settings
- Site name and tagline
- Contact information
- Social media links
- Logo and branding
- Default language
- Default currency

## Email Configuration
- SMTP server settings
- Email templates
- Sender information
- Test email functionality

## SMS Configuration
- SMS provider (Twilio, Africa's Talking)
- API credentials
- Sender ID
- SMS templates`},{id:"currencies",title:"Currency & Language",content:`# Multi-currency & Multi-language

## Currency Management
- Add multiple currencies
- Set exchange rates
- Default currency
- Auto-update rates
- Currency symbols

## Language Management
- Add languages
- Translation files
- RTL support
- Default language
- Language switcher

## Localization
- Date formats
- Number formats
- Address formats
- Tax calculations`}]},{id:"security",title:"Security & Fraud",icon:Se,description:"Protect your platform from fraud and threats",topics:[{id:"fraud-detection",title:"Fraud Detection",content:`# Fraud Prevention

## Risk Scoring
Automatic risk assessment based on:
- Transaction patterns
- User behavior
- IP address analysis
- Device fingerprinting
- Velocity checks

## Fraud Alerts
- High-risk transactions
- Suspicious activities
- Multiple failed attempts
- Unusual patterns

## Security Actions
- Block IP addresses
- Ban user accounts
- Hold suspicious orders
- Require verification
- Manual review queue`},{id:"security-best-practices",title:"Security Best Practices",content:`# Security Guidelines

## Admin Security
- Use strong passwords
- Enable two-factor authentication
- Regular password changes
- Limit admin access
- Monitor admin activities

## Data Protection
- Regular backups
- Encrypted connections (SSL)
- Secure payment processing
- PCI compliance
- GDPR compliance

## Monitoring
- Activity logs
- Failed login attempts
- Unusual access patterns
- System health checks`}]},{id:"analytics",title:"Analytics & Reports",icon:re,description:"Track performance and generate reports",topics:[{id:"vendor-analytics",title:"Vendor Performance",content:`# Vendor Analytics

## Performance Metrics
- Total sales revenue
- Number of orders
- Average order value
- Customer ratings
- Product count
- Growth percentage

## Vendor Rankings
- Top performers
- Revenue leaders
- Best rated vendors
- Most active vendors

## Performance Reports
- Sales by period
- Product performance
- Customer feedback
- Fulfillment rates`},{id:"sales-reports",title:"Sales Reports",content:`# Sales Analytics

## Revenue Reports
- Daily sales
- Monthly trends
- Yearly comparison
- Category breakdown
- Payment methods

## Export Options
- CSV export
- PDF reports
- Excel format
- Scheduled reports

## Custom Reports
- Date range selection
- Filter by category
- Vendor comparison
- Product analysis`}]}];function ea(){const[L,c]=n.useState(De[0]),[j,F]=n.useState(De[0].topics[0]),[M,E]=n.useState(""),b=De.filter($=>$.title.toLowerCase().includes(M.toLowerCase())||$.description.toLowerCase().includes(M.toLowerCase())||$.topics.some(h=>h.title.toLowerCase().includes(M.toLowerCase())||h.content.toLowerCase().includes(M.toLowerCase())));return e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(rt,{className:"w-6 h-6 mr-2 text-blue-600"}),"Platform Documentation"]}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Comprehensive guide to using the ZimAIO marketplace platform"})]}),e.jsx("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search documentation...",value:M,onChange:$=>E($.target.value),className:"w-full pl-8 pr-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-blue-500 bg-white text-sm"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"lg:col-span-1 space-y-2",children:b.map($=>e.jsxs("div",{className:"bg-gray-50 rounded border border-gray-200 overflow-hidden",children:[e.jsxs("button",{onClick:()=>{c($),F($.topics[0])},className:`w-full p-3 text-left flex items-center gap-2 hover:bg-gray-100 transition ${L.id===$.id?"bg-blue-100 border-l-4 border-blue-600":""}`,children:[e.jsx($.icon,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-900",children:$.title}),e.jsx("p",{className:"text-xs text-slate-600 line-clamp-1",children:$.description})]}),e.jsx(je,{className:"w-4 h-4 text-slate-400"})]}),L.id===$.id&&e.jsx("div",{className:"bg-white border-t border-gray-200",children:$.topics.map(h=>e.jsx("button",{onClick:()=>F(h),className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-50 transition ${j.id===h.id?"bg-blue-50 text-blue-700 font-medium":"text-slate-700"}`,children:h.title},h.id))})]},$.id))}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"prose prose-sm max-w-none",children:[e.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 mb-2",children:[e.jsx(L.icon,{className:"w-4 h-4"}),e.jsx("span",{children:L.title}),e.jsx(je,{className:"w-3 h-3"}),e.jsx("span",{className:"text-blue-600",children:j.title})]}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:j.title})]}),e.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed text-slate-700",children:j.content})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(Be,{className:"w-4 h-4"}),e.jsx("span",{children:"Need more help?"})]}),e.jsxs("a",{href:"#",className:"flex items-center gap-1 text-sm text-blue-600 hover:text-blue-700 font-medium",children:["Contact Support",e.jsx(Xe,{className:"w-4 h-4"})]})]})})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded border border-blue-200",children:[e.jsx(Ft,{className:"w-5 h-5 text-blue-600 mb-2"}),e.jsx("h4",{className:"text-sm font-bold text-slate-900 mb-1",children:"API Reference"}),e.jsx("p",{className:"text-xs text-slate-600",children:"Developer documentation and API endpoints"})]}),e.jsxs("div",{className:"bg-green-50 p-3 rounded border border-green-200",children:[e.jsx(re,{className:"w-5 h-5 text-green-600 mb-2"}),e.jsx("h4",{className:"text-sm font-bold text-slate-900 mb-1",children:"Video Tutorials"}),e.jsx("p",{className:"text-xs text-slate-600",children:"Step-by-step video guides"})]}),e.jsxs("div",{className:"bg-purple-50 p-3 rounded border border-purple-200",children:[e.jsx(Be,{className:"w-5 h-5 text-purple-600 mb-2"}),e.jsx("h4",{className:"text-sm font-bold text-slate-900 mb-1",children:"FAQ"}),e.jsx("p",{className:"text-xs text-slate-600",children:"Frequently asked questions"})]})]})]})]})]})})}function ta(){const[L,c]=n.useState([]),[j,F]=n.useState(!0),[M,E]=n.useState(!1),[b,$]=n.useState(null),[h,x]=n.useState({code:"",name:"",symbol:"",exchange_rate:1,is_active:!0,is_default:!1});n.useEffect(()=>{m()},[]);async function m(){try{const{data:a,error:t}=await S.from("currencies").select("*").order("code");if(t)throw t;c(a||[])}catch(a){console.error("Error loading currencies:",a)}finally{F(!1)}}async function g(a){a.preventDefault();try{if(b){const{error:t}=await S.from("currencies").update({...h,updated_at:new Date().toISOString()}).eq("id",b);if(t)throw t}else{const{error:t}=await S.from("currencies").insert([h]);if(t)throw t}l(),m()}catch(t){console.error("Error saving currency:",t),alert("Failed to save currency")}}async function v(a){if(confirm("Are you sure you want to delete this currency?"))try{const{error:t}=await S.from("currencies").delete().eq("id",a);if(t)throw t;m()}catch(t){console.error("Error deleting currency:",t),alert("Failed to delete currency")}}async function y(a,t){try{const{error:r}=await S.from("currencies").update({is_active:!t,updated_at:new Date().toISOString()}).eq("id",a);if(r)throw r;m()}catch(r){console.error("Error toggling currency status:",r)}}async function w(a){try{await S.from("currencies").update({is_default:!1});const{error:t}=await S.from("currencies").update({is_default:!0,updated_at:new Date().toISOString()}).eq("id",a);if(t)throw t;m()}catch(t){console.error("Error setting default currency:",t)}}function N(a){$(a.id),x({code:a.code,name:a.name,symbol:a.symbol,exchange_rate:a.exchange_rate,is_active:a.is_active,is_default:a.is_default}),E(!0)}function l(){x({code:"",name:"",symbol:"",exchange_rate:1,is_active:!0,is_default:!1}),$(null),E(!1)}return j?e.jsx(B,{children:e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center",children:[e.jsx(Ae,{className:"w-6 h-6 mr-2 text-blue-600"}),"Currency Management"]}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Manage currencies and exchange rates"})]}),e.jsxs("button",{onClick:()=>E(!0),className:"flex items-center px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:[e.jsx(ae,{className:"w-4 h-4 mr-1"}),"Add"]})]}),M&&e.jsxs("div",{className:"bg-gray-50 rounded p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:b?"Edit Currency":"Add Currency"}),e.jsx("button",{onClick:l,className:"text-slate-500 hover:text-slate-700",children:e.jsx(G,{className:"w-4 h-4"})})]}),e.jsxs("form",{onSubmit:g,className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Code *"}),e.jsx("input",{type:"text",value:h.code,onChange:a=>x({...h,code:a.target.value.toUpperCase()}),maxLength:3,required:!0,placeholder:"USD",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Name *"}),e.jsx("input",{type:"text",value:h.name,onChange:a=>x({...h,name:a.target.value}),required:!0,placeholder:"US Dollar",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Symbol *"}),e.jsx("input",{type:"text",value:h.symbol,onChange:a=>x({...h,symbol:a.target.value}),required:!0,placeholder:"$",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Rate *"}),e.jsx("input",{type:"number",step:"0.000001",value:h.exchange_rate,onChange:a=>x({...h,exchange_rate:parseFloat(a.target.value)}),required:!0,placeholder:"1.0",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900 text-sm"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center text-sm",children:[e.jsx("input",{type:"checkbox",checked:h.is_active,onChange:a=>x({...h,is_active:a.target.checked}),className:"w-3 h-3 text-blue-600 border-slate-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-1 text-slate-700",children:"Active"})]}),e.jsxs("label",{className:"flex items-center text-sm",children:[e.jsx("input",{type:"checkbox",checked:h.is_default,onChange:a=>x({...h,is_default:a.target.checked}),className:"w-3 h-3 text-blue-600 border-slate-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-1 text-slate-700",children:"Default"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:l,className:"px-3 py-1 text-slate-700 hover:bg-slate-100 rounded transition-colors text-sm",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"flex items-center px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(le,{className:"w-3 h-3 mr-1"}),b?"Update":"Create"]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded shadow overflow-hidden border border-gray-200",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Code"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Symbol"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Rate"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Default"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:L.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-medium text-slate-900",children:a.code})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-slate-700",children:a.name})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-slate-700",children:a.symbol})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-slate-700",children:a.exchange_rate})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsx("button",{onClick:()=>y(a.id,a.is_active),className:`px-2 py-0.5 text-xs rounded-full ${a.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:a.is_default?e.jsxs("span",{className:"flex items-center text-sm text-green-600",children:[e.jsx(se,{className:"w-3 h-3 mr-1"})," Default"]}):e.jsx("button",{onClick:()=>w(a.id),className:"text-sm text-blue-600 hover:text-blue-700",children:"Set Default"})}),e.jsxs("td",{className:"px-4 py-2 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>N(a),className:"text-blue-600 hover:text-blue-700 mr-2",children:e.jsx(fe,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>v(a.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Q,{className:"w-3 h-3"})})]})]},a.id))})]})}),L.length===0&&e.jsx("div",{className:"text-center py-8 text-slate-500",children:"No currencies found. Add your first currency."})]})]})})}function sa(){const[L,c]=n.useState([]),[j,F]=n.useState(!0),[M,E]=n.useState(!1),[b,$]=n.useState(null),[h,x]=n.useState({code:"",name:"",native_name:"",is_active:!0,is_default:!1});n.useEffect(()=>{m()},[]);async function m(){try{const{data:a,error:t}=await S.from("languages").select("*").order("code");if(t)throw t;c(a||[])}catch(a){console.error("Error loading languages:",a)}finally{F(!1)}}async function g(a){a.preventDefault();try{if(b){const{error:t}=await S.from("languages").update({...h,updated_at:new Date().toISOString()}).eq("id",b);if(t)throw t}else{const{error:t}=await S.from("languages").insert([h]);if(t)throw t}l(),m()}catch(t){console.error("Error saving language:",t),alert("Failed to save language")}}async function v(a){if(confirm("Delete this language?"))try{const{error:t}=await S.from("languages").delete().eq("id",a);if(t)throw t;m()}catch(t){console.error("Error deleting language:",t),alert("Failed to delete language")}}async function y(a,t){try{const{error:r}=await S.from("languages").update({is_active:!t,updated_at:new Date().toISOString()}).eq("id",a);if(r)throw r;m()}catch(r){console.error("Error toggling status:",r)}}async function w(a){try{await S.from("languages").update({is_default:!1});const{error:t}=await S.from("languages").update({is_default:!0,updated_at:new Date().toISOString()}).eq("id",a);if(t)throw t;m()}catch(t){console.error("Error setting default:",t)}}function N(a){$(a.id),x({code:a.code,name:a.name,native_name:a.native_name||"",is_active:a.is_active,is_default:a.is_default}),E(!0)}function l(){x({code:"",name:"",native_name:"",is_active:!0,is_default:!1}),$(null),E(!1)}return j?e.jsx(B,{children:e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center",children:[e.jsx(ve,{className:"w-6 h-6 mr-2 text-blue-600"}),"Language Management"]}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Manage languages and translations"})]}),e.jsxs("button",{onClick:()=>E(!0),className:"flex items-center px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:[e.jsx(ae,{className:"w-4 h-4 mr-1"}),"Add"]})]}),M&&e.jsxs("div",{className:"bg-gray-50 rounded p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:b?"Edit Language":"Add Language"}),e.jsx("button",{onClick:l,className:"text-slate-500 hover:text-slate-700",children:e.jsx(G,{className:"w-4 h-4"})})]}),e.jsxs("form",{onSubmit:g,className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Code *"}),e.jsx("input",{type:"text",value:h.code,onChange:a=>x({...h,code:a.target.value.toLowerCase()}),maxLength:5,required:!0,placeholder:"en",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Name *"}),e.jsx("input",{type:"text",value:h.name,onChange:a=>x({...h,name:a.target.value}),required:!0,placeholder:"English",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900 text-sm"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Native Name"}),e.jsx("input",{type:"text",value:h.native_name,onChange:a=>x({...h,native_name:a.target.value}),placeholder:"English (native)",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900 text-sm"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center text-sm",children:[e.jsx("input",{type:"checkbox",checked:h.is_active,onChange:a=>x({...h,is_active:a.target.checked}),className:"w-3 h-3 text-blue-600 border-slate-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-1 text-slate-700",children:"Active"})]}),e.jsxs("label",{className:"flex items-center text-sm",children:[e.jsx("input",{type:"checkbox",checked:h.is_default,onChange:a=>x({...h,is_default:a.target.checked}),className:"w-3 h-3 text-blue-600 border-slate-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-1 text-slate-700",children:"Default"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:l,className:"px-3 py-1 text-slate-700 hover:bg-slate-100 rounded transition-colors text-sm",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"flex items-center px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(le,{className:"w-3 h-3 mr-1"}),b?"Update":"Create"]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded shadow overflow-hidden border border-gray-200",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Code"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Native"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Default"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:L.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"text-sm font-medium text-slate-900",children:a.code})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"text-sm text-slate-700",children:a.name})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"text-sm text-slate-700",children:a.native_name||"-"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("button",{onClick:()=>y(a.id,a.is_active),className:`px-2 py-0.5 text-xs rounded-full ${a.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-4 py-2",children:a.is_default?e.jsxs("span",{className:"flex items-center text-sm text-green-600",children:[e.jsx(se,{className:"w-3 h-3 mr-1"}),"Default"]}):e.jsx("button",{onClick:()=>w(a.id),className:"text-sm text-blue-600 hover:text-blue-700",children:"Set Default"})}),e.jsxs("td",{className:"px-4 py-2 text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>N(a),className:"text-blue-600 hover:text-blue-700 mr-2",children:e.jsx(fe,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>v(a.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Q,{className:"w-3 h-3"})})]})]},a.id))})]})}),L.length===0&&e.jsx("div",{className:"text-center py-8 text-slate-500",children:"No languages found. Add your first language."})]})]})})}const ze=[{value:"order_placed",label:"Order Placed"},{value:"order_shipped",label:"Order Shipped"},{value:"order_delivered",label:"Order Delivered"},{value:"payment_received",label:"Payment Received"},{value:"payment_failed",label:"Payment Failed"},{value:"user_registered",label:"User Registered"},{value:"vendor_approved",label:"Vendor Approved"},{value:"product_out_of_stock",label:"Product Out of Stock"},{value:"refund_requested",label:"Refund Requested"}],He=[{value:"send_email",label:"Send Email"},{value:"send_sms",label:"Send SMS"},{value:"send_notification",label:"Send Notification"},{value:"webhook",label:"Call Webhook"},{value:"update_status",label:"Update Status"}];function aa(){const[L,c]=n.useState([]),[j,F]=n.useState(!0),[M,E]=n.useState(!1),[b,$]=n.useState(null),[h,x]=n.useState({name:"",event_type:"",action_type:"",conditions:"{}",actions:"{}",is_active:!0});n.useEffect(()=>{m()},[]);const m=async()=>{try{const{data:l,error:a}=await S.from("event_triggers").select("*").order("created_at",{ascending:!1});if(a)throw a;c(l||[])}catch(l){console.error("Error loading triggers:",l)}finally{F(!1)}},g=async l=>{l.preventDefault();try{const a=JSON.parse(h.conditions),t=JSON.parse(h.actions),r={...h,conditions:a,actions:t};if(b){const{error:u}=await S.from("event_triggers").update({...r,updated_at:new Date().toISOString()}).eq("id",b);if(u)throw u}else{const{error:u}=await S.from("event_triggers").insert([r]);if(u)throw u}N(),m()}catch(a){console.error("Error saving trigger:",a),alert("Failed to save trigger")}},v=async l=>{if(confirm("Delete this trigger?"))try{const{error:a}=await S.from("event_triggers").delete().eq("id",l);if(a)throw a;m()}catch(a){console.error("Error deleting trigger:",a),alert("Failed to delete trigger")}},y=async(l,a)=>{try{const{error:t}=await S.from("event_triggers").update({is_active:!a,updated_at:new Date().toISOString()}).eq("id",l);if(t)throw t;m()}catch(t){console.error("Error toggling status:",t)}},w=l=>{$(l.id),x({name:l.name,event_type:l.event_type,action_type:l.action_type,conditions:JSON.stringify(l.conditions||{},null,2),actions:JSON.stringify(l.actions||{},null,2),is_active:l.is_active}),E(!0)},N=()=>{x({name:"",event_type:"",action_type:"",conditions:"{}",actions:"{}",is_active:!0}),$(null),E(!1)};return j?e.jsx(B,{children:e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center",children:[e.jsx(ie,{className:"w-6 h-6 mr-2 text-blue-600"}),"Trigger Module"]}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Automate actions based on events"})]}),e.jsxs("button",{onClick:()=>E(!0),className:"flex items-center px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:[e.jsx(ae,{className:"w-4 h-4 mr-1"}),"Add"]})]}),M&&e.jsxs("div",{className:"bg-gray-50 rounded p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:b?"Edit Trigger":"Add Trigger"}),e.jsx("button",{onClick:N,className:"text-slate-500 hover:text-slate-700",children:e.jsx(G,{className:"w-4 h-4"})})]}),e.jsxs("form",{onSubmit:g,className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Name *"}),e.jsx("input",{type:"text",value:h.name,onChange:l=>x({...h,name:l.target.value}),required:!0,placeholder:"Send email on order placement",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Event Type *"}),e.jsxs("select",{value:h.event_type,onChange:l=>x({...h,event_type:l.target.value}),required:!0,className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900",children:[e.jsx("option",{value:"",children:"Select Event"}),ze.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Action Type *"}),e.jsxs("select",{value:h.action_type,onChange:l=>x({...h,action_type:l.target.value}),required:!0,className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900",children:[e.jsx("option",{value:"",children:"Select Action"}),He.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Conditions (JSON)"}),e.jsx("textarea",{rows:3,value:h.conditions,onChange:l=>x({...h,conditions:l.target.value}),placeholder:'{"min_amount":100,"status":"paid"}',className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Actions (JSON)"}),e.jsx("textarea",{rows:3,value:h.actions,onChange:l=>x({...h,actions:l.target.value}),placeholder:'{"template":"order_confirmation","recipient":"customer_email"}',className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white font-mono text-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:h.is_active,onChange:l=>x({...h,is_active:l.target.checked}),className:"w-3 h-3 text-blue-600 border-slate-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-700",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:N,className:"px-3 py-1 text-slate-700 hover:bg-slate-100 rounded transition-colors text-sm",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"flex items-center px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(le,{className:"w-4 h-4 mr-1"}),b?"Update":"Create"]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded shadow overflow-hidden border border-gray-200",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Event"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Action"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:L.map(l=>{var a,t;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"text-sm font-medium text-slate-900",children:l.name})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"text-sm text-slate-700",children:((a=ze.find(r=>r.value===l.event_type))==null?void 0:a.label)||l.event_type})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"text-sm text-slate-700",children:((t=He.find(r=>r.value===l.action_type))==null?void 0:t.label)||l.action_type})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("button",{onClick:()=>y(l.id,l.is_active),className:`px-2 py-0.5 text-xs rounded-full ${l.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:l.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-4 py-2 text-right",children:[e.jsx("button",{onClick:()=>w(l),className:"p-1 text-blue-600 hover:bg-blue-50 rounded mr-2",children:e.jsx(fe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>v(l.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:e.jsx(Q,{className:"w-4 h-4"})})]})]},l.id)})})]})}),L.length===0&&e.jsx("div",{className:"text-center py-8 text-slate-500",children:"No triggers configured. Add your first trigger."})]})]})})}const ss=[{value:"twilio",label:"Twilio"},{value:"africastalking",label:"Africa's Talking"},{value:"nexmo",label:"Nexmo/Vonage"},{value:"messagebird",label:"MessageBird"},{value:"custom",label:"Custom Provider"}];function ra(){const[L,c]=n.useState([]),[j,F]=n.useState(!0),[M,E]=n.useState(!1),[b,$]=n.useState({provider:"twilio",api_key:"",sender_id:"",is_active:!0,settings:"{}"});n.useEffect(()=>{h()},[]);const h=async()=>{try{const{data:m,error:g}=await S.from("sms_configurations").select("*").order("created_at",{ascending:!1});if(g)throw g;if(c(m||[]),m&&m.length>0){const v=m[0];$({provider:v.provider,api_key:v.api_key||"",sender_id:v.sender_id||"",is_active:v.is_active,settings:JSON.stringify(v.settings||{},null,2)})}}catch(m){console.error("Error loading SMS configs:",m)}finally{F(!1)}},x=async m=>{m.preventDefault(),E(!0);try{const g=JSON.parse(b.settings),v={...b,settings:g};if(L.length>0){const{error:y}=await S.from("sms_configurations").update({...v,updated_at:new Date().toISOString()}).eq("id",L[0].id);if(y)throw y}else{const{error:y}=await S.from("sms_configurations").insert([v]);if(y)throw y}alert("SMS configuration saved"),h()}catch(g){console.error("Error saving SMS config:",g),alert("Failed to save SMS configuration")}finally{E(!1)}};return j?e.jsx(B,{children:e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center",children:[e.jsx(yt,{className:"w-6 h-6 mr-2 text-blue-600"}),"SMS Configuration"]}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Configure SMS gateway for sending text messages"})]})}),e.jsx("div",{className:"bg-gray-50 rounded p-4 border border-gray-200",children:e.jsxs("form",{onSubmit:x,className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Provider *"}),e.jsx("select",{value:b.provider,onChange:m=>$({...b,provider:m.target.value}),className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900",children:ss.map(m=>e.jsx("option",{value:m.value,children:m.label},m.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"API Key *"}),e.jsxs("div",{className:"relative",children:[e.jsx(lt,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"password",value:b.api_key,onChange:m=>$({...b,api_key:m.target.value}),className:"w-full pl-8 pr-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Sender ID *"}),e.jsx("input",{type:"text",value:b.sender_id,onChange:m=>$({...b,sender_id:m.target.value}),className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:b.is_active,onChange:m=>$({...b,is_active:m.target.checked}),className:"w-3 h-3 text-blue-600 border-slate-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-slate-700",children:"Enable SMS notifications"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Additional Settings (JSON)"}),e.jsx("textarea",{rows:4,value:b.settings,onChange:m=>$({...b,settings:m.target.value}),className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white font-mono text-sm"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>$({provider:"twilio",api_key:"",sender_id:"",is_active:!0,settings:"{}"}),className:"px-3 py-1 text-slate-700 hover:bg-slate-100 rounded transition-colors text-sm",children:"Reset"}),e.jsx("button",{type:"submit",disabled:M,className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors disabled:opacity-50 text-sm",children:M?"Saving...":"Save"})]})]})})]})})}const as=[{value:"smtp",label:"SMTP (Generic)"},{value:"sendgrid",label:"SendGrid"},{value:"mailgun",label:"Mailgun"},{value:"ses",label:"Amazon SES"},{value:"postmark",label:"Postmark"},{value:"mailchimp",label:"Mailchimp"}];function la(){const[L,c]=n.useState([]),[j,F]=n.useState(!0),[M,E]=n.useState(!1),[b,$]=n.useState(""),[h,x]=n.useState(!1),[m,g]=n.useState(null),[v,y]=n.useState({provider:"smtp",smtp_host:"",smtp_port:587,username:"",password:"",from_email:"",from_name:"",is_active:!0,settings:"{}"});n.useEffect(()=>{w()},[]);async function w(){try{const{data:a,error:t}=await S.from("email_configurations").select("*").order("created_at",{ascending:!1});if(t)throw t;if(c(a||[]),a&&a.length>0){const r=a[0];y({provider:r.provider,smtp_host:r.smtp_host||"",smtp_port:r.smtp_port||587,username:r.username||"",password:r.password||"",from_email:r.from_email||"",from_name:r.from_name||"",is_active:r.is_active,settings:JSON.stringify(r.settings||{},null,2)})}}catch(a){console.error("Error loading email configs:",a)}finally{F(!1)}}async function N(a){a.preventDefault(),E(!0);try{let t;try{t=JSON.parse(v.settings)}catch{alert("Invalid JSON in settings"),E(!1);return}const r={...v,settings:t};if(L.length>0){const{error:u}=await S.from("email_configurations").update({...r,updated_at:new Date().toISOString()}).eq("id",L[0].id);if(u)throw u}else{const{error:u}=await S.from("email_configurations").insert([r]);if(u)throw u}alert("Email configuration saved"),w()}catch(t){console.error("Error saving email config:",t),alert("Failed to save email configuration")}finally{E(!1)}}async function l(){if(!b){g({type:"error",text:"Please enter a test email address"});return}x(!0),g(null);try{const a=await fetch("/api/send-test-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:b,config:v})});if(a.ok)g({type:"success",text:`Test email sent successfully to ${b}`}),$("");else{const t=await a.json();g({type:"error",text:t.message||"Failed to send test email"})}}catch{g({type:"error",text:"Failed to send test email. Please check your configuration."})}finally{x(!1)}}return j?e.jsx(B,{children:e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center",children:[e.jsx(_e,{className:"w-6 h-6 mr-2 text-blue-600"}),"Email Configuration"]}),e.jsx("p",{className:"text-slate-600 mt-1 text-sm",children:"Configure email server for transactional emails"})]})}),e.jsx("div",{className:"bg-gray-50 rounded p-4 border border-gray-200",children:e.jsxs("form",{onSubmit:N,className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Provider *"}),e.jsx("select",{value:v.provider,onChange:a=>y({...v,provider:a.target.value}),className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900",children:as.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"SMTP Host *"}),e.jsx("input",{type:"text",value:v.smtp_host,onChange:a=>y({...v,smtp_host:a.target.value}),required:!0,placeholder:"smtp.example.com",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"SMTP Port *"}),e.jsx("input",{type:"number",value:v.smtp_port,onChange:a=>y({...v,smtp_port:parseInt(a.target.value)}),required:!0,placeholder:"587",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Username / API Key *"}),e.jsx("input",{type:"text",value:v.username,onChange:a=>y({...v,username:a.target.value}),required:!0,placeholder:"user@example.com or API key",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Password / API Secret *"}),e.jsxs("div",{className:"relative",children:[e.jsx(lt,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"password",value:v.password,onChange:a=>y({...v,password:a.target.value}),required:!0,placeholder:"Enter password",className:"w-full pl-8 pr-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"From Email *"}),e.jsx("input",{type:"email",value:v.from_email,onChange:a=>y({...v,from_email:a.target.value}),required:!0,placeholder:"noreply@example.com",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"From Name *"}),e.jsx("input",{type:"text",value:v.from_name,onChange:a=>y({...v,from_name:a.target.value}),required:!0,placeholder:"My Company",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-gray-900"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-0.5",children:"Additional Settings (JSON)"}),e.jsx("textarea",{rows:4,value:v.settings,onChange:a=>y({...v,settings:a.target.value}),className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white font-mono text-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:v.is_active,onChange:a=>y({...v,is_active:a.target.checked}),className:"w-3 h-3 text-blue-600 border-slate-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-700",children:"Enable email notifications"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>y({provider:"smtp",smtp_host:"",smtp_port:587,username:"",password:"",from_email:"",from_name:"",is_active:!0,settings:"{}"}),className:"px-3 py-1 text-slate-700 hover:bg-slate-100 rounded transition-colors text-sm",children:"Reset"}),e.jsx("button",{type:"submit",disabled:M,className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors disabled:opacity-50 text-sm",children:M?"Saving...":"Save"})]})]})}),e.jsxs("div",{className:"bg-blue-50 rounded p-4 border border-blue-200",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-900 mb-2 flex items-center",children:[e.jsx(Ve,{className:"w-4 h-4 mr-2 text-blue-600"}),"Test Email Configuration"]}),e.jsx("p",{className:"text-xs text-slate-600 mb-3",children:"Send a test email to verify your configuration is working correctly"}),m&&e.jsxs("div",{className:`mb-3 p-2 rounded flex items-center gap-2 text-sm ${m.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[m.type==="success"?e.jsx(oe,{className:"w-4 h-4"}):e.jsx(Te,{className:"w-4 h-4"}),e.jsx("span",{children:m.text})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"email",value:b,onChange:a=>$(a.target.value),placeholder:"Enter test email address",className:"flex-1 px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 bg-white text-sm"}),e.jsxs("button",{onClick:l,disabled:h||!b,className:"flex items-center px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors disabled:opacity-50 text-sm",children:[e.jsx(Ve,{className:"w-4 h-4 mr-1"}),h?"Sending...":"Send Test"]})]})]})]})})}function na(){const[L,c]=n.useState([]),[j,F]=n.useState(!0),[M,E]=n.useState("all");n.useEffect(()=>{b()},[M]);const b=async()=>{let x=S.from("vendor_ads").select("*, vendor_profiles(shop_name)").order("created_at",{ascending:!1});M==="pending"?x=x.eq("status","pending"):M==="active"?x=x.eq("status","active"):M==="banned"&&(x=x.eq("status","banned"));const{data:m,error:g}=await x;!g&&m&&c(m),F(!1)},$=async(x,m)=>{const{error:g}=await S.from("vendor_ads").update({status:m}).eq("id",x);g||b()},h=async x=>{if(!confirm("Delete this ad?"))return;const{error:m}=await S.from("vendor_ads").delete().eq("id",x);m||b()};return e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(Re,{className:"w-6 h-6 mr-2 text-purple-600"}),"Ads Management"]}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Review and approve vendor advertisement campaigns"})]})}),e.jsx("div",{className:"flex space-x-2",children:["all","pending","active","banned"].map(x=>e.jsx("button",{onClick:()=>E(x),className:`px-3 py-1 rounded font-medium uppercase text-xs transition ${M===x?"bg-purple-600 text-white":"bg-white text-gray-500 hover:bg-gray-50 border border-gray-200"}`,children:x},x))}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[j?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):L.map(x=>{var m;return e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 overflow-hidden flex flex-col md:flex-row hover:shadow-md transition",children:[e.jsxs("div",{className:"md:w-48 h-32 md:h-auto relative overflow-hidden",children:[e.jsx("img",{src:x.image_url,alt:x.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${x.status==="active"?"bg-green-500 text-white":x.status==="pending"?"bg-amber-500 text-white":x.status==="rejected"?"bg-red-500 text-white":x.status==="banned"?"bg-black text-white":"bg-gray-500 text-white"}`,children:x.status})})]}),e.jsxs("div",{className:"flex-1 p-4 flex flex-col",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-purple-600 mb-1",children:[e.jsx(xe,{className:"w-3 h-3"}),e.jsx("span",{children:new Date(x.created_at).toLocaleDateString()})]}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:x.title}),e.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:["Type: ",x.ad_type," â€¢ Shop: ",e.jsx("span",{className:"text-purple-600",children:(m=x.vendor_profiles)==null?void 0:m.shop_name})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[x.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>$(x.id,"active"),title:"Approve",className:"p-2 bg-green-100 text-green-600 rounded hover:bg-green-600 hover:text-white transition",children:e.jsx(se,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>$(x.id,"rejected"),title:"Reject",className:"p-2 bg-red-100 text-red-600 rounded hover:bg-red-600 hover:text-white transition",children:e.jsx(G,{className:"w-4 h-4"})})]}),x.status==="active"&&e.jsx("button",{onClick:()=>$(x.id,"banned"),title:"Ban",className:"p-2 bg-red-100 text-red-600 rounded hover:bg-red-600 hover:text-white transition",children:e.jsx(G,{className:"w-4 h-4"})}),x.status==="banned"&&e.jsx("button",{onClick:()=>$(x.id,"active"),title:"Reactivate",className:"p-2 bg-green-100 text-green-600 rounded hover:bg-green-600 hover:text-white transition",children:e.jsx(se,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>h(x.id),className:"p-2 bg-gray-100 text-gray-400 rounded hover:bg-gray-900 hover:text-white transition",children:e.jsx(Q,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-auto",children:[e.jsxs("div",{className:"bg-white p-2 rounded border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400 mb-1",children:[e.jsx(ne,{className:"w-3 h-3"})," Views"]}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:x.impressions.toLocaleString()})]}),e.jsxs("div",{className:"bg-white p-2 rounded border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400 mb-1",children:[e.jsx(xt,{className:"w-3 h-3"})," Clicks"]}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:x.clicks.toLocaleString()})]}),e.jsxs("div",{className:"bg-white p-2 rounded border border-gray-200 col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400 mb-1",children:[e.jsx(Ee,{className:"w-3 h-3"})," Schedule"]}),e.jsxs("div",{className:"text-xs font-medium text-gray-900",children:[new Date(x.start_date).toLocaleDateString()," - ",new Date(x.end_date).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("a",{href:x.link_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-xs text-purple-600 hover:underline",children:[e.jsx(Xe,{className:"w-3 h-3"})," ",x.link_url]}),x.status==="active"&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-600 rounded-full text-xs",children:[e.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full animate-pulse"}),"Live Campaign"]})]})]})]},x.id)}),L.length===0&&e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-200",children:[e.jsx(Re,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-bold text-gray-400",children:"No campaigns found"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Wait for vendors to submit requests"})]})]})]})})}function ia(){const[L,c]=n.useState([]),[j,F]=n.useState(!0),[M,E]=n.useState(!1),[b,$]=n.useState(null),[h,x]=n.useState(!1),[m,g]=n.useState({title:"",subtitle:"",image_url:"",link_url:"",button_text:"Shop Now",is_active:!0,sort_order:0});n.useEffect(()=>{v()},[]);const v=async()=>{const{data:t,error:r}=await S.from("home_slides").select("*").order("sort_order",{ascending:!0});!r&&t&&c(t),F(!1)},y=async t=>{var u;const r=(u=t.target.files)==null?void 0:u[0];if(r){if(!r.type.startsWith("image/")){alert("Please upload an image file");return}if(r.size>5*1024*1024){alert("Image size must be less than 5MB");return}x(!0);try{const _=r.name.split(".").pop(),C=`slide-${Date.now()}.${_}`,d=`slides/${C}`,{error:p}=await S.storage.from("public").upload(d,r,{cacheControl:"3600",upsert:!1});if(p)throw p;const{data:{publicUrl:s}}=S.storage.from("public").getPublicUrl(d);g(i=>({...i,image_url:s})),await S.from("uploads").insert({file_name:C,file_path:s,file_type:r.type,file_size:r.size,upload_type:"slider"})}catch(_){alert(`Upload failed: ${_.message}`)}finally{x(!1)}}},w=async t=>{t.preventDefault(),F(!0);const r={...m,sort_order:b?m.sort_order:L.length+1};b?await S.from("home_slides").update(r).eq("id",b.id):await S.from("home_slides").insert(r),E(!1),$(null),v()},N=async t=>{confirm("Delete this slide?")&&(await S.from("home_slides").delete().eq("id",t),v())},l=async t=>{await S.from("home_slides").update({is_active:!t.is_active}).eq("id",t.id),v()},a=async(t,r)=>{const u=[...L],_=r==="up"?t-1:t+1;if(_<0||_>=L.length)return;const C=u[t].sort_order;u[t].sort_order=u[_].sort_order,u[_].sort_order=C,await Promise.all([S.from("home_slides").update({sort_order:u[t].sort_order}).eq("id",u[t].id),S.from("home_slides").update({sort_order:u[_].sort_order}).eq("id",u[_].id)]),v()};return e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Slider Management"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Manage the main slideshow on the homepage"})]}),e.jsxs("button",{onClick:()=>{$(null),g({title:"",subtitle:"",image_url:"",link_url:"",button_text:"Shop Now",is_active:!0,sort_order:0}),E(!0)},className:"bg-purple-600 text-white px-3 py-1 rounded font-medium flex items-center gap-1 hover:bg-purple-700 transition text-sm",children:[e.jsx(ae,{className:"w-4 h-4"})," Add"]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:L.map((t,r)=>e.jsxs("div",{className:`bg-gray-50 rounded-lg border p-4 flex flex-col md:flex-row gap-4 items-center transition ${t.is_active?"border-gray-200":"border-dashed border-gray-300 opacity-60"}`,children:[e.jsx("div",{className:"w-full md:w-64 aspect-video rounded overflow-hidden bg-gray-100 flex-shrink-0",children:e.jsx("img",{src:t.image_url,alt:t.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"bg-purple-100 text-purple-600 px-2 py-0.5 rounded-full text-xs font-medium",children:["Slide #",t.sort_order]}),!t.is_active&&e.jsx("span",{className:"bg-gray-100 text-gray-500 px-2 py-0.5 rounded-full text-xs font-medium",children:"Disabled"})]}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:t.title}),e.jsx("p",{className:"text-gray-500 text-sm line-clamp-2",children:t.subtitle}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-3 text-xs",children:[e.jsxs("div",{className:"text-purple-600",children:["Link: ",e.jsx("span",{className:"text-gray-900 underline",children:t.link_url})]}),e.jsxs("div",{className:"text-purple-600",children:["Button: ",e.jsx("span",{className:"text-gray-900",children:t.button_text})]})]})]}),e.jsxs("div",{className:"flex flex-row md:flex-col gap-1",children:[e.jsx("button",{onClick:()=>l(t),className:`p-2 rounded transition ${t.is_active?"bg-amber-100 text-amber-600 hover:bg-amber-600 hover:text-white":"bg-green-100 text-green-600 hover:bg-green-600 hover:text-white"}`,children:t.is_active?e.jsx(mt,{className:"w-4 h-4"}):e.jsx(ne,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{$(t),g(t),E(!0)},className:"p-2 bg-blue-100 text-blue-600 rounded hover:bg-blue-600 hover:text-white transition",children:e.jsx(fe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>a(r,"up"),disabled:r===0,className:"p-2 bg-gray-100 text-gray-400 rounded hover:bg-gray-900 hover:text-white transition disabled:opacity-30",children:e.jsx(Jt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>a(r,"down"),disabled:r===L.length-1,className:"p-2 bg-gray-100 text-gray-400 rounded hover:bg-gray-900 hover:text-white transition disabled:opacity-30",children:e.jsx(Ht,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>N(t.id),className:"p-2 bg-red-100 text-red-600 rounded hover:bg-red-600 hover:text-white transition",children:e.jsx(Q,{className:"w-4 h-4"})})]})]},t.id))}),M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl p-6 shadow-xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:b?"Edit Slide":"New Slide"}),e.jsx("button",{onClick:()=>E(!1),className:"p-1 hover:bg-gray-100 rounded transition",children:e.jsx(G,{className:"w-5 h-5 text-gray-400"})})]}),e.jsxs("form",{onSubmit:w,className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Heading Title"}),e.jsx("input",{required:!0,value:m.title,onChange:t=>g({...m,title:t.target.value}),className:"w-full px-2 py-1 bg-gray-50 rounded border border-gray-300 focus:ring-2 focus:ring-purple-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Button Label"}),e.jsx("input",{value:m.button_text,onChange:t=>g({...m,button_text:t.target.value}),className:"w-full px-2 py-1 bg-gray-50 rounded border border-gray-300 focus:ring-2 focus:ring-purple-500 text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Sub-heading Description"}),e.jsx("textarea",{required:!0,value:m.subtitle,onChange:t=>g({...m,subtitle:t.target.value}),className:"w-full px-2 py-1 bg-gray-50 rounded border border-gray-300 focus:ring-2 focus:ring-purple-500 text-sm min-h-[80px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Background Image"}),e.jsxs("div",{className:"space-y-2",children:[m.image_url&&e.jsx("div",{className:"w-full aspect-video rounded overflow-hidden border border-gray-300",children:e.jsx("img",{src:m.image_url,className:"w-full h-full object-cover",alt:"Preview"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:y,disabled:h,className:"hidden",id:"image-upload"}),e.jsxs("label",{htmlFor:"image-upload",className:`inline-flex items-center gap-2 px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-50 transition cursor-pointer text-sm ${h?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx(Ye,{className:"w-4 h-4"}),h?"Uploading...":"Upload Image"]}),e.jsx("input",{type:"text",value:m.image_url,onChange:t=>g({...m,image_url:t.target.value}),placeholder:"Or paste image URL",className:"flex-1 px-2 py-1 bg-gray-50 rounded border border-gray-300 focus:ring-2 focus:ring-purple-500 text-sm"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Upload an image or paste a URL. Recommended: 1920x600px"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Destination URL Link"}),e.jsx("input",{required:!0,value:m.link_url,onChange:t=>g({...m,link_url:t.target.value}),className:"w-full px-2 py-1 bg-gray-50 rounded border border-gray-300 focus:ring-2 focus:ring-purple-500 text-sm"})]}),e.jsx("button",{type:"submit",className:"w-full bg-gray-900 text-white rounded py-2 font-medium hover:bg-black transition text-sm",children:"Save Slide"})]})]})})]})})}function ca(){const{theme:L}=te(),c=L==="dark",[j,F]=n.useState([]),[M,E]=n.useState(!0),[b,$]=n.useState(!1),[h,x]=n.useState(null),[m,g]=n.useState(null),[v,y]=n.useState(null),w=n.useRef(null),[N,l]=n.useState({name:"",description:"",price_monthly:0,price_yearly:0,product_limit:10,has_catalog_management:!1,has_stock_management:!1,has_pos_access:!1,has_orders_management:!1,has_wallet_management:!1,has_shipping_management:!1,has_withdraw_management:!1,has_shop_configurations:!1,has_reports_management:!1,has_customer_support:!1,has_notifications:!1,has_refund_management:!1,has_kyc_verification:!1,has_ads_access:!1,has_promotion_access:!1,has_analytics_access:!1,has_priority_support:!1,is_active:!0,is_default:!1,sort_order:0});n.useEffect(()=>{a();const o=A=>{w.current&&!w.current.contains(A.target)&&y(null)};return document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}},[]),n.useEffect(()=>{if(m){const o=setTimeout(()=>g(null),5e3);return()=>clearTimeout(o)}},[m]);const a=async()=>{try{const{data:o,error:A}=await S.from("vendor_packages").select("*").order("sort_order",{ascending:!0});if(A)throw A;F(o||[])}catch(o){console.error("Error fetching packages:",o),g({type:"error",text:"Failed to load packages"})}finally{E(!1)}},t=async o=>{o.preventDefault(),E(!0);try{if(h){const{error:A}=await S.from("vendor_packages").update(N).eq("id",h.id);if(A)throw A;g({type:"success",text:"Package updated successfully"})}else{const{error:A}=await S.from("vendor_packages").insert([N]);if(A)throw A;g({type:"success",text:"Package created successfully"})}await a(),C()}catch(A){console.error("Error saving package:",A),g({type:"error",text:A.message||"Failed to save package"})}finally{E(!1)}},r=o=>{x(o),l({name:o.name,description:o.description,price_monthly:o.price_monthly,price_yearly:o.price_yearly,product_limit:o.product_limit,has_catalog_management:o.has_catalog_management,has_stock_management:o.has_stock_management,has_pos_access:o.has_pos_access,has_orders_management:o.has_orders_management,has_wallet_management:o.has_wallet_management,has_shipping_management:o.has_shipping_management,has_withdraw_management:o.has_withdraw_management,has_shop_configurations:o.has_shop_configurations,has_reports_management:o.has_reports_management,has_customer_support:o.has_customer_support,has_notifications:o.has_notifications,has_refund_management:o.has_refund_management,has_kyc_verification:o.has_kyc_verification,has_ads_access:o.has_ads_access,has_promotion_access:o.has_promotion_access,has_analytics_access:o.has_analytics_access,has_priority_support:o.has_priority_support,is_active:o.is_active,is_default:o.is_default,sort_order:o.sort_order}),$(!0),y(null)},u=async o=>{if(confirm("Are you sure you want to delete this package? Vendors using this package will be affected.")){try{const{error:A}=await S.from("vendor_packages").delete().eq("id",o);if(A)throw A;g({type:"success",text:"Package deleted successfully"}),await a()}catch(A){console.error("Error deleting package:",A),g({type:"error",text:A.message||"Failed to delete package"})}y(null)}},_=async o=>{try{const{error:A}=await S.from("vendor_packages").update({is_active:!o.is_active}).eq("id",o.id);if(A)throw A;g({type:"success",text:`Package ${o.is_active?"deactivated":"activated"} successfully`}),await a()}catch(A){console.error("Error toggling package status:",A),g({type:"error",text:A.message||"Failed to update package status"})}y(null)},C=()=>{$(!1),x(null),l({name:"",description:"",price_monthly:0,price_yearly:0,product_limit:10,has_catalog_management:!1,has_stock_management:!1,has_pos_access:!1,has_orders_management:!1,has_wallet_management:!1,has_shipping_management:!1,has_withdraw_management:!1,has_shop_configurations:!1,has_reports_management:!1,has_customer_support:!1,has_notifications:!1,has_refund_management:!1,has_kyc_verification:!1,has_ads_access:!1,has_promotion_access:!1,has_analytics_access:!1,has_priority_support:!1,is_active:!0,is_default:!1,sort_order:0})},d=c?"white-glass":"bg-white",p=c?"border-gray-700":"border-gray-100",s=c?"text-gray-100":"text-gray-900",i=c?"text-gray-400":"text-gray-500",V=o=>{const A=o.toLowerCase();return A.includes("gold")||A.includes("pro")||A.includes("premium")?e.jsx(Rt,{className:"h-6 w-6 text-yellow-500"}):A.includes("silver")||A.includes("standard")?e.jsx(et,{className:"h-6 w-6 text-slate-400"}):A.includes("basic")||A.includes("starter")?e.jsx(Se,{className:"h-6 w-6 text-emerald-500"}):e.jsx(ie,{className:"h-6 w-6 text-cyan-500"})};return M&&j.length===0?e.jsx(B,{children:e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto"}),e.jsx("p",{className:`mt-4 ${i} font-medium tracking-wide`,children:"Loading packages..."})]})})}):e.jsxs(B,{children:[e.jsxs("div",{className:"mb-10 flex flex-col md:flex-row md:items-end justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-cyan-500 to-emerald-500 rounded-lg shadow-lg",children:e.jsx(We,{className:"h-8 w-8 text-white"})}),e.jsx("h1",{className:`text-4xl font-extrabold tracking-tight ${s}`,children:"Vendor Packages"})]}),e.jsx("p",{className:`${i} text-lg max-w-2xl`,children:"Create and manage subscription tiers to monetize your platform efficiently."})]}),e.jsxs("button",{onClick:()=>$(!0),className:"group flex items-center space-x-2 px-6 py-3 bg-slate-900 text-white rounded-xl hover:bg-slate-800 transition-all shadow-xl hover:shadow-2xl active:scale-95",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-white/20 flex items-center justify-center group-hover:bg-white/30 transition",children:e.jsx(ae,{className:"h-4 w-4"})}),e.jsx("span",{className:"font-semibold",children:"Create Package"})]})]}),m&&e.jsxs("div",{className:`mb-8 p-4 rounded-xl flex items-center shadow-lg transform transition-all animate-in slide-in-from-top-4 ${m.type==="success"?"bg-emerald-500/10 border border-emerald-500/20 text-emerald-600":"bg-red-500/10 border border-red-500/20 text-red-600"}`,children:[m.type==="success"?e.jsx(se,{className:"h-5 w-5 mr-3"}):e.jsx(Y,{className:"h-5 w-5 mr-3"}),e.jsx("span",{className:"font-medium",children:m.text})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-8",children:j.map(o=>e.jsxs("div",{className:`group relative rounded-3xl p-8 transition-all duration-300 hover:-translate-y-2 ${d} border ${p} shadow-sm hover:shadow-2xl ${o.is_active?"":"opacity-75 grayscale-[0.5]"}`,children:[e.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 rounded-bl-full -z-10 group-hover:scale-110 transition-transform duration-500 ${o.is_active?"bg-gradient-to-br from-cyan-500/5 to-emerald-500/5":"bg-gradient-to-br from-red-500/10 to-orange-500/10"}`}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-3 rounded-2xl ${o.is_active?c?"bg-slate-700":"bg-slate-50":c?"bg-red-900/20":"bg-red-100"}`,children:V(o.name)}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:`text-xl font-bold ${s} tracking-tight`,children:o.name}),!o.is_active&&e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-red-100 text-red-700 text-[10px] font-bold uppercase tracking-wider",children:"Inactive"})]}),o.is_default&&e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-cyan-600 bg-cyan-50 px-2 py-0.5 rounded-full mt-1 inline-block",children:"Default Choice"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:A=>{A.stopPropagation(),y(v===o.id?null:o.id)},className:`p-2 rounded-full transition-colors ${c?"hover:bg-slate-700 text-slate-400":"hover:bg-slate-100 text-slate-500"}`,children:e.jsx(jt,{className:"h-5 w-5"})}),v===o.id&&e.jsxs("div",{ref:w,className:`absolute right-0 top-full mt-2 w-48 rounded-2xl shadow-2xl border overflow-hidden z-20 animate-in fade-in zoom-in-95 ${c?"bg-slate-800 border-slate-700":"bg-white border-slate-100"}`,children:[e.jsxs("button",{onClick:()=>r(o),className:`w-full flex items-center px-4 py-3 text-sm font-medium transition-colors ${c?"hover:bg-slate-700 text-slate-300":"hover:bg-slate-50 text-slate-600"}`,children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Edit Details"]}),e.jsxs("button",{onClick:()=>_(o),className:`w-full flex items-center px-4 py-3 text-sm font-medium transition-colors ${c?"hover:bg-slate-700 text-slate-300":"hover:bg-slate-50 text-slate-600"}`,children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),o.is_active?"Deactivate":"Activate"]}),e.jsx("div",{className:`h-px mx-4 ${c?"bg-slate-700":"bg-slate-100"}`}),e.jsxs("button",{onClick:()=>u(o.id),className:`w-full flex items-center px-4 py-3 text-sm font-medium transition-colors text-red-500 ${c?"hover:bg-red-900/20":"hover:bg-red-50"}`,children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]}),e.jsx("p",{className:`text-sm ${i} mb-8 leading-relaxed h-10 line-clamp-2`,children:o.description}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-baseline",children:[e.jsxs("span",{className:`text-4xl font-extrabold ${s} tracking-tight`,children:["$",o.price_monthly]}),e.jsx("span",{className:`ml-1 text-sm font-medium ${i}`,children:"/mo"})]}),o.price_yearly>0&&e.jsxs("p",{className:"text-xs font-semibold text-emerald-600 mt-1",children:["or $",o.price_yearly,"/yr ",e.jsxs("span",{className:"text-emerald-500/70 font-normal ml-1",children:["â€¢ Save ",Math.round((1-o.price_yearly/(o.price_monthly*12))*100),"%"]})]})]}),e.jsxs("div",{className:`space-y-4 border-t ${c?"border-slate-700":"border-slate-100"} pt-6`,children:[e.jsxs("div",{className:"flex items-center justify-between group/feature",children:[e.jsx("span",{className:`text-sm font-medium ${i} group-hover/feature:text-cyan-600 transition-colors`,children:"Products allowed"}),e.jsx("span",{className:`bg-slate-100 text-slate-700 px-3 py-1 rounded-full text-xs font-bold ${c?"bg-slate-700 text-slate-300":""}`,children:o.product_limit>9999?"Unlimited":o.product_limit})]}),e.jsx("div",{className:"space-y-3 pt-2",children:[{label:"POS System",has:o.has_pos_access},{label:"Online Store",has:o.has_shop_configurations},{label:"Analytics",has:o.has_analytics_access},{label:"Support",has:o.has_customer_support}].map((A,f)=>e.jsxs("div",{className:"flex items-center text-sm",children:[A.has?e.jsx("div",{className:"w-5 h-5 rounded-full bg-emerald-100 flex items-center justify-center mr-3 shrink-0",children:e.jsx(se,{className:"h-3 w-3 text-emerald-600"})}):e.jsx("div",{className:"w-5 h-5 rounded-full bg-slate-100 flex items-center justify-center mr-3 shrink-0",children:e.jsx(G,{className:"h-3 w-3 text-slate-400"})}),e.jsx("span",{className:A.has?s:i,children:A.label})]},f))})]}),e.jsx("div",{className:"mt-8",children:e.jsx("div",{className:`w-full py-2 rounded-xl text-center text-xs font-bold uppercase tracking-wider ${o.is_active?"bg-emerald-50 text-emerald-600":"bg-slate-100 text-slate-500"}`,children:o.is_active?"Active Plan":"Archived"})})]},o.id))}),b&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:`${c?"bg-slate-800 border-slate-700":"bg-white"} rounded-3xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto transform transition-all border`,children:[e.jsxs("div",{className:`p-8 border-b ${p} flex items-center justify-between sticky top-0 ${c?"bg-slate-800/95":"bg-white/95"} backdrop-blur-md z-10`,children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold ${s}`,children:h?"Edit Package":"Create New Package"}),e.jsx("p",{className:i,children:"Configure features and pricing limits."})]}),e.jsx("button",{onClick:C,className:`p-2 rounded-full ${c?"hover:bg-slate-700 text-slate-400":"hover:bg-slate-100 text-slate-500"} transition`,children:e.jsx(G,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:t,className:"p-8 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-bold uppercase tracking-wider ${i} mb-2`,children:"Package Name *"}),e.jsx("input",{type:"text",required:!0,value:N.name,onChange:o=>l({...N,name:o.target.value}),className:`w-full px-4 py-3 border ${p} rounded-xl focus:outline-none focus:ring-4 focus:ring-cyan-500/20 focus:border-cyan-500 transition-all ${c?"bg-slate-900 text-gray-100 placeholder-slate-600":"bg-slate-50 text-slate-900"}`,placeholder:"e.g., Gold Tier"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-bold uppercase tracking-wider ${i} mb-2`,children:"Sort Order"}),e.jsx("input",{type:"number",value:N.sort_order,onChange:o=>l({...N,sort_order:parseInt(o.target.value)}),className:`w-full px-4 py-3 border ${p} rounded-xl focus:outline-none focus:ring-4 focus:ring-cyan-500/20 focus:border-cyan-500 transition-all ${c?"bg-slate-900 text-gray-100 placeholder-slate-600":"bg-slate-50 text-slate-900"}`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-bold uppercase tracking-wider ${i} mb-2`,children:"Description"}),e.jsx("textarea",{value:N.description,onChange:o=>l({...N,description:o.target.value}),rows:2,className:`w-full px-4 py-3 border ${p} rounded-xl focus:outline-none focus:ring-4 focus:ring-cyan-500/20 focus:border-cyan-500 transition-all ${c?"bg-slate-900 text-gray-100 placeholder-slate-600":"bg-slate-50 text-slate-900"}`,placeholder:"Briefly describe who this package is for..."})]}),e.jsxs("div",{className:`p-6 rounded-2xl border ${p} ${c?"bg-slate-900/50":"bg-slate-50"}`,children:[e.jsxs("h3",{className:`text-sm font-bold ${s} mb-4 flex items-center gap-2`,children:[e.jsx(ie,{className:"h-4 w-4 text-cyan-500"})," Pricing & Limits"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-bold uppercase tracking-wider ${i} mb-2`,children:"Monthly ($) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:N.price_monthly,onChange:o=>l({...N,price_monthly:parseFloat(o.target.value)}),className:`w-full px-4 py-3 border ${p} rounded-xl focus:outline-none focus:ring-4 focus:ring-cyan-500/20 focus:border-cyan-500 transition-all ${c?"bg-slate-800 text-gray-100":"bg-white"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-bold uppercase tracking-wider ${i} mb-2`,children:"Yearly ($)"}),e.jsx("input",{type:"number",step:"0.01",value:N.price_yearly,onChange:o=>l({...N,price_yearly:parseFloat(o.target.value)}),className:`w-full px-4 py-3 border ${p} rounded-xl focus:outline-none focus:ring-4 focus:ring-cyan-500/20 focus:border-cyan-500 transition-all ${c?"bg-slate-800 text-gray-100":"bg-white"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-bold uppercase tracking-wider ${i} mb-2`,children:"Product Limit *"}),e.jsx("input",{type:"number",required:!0,value:N.product_limit,onChange:o=>l({...N,product_limit:parseInt(o.target.value)}),className:`w-full px-4 py-3 border ${p} rounded-xl focus:outline-none focus:ring-4 focus:ring-cyan-500/20 focus:border-cyan-500 transition-all ${c?"bg-slate-800 text-gray-100":"bg-white"}`,placeholder:"Max products"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-bold ${s} mb-4 pb-2 border-b ${p}`,children:"Core Features"}),e.jsx("div",{className:"space-y-3",children:[["has_catalog_management","Catalog Management"],["has_stock_management","Stock Management"],["has_orders_management","Orders Management"],["has_shop_configurations","Shop Configurations"],["has_notifications","Notifications"]].map(([o,A])=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[e.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors ${N[o]?"bg-cyan-500 border-cyan-500":`${p} bg-transparent`}`,children:N[o]&&e.jsx(se,{className:"h-3 w-3 text-white"})}),e.jsx("input",{type:"checkbox",className:"hidden",checked:N[o],onChange:f=>l({...N,[o]:f.target.checked})}),e.jsx("span",{className:`text-sm ${i} group-hover:${s} transition-colors`,children:A})]},o))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-bold ${s} mb-4 pb-2 border-b ${p}`,children:"Advanced Features"}),e.jsx("div",{className:"space-y-3",children:[["has_pos_access","POS Access"],["has_wallet_management","Wallet Management"],["has_shipping_management","Shipping Management"],["has_withdraw_management","Withdraw Management"],["has_reports_management","Reports & Analytics"],["has_customer_support","Customer Support"],["has_refund_management","Refund Management"],["has_kyc_verification","KYC Verification"],["has_ads_access","Ads Access"],["has_promotion_access","Promotions"],["has_analytics_access","Deep Analytics"],["has_priority_support","Priority Support"]].map(([o,A])=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[e.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors ${N[o]?"bg-emerald-500 border-emerald-500":`${p} bg-transparent`}`,children:N[o]&&e.jsx(se,{className:"h-3 w-3 text-white"})}),e.jsx("input",{type:"checkbox",className:"hidden",checked:N[o],onChange:f=>l({...N,[o]:f.target.checked})}),e.jsx("span",{className:`text-sm ${i} group-hover:${s} transition-colors`,children:A})]},o))})]})]}),e.jsxs("div",{className:"flex items-center gap-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("div",{className:`w-10 h-6 rounded-full transition-colors relative ${N.is_active?"bg-cyan-500":"bg-slate-300"}`,children:e.jsx("div",{className:`absolute top-1 left-1 bg-white w-4 h-4 rounded-full transition-transform ${N.is_active?"translate-x-4":""}`})}),e.jsx("input",{type:"checkbox",className:"hidden",checked:N.is_active,onChange:o=>l({...N,is_active:o.target.checked})}),e.jsx("span",{className:`text-sm font-medium ${s}`,children:"Active Package"})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("div",{className:`w-10 h-6 rounded-full transition-colors relative ${N.is_default?"bg-cyan-500":"bg-slate-300"}`,children:e.jsx("div",{className:`absolute top-1 left-1 bg-white w-4 h-4 rounded-full transition-transform ${N.is_default?"translate-x-4":""}`})}),e.jsx("input",{type:"checkbox",className:"hidden",checked:N.is_default,onChange:o=>l({...N,is_default:o.target.checked})}),e.jsx("span",{className:`text-sm font-medium ${s}`,children:"Default Choice"})]})]}),e.jsx("div",{className:"flex justify-end pt-6",children:e.jsx("button",{type:"submit",className:"px-8 py-3 bg-gradient-to-r from-cyan-600 to-emerald-600 text-white font-bold rounded-xl hover:shadow-xl hover:scale-105 active:scale-95 transition-all text-sm",children:M?"Processing...":h?"Update Package":"Create Package"})})]})]})})]})}function da(){const[L,c]=n.useState([]),[j,F]=n.useState(!0),[M,E]=n.useState(!1),[b,$]=n.useState(!1),[h,x]=n.useState(null),[m,g]=n.useState({});n.useEffect(()=>{v()},[]);const v=async()=>{F(!0);try{const{data:t,error:r}=await S.from("site_settings").select("*");if(r)throw r;c(t||[]);const u={};t==null||t.forEach(_=>{u[_.setting_key]=_.setting_value}),g(u)}catch(t){x({type:"error",text:t.message})}finally{F(!1)}},y=async t=>{t.preventDefault(),E(!0),x(null);try{for(const[r,u]of Object.entries(m)){const{error:_}=await S.from("site_settings").upsert({setting_key:r,setting_value:u,setting_type:r.includes("email")?"email":r.includes("url")||r.includes("logo")?"url":r==="maintenance_mode"?"boolean":"text"},{onConflict:"setting_key"});if(_)throw _}x({type:"success",text:"Settings saved successfully! Changes will take effect immediately."}),v()}catch(r){x({type:"error",text:`Failed to save: ${r.message}`})}finally{E(!1)}},w=async t=>{var u;const r=(u=t.target.files)==null?void 0:u[0];if(r){if(!r.type.startsWith("image/")){x({type:"error",text:"Please upload an image file"});return}if(r.size>2*1024*1024){x({type:"error",text:"Image size must be less than 2MB"});return}$(!0),x(null);try{const _=r.name.split(".").pop(),C=`logo-${Date.now()}.${_}`,d=`logos/${C}`,{error:p}=await S.storage.from("public").upload(d,r,{cacheControl:"3600",upsert:!1});if(p)throw p;const{data:{publicUrl:s}}=S.storage.from("public").getPublicUrl(d);g(V=>({...V,site_logo:s}));const{error:i}=await S.from("site_settings").upsert({setting_key:"site_logo",setting_value:s,setting_type:"image"},{onConflict:"setting_key"});if(i)throw i;await S.from("uploads").insert({file_name:C,file_path:s,file_type:r.type,file_size:r.size,upload_type:"logo"}),x({type:"success",text:"Logo uploaded successfully! It will appear across the site."}),v()}catch(_){x({type:"error",text:`Upload failed: ${_.message}`})}finally{$(!1)}}},N=(t,r)=>{g(u=>({...u,[t]:r}))},l=({title:t,icon:r,children:u})=>e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 overflow-hidden mb-4",children:[e.jsxs("div",{className:"p-3 border-b border-gray-200 flex items-center gap-2 bg-gray-100",children:[e.jsx("div",{className:"p-1 bg-white rounded text-indigo-600",children:e.jsx(r,{className:"w-4 h-4"})}),e.jsx("h3",{className:"text-sm font-bold text-slate-900",children:t})]}),e.jsx("div",{className:"p-3 space-y-3",children:u})]}),a=({label:t,id:r,type:u="text",placeholder:_})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:t}),e.jsx("input",{type:u,id:r,value:m[r]||"",onChange:C=>N(r,C.target.value),placeholder:_,className:"w-full px-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm"})]});return e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center",children:[e.jsx(Qe,{className:"w-6 h-6 mr-2 text-indigo-600"}),"System Configurations"]}),e.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"Manage site-wide settings and branding"})]}),e.jsxs("button",{onClick:y,disabled:M,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition disabled:opacity-50 text-sm",children:[e.jsx(le,{className:"w-4 h-4"}),M?"Saving...":"Save All Changes"]})]}),h&&e.jsxs("div",{className:`p-3 rounded flex items-center gap-2 text-sm ${h.type==="success"?"bg-emerald-100 text-emerald-800 border border-emerald-200":"bg-rose-100 text-rose-800 border border-rose-200"}`,children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{children:h.text})]}),j?e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsx(l,{title:"Site Branding",icon:bt,children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Site Logo"}),e.jsxs("div",{className:"flex items-center gap-3",children:[m.site_logo&&e.jsx("img",{src:m.site_logo,alt:"Site Logo",className:"h-12 w-auto object-contain bg-white border border-gray-200 rounded p-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:w,disabled:b,className:"hidden",id:"logo-upload"}),e.jsxs("label",{htmlFor:"logo-upload",className:`inline-flex items-center gap-2 px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-50 transition cursor-pointer text-sm ${b?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx(Ye,{className:"w-4 h-4"}),b?"Uploading...":"Upload New Logo"]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"PNG, JPG or SVG. Max 2MB."})]})]})]})}),e.jsx(l,{title:"General Information",icon:ve,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx(a,{label:"Site Name",id:"site_name",placeholder:"ZimAIO Marketplace"}),e.jsx(a,{label:"Site Tagline",id:"site_tagline",placeholder:"Everything you need, all in one place"}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Footer Text"}),e.jsx("textarea",{value:m.footer_text||"",onChange:t=>N("footer_text",t.target.value),rows:2,className:"w-full px-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm"})]})]})}),e.jsx(l,{title:"Contact & Support",icon:_e,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx(a,{label:"Support Email",id:"support_email",type:"email",placeholder:"support@zimaio.com"}),e.jsx(a,{label:"Sales Email",id:"sales_email",type:"email",placeholder:"sales@zimaio.com"}),e.jsx(a,{label:"Contact Phone",id:"contact_phone",placeholder:"+263 77 123 4567"}),e.jsx(a,{label:"Office Address",id:"office_address",placeholder:"123 Samora Machel Ave, Harare"})]})}),e.jsx(l,{title:"Social Media Links",icon:gt,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx(a,{label:"Facebook",id:"facebook_url",placeholder:"https://facebook.com/zimaio"}),e.jsx(a,{label:"Twitter/X",id:"twitter_url",placeholder:"https://twitter.com/zimaio"}),e.jsx(a,{label:"Instagram",id:"instagram_url",placeholder:"https://instagram.com/zimaio"})]})}),e.jsx(l,{title:"Appearance",icon:Kt,children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Default Font"}),e.jsxs("select",{value:m.font_family||"Inter",onChange:t=>N("font_family",t.target.value),className:"w-full px-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm",children:[e.jsx("option",{value:"Inter",children:"Inter (Modern)"}),e.jsx("option",{value:"Poppins",children:"Poppins (Friendly)"}),e.jsx("option",{value:"Montserrat",children:"Montserrat (Geometric)"}),e.jsx("option",{value:"Roboto",children:"Roboto (Clean)"})]})]})})}),e.jsxs(l,{title:"Security & Advanced",icon:vt,children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-slate-900",children:"Maintenance Mode"}),e.jsx("p",{className:"text-xs text-slate-600",children:"Take the platform offline for updates"})]}),e.jsx("button",{type:"button",onClick:()=>N("maintenance_mode",m.maintenance_mode==="true"?"false":"true"),className:`w-12 h-6 rounded-full p-0.5 transition ${m.maintenance_mode==="true"?"bg-rose-500":"bg-gray-300"}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow transition-transform ${m.maintenance_mode==="true"?"translate-x-6":""}`})})]}),e.jsx(a,{label:"Google Analytics ID",id:"ga_id",placeholder:"G-XXXXXXXXXX"})]})]})]})})}function oa(){const[L,c]=n.useState([]),[j,F]=n.useState(!0),[M,E]=n.useState(""),[b,$]=n.useState("all"),[h,x]=n.useState(!1),[m,g]=n.useState(null),[v,y]=n.useState(null),[w,N]=n.useState({name:"",description:"",promo_type:"coupon",code:"",discount_value:0,discount_type:"percentage",start_date:"",end_date:"",is_active:!0,usage_limit:0,min_purchase_amount:0});n.useEffect(()=>{l()},[]);const l=async()=>{F(!0);try{const{data:d,error:p}=await S.from("promotions").select("*").order("start_date",{ascending:!1});if(p)throw p;c(d||[])}catch(d){y({type:"error",text:d.message})}finally{F(!1)}},a=async d=>{d.preventDefault(),F(!0);try{if(m){const{error:p}=await S.from("promotions").update(w).eq("id",m.id);if(p)throw p;y({type:"success",text:"Promotion updated"})}else{const{error:p}=await S.from("promotions").insert([w]);if(p)throw p;y({type:"success",text:"Promotion created"})}l(),_()}catch(p){y({type:"error",text:p.message})}finally{F(!1)}},t=d=>{g(d),N({name:d.name,description:d.description,promo_type:d.promo_type,code:d.code||"",discount_value:d.discount_value,discount_type:d.discount_type,start_date:d.start_date.split("T")[0],end_date:d.end_date.split("T")[0],is_active:d.is_active,usage_limit:d.usage_limit||0,min_purchase_amount:d.min_purchase_amount}),x(!0)},r=async d=>{if(confirm("Delete this promotion?"))try{const{error:p}=await S.from("promotions").delete().eq("id",d);if(p)throw p;y({type:"success",text:"Promotion deleted"}),l()}catch(p){y({type:"error",text:p.message})}},u=async d=>{try{const{error:p}=await S.from("promotions").update({is_active:!d.is_active}).eq("id",d.id);if(p)throw p;l()}catch(p){y({type:"error",text:p.message})}},_=()=>{x(!1),g(null),N({name:"",description:"",promo_type:"coupon",code:"",discount_value:0,discount_type:"percentage",start_date:"",end_date:"",is_active:!0,usage_limit:0,min_purchase_amount:0})},C=L.filter(d=>{var i;const p=d.name.toLowerCase().includes(M.toLowerCase())||((i=d.code)==null?void 0:i.toLowerCase().includes(M.toLowerCase())),s=b==="all"||d.promo_type===b;return p&&s});return e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center",children:[e.jsx(Ze,{className:"w-6 h-6 mr-2 text-indigo-600"}),"Promotion Management"]}),e.jsx("p",{className:"text-slate-600 mt-1 text-sm",children:"Create and manage discount codes and campaigns"})]}),e.jsxs("button",{onClick:()=>x(!0),className:"flex items-center px-3 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition text-sm",children:[e.jsx(ae,{className:"w-4 h-4 mr-1"}),"Add"]})]}),v&&e.jsxs("div",{className:`p-2 rounded flex items-center gap-2 text-sm ${v.type==="success"?"bg-emerald-100 text-emerald-800":"bg-rose-100 text-rose-800"}`,children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{children:v.text}),e.jsx("button",{onClick:()=>y(null),children:e.jsx(G,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(Ge,{className:"w-5 h-5 text-indigo-600"})}),e.jsx("p",{className:"text-xs text-slate-600 uppercase",children:"Total"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:L.length})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(oe,{className:"w-5 h-5 text-emerald-600"})}),e.jsx("p",{className:"text-xs text-slate-600 uppercase",children:"Active"}),e.jsx("h2",{className:"text-2xl font-bold text-emerald-600",children:L.filter(d=>d.is_active).length})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(ie,{className:"w-5 h-5 text-amber-600"})}),e.jsx("p",{className:"text-xs text-slate-600 uppercase",children:"Usages"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:L.reduce((d,p)=>d+p.usage_count,0)})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(xe,{className:"w-5 h-5 text-rose-600"})}),e.jsx("p",{className:"text-xs text-slate-600 uppercase",children:"Expiring"}),e.jsx("h2",{className:"text-2xl font-bold text-rose-600",children:L.filter(d=>{const p=(new Date(d.end_date).getTime()-new Date().getTime())/864e5;return p>0&&p<7}).length})]})]}),e.jsx("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(me,{className:"absolute left-2 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search...",value:M,onChange:d=>E(d.target.value),className:"w-full pl-8 pr-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-slate-400"}),e.jsxs("select",{value:b,onChange:d=>$(d.target.value),className:"px-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"coupon",children:"Coupons"}),e.jsx("option",{value:"flash_sale",children:"Flash Sales"}),e.jsx("option",{value:"banner",children:"Banners"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[j?Array.from({length:3}).map((d,p)=>e.jsx("div",{className:"bg-gray-50 h-48 rounded animate-pulse border border-gray-200"},p)):C.map(d=>e.jsxs("div",{className:"bg-gray-50 rounded border border-gray-200 overflow-hidden hover:shadow-md transition",children:[e.jsx("div",{className:`h-2 ${d.is_active?"bg-indigo-600":"bg-gray-400"}`}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"flex justify-between items-start mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${d.promo_type==="coupon"?"bg-indigo-100 text-indigo-700":d.promo_type==="flash_sale"?"bg-rose-100 text-rose-700":"bg-emerald-100 text-emerald-700"}`,children:d.promo_type.replace("_"," ")}),d.is_active&&e.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 bg-emerald-100 text-emerald-700 rounded-full text-xs",children:[e.jsx("div",{className:"w-1 h-1 bg-emerald-500 rounded-full animate-pulse"}),"Live"]})]}),e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:d.name})]})}),e.jsxs("div",{className:"p-2 rounded bg-indigo-50 mb-3 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-slate-600",children:"Discount"}),e.jsx("p",{className:"text-xl font-bold text-slate-900",children:d.discount_type==="percentage"?`${d.discount_value}%`:`$${d.discount_value}`})]}),d.code&&e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"Code"}),e.jsx("p",{className:"text-sm font-bold font-mono text-indigo-600 bg-white px-2 py-1 rounded",children:d.code})]})]}),e.jsxs("div",{className:"space-y-2 mb-4 text-xs",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[e.jsx(Ee,{className:"w-3 h-3"}),e.jsx("span",{children:"Validity"})]}),e.jsxs("span",{className:"font-medium text-slate-900",children:[new Date(d.start_date).toLocaleDateString()," - ",new Date(d.end_date).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[e.jsx(ie,{className:"w-3 h-3"}),e.jsx("span",{children:"Usage"})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsxs("span",{className:"font-medium text-slate-900",children:[d.usage_count," / ",d.usage_limit||"âˆž"]}),e.jsx("div",{className:"w-24 h-1 bg-gray-200 rounded-full mt-1 overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-600",style:{width:`${Math.min(100,d.usage_count/(d.usage_limit||100)*100)}%`}})})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>t(d),className:"flex-1 flex items-center justify-center gap-1 py-1 bg-indigo-100 hover:bg-indigo-600 hover:text-white text-indigo-600 rounded transition text-sm",children:[e.jsx(K,{className:"w-3 h-3"}),"Edit"]}),e.jsx("button",{onClick:()=>u(d),className:`p-1 rounded transition ${d.is_active?"bg-rose-100 text-rose-600 hover:bg-rose-600 hover:text-white":"bg-emerald-100 text-emerald-600 hover:bg-emerald-600 hover:text-white"}`,children:d.is_active?e.jsx(Te,{className:"w-4 h-4"}):e.jsx(oe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>r(d.id),className:"p-1 bg-gray-100 text-gray-400 hover:bg-rose-600 hover:text-white rounded transition",children:e.jsx(Q,{className:"w-4 h-4"})})]})]})]},d.id)),!j&&C.length===0&&e.jsxs("div",{className:"col-span-full py-12 bg-gray-50 rounded border-2 border-dashed border-gray-200 flex flex-col items-center text-center",children:[e.jsx(Ge,{className:"w-12 h-12 text-gray-300 mb-3"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"No Promotions Found"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Try adjusting filters or create a new campaign"})]})]}),h&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between bg-indigo-600 text-white",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:m?"Edit Campaign":"New Campaign"}),e.jsx("p",{className:"text-xs text-white/70",children:"Configure promotion details"})]}),e.jsx("button",{onClick:_,className:"p-1 hover:bg-white/20 rounded transition",children:e.jsx(G,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsxs("form",{onSubmit:a,className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Campaign Name *"}),e.jsx("input",{type:"text",required:!0,value:w.name,onChange:d=>N({...w,name:d.target.value}),className:"w-full px-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm",placeholder:"Summer Sale 2026"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Type"}),e.jsxs("select",{value:w.promo_type,onChange:d=>N({...w,promo_type:d.target.value}),className:"w-full px-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm",children:[e.jsx("option",{value:"coupon",children:"Coupon Code"}),e.jsx("option",{value:"flash_sale",children:"Flash Sale"}),e.jsx("option",{value:"banner",children:"Banner Promo"})]})]}),w.promo_type==="coupon"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Code *"}),e.jsx("input",{type:"text",required:!0,value:w.code,onChange:d=>N({...w,code:d.target.value.toUpperCase()}),className:"w-full px-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm uppercase font-mono",placeholder:"SUMMER50"})]}),e.jsxs("div",{className:"p-3 bg-slate-50 rounded md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Discount Value *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",step:"0.01",required:!0,value:w.discount_value,onChange:d=>N({...w,discount_value:parseFloat(d.target.value)}),className:"flex-1 px-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm"}),e.jsxs("select",{value:w.discount_type,onChange:d=>N({...w,discount_type:d.target.value}),className:"px-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm",children:[e.jsx("option",{value:"percentage",children:"%"}),e.jsx("option",{value:"fixed",children:"$"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Min Purchase"}),e.jsx("input",{type:"number",value:w.min_purchase_amount,onChange:d=>N({...w,min_purchase_amount:parseFloat(d.target.value)}),className:"w-full px-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Start Date *"}),e.jsx("input",{type:"date",required:!0,value:w.start_date,onChange:d=>N({...w,start_date:d.target.value}),className:"w-full px-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"End Date *"}),e.jsx("input",{type:"date",required:!0,value:w.end_date,onChange:d=>N({...w,end_date:d.target.value}),className:"w-full px-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Usage Limit (0 for âˆž)"}),e.jsx("input",{type:"number",value:w.usage_limit,onChange:d=>N({...w,usage_limit:parseInt(d.target.value)}),className:"w-full px-2 py-1 rounded border border-slate-300 focus:ring-2 focus:ring-indigo-500 bg-white text-sm"})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("button",{type:"button",onClick:()=>N({...w,is_active:!w.is_active}),className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-10 h-5 rounded-full p-0.5 transition ${w.is_active?"bg-emerald-500":"bg-gray-300"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow transition-transform ${w.is_active?"translate-x-5":""}`})}),e.jsx("span",{className:"text-sm font-medium text-slate-900",children:"Active"})]})})]}),e.jsx("div",{className:"pt-3 border-t border-gray-200 flex justify-end",children:e.jsx("button",{type:"submit",disabled:j,className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition disabled:opacity-50 text-sm",children:j?"Processing...":m?"Save Changes":"Create Promotion"})})]})})]})})]})})}function xa(){var x,m;const{formatPrice:L}=he(),[c,j]=n.useState([]),[F,M]=n.useState(!0),[E,b]=n.useState("");n.useEffect(()=>{$()},[]);const $=async()=>{M(!0);try{const{data:g,error:v}=await S.from("vendor_profiles").select("id, shop_name, user_id");if(v)throw v;if(g){const y=g.map(async N=>{const{data:l}=await S.from("orders").select("total_amount, created_at").eq("vendor_id",N.id).eq("status","completed"),{data:a}=await S.from("products").select("id").eq("vendor_id",N.id).eq("is_active",!0),{data:t}=await S.from("product_reviews").select("rating").in("product_id",(a==null?void 0:a.map(A=>A.id))||[]),r=(l==null?void 0:l.reduce((A,f)=>A+(f.total_amount||0),0))||0,u=(l==null?void 0:l.length)||0,_=t!=null&&t.length?t.reduce((A,f)=>A+f.rating,0)/t.length:0,C=new Date;C.setDate(C.getDate()-30);const d=new Date;d.setDate(d.getDate()-60);const p=(l==null?void 0:l.filter(A=>new Date(A.created_at)>=C))||[],s=(l==null?void 0:l.filter(A=>{const f=new Date(A.created_at);return f>=d&&f<C}))||[],i=p.reduce((A,f)=>A+(f.total_amount||0),0),V=s.reduce((A,f)=>A+(f.total_amount||0),0),o=V>0?(i-V)/V*100:0;return{vendor_id:N.id,shop_name:N.shop_name,total_sales:r,total_orders:u,rating:_,product_count:(a==null?void 0:a.length)||0,growth:o}}),w=await Promise.all(y);j(w)}}catch(g){console.error("Error fetching vendor analytics:",g)}finally{M(!1)}},h=c.filter(g=>g.shop_name.toLowerCase().includes(E.toLowerCase())).sort((g,v)=>v.total_sales-g.total_sales);return e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(dt,{className:"w-6 h-6 mr-2 text-violet-600"}),"Vendor Performance Analytics"]}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Track vendor performance, revenue trends, and growth metrics"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[e.jsx("p",{className:"text-xs text-slate-600 uppercase mb-1",children:"Top Revenue"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 truncate",children:((x=h[0])==null?void 0:x.shop_name)||"N/A"}),e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[e.jsx("span",{className:"text-xl font-bold text-violet-600",children:L(((m=h[0])==null?void 0:m.total_sales)||0)}),e.jsxs("span",{className:"text-xs text-emerald-500 flex items-center",children:[e.jsx(be,{className:"w-3 h-3"})," 24%"]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[e.jsx("p",{className:"text-xs text-slate-600 uppercase mb-1",children:"Avg. Rating"}),e.jsxs("h3",{className:"text-lg font-bold text-slate-900",children:[(c.reduce((g,v)=>g+v.rating,0)/(c.length||1)).toFixed(1)," / 5.0"]}),e.jsx("div",{className:"flex gap-0.5 mt-2",children:Array.from({length:5}).map((g,v)=>e.jsx(et,{className:`w-4 h-4 ${v<4?"fill-amber-400 text-amber-400":"text-gray-300"}`},v))})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[e.jsx("p",{className:"text-xs text-slate-600 uppercase mb-1",children:"Active Products"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:c.reduce((g,v)=>g+v.product_count,0)}),e.jsx("div",{className:"mt-2 h-1.5 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-violet-600 rounded-full w-[65%]"})})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[e.jsx("p",{className:"text-xs text-slate-600 uppercase mb-1",children:"Growth Index"}),e.jsx("h3",{className:"text-lg font-bold text-emerald-500",children:"+18.4%"}),e.jsxs("div",{className:"mt-2 flex items-center gap-1",children:[e.jsx(ie,{className:"w-4 h-4 text-amber-400 fill-amber-400"}),e.jsx("span",{className:"text-xs text-slate-600",children:"Outstanding"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Performance Ranking"}),e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search...",value:E,onChange:g=>b(g.target.value),className:"pl-8 pr-2 py-1 rounded border border-gray-300 text-sm focus:ring-2 focus:ring-violet-500 bg-white"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 bg-gray-100",children:[e.jsx("th",{className:"px-4 py-2 text-xs font-medium text-slate-600 uppercase",children:"Rank"}),e.jsx("th",{className:"px-4 py-2 text-xs font-medium text-slate-600 uppercase",children:"Vendor"}),e.jsx("th",{className:"px-4 py-2 text-xs font-medium text-slate-600 uppercase",children:"Sales"}),e.jsx("th",{className:"px-4 py-2 text-xs font-medium text-slate-600 uppercase",children:"Orders"}),e.jsx("th",{className:"px-4 py-2 text-xs font-medium text-slate-600 uppercase",children:"Growth"}),e.jsx("th",{className:"px-4 py-2 text-xs font-medium text-slate-600 uppercase text-right",children:"Score"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:F?Array.from({length:5}).map((g,v)=>e.jsx("tr",{className:"animate-pulse",children:e.jsx("td",{colSpan:6,className:"px-4 py-3",children:e.jsx("div",{className:"h-6 bg-gray-100 rounded w-full"})})},v)):h.map((g,v)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsxs("td",{className:"px-4 py-3 font-bold text-violet-600 text-sm",children:["#",v+1]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded bg-violet-100 flex items-center justify-center text-violet-600",children:e.jsx(tt,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-slate-900",children:g.shop_name}),e.jsxs("p",{className:"text-xs text-slate-600",children:[g.product_count," Products"]})]})]})}),e.jsx("td",{className:"px-4 py-3 font-bold text-sm",children:L(g.total_sales)}),e.jsx("td",{className:"px-4 py-3 font-medium text-sm",children:g.total_orders}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:`flex items-center gap-0.5 text-xs font-bold ${g.growth>=0?"text-emerald-500":"text-rose-500"}`,children:[g.growth>=0?e.jsx(be,{className:"w-3 h-3"}):e.jsx(Ke,{className:"w-3 h-3"}),Math.abs(g.growth).toFixed(1),"%"]})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("div",{className:"inline-flex items-center justify-center px-2 py-1 rounded bg-violet-100 text-violet-600 font-bold text-xs",children:(g.total_sales/1e3+g.rating).toFixed(1)})})]},g.vendor_id))})]})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-3",children:"Top Performers"}),e.jsx("div",{className:"space-y-3",children:h.slice(0,3).map((g,v)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded bg-white border border-gray-200",children:[e.jsx("div",{className:"w-10 h-10 rounded bg-violet-100 flex items-center justify-center font-bold text-violet-600",children:v+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-900 truncate",children:g.shop_name}),e.jsx("p",{className:"text-xs text-slate-600",children:"Elite Badge"})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-xs font-bold text-violet-600",children:L(g.total_sales)})})]},g.vendor_id))}),e.jsx("button",{className:"w-full mt-3 py-2 bg-violet-100 text-violet-600 rounded font-medium text-xs hover:bg-violet-600 hover:text-white transition",children:"View Full Report"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-gradient-to-br from-violet-600 to-indigo-700 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ie,{className:"w-5 h-5 fill-amber-400 text-amber-400"}),e.jsx("h3",{className:"text-lg font-bold",children:"System Insight"})]}),e.jsxs("p",{className:"text-sm leading-relaxed opacity-90",children:["Total platform revenue is up ",e.jsx("span",{className:"font-bold text-amber-400",children:"12.4%"})," since last week. Electronics remains the top category."]}),e.jsxs("div",{className:"mt-4 p-3 bg-white/10 rounded border border-white/10",children:[e.jsx("span",{className:"text-xs uppercase opacity-70",children:"Projected Growth"}),e.jsxs("div",{className:"flex items-end gap-1 mt-1",children:[e.jsx("span",{className:"text-2xl font-bold",children:"+22%"}),e.jsx("span",{className:"text-xs opacity-70 pb-0.5",children:"by next quarter"})]})]})]})]})]})]})})}function ma(){var v,y,w,N;const[L,c]=n.useState([]),[j,F]=n.useState(!0),[M,E]=n.useState("all"),[b,$]=n.useState(null);n.useEffect(()=>{h()},[M]);const h=async()=>{F(!0);try{let l=S.from("fraud_alerts").select("*, profiles(full_name, email)");M!=="all"&&(l=l.eq("status",M));const{data:a,error:t}=await l.order("created_at",{ascending:!1});if(t)throw t;c(a||[])}catch(l){console.error("Error fetching fraud alerts:",l)}finally{F(!1)}},x=async(l,a)=>{try{const{error:t}=await S.from("fraud_alerts").update({status:a}).eq("id",l);if(t)throw t;h(),$(null)}catch(t){alert("Error: "+t.message)}},m=l=>l>=80?"text-rose-600":l>=50?"text-amber-600":"text-emerald-600",g=l=>l>=80?"bg-rose-100":l>=50?"bg-amber-100":"bg-emerald-100";return e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(Pe,{className:"w-6 h-6 mr-2 text-rose-600"}),"Fraud & Risk Detection"]}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Monitor suspicious activities and protect the marketplace"})]}),e.jsxs("div",{className:"px-3 py-1 rounded bg-gray-50 border border-gray-200 flex items-center gap-2",children:[e.jsx($t,{className:"w-4 h-4 text-emerald-500"}),e.jsxs("span",{className:"text-xs font-medium text-slate-600",children:["Status: ",e.jsx("span",{className:"text-emerald-500",children:"Secure"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Se,{className:"w-5 h-5 text-indigo-600"}),e.jsx(be,{className:"w-4 h-4 text-emerald-500"})]}),e.jsx("p",{className:"text-xs text-slate-600 uppercase",children:"Total Scanned"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"14,208"})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Ie,{className:"w-5 h-5 text-rose-600"}),e.jsx(Ke,{className:"w-4 h-4 text-rose-500"})]}),e.jsx("p",{className:"text-xs text-slate-600 uppercase",children:"High Risk"}),e.jsx("h2",{className:"text-2xl font-bold text-rose-600",children:L.filter(l=>l.risk_score>80).length})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Ut,{className:"w-5 h-5 text-amber-600"}),e.jsx("span",{className:"text-xs font-medium text-amber-500",children:"+12%"})]}),e.jsx("p",{className:"text-xs text-slate-600 uppercase",children:"Pending"}),e.jsx("h2",{className:"text-2xl font-bold text-amber-600",children:L.filter(l=>l.status==="pending").length})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(ye,{className:"w-5 h-5 text-emerald-600"}),e.jsx("span",{className:"text-xs font-medium text-emerald-500",children:"100%"})]}),e.jsx("p",{className:"text-xs text-slate-600 uppercase",children:"Resolved"}),e.jsx("h2",{className:"text-2xl font-bold text-emerald-600",children:L.filter(l=>l.status==="resolved").length})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-3",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(me,{className:"w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search by user or reason...",className:"bg-transparent border-none focus:ring-0 w-full text-sm"})]}),e.jsxs("select",{value:M,onChange:l=>E(l.target.value),className:"bg-transparent border-none focus:ring-0 text-xs font-medium text-slate-600",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"resolved",children:"Resolved"}),e.jsx("option",{value:"dismissed",children:"Dismissed"})]})]}),e.jsxs("div",{className:"space-y-3",children:[j?Array.from({length:3}).map((l,a)=>e.jsx("div",{className:"bg-gray-50 h-24 rounded animate-pulse border border-gray-200"},a)):L.map(l=>{var a,t;return e.jsxs("div",{onClick:()=>$(l),className:"bg-gray-50 p-4 rounded border border-gray-200 hover:shadow-md transition cursor-pointer flex items-center gap-4",children:[e.jsxs("div",{className:`w-12 h-12 rounded flex flex-col items-center justify-center shrink-0 ${g(l.risk_score)}`,children:[e.jsx("span",{className:`text-lg font-bold ${m(l.risk_score)}`,children:l.risk_score}),e.jsx("span",{className:`text-xs ${m(l.risk_score)}`,children:"Risk"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-900",children:(a=l.profiles)==null?void 0:a.full_name}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${l.status==="pending"?"bg-amber-100 text-amber-700":l.status==="resolved"?"bg-emerald-100 text-emerald-700":"bg-gray-100 text-gray-700"}`,children:l.status})]}),e.jsx("p",{className:"text-xs text-slate-600 line-clamp-1",children:l.reason}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsxs("span",{className:"text-xs text-slate-500 flex items-center gap-1",children:[e.jsx(xe,{className:"w-3 h-3"})," ",new Date(l.created_at).toLocaleString()]}),e.jsxs("span",{className:"text-xs text-slate-500 flex items-center gap-1",children:[e.jsx(Je,{className:"w-3 h-3"})," ",((t=l.metadata)==null?void 0:t.ip)||"Unknown IP"]})]})]}),e.jsx(ne,{className:"w-5 h-5 text-indigo-600 opacity-0 group-hover:opacity-100"})]},l.id)}),!j&&L.length===0&&e.jsxs("div",{className:"py-12 text-center flex flex-col items-center",children:[e.jsx("div",{className:"p-4 bg-emerald-100 rounded mb-3",children:e.jsx(ye,{className:"w-10 h-10 text-emerald-600"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"No Security Threats"}),e.jsx("p",{className:"text-sm text-slate-600",children:"All systems operating normally"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-gradient-to-br from-indigo-600 to-violet-700 text-white",children:[e.jsx("h3",{className:"text-lg font-bold mb-3",children:"Quick Security Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{className:"w-full py-2 bg-white/10 hover:bg-white/20 rounded font-medium text-xs transition flex items-center justify-center gap-2",children:[e.jsx(Ct,{className:"w-4 h-4"})," Global IP Block"]}),e.jsxs("button",{className:"w-full py-2 bg-white/10 hover:bg-white/20 rounded font-medium text-xs transition flex items-center justify-center gap-2",children:[e.jsx(Nt,{className:"w-4 h-4"})," Multi-Ban Users"]}),e.jsxs("button",{className:"w-full py-2 bg-white/10 hover:bg-white/20 rounded font-medium text-xs transition flex items-center justify-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4"})," Purge Risk Orders"]})]})]}),b?e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Alert Details"}),e.jsx("button",{onClick:()=>$(null),children:e.jsx(G,{className:"w-5 h-5 text-gray-400"})})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`w-12 h-12 rounded flex items-center justify-center ${g(b.risk_score)}`,children:e.jsx("span",{className:`text-lg font-bold ${m(b.risk_score)}`,children:b.risk_score})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-slate-900",children:(v=b.profiles)==null?void 0:v.full_name}),e.jsx("p",{className:"text-xs text-slate-600",children:(y=b.profiles)==null?void 0:y.email})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-white rounded border border-gray-200",children:[e.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Risk Analysis"}),e.jsx("p",{className:"text-sm font-medium text-slate-900 mt-1",children:b.reason})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"p-2 bg-white rounded border border-gray-200",children:[e.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Device"}),e.jsx("p",{className:"text-xs font-bold text-slate-900 mt-1",children:((w=b.metadata)==null?void 0:w.device)||"Mobile"})]}),e.jsxs("div",{className:"p-2 bg-white rounded border border-gray-200",children:[e.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Browser"}),e.jsx("p",{className:"text-xs font-bold text-slate-900 mt-1",children:((N=b.metadata)==null?void 0:N.browser)||"Chrome"})]})]}),e.jsxs("div",{className:"pt-3 border-t border-gray-200 flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>x(b.id,"resolved"),className:"w-full py-2 bg-emerald-600 text-white rounded font-medium text-xs hover:bg-emerald-700 transition",children:"Mark as Safe"}),e.jsx("button",{onClick:()=>x(b.id,"dismissed"),className:"w-full py-2 bg-gray-200 text-gray-600 rounded font-medium text-xs hover:bg-gray-300 transition",children:"Dismiss Alert"}),e.jsx("button",{className:"w-full py-2 bg-rose-600 text-white rounded font-medium text-xs hover:bg-rose-700 transition",children:"Ban Account"})]})]})]}):e.jsxs("div",{className:"bg-gray-50 p-8 rounded-lg border-2 border-dashed border-gray-200 flex flex-col items-center text-center opacity-50",children:[e.jsx(Pe,{className:"w-10 h-10 text-gray-300 mb-2"}),e.jsxs("p",{className:"text-xs font-medium text-slate-600",children:["Select an alert",e.jsx("br",{}),"to view details"]})]})]})]})]})})}function ua(){const{theme:L}=te(),c=L==="dark",[j,F]=n.useState([]),[M,E]=n.useState([]),[b,$]=n.useState(!0),[h,x]=n.useState("categories"),[m,g]=n.useState(!1),[v,y]=n.useState(null),[w,N]=n.useState(null),[l,a]=n.useState({name:"",slug:"",description:"",parent_id:"",image_url:"",is_active:!0,sort_order:0}),t=c?"text-gray-100":"text-gray-900",r=c?"text-gray-400":"text-gray-600",u=c?"border-gray-700":"border-gray-200";n.useEffect(()=>{_()},[h]);const _=async()=>{$(!0);try{if(h==="categories"){const{data:i,error:V}=await S.from("categories").select("*").order("sort_order",{ascending:!0});if(V)throw V;F(i||[])}else{const{data:i,error:V}=await S.from("brands").select("*").order("name",{ascending:!0});if(V)throw V;E(i||[])}}catch(i){N({type:"error",text:i.message})}finally{$(!1)}},C=async i=>{i.preventDefault(),$(!0);const V=h==="categories"?"categories":"brands";try{if(v){const{error:o}=await S.from(V).update(l).eq("id",v.id);if(o)throw o;N({type:"success",text:"Catalog item updated successfully"})}else{const{error:o}=await S.from(V).insert([l]);if(o)throw o;N({type:"success",text:"Catalog item created successfully"})}_(),s()}catch(o){N({type:"error",text:o.message})}finally{$(!1)}},d=i=>{y(i),a(i),g(!0)},p=async i=>{if(!confirm("Are you sure you want to delete this item?"))return;const V=h==="categories"?"categories":"brands";try{const{error:o}=await S.from(V).delete().eq("id",i);if(o)throw o;N({type:"success",text:"Item deleted successfully"}),_()}catch(o){N({type:"error",text:o.message})}},s=()=>{g(!1),y(null),a({name:"",slug:"",description:"",parent_id:"",image_url:"",is_active:!0,sort_order:0})};return e.jsxs(B,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-xl font-bold ${t} mb-1`,children:"Catalog Management"}),e.jsx("p",{className:`text-sm ${r}`,children:"Manage product categories and brands to organize your marketplace."})]}),e.jsxs("button",{onClick:()=>g(!0),className:`px-4 py-2 border ${u} ${t} rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition text-sm font-medium`,children:["Add ",h==="categories"?"Category":"Brand"]})]})}),e.jsxs("div",{className:"flex gap-2 mb-6 border-b ${borderColor}",children:[e.jsx("button",{onClick:()=>x("categories"),className:`px-4 py-2 font-medium text-sm transition-all ${h==="categories"?`${t} border-b-2 border-gray-900 dark:border-white`:`${r} hover:${t}`}`,children:"Categories"}),e.jsx("button",{onClick:()=>x("brands"),className:`px-4 py-2 font-medium text-sm transition-all ${h==="brands"?`${t} border-b-2 border-gray-900 dark:border-white`:`${r} hover:${t}`}`,children:"Brands"})]}),w&&e.jsxs("div",{className:`mb-6 p-4 rounded-2xl flex items-center gap-3 animate-in fade-in slide-in-from-top-4 ${w.type==="success"?"bg-emerald-50 border border-emerald-200 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400":"bg-rose-50 border border-rose-200 text-rose-800 dark:bg-rose-900/20 dark:text-rose-400"}`,children:[e.jsx(Y,{className:"h-5 w-5 shrink-0"}),e.jsx("span",{className:"font-bold flex-1",children:w.text}),e.jsx("button",{onClick:()=>N(null),children:e.jsx(G,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"rounded border border-gray-200 overflow-hidden bg-white",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-xs font-medium text-gray-900 border-r border-gray-200",children:h==="categories"?"Image":"Logo"}),e.jsx("th",{className:"px-3 py-2 text-xs font-medium text-gray-900 border-r border-gray-200",children:"Name"}),h==="categories"&&e.jsx("th",{className:"px-3 py-2 text-xs font-medium text-gray-900 border-r border-gray-200",children:"Description"}),e.jsx("th",{className:"px-3 py-2 text-xs font-medium text-gray-900 border-r border-gray-200",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-xs font-medium text-gray-900 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 bg-white",children:b?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:"Loading..."})}):h==="categories"?j.map(i=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-3 py-2 border-r border-gray-200 w-12",children:e.jsx("div",{className:"w-8 h-8 rounded bg-gray-50 overflow-hidden flex items-center justify-center border border-gray-200",children:i.image_url?e.jsx("img",{src:i.image_url,alt:i.name,className:"w-full h-full object-cover"}):e.jsx(We,{className:"h-4 w-4 text-gray-400"})})}),e.jsxs("td",{className:"px-3 py-2 border-r border-gray-200",children:[e.jsx("div",{className:"text-xs font-bold text-gray-900",children:i.name}),e.jsx("div",{className:"text-xs text-gray-500",children:i.slug})]}),e.jsx("td",{className:"px-3 py-2 border-r border-gray-200 max-w-xs truncate text-xs text-gray-600",children:i.description||"-"}),e.jsx("td",{className:"px-3 py-2 border-r border-gray-200",children:e.jsx("span",{className:"px-2 py-0.5 rounded bg-gray-100 text-gray-900 border border-gray-200 text-xs",children:i.is_active?"Active":"Hidden"})}),e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("button",{onClick:()=>d(i),className:"px-2 py-1 bg-white border border-gray-200 hover:bg-gray-50 text-gray-600 rounded text-xs",children:"Edit"}),e.jsx("button",{onClick:()=>p(i.id),className:"px-2 py-1 text-gray-600 border border-gray-200 hover:bg-gray-50 rounded text-xs",children:e.jsx(Q,{className:"h-3 w-3"})})]})})]},i.id)):M.map(i=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-3 py-2 border-r border-gray-200 w-12",children:e.jsx("div",{className:"w-8 h-8 rounded bg-gray-50 overflow-hidden flex items-center justify-center border border-gray-200",children:i.logo_url?e.jsx("img",{src:i.logo_url,alt:i.name,className:"w-full h-full object-contain"}):e.jsx(Ze,{className:"h-4 w-4 text-gray-400"})})}),e.jsxs("td",{className:"px-3 py-2 border-r border-gray-200",children:[e.jsx("div",{className:"text-xs font-bold text-gray-900",children:i.name}),e.jsx("div",{className:"text-xs text-gray-500",children:i.slug})]}),e.jsx("td",{className:"px-3 py-2 border-r border-gray-200",children:e.jsx("span",{className:"px-2 py-0.5 rounded bg-gray-100 text-gray-900 border border-gray-200 text-xs",children:i.is_active?"Active":"Hidden"})}),e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("button",{onClick:()=>d(i),className:"px-2 py-1 bg-white border border-gray-200 hover:bg-gray-50 text-gray-600 rounded text-xs",children:"Edit"}),e.jsx("button",{onClick:()=>p(i.id),className:"px-2 py-1 text-gray-600 border border-gray-200 hover:bg-gray-50 rounded text-xs",children:e.jsx(Q,{className:"h-3 w-3"})})]})})]},i.id))})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded shadow-lg max-w-lg w-full max-h-[90vh] overflow-hidden flex flex-col border border-gray-200",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between bg-white",children:[e.jsx("div",{children:e.jsxs("h2",{className:"text-sm font-bold text-gray-900",children:[v?"Edit ":"New ",h==="categories"?"Category":"Brand"]})}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded transition",children:e.jsx(G,{className:"h-4 w-4 text-gray-500"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-[10px] font-black uppercase tracking-widest ${r} mb-1`,children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:l.name,onChange:i=>a({...l,name:i.target.value}),className:`w-full px-3 py-2 text-xs rounded-lg border ${u} focus:outline-none focus:ring-2 focus:ring-slate-900/10 ${c?"bg-gray-700 text-gray-100":"bg-white text-slate-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-[10px] font-black uppercase tracking-widest ${r} mb-1`,children:"Slug *"}),e.jsx("input",{type:"text",required:!0,value:l.slug,onChange:i=>a({...l,slug:i.target.value.toLowerCase().replace(/ /g,"-")}),className:`w-full px-3 py-2 text-xs rounded-lg border ${u} focus:outline-none focus:ring-2 focus:ring-slate-900/10 ${c?"bg-gray-700 text-gray-100":"bg-white text-slate-900"}`})]}),h==="categories"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-[10px] font-black uppercase tracking-widest ${r} mb-1`,children:"Description"}),e.jsx("textarea",{value:l.description,onChange:i=>a({...l,description:i.target.value}),rows:2,className:`w-full px-3 py-2 text-xs rounded-lg border ${u} focus:outline-none focus:ring-2 focus:ring-slate-900/10 ${c?"bg-gray-700 text-gray-100":"bg-white text-slate-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-[10px] font-black uppercase tracking-widest ${r} mb-1`,children:"Sort Order"}),e.jsx("input",{type:"number",value:l.sort_order,onChange:i=>a({...l,sort_order:parseInt(i.target.value)}),className:`w-full px-3 py-2 text-xs rounded-lg border ${u} focus:outline-none focus:ring-2 focus:ring-slate-900/10 ${c?"bg-gray-700 text-gray-100":"bg-white text-slate-900"}`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-[10px] font-black uppercase tracking-widest ${r} mb-1`,children:h==="categories"?"Image URL":"Logo URL"}),e.jsx("input",{type:"text",value:l.image_url||l.logo_url,onChange:i=>a({...l,[h==="categories"?"image_url":"logo_url"]:i.target.value}),className:`w-full px-3 py-2 text-xs rounded-lg border ${u} focus:outline-none focus:ring-2 focus:ring-slate-900/10 ${c?"bg-gray-700 text-gray-100":"bg-white text-slate-900"}`,placeholder:"URL here"})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("button",{type:"button",onClick:()=>a({...l,is_active:!l.is_active}),className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-6 bg-slate-200 dark:bg-slate-700 rounded-full relative transition-colors ${l.is_active?"bg-emerald-500":""}`,children:e.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${l.is_active?"translate-x-4":""}`})}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-900 dark:text-white",children:"Active"})]})}),e.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-700 flex justify-end",children:e.jsx("button",{type:"submit",className:"px-6 py-2 bg-slate-900 dark:bg-slate-100 text-white dark:text-slate-900 rounded-xl font-black uppercase tracking-widest text-[10px] hover:bg-slate-800 transition-all",children:"Save"})})]})})]})})]})}function ga(){const{theme:L}=te(),c=L==="dark",[j,F]=n.useState([]),[M,E]=n.useState([]),[b,$]=n.useState(!0),[h,x]=n.useState("list"),[m,g]=n.useState(null),[v,y]=n.useState(null),[w,N]=n.useState("all"),[l,a]=n.useState("all"),[t,r]=n.useState("all"),[u,_]=n.useState(""),[C,d]=n.useState(""),[p,s]=n.useState(""),[i,V]=n.useState([]),o=c?"bg-gray-800":"bg-white",A=c?"text-gray-100":"text-gray-900",f=c?"text-gray-400":"text-gray-600",T=c?"border-gray-700":"border-gray-200";n.useEffect(()=>{R()},[]),n.useEffect(()=>{O()},[j,w,l,t,u,C,p]);const R=async()=>{try{const[P,U]=await Promise.all([S.from("products").select(`
            *,
            vendor:vendor_profiles(shop_name, user_id)
          `).order("created_at",{ascending:!1}),S.from("vendor_profiles").select("id, shop_name").order("shop_name")]);if(P.error)throw P.error;if(U.error)throw U.error;F(P.data||[]),V(U.data||[])}catch(P){y({type:"error",text:P.message})}finally{$(!1)}},O=()=>{let P=[...j];if(w!=="all"&&(P=P.filter(U=>U.vendor_id===w)),l!=="all"){const U=l==="active";P=P.filter(Z=>Z.is_active===U)}if(t!=="all"){const U=t==="approved";P=P.filter(Z=>Z.admin_approved===U)}if(u&&(P=P.filter(U=>new Date(U.created_at)>=new Date(u))),C){const U=new Date(C);U.setHours(23,59,59,999),P=P.filter(Z=>new Date(Z.created_at)<=U)}if(p){const U=p.toLowerCase();P=P.filter(Z=>{var ee,ce;return Z.name.toLowerCase().includes(U)||((ee=Z.sku)==null?void 0:ee.toLowerCase().includes(U))||((ce=Z.description)==null?void 0:ce.toLowerCase().includes(U))})}E(P)},J=()=>{N("all"),a("all"),r("all"),_(""),d(""),s("")},q=async P=>{try{const{error:U}=await S.from("products").update({is_active:!P.is_active,updated_at:new Date().toISOString()}).eq("id",P.id);if(U)throw U;y({type:"success",text:`Product ${P.is_active?"deactivated":"activated"}`}),R()}catch(U){y({type:"error",text:U.message})}},k=async(P,U,Z)=>{try{const{error:ee}=await S.from("products").update({admin_approved:U,admin_notes:Z||null,rejection_reason:U?null:Z,updated_at:new Date().toISOString()}).eq("id",P);if(ee)throw ee;y({type:"success",text:`Product ${U?"approved":"rejected"}`}),g(null),R()}catch(ee){y({type:"error",text:ee.message})}},I=async()=>{if(m)try{const{error:P}=await S.from("products").update({name:m.name,description:m.description,base_price:m.base_price,stock_quantity:m.stock_quantity,is_featured:m.is_featured,admin_notes:m.admin_notes,updated_at:new Date().toISOString()}).eq("id",m.id);if(P)throw P;y({type:"success",text:"Product updated successfully"}),R()}catch(P){y({type:"error",text:P.message})}},H={total:M.length,active:M.filter(P=>P.is_active).length,approved:M.filter(P=>P.admin_approved).length,pending:M.filter(P=>!P.admin_approved).length};return b?e.jsx(B,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600"})})}):e.jsxs(B,{children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-xl font-bold ${A} mb-1`,children:"Products Management"}),e.jsx("p",{className:`text-sm ${f}`,children:"Manage all vendor products"})]}),e.jsxs("div",{className:`flex items-center border ${T} rounded p-0.5 bg-white dark:bg-gray-900`,children:[e.jsx("button",{onClick:()=>x("grid"),className:`px-2 py-1 rounded text-xs transition ${h==="grid"?`${A} bg-gray-100 dark:bg-gray-700`:`${f} hover:bg-gray-50 dark:hover:bg-gray-700`}`,children:"Grid"}),e.jsx("button",{onClick:()=>x("list"),className:`px-2 py-1 rounded text-xs transition ${h==="list"?`${A} bg-gray-100 dark:bg-gray-700`:`${f} hover:bg-gray-50 dark:hover:bg-gray-700`}`,children:"List"})]})]})}),v&&e.jsxs("div",{className:`mb-4 p-3 rounded-lg flex items-start space-x-2 text-sm ${v.type==="success"?"bg-green-50 border border-green-200 text-green-800 dark:bg-green-900/20 dark:border-green-800 dark:text-green-400":"bg-red-50 border border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-800 dark:text-red-400"}`,children:[v.type==="success"?e.jsx(oe,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}):e.jsx(Y,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:v.text}),e.jsx("button",{onClick:()=>y(null),className:"ml-auto",children:e.jsx(G,{className:"h-3.5 w-3.5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-6",children:[e.jsxs("div",{className:"bg-white rounded border border-gray-200 p-3",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:H.total})]}),e.jsxs("div",{className:"bg-white rounded border border-gray-200 p-3",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Active"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:H.active})]}),e.jsxs("div",{className:"bg-white rounded border border-gray-200 p-3",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Approved"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:H.approved})]}),e.jsxs("div",{className:"bg-white rounded border border-gray-200 p-3",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Pending"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:H.pending})]})]}),e.jsxs("div",{className:"bg-white rounded border border-gray-200 p-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx($e,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-xs font-bold text-gray-900",children:"Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-0.5",children:"Vendor"}),e.jsxs("select",{value:w,onChange:P=>N(P.target.value),className:"w-full px-2 py-1 text-xs border border-gray-200 rounded focus:outline-none bg-white text-gray-900",children:[e.jsx("option",{value:"all",children:"All Vendors"}),i.map(P=>e.jsx("option",{value:P.id,children:P.shop_name},P.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-0.5",children:"Status"}),e.jsxs("select",{value:l,onChange:P=>a(P.target.value),className:"w-full px-2 py-1 text-xs border border-gray-200 rounded focus:outline-none bg-white text-gray-900",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-0.5",children:"Approval"}),e.jsxs("select",{value:t,onChange:P=>r(P.target.value),className:"w-full px-2 py-1 text-xs border border-gray-200 rounded focus:outline-none bg-white text-gray-900",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"pending",children:"Pending"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-0.5",children:"From"}),e.jsx("input",{type:"date",value:u,onChange:P=>_(P.target.value),className:"w-full px-2 py-1 text-xs border border-gray-200 rounded focus:outline-none bg-white text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-0.5",children:"To"}),e.jsx("input",{type:"date",value:C,onChange:P=>d(P.target.value),className:"w-full px-2 py-1 text-xs border border-gray-200 rounded focus:outline-none bg-white text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-0.5",children:"Search"}),e.jsx("input",{type:"text",value:p,onChange:P=>s(P.target.value),placeholder:"Name...",className:"w-full px-2 py-1 text-xs border border-gray-200 rounded focus:outline-none bg-white text-gray-900"})]})]}),e.jsx("div",{className:"flex justify-end mt-2",children:e.jsx("button",{onClick:J,className:"text-xs text-gray-600 hover:text-gray-900 font-medium",children:"Reset"})})]}),h==="list"?e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"border-b border-slate-200 bg-slate-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-[10px] font-black uppercase tracking-widest text-slate-700 border-r border-slate-200",children:"Product"}),e.jsx("th",{className:"px-3 py-2 text-[10px] font-black uppercase tracking-widest text-slate-700 border-r border-slate-200",children:"Vendor"}),e.jsx("th",{className:"px-3 py-2 text-[10px] font-black uppercase tracking-widest text-slate-700 border-r border-slate-200",children:"Price"}),e.jsx("th",{className:"px-3 py-2 text-[10px] font-black uppercase tracking-widest text-slate-700 border-r border-slate-200",children:"Stock"}),e.jsx("th",{className:"px-3 py-2 text-[10px] font-black uppercase tracking-widest text-slate-700 border-r border-slate-200",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-[10px] font-black uppercase tracking-widest text-slate-700 border-r border-slate-200",children:"Approval"}),e.jsx("th",{className:"px-3 py-2 text-[10px] font-black uppercase tracking-widest text-slate-700 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:M.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-8 text-center",children:e.jsx("p",{className:`text-sm ${f}`,children:"No products found"})})}):M.map(P=>{var U;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors bg-white",children:[e.jsx("td",{className:"px-3 py-2 border-r border-gray-200 text-xs",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900",children:P.name}),e.jsx("p",{className:"text-xs text-gray-500",children:P.sku})]})}),e.jsx("td",{className:"px-3 py-2 border-r border-gray-200 text-xs text-gray-600",children:((U=P.vendor)==null?void 0:U.shop_name)||"Unknown"}),e.jsxs("td",{className:"px-3 py-2 border-r border-gray-200 text-xs font-bold text-gray-900",children:["$",P.base_price.toFixed(2)]}),e.jsx("td",{className:"px-3 py-2 border-r border-gray-200 text-xs text-gray-900",children:P.stock_quantity}),e.jsx("td",{className:"px-3 py-2 border-r border-gray-200",children:P.is_active?e.jsx("span",{className:"px-2 py-0.5 rounded bg-green-100 text-green-800 border border-green-200 text-xs",children:"Active"}):e.jsx("span",{className:"px-2 py-0.5 rounded bg-gray-100 text-gray-600 border border-gray-200 text-xs",children:"Inactive"})}),e.jsx("td",{className:"px-3 py-2 border-r border-gray-200",children:P.admin_approved?e.jsx("span",{className:"px-2 py-0.5 rounded bg-blue-100 text-blue-800 border border-blue-200 text-xs",children:"Approved"}):e.jsx("span",{className:"px-2 py-0.5 rounded bg-yellow-100 text-yellow-700 border border-yellow-200 text-xs",children:"Pending"})}),e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("button",{onClick:()=>g(P),className:"p-1 px-2 bg-white border border-gray-200 hover:bg-gray-50 text-gray-600 rounded text-xs",children:e.jsx(K,{className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>q(P),className:"p-1 px-2 border border-gray-200 text-gray-600 hover:bg-gray-50 rounded text-xs",children:P.is_active?e.jsx(Ne,{className:"h-3 w-3"}):e.jsx(we,{className:"h-3 w-3"})})]})})]},P.id)})})]})})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:M.map(P=>{var U;return e.jsxs("div",{className:`${o} rounded-lg shadow-sm border ${T} p-4`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`text-sm font-semibold ${A} mb-1`,children:P.name}),e.jsx("p",{className:`text-xs ${f}`,children:(U=P.vendor)==null?void 0:U.shop_name})]}),e.jsx("div",{className:"flex gap-1",children:P.is_active?e.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",children:"Active"}):e.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400",children:"Inactive"})})]}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:f,children:"Price:"}),e.jsxs("span",{className:`font-semibold ${A}`,children:["$",P.base_price.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:f,children:"Stock:"}),e.jsx("span",{className:A,children:P.stock_quantity})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:f,children:"Approval:"}),P.admin_approved?e.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",children:"Approved"}):e.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",children:"Pending"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>g(P),className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 text-xs bg-blue-50 text-blue-700 rounded hover:bg-blue-100 transition dark:bg-blue-900/30 dark:text-blue-400",children:[e.jsx(K,{className:"h-3 w-3"}),"Edit"]}),e.jsxs("button",{onClick:()=>q(P),className:`flex-1 flex items-center justify-center gap-1 px-2 py-1.5 text-xs rounded transition ${P.is_active?"bg-red-50 text-red-700 hover:bg-red-100 dark:bg-red-900/30 dark:text-red-400":"bg-green-50 text-green-700 hover:bg-green-100 dark:bg-green-900/30 dark:text-green-400"}`,children:[P.is_active?e.jsx(Ne,{className:"h-3 w-3"}):e.jsx(we,{className:"h-3 w-3"}),P.is_active?"Deactivate":"Activate"]})]})]},P.id)})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded shadow-lg max-w-lg w-full overflow-hidden border border-gray-200",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-sm font-bold text-gray-900",children:"Edit Product"}),e.jsx("button",{onClick:()=>g(null),className:"p-1.5 hover:bg-gray-100 rounded transition",children:e.jsx(G,{className:"h-4 w-4 text-gray-400"})})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:m.name,onChange:P=>g({...m,name:P.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none bg-white text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Description"}),e.jsx("textarea",{value:m.description||"",onChange:P=>g({...m,description:P.target.value}),rows:2,className:"w-full px-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none bg-white text-gray-900"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:m.base_price,onChange:P=>g({...m,base_price:parseFloat(P.target.value)}),className:"w-full px-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none bg-white text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Stock"}),e.jsx("input",{type:"number",value:m.stock_quantity,onChange:P=>g({...m,stock_quantity:parseInt(P.target.value)}),className:"w-full px-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none bg-white text-gray-900"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Admin Notes"}),e.jsx("textarea",{value:m.admin_notes||"",onChange:P=>g({...m,admin_notes:P.target.value}),rows:2,placeholder:"Notes...",className:"w-full px-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none bg-white text-gray-900"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[!m.admin_approved&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>k(m.id,!0,m.admin_notes||void 0),className:"flex-1 py-2 bg-green-600 text-white rounded hover:bg-green-700 text-xs font-medium",children:"Approve"}),e.jsx("button",{onClick:()=>k(m.id,!1,m.admin_notes||"Product rejected"),className:"flex-1 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-xs font-medium",children:"Reject"})]}),e.jsx("button",{onClick:I,className:"flex-1 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-xs font-medium",children:"Save"})]})]})]})})]})}function pa(){var O,J;const{theme:L}=te(),c=L==="dark",{formatPrice:j}=he(),[F,M]=n.useState([]),[E,b]=n.useState(!0),[$,h]=n.useState(""),[x,m]=n.useState("all"),[g,v]=n.useState(1),[y,w]=n.useState(0),N=10,[l,a]=n.useState(null),[t,r]=n.useState(!1),[u,_]=n.useState(!1),[C,d]=n.useState([]),[p,s]=n.useState(!1),i=c?"text-gray-400":"text-gray-600",V=c?"border-gray-700":"border-gray-200";n.useEffect(()=>{o()},[x,g]);const o=async()=>{b(!0);try{let q=S.from("orders").select("*, profiles(full_name, email), vendor_profiles(shop_name)",{count:"exact"});x!=="all"&&(q=q.eq("status",x)),$&&(q=q.or(`order_number.ilike.%${$}%`));const{data:k,count:I,error:H}=await q.order("created_at",{ascending:!1}).range((g-1)*N,g*N-1);if(H)throw H;M(k||[]),w(I||0)}catch(q){console.error("Error fetching orders:",q)}finally{b(!1)}},A=async(q,k)=>{_(!0);try{const{error:I}=await S.from("orders").update({status:k}).eq("id",q);if(I)throw I;o(),(l==null?void 0:l.id)===q&&a({...l,status:k})}catch(I){alert("Error updating status: "+I.message)}finally{_(!1)}},f=async q=>{s(!0);try{const{data:k,error:I}=await S.from("order_items").select("*, products(name, images, sku)").eq("order_id",q);if(I)throw I;d(k||[])}catch(k){console.error("Error fetching order items:",k)}finally{s(!1)}},T=q=>{a(q),r(!0),f(q.id)},R=q=>{switch(q){case"paid":return"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400";case"pending":return"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400";case"failed":return"bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400";case"refunded":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400";default:return"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"}};return e.jsxs(B,{children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1",children:"Orders Management"}),e.jsx("p",{className:i,children:"Monitor and manage all customer orders across the platform."})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-6",children:[e.jsxs("div",{className:"bg-white p-3 rounded border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Total"}),e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:y})]}),e.jsxs("div",{className:"bg-white p-3 rounded border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Pending"}),e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:F.filter(q=>q.status==="pending").length})]}),e.jsxs("div",{className:"bg-white p-3 rounded border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Delivered"}),e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:F.filter(q=>q.status==="delivered").length})]}),e.jsxs("div",{className:"bg-white p-3 rounded border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Revenue"}),e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:j(F.reduce((q,k)=>q+k.total,0))})]})]}),e.jsx("div",{className:"bg-white p-2 rounded border border-gray-200 mb-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(me,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-3.5 w-3.5"}),e.jsx("input",{type:"text",placeholder:"Order #...",value:$,onChange:q=>h(q.target.value),onKeyDown:q=>q.key==="Enter"&&o(),className:"w-full pl-9 pr-3 py-1.5 text-xs rounded border border-gray-200 focus:outline-none bg-white text-gray-900"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{value:x,onChange:q=>m(q.target.value),className:"px-3 py-1.5 text-xs border border-gray-200 rounded focus:outline-none bg-white text-gray-900",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"refunded",children:"Refunded"})]})})]})}),e.jsxs("div",{className:"bg-white rounded border border-gray-200 overflow-hidden mb-8",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[e.jsx("th",{className:"px-4 py-2 text-xs font-medium text-gray-900 border-r border-gray-200",children:"Order #"}),e.jsx("th",{className:"px-4 py-2 text-xs font-medium text-gray-900 border-r border-gray-200",children:"Customer"}),e.jsx("th",{className:"px-4 py-2 text-xs font-medium text-gray-900 border-r border-gray-200",children:"Shop"}),e.jsx("th",{className:"px-4 py-2 text-xs font-medium text-gray-900 border-r border-gray-200",children:"Amount"}),e.jsx("th",{className:"px-4 py-2 text-xs font-medium text-gray-900 border-r border-gray-200",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-xs font-medium text-gray-900 border-r border-gray-200",children:"Payment"}),e.jsx("th",{className:"px-4 py-2 text-xs font-medium text-gray-900 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:E?Array.from({length:5}).map((q,k)=>e.jsx("tr",{className:"animate-pulse",children:e.jsx("td",{colSpan:7,className:"px-4 py-2",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-full"})})},k)):F.map(q=>{var k,I,H;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"px-4 py-2 border-r border-gray-200",children:[e.jsx("span",{className:"font-bold text-xs text-gray-900",children:q.order_number}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(q.created_at).toLocaleDateString()})]}),e.jsxs("td",{className:"px-4 py-2 border-r border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-900",children:((k=q.profiles)==null?void 0:k.full_name)||"Walk-in"}),e.jsx("p",{className:"text-xs text-gray-500",children:(I=q.profiles)==null?void 0:I.email})]}),e.jsx("td",{className:"px-4 py-2 border-r border-gray-200",children:e.jsx("span",{className:"text-xs text-gray-900",children:(H=q.vendor_profiles)==null?void 0:H.shop_name})}),e.jsx("td",{className:"px-4 py-2 border-r border-gray-200",children:e.jsx("span",{className:"text-xs font-bold text-gray-900",children:j(q.total)})}),e.jsx("td",{className:"px-4 py-2 border-r border-gray-200",children:e.jsx("span",{className:"px-2 py-0.5 rounded bg-gray-100 text-gray-900 border border-gray-200 text-xs",children:q.status})}),e.jsx("td",{className:"px-4 py-2 border-r border-gray-200",children:e.jsx("span",{className:"px-2 py-0.5 rounded bg-gray-100 text-gray-900 border border-gray-200 text-xs",children:q.payment_status})}),e.jsx("td",{className:"px-4 py-2 text-right",children:e.jsx("button",{onClick:()=>T(q),className:"px-2 py-1 border border-gray-200 hover:bg-gray-50 text-gray-600 rounded text-xs",children:"View"})})]},q.id)})})]})}),e.jsxs("div",{className:`px-8 py-6 border-t ${V} flex items-center justify-between`,children:[e.jsxs("p",{className:`text-sm ${i} font-bold`,children:["Showing ",e.jsx("span",{className:"text-slate-900 dark:text-white",children:(g-1)*N+1})," to ",e.jsx("span",{className:"text-slate-900 dark:text-white",children:Math.min(g*N,y)})," of ",e.jsx("span",{className:"text-slate-900 dark:text-white",children:y})," orders"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{disabled:g===1,onClick:()=>v(q=>q-1),className:"p-2 rounded-xl border border-gray-200 dark:border-gray-700 disabled:opacity-30 hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:e.jsx(st,{className:"h-5 w-5"})}),e.jsx("span",{className:"px-4 py-2 font-black text-slate-900 dark:text-white",children:g}),e.jsx("button",{disabled:g*N>=y,onClick:()=>v(q=>q+1),className:"p-2 rounded-xl border border-gray-200 dark:border-gray-700 disabled:opacity-30 hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:e.jsx(je,{className:"h-5 w-5"})})]})]})]}),t&&l&&e.jsxs("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in duration-300 font-mono",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col border border-slate-200",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-black uppercase tracking-widest flex items-center gap-2 text-slate-900 dark:text-white",children:"Order Detail"}),e.jsxs("p",{className:"text-slate-400 font-bold uppercase text-[8px] tracking-widest mt-0.5",children:["# ",l.order_number]})]}),e.jsx("button",{onClick:()=>r(!1),className:"p-2 hover:bg-slate-50 rounded-xl transition-all",children:e.jsx(G,{className:"h-4 w-4 text-slate-400"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-[8px] font-black uppercase tracking-widest text-slate-400 mb-2",children:"Status Control"}),e.jsx("div",{className:"grid grid-cols-3 gap-1",children:["pending","processing","shipped","delivered","cancelled","refunded"].map(q=>e.jsx("button",{onClick:()=>A(l.id,q),disabled:u||l.status===q,className:`px-2 py-1.5 rounded-lg text-[8px] font-black uppercase tracking-tighter border transition-all ${l.status===q?"bg-slate-900 border-slate-900 text-white":"bg-transparent border-slate-200 text-slate-400 hover:border-slate-900"}`,children:q},q))})]}),e.jsxs("section",{className:"p-4 bg-white dark:bg-gray-900/40 rounded-xl border border-slate-200",children:[e.jsx("h3",{className:"text-[8px] font-black uppercase tracking-widest text-slate-400 mb-2 flex items-center gap-1",children:"Buyer"}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-xs font-black text-slate-900 dark:text-white uppercase",children:((O=l.profiles)==null?void 0:O.full_name)||"Walk-in"}),e.jsx("p",{className:"text-[10px] font-bold text-slate-500",children:(J=l.profiles)==null?void 0:J.email})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-dashed border-slate-200",children:[e.jsx("p",{className:"text-[8px] font-black uppercase tracking-widest text-slate-400 mb-1",children:"Shipping"}),e.jsx("div",{className:"text-[10px] text-slate-600",children:l.shipping_address?e.jsx("pre",{className:"whitespace-pre-wrap font-sans",children:typeof l.shipping_address=="string"?l.shipping_address:JSON.stringify(l.shipping_address,null,2)}):"Empty"})]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("section",{className:"p-4 bg-white dark:bg-gray-900/40 rounded-xl border border-slate-200",children:[e.jsx("h3",{className:"text-[8px] font-black uppercase tracking-widest text-slate-400 mb-2",children:"Payment"}),e.jsxs("div",{className:"flex items-center justify-between py-1.5 border-b border-dashed border-slate-100",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-500",children:"Method"}),e.jsx("span",{className:"text-[10px] font-black text-slate-900 dark:text-white uppercase",children:l.payment_method})]}),e.jsxs("div",{className:"flex items-center justify-between py-1.5 border-b border-dashed border-slate-100",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-500",children:"Status"}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-[8px] font-black uppercase tracking-widest ${R(l.payment_status)}`,children:l.payment_status})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsx("span",{className:"text-xs font-black text-slate-400 uppercase",children:"Total"}),e.jsx("span",{className:"text-xl font-black text-slate-900 dark:text-white tracking-tighter",children:j(l.total)})]})]})})]})}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-[8px] font-black uppercase tracking-widest text-slate-400 mb-3",children:"Line Items"}),p?e.jsx("div",{className:"flex justify-center py-6",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-slate-900"})}):e.jsx("div",{className:"rounded-xl border border-slate-200 overflow-hidden",children:e.jsxs("table",{className:"w-full text-left font-mono",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 bg-slate-50",children:[e.jsx("th",{className:"px-3 py-1.5 text-[8px] font-black uppercase text-slate-400",children:"Product"}),e.jsx("th",{className:"px-3 py-1.5 text-[8px] font-black uppercase text-slate-400",children:"Price"}),e.jsx("th",{className:"px-3 py-1.5 text-[8px] font-black uppercase text-slate-400 text-right",children:"Total"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:C.map(q=>{var k,I;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-1.5",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-black text-slate-900 uppercase",children:(k=q.products)==null?void 0:k.name}),e.jsxs("span",{className:"text-[8px] text-slate-400",children:[(I=q.products)==null?void 0:I.sku," x ",q.quantity]})]})}),e.jsx("td",{className:"px-3 py-1.5 text-[10px] text-slate-600",children:j(q.unit_price)}),e.jsx("td",{className:"px-3 py-1.5 text-right text-[10px] font-black text-slate-900",children:j(q.total_price)})]},q.id)})})]})})]})]}),e.jsxs("div",{className:"p-4 border-t border-slate-100 bg-slate-50 flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>r(!1),className:"px-4 py-1.5 rounded-lg font-black uppercase text-[10px] border border-slate-200 text-slate-400 hover:bg-white transition",children:"Close"}),e.jsx("button",{className:"px-4 py-1.5 bg-slate-900 text-white rounded-lg font-black uppercase text-[10px] shadow-sm hover:bg-slate-800 transition-all",children:"Invoice"})]})]})]})}function ha(){const{theme:L}=te(),c=L==="dark",{formatPrice:j}=he(),[F,M]=n.useState([]),[E,b]=n.useState([]),[$,h]=n.useState(!0),[x,m]=n.useState("methods"),[g,v]=n.useState(!1),[y,w]=n.useState(null),[N,l]=n.useState(null),[a,t]=n.useState("list"),[r,u]=n.useState({name:"",display_name:"",description:"",base_cost:0,base_rate:0,per_kg_rate:0,delivery_time_min:1,delivery_time_max:3,is_active:!0,is_global:!0,regions:[],min_order_total:0,max_order_total:null}),_=c?"bg-gray-800":"bg-white",C=c?"text-gray-100":"text-gray-900",d=c?"text-gray-400":"text-gray-600",p=c?"border-gray-700":"border-gray-200";n.useEffect(()=>{s()},[x]);const s=async()=>{h(!0);try{if(x==="methods"){const{data:f,error:T}=await S.from("shipping_methods").select("*").order("base_cost",{ascending:!0});if(T)throw T;M(f||[])}else{const{data:f,error:T}=await S.from("shipping_zones").select("*").order("name",{ascending:!0});if(T)throw T;b(f||[])}}catch(f){l({type:"error",text:f.message})}finally{h(!1)}},i=async f=>{f.preventDefault(),h(!0);const T=x==="methods"?"shipping_methods":"shipping_zones",R={...r};y||delete R.id,x==="methods"?(delete R.regions,R.is_global=R.is_global??!0):(delete R.display_name,delete R.description,delete R.base_cost,delete R.delivery_time_min,delete R.delivery_time_max,delete R.is_global),R.logistics_id||(R.logistics_id=null);try{if(y){const{error:O}=await S.from(T).update(R).eq("id",y.id);if(O)throw O;l({type:"success",text:"Shipping item updated successfully"})}else{const{error:O}=await S.from(T).insert([R]);if(O)throw O;l({type:"success",text:"Shipping item created successfully"})}s(),A()}catch(O){l({type:"error",text:O.message})}finally{h(!1)}},V=f=>{w(f),u(f),v(!0)},o=async f=>{if(!confirm("Are you sure you want to delete this shipping option?"))return;const T=x==="methods"?"shipping_methods":"shipping_zones";try{const{error:R}=await S.from(T).delete().eq("id",f);if(R)throw R;l({type:"success",text:"Item deleted successfully"}),s()}catch(R){l({type:"error",text:R.message})}},A=()=>{v(!1),w(null),u({name:"",display_name:"",description:"",base_cost:0,base_rate:0,per_kg_rate:0,delivery_time_min:1,delivery_time_max:3,is_active:!0,is_global:!0,regions:[],min_order_total:0,max_order_total:null})};return e.jsxs(B,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/30 rounded-2xl",children:e.jsx(pe,{className:"h-6 w-6 text-orange-600 dark:text-orange-400"})}),e.jsx("h1",{className:`text-3xl font-black uppercase tracking-tight ${C}`,children:"Shipping Management"})]}),e.jsx("p",{className:d,children:"Configure shipping methods, rates, and zones for your logistics network."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>t("grid"),className:`p-2 rounded-lg transition-all ${a==="grid"?"bg-white dark:bg-gray-700 shadow text-orange-600":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-layout-grid",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"})]})}),e.jsx("button",{onClick:()=>t("list"),className:`p-2 rounded-lg transition-all ${a==="list"?"bg-white dark:bg-gray-700 shadow text-orange-600":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-list",children:[e.jsx("line",{x1:"8",x2:"21",y1:"6",y2:"6"}),e.jsx("line",{x1:"8",x2:"21",y1:"12",y2:"12"}),e.jsx("line",{x1:"8",x2:"21",y1:"18",y2:"18"}),e.jsx("line",{x1:"3",x2:"3.01",y1:"6",y2:"6"}),e.jsx("line",{x1:"3",x2:"3.01",y1:"12",y2:"12"}),e.jsx("line",{x1:"3",x2:"3.01",y1:"18",y2:"18"})]})})]}),e.jsxs("button",{onClick:()=>v(!0),className:"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-600 to-rose-600 text-white rounded-2xl font-bold hover:scale-105 transition-all shadow-lg active:scale-95",children:[e.jsx(ae,{className:"h-5 w-5"}),"Add ",x==="methods"?"Method":"Zone"]})]})]})}),e.jsxs("div",{className:"flex gap-4 mb-8",children:[e.jsx("button",{onClick:()=>m("methods"),className:`px-8 py-3 rounded-2xl font-black uppercase tracking-widest text-xs transition-all ${x==="methods"?"bg-orange-600 text-white shadow-lg":`${_} ${d} border ${p} hover:bg-gray-50 dark:hover:bg-gray-700`}`,children:"Shipping Methods"}),e.jsx("button",{onClick:()=>m("zones"),className:`px-8 py-3 rounded-2xl font-black uppercase tracking-widest text-xs transition-all ${x==="zones"?"bg-orange-600 text-white shadow-lg":`${_} ${d} border ${p} hover:bg-gray-50 dark:hover:bg-gray-700`}`,children:"Delivery Zones"})]}),N&&e.jsxs("div",{className:`mb-6 p-4 rounded-2xl flex items-center gap-3 animate-in fade-in slide-in-from-top-4 ${N.type==="success"?"bg-green-50 border border-green-200 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-rose-50 border border-rose-200 text-rose-800 dark:bg-rose-900/20 dark:text-rose-400"}`,children:[e.jsx(Y,{className:"h-5 w-5 shrink-0"}),e.jsx("span",{className:"font-bold flex-1",children:N.text}),e.jsx("button",{onClick:()=>l(null),children:e.jsx(G,{className:"h-5 w-5"})})]}),$?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:4}).map((f,T)=>e.jsx("div",{className:`${_} h-64 rounded-3xl animate-pulse border ${p}`},T))}):x==="methods"?a==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:F.map(f=>e.jsxs("div",{className:`${_} rounded-3xl border ${p} shadow-sm group hover:shadow-xl transition-all duration-300 relative overflow-hidden`,children:[e.jsxs("div",{className:"absolute top-0 right-0 p-4 flex gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${f.is_active?"bg-emerald-500 animate-pulse":"bg-slate-300"}`}),f.is_global&&e.jsx(ve,{className:"h-3 w-3 text-indigo-500"})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-2xl text-orange-600 dark:text-orange-400 w-fit mb-4",children:e.jsx(pe,{className:"h-5 w-5"})}),e.jsx("h3",{className:`font-bold ${C} truncate mb-1`,children:f.display_name}),e.jsx("p",{className:`text-xs ${d} line-clamp-2 min-h-[2rem]`,children:f.description||"No description"}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-slate-400 font-bold mb-1",children:"Rate"}),e.jsx("p",{className:`text-lg font-black ${C}`,children:j(f.base_cost)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-slate-400 font-bold mb-1",children:"ETA"}),e.jsxs("p",{className:`text-sm font-bold ${C}`,children:[f.delivery_time_min,"-",f.delivery_time_max,"d"]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-indigo-50 dark:bg-indigo-900/10 rounded-xl border border-indigo-100 dark:border-indigo-800/20",children:[e.jsx("p",{className:"text-[9px] uppercase font-black text-indigo-400 mb-1",children:"Order Value Trigger"}),e.jsxs("p",{className:`text-xs font-bold ${C}`,children:[f.min_order_total>0?j(f.min_order_total):"$0",f.max_order_total?` - ${j(f.max_order_total)}`:" +"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[e.jsx("button",{onClick:()=>V(f),className:"flex-1 py-2 bg-slate-900 dark:bg-slate-700 text-white dark:text-gray-100 rounded-xl font-bold text-xs hover:bg-orange-600 transition-all",children:"Edit"}),e.jsx("button",{onClick:()=>o(f.id),className:"p-2 text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-xl transition",children:e.jsx(Q,{className:"h-4 w-4"})})]})]})]},f.id))}):e.jsx("div",{className:`${_} rounded-3xl border ${p} shadow-sm overflow-hidden`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:`bg-gray-50 dark:bg-gray-700/50 border-b ${p}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-4 font-black uppercase tracking-widest text-[10px] ${d}`,children:"Method Name"}),e.jsx("th",{className:`px-6 py-4 font-black uppercase tracking-widest text-[10px] ${d}`,children:"Rate & ETA"}),e.jsx("th",{className:`px-6 py-4 font-black uppercase tracking-widest text-[10px] ${d}`,children:"Status"}),e.jsx("th",{className:`px-6 py-4 font-black uppercase tracking-widest text-[10px] ${d} text-right`,children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:F.map(f=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`font-bold text-sm ${C}`,children:f.display_name}),e.jsx("span",{className:`text-xs ${d}`,children:f.description||"No description"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`font-bold text-sm ${C}`,children:j(f.base_cost)}),e.jsxs("span",{className:`text-xs ${d}`,children:[f.delivery_time_min,"-",f.delivery_time_max," Days"]}),e.jsxs("span",{className:"text-[9px] text-indigo-500 font-black uppercase",children:["Range: ",j(f.min_order_total)," ",f.max_order_total?`- ${j(f.max_order_total)}`:"+"]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-black uppercase tracking-widest ${f.is_active?"bg-emerald-500/10 text-emerald-600":"bg-slate-100 text-slate-500"}`,children:f.is_active?"Active":"Inactive"}),f.is_global&&e.jsx("span",{className:"px-2 py-1 rounded text-[10px] font-black uppercase tracking-widest bg-indigo-500/10 text-indigo-600",children:"Global"})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>V(f),className:"p-2 text-slate-400 hover:text-orange-600 transition-colors",children:e.jsx(K,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>o(f.id),className:"p-2 text-slate-400 hover:text-rose-600 transition-colors",children:e.jsx(Q,{className:"h-4 w-4"})})]})})]},f.id))})]})})}):a==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:E.map(f=>e.jsx("div",{className:`${_} rounded-3xl border ${p} shadow-sm group hover:shadow-xl transition-all duration-300`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-3 bg-rose-50 dark:bg-rose-900/20 rounded-2xl text-rose-600 dark:text-rose-400",children:e.jsx(Je,{className:"h-5 w-5"})}),e.jsx("span",{className:`w-2 h-2 rounded-full ${f.is_active?"bg-emerald-500":"bg-slate-300"}`})]}),e.jsx("h3",{className:`font-bold ${C} mb-3`,children:f.name}),e.jsxs("div",{className:"flex justify-between items-center mb-4 p-3 bg-slate-50 dark:bg-slate-900/30 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] uppercase font-black text-slate-400",children:"Base Rate"}),e.jsx("p",{className:`text-sm font-black ${C}`,children:j(f.base_rate)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[9px] uppercase font-black text-slate-400",children:"Add. Per KG"}),e.jsxs("p",{className:`text-sm font-black ${C}`,children:["+",j(f.per_kg_rate)]})]})]}),e.jsxs("div",{className:"mb-4 p-2.5 bg-indigo-50 dark:bg-indigo-900/10 rounded-lg border border-indigo-100 dark:border-indigo-800/20",children:[e.jsx("p",{className:"text-[9px] uppercase font-black text-indigo-400 mb-0.5",children:"Price Range Trigger"}),e.jsxs("p",{className:`text-[11px] font-bold ${C}`,children:[j(f.min_order_total)," ",f.max_order_total?`- ${j(f.max_order_total)}`:"+"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1.5 line-clamp-2 overflow-hidden h-[3.5rem]",children:[f.regions.map((T,R)=>e.jsx("span",{className:"px-2 py-0.5 bg-slate-100 dark:bg-slate-700 rounded-md text-[9px] font-bold text-slate-500 dark:text-slate-400",children:T},R)),f.regions.length===0&&e.jsx("span",{className:`text-[10px] ${d} italic`,children:"No regions"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-6",children:[e.jsx("button",{onClick:()=>V(f),className:"flex-1 py-2 bg-slate-900 dark:bg-slate-700 text-white dark:text-gray-100 rounded-xl font-bold text-xs hover:bg-rose-600 transition-all",children:"Configure"}),e.jsx("button",{onClick:()=>o(f.id),className:"p-2 text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-xl transition",children:e.jsx(Q,{className:"h-4 w-4"})})]})]})},f.id))}):e.jsx("div",{className:`${_} rounded-3xl border ${p} shadow-sm overflow-hidden`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:`bg-gray-50 dark:bg-gray-700/50 border-b ${p}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-4 font-black uppercase tracking-widest text-[10px] ${d}`,children:"Zone Name"}),e.jsx("th",{className:`px-6 py-4 font-black uppercase tracking-widest text-[10px] ${d}`,children:"Rates"}),e.jsx("th",{className:`px-6 py-4 font-black uppercase tracking-widest text-[10px] ${d}`,children:"Regions"}),e.jsx("th",{className:`px-6 py-4 font-black uppercase tracking-widest text-[10px] ${d}`,children:"Status"}),e.jsx("th",{className:`px-6 py-4 font-black uppercase tracking-widest text-[10px] ${d} text-right`,children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:E.map(f=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`font-bold text-sm ${C}`,children:f.name})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`font-bold text-sm ${C}`,children:j(f.base_rate)}),e.jsxs("span",{className:`text-[10px] ${d}`,children:["+",j(f.per_kg_rate),"/kg"]}),e.jsxs("span",{className:"text-[9px] text-indigo-500 font-black uppercase",children:["Cart: ",j(f.min_order_total)," ",f.max_order_total?`- ${j(f.max_order_total)}`:"+"]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[f.regions.slice(0,5).map((T,R)=>e.jsx("span",{className:"px-1.5 py-0.5 bg-slate-100 dark:bg-slate-800 rounded text-[9px] font-bold text-slate-500 dark:text-slate-400",children:T},R)),f.regions.length>5&&e.jsxs("span",{className:"px-1.5 py-0.5 bg-slate-100 dark:bg-slate-800 rounded text-[9px] font-bold text-slate-500 dark:text-slate-400",children:["+",f.regions.length-5," more"]}),f.regions.length===0&&e.jsx("span",{className:`text-[10px] ${d} italic`,children:"No regions"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-black uppercase tracking-widest ${f.is_active?"bg-emerald-500/10 text-emerald-600":"bg-slate-100 text-slate-500"}`,children:f.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>V(f),className:"p-2 text-slate-400 hover:text-rose-600 transition-colors",children:e.jsx(K,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>o(f.id),className:"p-2 text-slate-400 hover:text-rose-600 transition-colors",children:e.jsx(Q,{className:"h-4 w-4"})})]})})]},f.id))})]})})}),g&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in zoom-in-95 duration-200",children:e.jsxs("div",{className:`${_} rounded-[32px] shadow-2xl max-w-lg w-full overflow-hidden flex flex-col border ${p}`,children:[e.jsxs("div",{className:"p-6 border-b ${borderColor} flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-black uppercase tracking-tight flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center",children:e.jsx(pe,{className:"h-4 w-4 text-orange-600"})}),y?"Edit":"Create"," ",x==="methods"?"Method":"Zone"]}),e.jsx("button",{onClick:A,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-all",children:e.jsx(G,{className:"h-5 w-5 text-slate-400"})})]}),e.jsx("div",{className:"p-8",children:e.jsxs("form",{onSubmit:i,className:"space-y-5",children:[x==="methods"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 block mb-1.5 ml-1",children:"Label Name"}),e.jsx("input",{type:"text",required:!0,value:r.display_name,onChange:f=>u({...r,display_name:f.target.value,name:f.target.value.toLowerCase().replace(/ /g,"_")}),className:`w-full px-4 py-3 rounded-xl border ${p} focus:outline-none focus:ring-2 focus:ring-orange-500/20 ${c?"bg-slate-800 text-gray-100":"bg-slate-50"}`,placeholder:"e.g. Express Priority"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 block mb-1.5 ml-1",children:"Base Cost ($)"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:r.base_cost,onChange:f=>u({...r,base_cost:parseFloat(f.target.value)}),className:`w-full px-4 py-3 rounded-xl border ${p} focus:outline-none focus:ring-2 focus:ring-orange-500/20 ${c?"bg-slate-800 text-gray-100":"bg-slate-50"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 block mb-1.5 ml-1",children:"Delivery Time (Days)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",required:!0,value:r.delivery_time_min,onChange:f=>u({...r,delivery_time_min:parseInt(f.target.value)}),className:`w-full px-4 py-3 rounded-xl border ${p} focus:outline-none focus:ring-2 focus:ring-orange-500/20 ${c?"bg-slate-800 text-gray-100":"bg-slate-50"} text-center`,placeholder:"Min"}),e.jsx("span",{className:"text-slate-300",children:"-"}),e.jsx("input",{type:"number",required:!0,value:r.delivery_time_max,onChange:f=>u({...r,delivery_time_max:parseInt(f.target.value)}),className:`w-full px-4 py-3 rounded-xl border ${p} focus:outline-none focus:ring-2 focus:ring-orange-500/20 ${c?"bg-slate-800 text-gray-100":"bg-slate-50"} text-center`,placeholder:"Max"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 block mb-1.5 ml-1",children:"Internal Notes / Description"}),e.jsx("textarea",{value:r.description,onChange:f=>u({...r,description:f.target.value}),rows:2,className:`w-full px-4 py-3 rounded-xl border ${p} focus:outline-none focus:ring-2 focus:ring-orange-500/20 ${c?"bg-slate-800 text-gray-100":"bg-slate-50"} resize-none text-sm`,placeholder:"Brief description for customer and admin..."})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 block mb-1.5 ml-1",children:"Zone Identity"}),e.jsx("input",{type:"text",required:!0,value:r.name,onChange:f=>u({...r,name:f.target.value}),className:`w-full px-4 py-3 rounded-xl border ${p} focus:outline-none focus:ring-2 focus:ring-rose-500/20 ${c?"bg-slate-800 text-gray-100":"bg-slate-50"}`,placeholder:"e.g. Northern Highveld"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 block mb-1.5 ml-1",children:"Base Rate ($)"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:r.base_rate,onChange:f=>u({...r,base_rate:parseFloat(f.target.value)}),className:`w-full px-4 py-3 rounded-xl border ${p} focus:outline-none focus:ring-2 focus:ring-rose-500/20 ${c?"bg-slate-800 text-gray-100":"bg-slate-50"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 block mb-1.5 ml-1",children:"Add. Per KG ($)"}),e.jsx("input",{type:"number",step:"0.01",value:r.per_kg_rate,onChange:f=>u({...r,per_kg_rate:parseFloat(f.target.value)}),className:`w-full px-4 py-3 rounded-xl border ${p} focus:outline-none focus:ring-2 focus:ring-rose-500/20 ${c?"bg-slate-800 text-gray-100":"bg-slate-50"}`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 block mb-1.5 ml-1",children:"Assigned Regions (Comma separated)"}),e.jsx("textarea",{value:r.regions.join(", "),onChange:f=>u({...r,regions:f.target.value.split(",").map(T=>T.trim()).filter(T=>T!=="")}),rows:3,className:`w-full px-4 py-3 rounded-xl border ${p} focus:outline-none focus:ring-2 focus:ring-rose-500/20 ${c?"bg-slate-800 text-gray-100":"bg-slate-50"} resize-none text-sm`,placeholder:"Suburb 1, Area 2, District 3..."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 py-2 border-t border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 block mb-1.5 ml-1",children:"Min Order Value ($)"}),e.jsx("input",{type:"number",step:"0.01",value:r.min_order_total,onChange:f=>u({...r,min_order_total:parseFloat(f.target.value)}),className:`w-full px-4 py-3 rounded-xl border ${p} focus:outline-none focus:ring-2 focus:ring-indigo-500/20 ${c?"bg-slate-800 text-gray-100":"bg-slate-50"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 block mb-1.5 ml-1",children:"Max Order Value (Optional)"}),e.jsx("input",{type:"number",step:"0.01",value:r.max_order_total||"",onChange:f=>u({...r,max_order_total:f.target.value?parseFloat(f.target.value):null}),className:`w-full px-4 py-3 rounded-xl border ${p} focus:outline-none focus:ring-2 focus:ring-indigo-500/20 ${c?"bg-slate-800 text-gray-100":"bg-slate-50"}`,placeholder:"No limit"})]})]}),e.jsxs("div",{className:"flex gap-4 pt-2",children:[e.jsxs("button",{type:"button",onClick:()=>u({...r,is_active:!r.is_active}),className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-xl border transition-all ${r.is_active?"bg-emerald-500/10 border-emerald-500/30 text-emerald-600":"bg-slate-100 border-slate-200 text-slate-400 dark:bg-slate-700/50 dark:border-slate-600"}`,children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${r.is_active?"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]":"bg-slate-300"}`}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Active Status"})]}),x==="methods"&&e.jsxs("button",{type:"button",onClick:()=>u({...r,is_global:!r.is_global}),className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-xl border transition-all ${r.is_global?"bg-indigo-500/10 border-indigo-500/30 text-indigo-600":"bg-slate-100 border-slate-200 text-slate-400 dark:bg-slate-700/50 dark:border-slate-600"}`,children:[e.jsx(ve,{className:"h-3 w-3"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Global Access"})]})]}),e.jsx("button",{type:"submit",className:"w-full py-4 bg-slate-900 dark:bg-slate-100 text-white dark:text-slate-900 rounded-2xl font-black uppercase tracking-[0.2em] shadow-lg hover:scale-[1.02] active:scale-98 transition-all text-xs mt-4",children:y?"Publish Updates":"Confirm & Create"})]})})]})})]})}function ba(){const{theme:L}=te(),c=L==="dark",[j,F]=n.useState([]),[M,E]=n.useState(!0),[b,$]=n.useState(null),[h,x]=n.useState(null),[m,g]=n.useState(null),[v,y]=n.useState("list"),[w,N]=n.useState({title:"",content:"",version:""}),l=c?"bg-gray-800":"bg-white",a=c?"text-gray-100":"text-gray-900",t=c?"text-gray-400":"text-gray-600",r=c?"border-gray-700":"border-gray-200";n.useEffect(()=>{u()},[]);const u=async()=>{E(!0);try{const{data:s,error:i}=await S.from("contracts").select("*").in("contract_type",["vendor_terms","vendor_privacy"]).order("created_at",{ascending:!1});if(i)throw i;F(s||[])}catch(s){g({type:"error",text:s.message})}finally{E(!1)}},_=s=>{$(s),N({title:s.title,content:s.content,version:s.version})},C=async s=>{if(s.preventDefault(),!!b){E(!0);try{const{error:i}=await S.from("contracts").update({title:w.title,content:w.content,version:w.version}).eq("id",b.id);if(i)throw i;g({type:"success",text:"Contract updated successfully"}),$(null),u()}catch(i){g({type:"error",text:i.message})}finally{E(!1)}}},d=async s=>{try{const{error:i}=await S.from("contracts").update({is_active:!s.is_active}).eq("id",s.id);if(i)throw i;g({type:"success",text:`Contract ${s.is_active?"deactivated":"activated"} successfully`}),u()}catch(i){g({type:"error",text:i.message})}},p=s=>{switch(s){case"vendor_terms":return"Vendor Terms & Conditions";case"vendor_privacy":return"Vendor Privacy Policy";default:return s}};return M&&j.length===0?e.jsx(B,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600"})})}):e.jsxs(B,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(de,{className:"h-8 w-8 text-cyan-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${a}`,children:"Vendor Contracts"}),e.jsx("p",{className:t,children:"Manage vendor terms and conditions and privacy policy"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>y("list"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition ${v==="list"?"bg-cyan-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[e.jsx(ke,{className:"h-4 w-4"}),"List"]}),e.jsxs("button",{onClick:()=>y("grid"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition ${v==="grid"?"bg-cyan-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[e.jsx(Ce,{className:"h-4 w-4"}),"Grid"]})]})]})}),m&&e.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-start space-x-3 ${m.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:[e.jsx(Y,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:m.text}),e.jsx("button",{onClick:()=>g(null),className:"ml-auto",children:e.jsx(G,{className:"h-4 w-4"})})]}),v==="list"?e.jsxs("div",{className:`${l} rounded-lg shadow-sm border ${r} overflow-hidden mb-8`,children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Contract Type"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Title"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Version"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Last Updated"}),e.jsx("th",{className:`px-6 py-3 text-center text-xs font-medium ${t} uppercase`,children:"Actions"})]})}),e.jsx("tbody",{className:`${l} divide-y divide-gray-200 dark:divide-gray-700`,children:j.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-cyan-600"}),e.jsx("span",{className:`text-sm font-medium ${a}`,children:p(s.contract_type)})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:`text-sm ${a}`,children:s.title})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`text-sm ${t}`,children:s.version})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${s.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:`text-sm ${t}`,children:new Date(s.updated_at).toLocaleString()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>x(s),className:"p-2 text-cyan-600 hover:bg-cyan-50 rounded-lg transition",title:"View",children:e.jsx(ne,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>_(s),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition",title:"Edit",children:e.jsx(K,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>d(s),className:`p-2 rounded-lg transition ${s.is_active?"text-red-600 hover:bg-red-50":"text-green-600 hover:bg-green-50"}`,title:s.is_active?"Deactivate":"Activate",children:s.is_active?e.jsx(G,{className:"h-4 w-4"}):e.jsx(se,{className:"h-4 w-4"})})]})})]},s.id))})]}),j.length===0&&e.jsx("div",{className:`text-center py-12 ${t}`,children:"No contracts found."})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[j.map(s=>e.jsxs("div",{className:`${l} rounded-lg shadow-sm border ${r} p-6`,children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(de,{className:"h-5 w-5 text-cyan-600"}),e.jsx("h3",{className:`text-lg font-semibold ${a}`,children:p(s.contract_type)})]}),e.jsx("p",{className:`text-sm ${t} mb-3`,children:s.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:`flex items-center gap-1 ${t}`,children:["Version: ",s.version]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${s.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.is_active?"Active":"Inactive"})]})]})}),e.jsxs("div",{className:`text-sm ${t} mb-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Last Updated:"})]}),e.jsx("span",{children:new Date(s.updated_at).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>x(s),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-cyan-50 text-cyan-700 rounded-lg hover:bg-cyan-100 transition",children:[e.jsx(ne,{className:"h-4 w-4"}),"View"]}),e.jsxs("button",{onClick:()=>_(s),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition",children:[e.jsx(K,{className:"h-4 w-4"}),"Edit"]}),e.jsx("button",{onClick:()=>d(s),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg transition ${s.is_active?"bg-red-50 text-red-700 hover:bg-red-100":"bg-green-50 text-green-700 hover:bg-green-100"}`,children:s.is_active?"Deactivate":"Activate"})]})]},s.id)),j.length===0&&e.jsx("div",{className:`text-center py-12 ${t} col-span-full`,children:"No contracts found."})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:`${l} rounded-lg shadow-xl max-w-4xl w-full my-8`,children:[e.jsxs("div",{className:`p-6 border-b ${r} flex items-center justify-between`,children:[e.jsxs("h2",{className:`text-2xl font-bold ${a} flex items-center gap-2`,children:[e.jsx(K,{className:"h-6 w-6 text-cyan-600"}),"Edit Contract"]}),e.jsx("button",{onClick:()=>$(null),className:`${t} hover:text-gray-600 transition`,children:e.jsx(G,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:C,className:"p-6",children:[e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${a} mb-2`,children:"Contract Type"}),e.jsx("input",{type:"text",value:p(b.contract_type),disabled:!0,className:`w-full px-4 py-2 border ${r} rounded-lg bg-gray-100 dark:bg-gray-700 ${t}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${a} mb-2`,children:"Title *"}),e.jsx("input",{type:"text",required:!0,value:w.title,onChange:s=>N({...w,title:s.target.value}),className:`w-full px-4 py-2 border ${r} rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${a} mb-2`,children:"Version *"}),e.jsx("input",{type:"text",required:!0,value:w.version,onChange:s=>N({...w,version:s.target.value}),className:`w-full px-4 py-2 border ${r} rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"e.g., 2.0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${a} mb-2`,children:"Content * (Markdown supported)"}),e.jsx("textarea",{required:!0,value:w.content,onChange:s=>N({...w,content:s.target.value}),rows:20,className:`w-full px-4 py-2 border ${r} rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 font-mono text-sm ${c?"bg-gray-700 text-gray-100":"bg-white"}`})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>$(null),className:`px-6 py-2 border ${r} rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition`,children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:M,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-cyan-600 to-green-600 text-white rounded-lg hover:from-cyan-700 hover:to-green-700 transition disabled:opacity-50",children:[e.jsx(le,{className:"h-5 w-5"}),M?"Saving...":"Save Changes"]})]})]})]})}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:`${l} rounded-lg shadow-xl max-w-4xl w-full my-8`,children:[e.jsxs("div",{className:`p-6 border-b ${r} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsxs("h2",{className:`text-2xl font-bold ${a} flex items-center gap-2 mb-1`,children:[e.jsx(de,{className:"h-6 w-6 text-cyan-600"}),h.title]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsxs("span",{className:t,children:["Version ",h.version]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${h.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:h.is_active?"Active":"Inactive"})]})]}),e.jsx("button",{onClick:()=>x(null),className:`${t} hover:text-gray-600 transition`,children:e.jsx(G,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:e.jsx("div",{className:`prose max-w-none ${c?"prose-invert":""}`,children:e.jsx("pre",{className:"whitespace-pre-wrap font-sans",children:h.content})})})]})})]})}function fa(){const{theme:L}=te(),c=L==="dark",[j,F]=n.useState([]),[M,E]=n.useState(!0),[b,$]=n.useState(null),[h,x]=n.useState(null),[m,g]=n.useState(null),[v,y]=n.useState("list"),[w,N]=n.useState({title:"",content:"",version:""}),l=c?"bg-gray-800":"bg-white",a=c?"text-gray-100":"text-gray-900",t=c?"text-gray-400":"text-gray-600",r=c?"border-gray-700":"border-gray-200";n.useEffect(()=>{u()},[]);const u=async()=>{E(!0);try{const{data:s,error:i}=await S.from("contracts").select("*").in("contract_type",["customer_terms","customer_privacy"]).order("created_at",{ascending:!1});if(i)throw i;F(s||[])}catch(s){g({type:"error",text:s.message})}finally{E(!1)}},_=s=>{$(s),N({title:s.title,content:s.content,version:s.version})},C=async s=>{if(s.preventDefault(),!!b){E(!0);try{const{error:i}=await S.from("contracts").update({title:w.title,content:w.content,version:w.version}).eq("id",b.id);if(i)throw i;g({type:"success",text:"Contract updated successfully"}),$(null),u()}catch(i){g({type:"error",text:i.message})}finally{E(!1)}}},d=async s=>{try{const{error:i}=await S.from("contracts").update({is_active:!s.is_active}).eq("id",s.id);if(i)throw i;g({type:"success",text:`Contract ${s.is_active?"deactivated":"activated"} successfully`}),u()}catch(i){g({type:"error",text:i.message})}},p=s=>{switch(s){case"customer_terms":return"Customer Terms & Conditions";case"customer_privacy":return"Customer Privacy Policy";default:return s}};return M&&j.length===0?e.jsx(B,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600"})})}):e.jsxs(B,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(re,{className:"h-8 w-8 text-cyan-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${a}`,children:"Customer Contracts"}),e.jsx("p",{className:t,children:"Manage customer terms and conditions and privacy policy"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>y("list"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition ${v==="list"?"bg-cyan-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[e.jsx(ke,{className:"h-4 w-4"}),"List"]}),e.jsxs("button",{onClick:()=>y("grid"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition ${v==="grid"?"bg-cyan-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[e.jsx(Ce,{className:"h-4 w-4"}),"Grid"]})]})]})}),m&&e.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-start space-x-3 ${m.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:[e.jsx(Y,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:m.text}),e.jsx("button",{onClick:()=>g(null),className:"ml-auto",children:e.jsx(G,{className:"h-4 w-4"})})]}),v==="list"?e.jsxs("div",{className:`${l} rounded-lg shadow-sm border ${r} overflow-hidden mb-8`,children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Contract Type"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Title"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Version"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Last Updated"}),e.jsx("th",{className:`px-6 py-3 text-center text-xs font-medium ${t} uppercase`,children:"Actions"})]})}),e.jsx("tbody",{className:`${l} divide-y divide-gray-200 dark:divide-gray-700`,children:j.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5 text-cyan-600"}),e.jsx("span",{className:`text-sm font-medium ${a}`,children:p(s.contract_type)})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:`text-sm ${a}`,children:s.title})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`text-sm ${t}`,children:s.version})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${s.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:`text-sm ${t}`,children:new Date(s.updated_at).toLocaleString()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>x(s),className:"p-2 text-cyan-600 hover:bg-cyan-50 rounded-lg transition",title:"View",children:e.jsx(ne,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>_(s),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition",title:"Edit",children:e.jsx(K,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>d(s),className:`p-2 rounded-lg transition ${s.is_active?"text-red-600 hover:bg-red-50":"text-green-600 hover:bg-green-50"}`,title:s.is_active?"Deactivate":"Activate",children:s.is_active?e.jsx(G,{className:"h-4 w-4"}):e.jsx(se,{className:"h-4 w-4"})})]})})]},s.id))})]}),j.length===0&&e.jsx("div",{className:`text-center py-12 ${t}`,children:"No contracts found."})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[j.map(s=>e.jsxs("div",{className:`${l} rounded-lg shadow-sm border ${r} p-6`,children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(re,{className:"h-5 w-5 text-cyan-600"}),e.jsx("h3",{className:`text-lg font-semibold ${a}`,children:p(s.contract_type)})]}),e.jsx("p",{className:`text-sm ${t} mb-3`,children:s.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:`flex items-center gap-1 ${t}`,children:["Version: ",s.version]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${s.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.is_active?"Active":"Inactive"})]})]})}),e.jsxs("div",{className:`text-sm ${t} mb-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Last Updated:"})]}),e.jsx("span",{children:new Date(s.updated_at).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>x(s),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-cyan-50 text-cyan-700 rounded-lg hover:bg-cyan-100 transition",children:[e.jsx(ne,{className:"h-4 w-4"}),"View"]}),e.jsxs("button",{onClick:()=>_(s),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition",children:[e.jsx(K,{className:"h-4 w-4"}),"Edit"]}),e.jsx("button",{onClick:()=>d(s),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg transition ${s.is_active?"bg-red-50 text-red-700 hover:bg-red-100":"bg-green-50 text-green-700 hover:bg-green-100"}`,children:s.is_active?"Deactivate":"Activate"})]})]},s.id)),j.length===0&&e.jsx("div",{className:`text-center py-12 ${t} col-span-full`,children:"No contracts found."})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:`${l} rounded-lg shadow-xl max-w-4xl w-full my-8`,children:[e.jsxs("div",{className:`p-6 border-b ${r} flex items-center justify-between`,children:[e.jsxs("h2",{className:`text-2xl font-bold ${a} flex items-center gap-2`,children:[e.jsx(K,{className:"h-6 w-6 text-cyan-600"}),"Edit Contract"]}),e.jsx("button",{onClick:()=>$(null),className:`${t} hover:text-gray-600 transition`,children:e.jsx(G,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:C,className:"p-6",children:[e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${a} mb-2`,children:"Contract Type"}),e.jsx("input",{type:"text",value:p(b.contract_type),disabled:!0,className:`w-full px-4 py-2 border ${r} rounded-lg bg-gray-100 dark:bg-gray-700 ${t}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${a} mb-2`,children:"Title *"}),e.jsx("input",{type:"text",required:!0,value:w.title,onChange:s=>N({...w,title:s.target.value}),className:`w-full px-4 py-2 border ${r} rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${a} mb-2`,children:"Version *"}),e.jsx("input",{type:"text",required:!0,value:w.version,onChange:s=>N({...w,version:s.target.value}),className:`w-full px-4 py-2 border ${r} rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"e.g., 2.0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${a} mb-2`,children:"Content * (Markdown supported)"}),e.jsx("textarea",{required:!0,value:w.content,onChange:s=>N({...w,content:s.target.value}),rows:20,className:`w-full px-4 py-2 border ${r} rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 font-mono text-sm ${c?"bg-gray-700 text-gray-100":"bg-white"}`})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>$(null),className:`px-6 py-2 border ${r} rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition`,children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:M,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-cyan-600 to-green-600 text-white rounded-lg hover:from-cyan-700 hover:to-green-700 transition disabled:opacity-50",children:[e.jsx(le,{className:"h-5 w-5"}),M?"Saving...":"Save Changes"]})]})]})]})}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:`${l} rounded-lg shadow-xl max-w-4xl w-full my-8`,children:[e.jsxs("div",{className:`p-6 border-b ${r} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsxs("h2",{className:`text-2xl font-bold ${a} flex items-center gap-2 mb-1`,children:[e.jsx(re,{className:"h-6 w-6 text-cyan-600"}),h.title]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsxs("span",{className:t,children:["Version ",h.version]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${h.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:h.is_active?"Active":"Inactive"})]})]}),e.jsx("button",{onClick:()=>x(null),className:`${t} hover:text-gray-600 transition`,children:e.jsx(G,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:e.jsx("div",{className:`prose max-w-none ${c?"prose-invert":""}`,children:e.jsx("pre",{className:"whitespace-pre-wrap font-sans",children:h.content})})})]})})]})}function ya(){const{theme:L}=te(),c=L==="dark",[j,F]=n.useState([]),[M,E]=n.useState(!0),[b,$]=n.useState(null),[h,x]=n.useState(null),[m,g]=n.useState(null),[v,y]=n.useState("list"),[w,N]=n.useState({title:"",content:"",version:""}),l=c?"bg-gray-800":"bg-white",a=c?"text-gray-100":"text-gray-900",t=c?"text-gray-400":"text-gray-600",r=c?"border-gray-700":"border-gray-200";n.useEffect(()=>{u()},[]);const u=async()=>{E(!0);try{const{data:s,error:i}=await S.from("contracts").select("*").in("contract_type",["logistic_terms","logistic_privacy"]).order("created_at",{ascending:!1});if(i)throw i;F(s||[])}catch(s){g({type:"error",text:s.message})}finally{E(!1)}},_=s=>{$(s),N({title:s.title,content:s.content,version:s.version})},C=async s=>{if(s.preventDefault(),!!b){E(!0);try{const{error:i}=await S.from("contracts").update({title:w.title,content:w.content,version:w.version}).eq("id",b.id);if(i)throw i;g({type:"success",text:"Contract updated successfully"}),$(null),u()}catch(i){g({type:"error",text:i.message})}finally{E(!1)}}},d=async s=>{try{const{error:i}=await S.from("contracts").update({is_active:!s.is_active}).eq("id",s.id);if(i)throw i;g({type:"success",text:`Contract ${s.is_active?"deactivated":"activated"} successfully`}),u()}catch(i){g({type:"error",text:i.message})}},p=s=>{switch(s){case"logistic_terms":return"Logistic Terms & Conditions";case"logistic_privacy":return"Logistic Privacy Policy";default:return s}};return M&&j.length===0?e.jsx(B,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600"})})}):e.jsxs(B,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(de,{className:"h-8 w-8 text-cyan-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${a}`,children:"Logistic Contracts"}),e.jsx("p",{className:t,children:"Manage logistic terms and conditions and privacy policy"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>y("list"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition ${v==="list"?"bg-cyan-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[e.jsx(ke,{className:"h-4 w-4"}),"List"]}),e.jsxs("button",{onClick:()=>y("grid"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition ${v==="grid"?"bg-cyan-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[e.jsx(Ce,{className:"h-4 w-4"}),"Grid"]})]})]})}),m&&e.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-start space-x-3 ${m.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:[e.jsx(Y,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:m.text}),e.jsx("button",{onClick:()=>g(null),className:"ml-auto",children:e.jsx(G,{className:"h-4 w-4"})})]}),v==="list"?e.jsxs("div",{className:`${l} rounded-lg shadow-sm border ${r} overflow-hidden mb-8`,children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Contract Type"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Title"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Version"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t} uppercase`,children:"Last Updated"}),e.jsx("th",{className:`px-6 py-3 text-center text-xs font-medium ${t} uppercase`,children:"Actions"})]})}),e.jsx("tbody",{className:`${l} divide-y divide-gray-200 dark:divide-gray-700`,children:j.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-cyan-600"}),e.jsx("span",{className:`text-sm font-medium ${a}`,children:p(s.contract_type)})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:`text-sm ${a}`,children:s.title})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`text-sm ${t}`,children:s.version})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${s.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:`text-sm ${t}`,children:new Date(s.updated_at).toLocaleString()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>x(s),className:"p-2 text-cyan-600 hover:bg-cyan-50 rounded-lg transition",title:"View",children:e.jsx(ne,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>_(s),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition",title:"Edit",children:e.jsx(K,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>d(s),className:`p-2 rounded-lg transition ${s.is_active?"text-red-600 hover:bg-red-50":"text-green-600 hover:bg-green-50"}`,title:s.is_active?"Deactivate":"Activate",children:s.is_active?e.jsx(G,{className:"h-4 w-4"}):e.jsx(se,{className:"h-4 w-4"})})]})})]},s.id))})]}),j.length===0&&e.jsx("div",{className:`text-center py-12 ${t}`,children:"No contracts found."})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[j.map(s=>e.jsxs("div",{className:`${l} rounded-lg shadow-sm border ${r} p-6`,children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(de,{className:"h-5 w-5 text-cyan-600"}),e.jsx("h3",{className:`text-lg font-semibold ${a}`,children:p(s.contract_type)})]}),e.jsx("p",{className:`text-sm ${t} mb-3`,children:s.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:`flex items-center gap-1 ${t}`,children:["Version: ",s.version]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${s.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.is_active?"Active":"Inactive"})]})]})}),e.jsxs("div",{className:`text-sm ${t} mb-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Last Updated:"})]}),e.jsx("span",{children:new Date(s.updated_at).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>x(s),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-cyan-50 text-cyan-700 rounded-lg hover:bg-cyan-100 transition",children:[e.jsx(ne,{className:"h-4 w-4"}),"View"]}),e.jsxs("button",{onClick:()=>_(s),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition",children:[e.jsx(K,{className:"h-4 w-4"}),"Edit"]}),e.jsx("button",{onClick:()=>d(s),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg transition ${s.is_active?"bg-red-50 text-red-700 hover:bg-red-100":"bg-green-50 text-green-700 hover:bg-green-100"}`,children:s.is_active?"Deactivate":"Activate"})]})]},s.id)),j.length===0&&e.jsx("div",{className:`text-center py-12 ${t} col-span-full`,children:"No contracts found."})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:`${l} rounded-lg shadow-xl max-w-4xl w-full my-8`,children:[e.jsxs("div",{className:`p-6 border-b ${r} flex items-center justify-between`,children:[e.jsxs("h2",{className:`text-2xl font-bold ${a} flex items-center gap-2`,children:[e.jsx(K,{className:"h-6 w-6 text-cyan-600"}),"Edit Contract"]}),e.jsx("button",{onClick:()=>$(null),className:`${t} hover:text-gray-600 transition`,children:e.jsx(G,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:C,className:"p-5",children:[e.jsxs("div",{className:"space-y-3 mb-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-bold uppercase tracking-wider ${t} mb-1.5`,children:"Contract Type"}),e.jsx("input",{type:"text",value:p(b.contract_type),disabled:!0,className:`w-full px-3 py-1.5 text-xs border ${r} rounded-md bg-gray-100 dark:bg-gray-700 ${t}`})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-bold uppercase tracking-wider ${t} mb-1.5`,children:"Title *"}),e.jsx("input",{type:"text",required:!0,value:w.title,onChange:s=>N({...w,title:s.target.value}),className:`w-full px-3 py-1.5 text-xs border ${r} rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-bold uppercase tracking-wider ${t} mb-1.5`,children:"Version *"}),e.jsx("input",{type:"text",required:!0,value:w.version,onChange:s=>N({...w,version:s.target.value}),className:`w-full px-3 py-1.5 text-xs border ${r} rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500 ${c?"bg-gray-700 text-gray-100":"bg-white"}`,placeholder:"e.g., 2.0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-bold uppercase tracking-wider ${t} mb-1.5`,children:"Content * (Markdown supported)"}),e.jsx("textarea",{required:!0,value:w.content,onChange:s=>N({...w,content:s.target.value}),rows:12,className:`w-full px-3 py-2 text-xs border ${r} rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500 font-mono ${c?"bg-gray-700 text-gray-100":"bg-white"}`})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>$(null),className:`px-4 py-1.5 text-xs font-medium border ${r} rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition`,children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:M,className:"flex items-center gap-1.5 px-4 py-1.5 text-xs font-bold bg-gradient-to-r from-cyan-600 to-green-600 text-white rounded-md hover:from-cyan-700 hover:to-green-700 transition disabled:opacity-50",children:[e.jsx(le,{className:"h-3.5 w-3.5"}),M?"Saving...":"Save Changes"]})]})]})]})}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:`${l} rounded-lg shadow-xl max-w-4xl w-full my-8`,children:[e.jsxs("div",{className:`p-6 border-b ${r} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsxs("h2",{className:`text-2xl font-bold ${a} flex items-center gap-2 mb-1`,children:[e.jsx(de,{className:"h-6 w-6 text-cyan-600"}),h.title]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsxs("span",{className:t,children:["Version ",h.version]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${h.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:h.is_active?"Active":"Inactive"})]})]}),e.jsx("button",{onClick:()=>x(null),className:`${t} hover:text-gray-600 transition`,children:e.jsx(G,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:e.jsx("div",{className:`prose max-w-none ${c?"prose-invert":""}`,children:e.jsx("pre",{className:"whitespace-pre-wrap font-sans",children:h.content})})})]})})]})}const rs=[{id:"daily_sales",name:"Daily Sales Report",description:"Complete breakdown of sales for the last 24 hours.",category:"sales"},{id:"monthly_revenue",name:"Monthly Revenue Summary",description:"A high-level view of revenue trends by month.",category:"sales"},{id:"inventory_levels",name:"Low Stock Alert Report",description:"List of products with stock levels below threshold.",category:"inventory"},{id:"customer_growth",name:"New Customer Registrations",description:"Analysis of customer acquisition over time.",category:"customers"},{id:"vendor_payouts",name:"Vendor Payout History",description:"Status and history of all vendor commission payments.",category:"vendors"},{id:"top_products",name:"Best Selling Products",description:"Performance analysis of top 50 selling items.",category:"sales"}];function ja(){const{formatPrice:L}=he(),[c,j]=n.useState("7d"),[F,M]=n.useState("all"),[E,b]=n.useState(null),[$,h]=n.useState(!0),[x,m]=n.useState({revenue:0,orders:0,lowStock:0,pendingPayouts:0,pendingPayoutsCount:0}),[g,v]=n.useState(null);n.useEffect(()=>{y()},[c]);const y=async()=>{h(!0),v(null);try{const u=new Date;let _=new Date;c==="24h"?_.setHours(u.getHours()-24):c==="7d"?_.setDate(u.getDate()-7):c==="30d"?_.setDate(u.getDate()-30):c==="90d"&&_.setDate(u.getDate()-90);const{data:C,error:d}=await S.from("orders").select("total").eq("payment_status","paid").gte("created_at",_.toISOString());if(d)throw d;const p=(C==null?void 0:C.reduce((R,O)=>R+(Number(O.total)||0),0))||0,s=(C==null?void 0:C.length)||0,{count:i,error:V}=await S.from("products").select("*",{count:"exact",head:!0}).lt("stock_quantity",10).eq("is_active",!0);if(V)throw V;const{data:o,error:A}=await S.from("commissions").select("commission_amount").eq("status","pending");A&&console.warn("Commissions table check failed, might not be created yet:",A);const f=(o==null?void 0:o.reduce((R,O)=>R+(Number(O.commission_amount)||0),0))||0,T=(o==null?void 0:o.length)||0;m({revenue:p,orders:s,lowStock:i||0,pendingPayouts:f,pendingPayoutsCount:T})}catch(u){console.error("Error fetching report stats:",u),v(u.message)}finally{h(!1)}},w=async(u,_="pdf")=>{b(u);try{const C=new Date;let d=new Date;c==="24h"?d.setHours(C.getHours()-24):c==="7d"?d.setDate(C.getDate()-7):c==="30d"?d.setDate(C.getDate()-30):c==="90d"&&d.setDate(C.getDate()-90);let p=[],s="";if(u==="daily_sales"){s="Daily Sales Report";const{data:i}=await S.from("orders").select("order_number, total, status, payment_status, created_at").gte("created_at",d.toISOString()).order("created_at",{ascending:!1});p=i||[]}else if(u==="monthly_revenue"){s="Monthly Revenue Summary";const{data:i}=await S.from("orders").select("total, created_at").eq("payment_status","paid").gte("created_at",d.toISOString());p=i||[]}else if(u==="inventory_levels"){s="Low Stock Alert Report";const{data:i}=await S.from("products").select("name, stock_quantity, base_price").lt("stock_quantity",10).eq("is_active",!0);p=i||[]}else if(u==="customer_growth"){s="New Customer Registrations";const{data:i}=await S.from("profiles").select("full_name, email, created_at").eq("role","customer").gte("created_at",d.toISOString());p=i||[]}else if(u==="vendor_payouts"){s="Vendor Payout History";const{data:i}=await S.from("commissions").select("*, vendor:vendor_profiles(shop_name)").gte("created_at",d.toISOString());p=i||[]}else if(u==="top_products"){s="Best Selling Products";const{data:i}=await S.from("products").select("name, sales_count, base_price").order("sales_count",{ascending:!1}).limit(50);p=i||[]}if(_==="csv"){if(p.length===0){alert("No data available for this report and date range.");return}const i=Object.keys(p[0]),V=[i.join(","),...p.map(f=>i.map(T=>{let R=f[T];return typeof R=="object"&&(R=JSON.stringify(R)),`"${String(R).replace(/"/g,'""')}"`}).join(","))].join(`
`),o=new Blob([V],{type:"text/csv;charset=utf-8;"}),A=document.createElement("a");A.href=URL.createObjectURL(o),A.setAttribute("download",`${u}_${new Date().getTime()}.csv`),document.body.appendChild(A),A.click(),document.body.removeChild(A)}else{const i=new ht,V=i.internal.pageSize.getWidth();i.setFillColor(79,70,229),i.rect(0,0,V,40,"F"),i.setTextColor(255,255,255),i.setFontSize(22),i.text("ZimAIO Business Intelligence",15,20),i.setFontSize(12),i.text(s||u.toUpperCase(),15,30),i.setTextColor(51,65,85),i.setFontSize(10),i.text(`Generation Date: ${new Date().toLocaleString()}`,150,20,{align:"right"}),i.text("Region: Zimbabwe / Global",150,26,{align:"right"});let o=55;if(p.length===0)i.text("No data records found for the selected criteria.",15,o);else{const A=Object.keys(p[0]);i.setFontSize(9),i.setTextColor(100,116,139),i.setFont("helvetica","bold"),A.forEach((f,T)=>{i.text(f.replace("_"," ").toUpperCase(),15+T*35,o)}),o+=5,i.setDrawColor(226,232,240),i.line(15,o,V-15,o),o+=8,i.setFont("helvetica","normal"),i.setTextColor(51,65,85),p.slice(0,30).forEach(f=>{A.forEach((T,R)=>{let O=f[T];O&&typeof O=="object"&&O.shop_name?O=O.shop_name:typeof O=="object"&&(O="Data"),i.text(String(O).slice(0,20),15+R*35,o)}),o+=8,o>275&&(i.addPage(),o=20)})}i.save(`${u}_${new Date().getTime()}.pdf`)}}catch(C){console.error("Export failed:",C),v(`Export failed: ${C.message}`)}finally{b(null)}},N=rs.filter(u=>F==="all"||u.category===F),l="bg-white",a="text-slate-900",t="text-slate-500",r="border-slate-200";return e.jsx(B,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-xl font-black uppercase tracking-tight ${a}`,children:"Reports & Analytics"}),e.jsx("p",{className:`text-xs ${t} font-medium`,children:"Real-time business intelligence and data export"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:y,disabled:$,className:"px-4 py-2 bg-white text-slate-600 border border-slate-200 text-xs font-black uppercase tracking-wider rounded-lg shadow-sm hover:bg-slate-50 transition-colors flex items-center gap-2 disabled:opacity-50",children:[e.jsx(xe,{className:`h-3 w-3 ${$?"animate-spin":""}`})," Refresh"]}),e.jsxs("button",{className:"px-4 py-2 bg-indigo-600 text-white text-xs font-black uppercase tracking-wider rounded-lg shadow-sm hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[e.jsx(Me,{className:"h-3 w-3"})," Export Dashboard"]})]})]}),g&&e.jsxs("div",{className:"p-4 bg-red-50 border border-red-100 rounded-xl flex items-start gap-4 text-red-700",children:[e.jsx(Y,{className:"h-5 w-5 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-black uppercase tracking-wider mb-1",children:"Data Connection Error"}),e.jsx("p",{className:"text-xs font-medium opacity-80",children:g})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:`${l} p-4 rounded-xl border ${r} shadow-sm`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-black",children:"Gross Revenue"}),e.jsx("span",{className:"p-1 bg-emerald-50 text-emerald-600 rounded-md",children:e.jsx(at,{className:"h-3 w-3"})})]}),e.jsx("div",{className:`text-2xl font-black ${a}`,children:$?"...":L(x.revenue)}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-[10px] font-bold text-slate-400",children:[e.jsxs("span",{className:"text-emerald-600 flex items-center",children:[e.jsx(be,{className:"h-3 w-3"})," Paid"]})," ",e.jsx("span",{className:"text-slate-300",children:"|"})," last ",c]})]}),e.jsxs("div",{className:`${l} p-4 rounded-xl border ${r} shadow-sm`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-black",children:"Orders"}),e.jsx("span",{className:"p-1 bg-blue-50 text-blue-600 rounded-md",children:e.jsx(re,{className:"h-3 w-3"})})]}),e.jsx("div",{className:`text-2xl font-black ${a}`,children:$?"...":x.orders}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-[10px] font-bold text-slate-400",children:[e.jsxs("span",{className:"text-blue-600 flex items-center",children:[e.jsx(be,{className:"h-3 w-3"})," Live"]})," ",e.jsx("span",{className:"text-slate-300",children:"|"})," last ",c]})]}),e.jsxs("div",{className:`${l} p-4 rounded-xl border ${r} shadow-sm`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-black",children:"Low Stock Items"}),e.jsx("span",{className:"p-1 bg-amber-50 text-amber-600 rounded-md",children:e.jsx(Oe,{className:"h-3 w-3"})})]}),e.jsx("div",{className:`text-2xl font-black ${a}`,children:$?"...":x.lowStock}),e.jsx("div",{className:"flex items-center gap-1 mt-1 text-[10px] font-bold text-rose-600",children:x.lowStock>0?"Restock Needed":"Healthy Levels"})]}),e.jsxs("div",{className:`${l} p-4 rounded-xl border ${r} shadow-sm`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-black",children:"Pending Payouts"}),e.jsx("span",{className:"p-1 bg-violet-50 text-violet-600 rounded-md",children:e.jsx(Ue,{className:"h-3 w-3"})})]}),e.jsx("div",{className:`text-2xl font-black ${a}`,children:$?"...":L(x.pendingPayouts)}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-[10px] font-bold text-slate-500",children:[x.pendingPayoutsCount," commissions pending"]})]})]}),e.jsxs("div",{className:`${l} p-3 rounded-xl border ${r} shadow-sm flex flex-col md:flex-row items-center justify-between gap-4`,children:[e.jsx("div",{className:"flex items-center gap-2 overflow-x-auto w-full md:w-auto pb-2 md:pb-0",children:["all","sales","inventory","customers","vendors"].map(u=>e.jsx("button",{onClick:()=>M(u),className:`px-3 py-1.5 rounded-lg font-bold uppercase text-[9px] tracking-wider transition-all whitespace-nowrap ${F===u?"bg-slate-900 text-white":"bg-slate-50 text-slate-500 hover:bg-slate-100 hover:text-slate-700"}`,children:u},u))}),e.jsx("div",{className:"flex bg-slate-100 rounded-lg p-1",children:["24h","7d","30d","90d"].map(u=>e.jsx("button",{onClick:()=>j(u),className:`px-3 py-1 rounded-md text-[9px] font-black uppercase tracking-wider transition-all ${c===u?"bg-white text-slate-900 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:u},u))})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:N.map(u=>e.jsxs("div",{className:`${l} p-4 rounded-xl border ${r} shadow-sm group hover:border-indigo-500/30 transition-all`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs("div",{className:`p-2 rounded-lg ${u.category==="sales"?"bg-blue-50 text-blue-600":u.category==="inventory"?"bg-amber-50 text-amber-600":u.category==="customers"?"bg-emerald-50 text-emerald-600":"bg-violet-50 text-violet-600"}`,children:[u.category==="sales"&&e.jsx(Pt,{className:"h-4 w-4"}),u.category==="inventory"&&e.jsx(Oe,{className:"h-4 w-4"}),u.category==="customers"&&e.jsx(Ue,{className:"h-4 w-4"}),u.category==="vendors"&&e.jsx(re,{className:"h-4 w-4"})]}),e.jsx("h3",{className:`text-sm font-bold ${a} truncate`,children:u.name})]}),e.jsx("p",{className:"text-[10px] text-slate-500 font-medium mb-4 h-8 leading-snug line-clamp-2",children:u.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-auto",children:[e.jsxs("button",{onClick:()=>w(u.id,"pdf"),disabled:!!E,className:"px-3 py-2 bg-slate-900 text-white rounded-lg text-[9px] font-black uppercase tracking-wider hover:bg-slate-800 transition-colors flex items-center justify-center gap-2",children:[E===u.id?e.jsx(xe,{className:"h-3 w-3 animate-spin"}):e.jsx(Me,{className:"h-3 w-3"}),"PDF"]}),e.jsxs("button",{onClick:()=>w(u.id,"csv"),disabled:!!E,className:"px-3 py-2 bg-slate-50 text-slate-600 border border-slate-200 rounded-lg text-[9px] font-black uppercase tracking-wider hover:bg-slate-100 transition-colors flex items-center justify-center gap-2",children:[e.jsx(es,{className:"h-3 w-3"}),"CSV"]})]})]},u.id))})]})})}function va(){const{theme:L}=te(),c=L==="dark",{formatPrice:j}=he(),[F,M]=n.useState([]),[E,b]=n.useState(!0),[$,h]=n.useState(""),[x,m]=n.useState("all"),[g,v]=n.useState(1),[y,w]=n.useState(0),N=10,[l,a]=n.useState({totalEarned:0,pendingAmount:0,monthlyGrowth:0,topVendor:"N/A"}),t=c?"bg-gray-800":"bg-white",r=c?"text-gray-100":"text-gray-900",u=c?"text-gray-400":"text-gray-600",_=c?"border-gray-700":"border-gray-200";n.useEffect(()=>{C(),d()},[x,g]);const C=async()=>{b(!0);try{let p=S.from("orders").select("*, vendor_profiles(shop_name)",{count:"exact"}).gt("commission_amount",0);x!=="all"&&(x==="paid"&&(p=p.or("payment_status.eq.paid,payment_status.eq.completed")),x==="pending"&&(p=p.neq("payment_status","paid").neq("payment_status","completed")));const{data:s,count:i,error:V}=await p.order("created_at",{ascending:!1}).range((g-1)*N,g*N-1);if(V)throw V;const o=(s||[]).map(A=>{var f;return{id:A.id,order_id:A.id,vendor_id:A.vendor_id,order_amount:A.subtotal+A.commission_amount,commission_rate:0,commission_amount:A.commission_amount,status:A.payment_status==="paid"||A.payment_status==="completed"?"paid":"pending",paid_at:A.created_at,created_at:A.created_at,orders:{order_number:A.id.substring(0,8).toUpperCase()},vendor_profiles:{shop_name:((f=A.vendor_profiles)==null?void 0:f.shop_name)||"N/A"}}});M(o),w(i||0)}catch(p){console.error("Error fetching commissions:",p)}finally{b(!1)}},d=async()=>{try{const{data:p}=await S.from("orders").select("commission_amount, payment_status");if(p){const s=p.reduce((V,o)=>o.payment_status==="paid"||o.payment_status==="completed"?V+(o.commission_amount||0):V,0),i=p.reduce((V,o)=>o.payment_status==="paid"||o.payment_status==="completed"?V:V+(o.commission_amount||0),0);a(V=>({...V,totalEarned:s,pendingAmount:i}))}}catch(p){console.error("Error fetching stats:",p)}};return e.jsx(B,{children:e.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-black ${r} uppercase tracking-tighter`,children:"Handling Fee Management"}),e.jsx("p",{className:u,children:"Monitor and oversee platform revenue from handling fees on vendor sales"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:`${t} p-6 rounded-[2.5rem] border ${_} shadow-xl shadow-emerald-500/5`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-emerald-500/10 rounded-2xl",children:e.jsx(at,{className:"w-6 h-6 text-emerald-500"})}),e.jsx("span",{className:"text-emerald-500 bg-emerald-500/10 px-2 py-1 rounded-lg text-xs font-black",children:"+12.5%"})]}),e.jsx("p",{className:`text-xs font-black ${u} uppercase tracking-widest mb-1`,children:"Total Handling Fees"}),e.jsx("h3",{className:`text-3xl font-black ${r} tracking-tight`,children:j(l.totalEarned)})]}),e.jsxs("div",{className:`${t} p-6 rounded-[2.5rem] border ${_} shadow-xl shadow-amber-500/5`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-amber-500/10 rounded-2xl",children:e.jsx(_t,{className:"w-6 h-6 text-amber-500"})})}),e.jsx("p",{className:`text-xs font-black ${u} uppercase tracking-widest mb-1`,children:"Pending Payouts"}),e.jsx("h3",{className:`text-3xl font-black ${r} tracking-tight`,children:j(l.pendingAmount)})]})]}),e.jsxs("div",{className:`${t} rounded-[2.5rem] border ${_} overflow-hidden shadow-2xl shadow-gray-950/5`,children:[e.jsxs("div",{className:"p-8 border-b border-gray-100 flex flex-col md:flex-row md:items-center justify-between gap-6 bg-gray-50/50",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-3",children:["all","pending","paid"].map(p=>e.jsx("button",{onClick:()=>m(p),className:`px-6 py-2.5 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all ${x===p?"bg-emerald-600 text-white shadow-lg shadow-emerald-200":"bg-white text-gray-400 hover:text-emerald-600 border border-gray-100"}`,children:p},p))}),e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(me,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by Order ID...",value:$,onChange:p=>h(p.target.value),className:"w-full pl-12 pr-4 py-3 bg-white border border-gray-100 rounded-2xl text-xs font-bold focus:ring-4 focus:ring-emerald-500/10 outline-none"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50/50 border-b border-gray-100",children:[e.jsx("th",{className:"px-8 py-6 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Order Details"}),e.jsx("th",{className:"px-8 py-6 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Vendor"}),e.jsx("th",{className:"px-8 py-6 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Order Amount"}),e.jsx("th",{className:"px-8 py-6 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Handling Fee"}),e.jsx("th",{className:"px-8 py-6 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Status"}),e.jsx("th",{className:"px-8 py-6 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Date"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50",children:E?e.jsx("tr",{children:e.jsxs("td",{colSpan:6,className:"px-8 py-20 text-center",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-emerald-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400 font-black uppercase tracking-widest text-[10px]",children:"Processing revenue data..."})]})}):F.map(p=>{var s,i;return e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors group",children:[e.jsx("td",{className:"px-8 py-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-xl group-hover:bg-emerald-50 transition-colors",children:e.jsx(re,{className:"w-4 h-4 text-gray-400 group-hover:text-emerald-600"})}),e.jsx("div",{children:e.jsxs("p",{className:`text-sm font-black ${r} group-hover:text-emerald-600 transition-colors`,children:["#",(s=p.orders)==null?void 0:s.order_number]})})]})}),e.jsx("td",{className:"px-8 py-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-gray-600",children:[e.jsx(tt,{className:"w-4 h-4 text-gray-400"}),(i=p.vendor_profiles)==null?void 0:i.shop_name]})}),e.jsxs("td",{className:"px-8 py-6 text-sm font-black text-gray-600 font-mono",children:[j(p.order_amount),e.jsxs("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:["Rate: ",p.commission_rate,"%"]})]}),e.jsxs("td",{className:"px-8 py-6",children:[e.jsx("p",{className:"text-sm font-black text-emerald-600 font-mono",children:j(p.commission_amount)}),e.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:"(Earned Fee)"})]}),e.jsx("td",{className:"px-8 py-6",children:e.jsx("span",{className:`px-4 py-1.5 rounded-full text-[9px] font-black uppercase tracking-widest ${p.status==="paid"?"bg-emerald-50 text-emerald-600":"bg-amber-50 text-amber-600"}`,children:p.status})}),e.jsx("td",{className:"px-8 py-6 text-sm font-bold text-gray-400 tabular-nums",children:new Date(p.created_at).toLocaleDateString()})]},p.id)})})]})}),e.jsxs("div",{className:"p-8 bg-gray-50/50 border-t border-gray-100 flex items-center justify-between",children:[e.jsxs("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:["Showing ",F.length," of ",y," commission entries"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>v(p=>Math.max(1,p-1)),disabled:g===1,className:"p-2 bg-white border border-gray-100 rounded-xl hover:bg-gray-100 disabled:opacity-50 transition-all shadow-sm",children:e.jsx(st,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>v(p=>p+1),disabled:g*N>=y,className:"p-2 bg-white border border-gray-100 rounded-xl hover:bg-gray-100 disabled:opacity-50 transition-all shadow-sm",children:e.jsx(je,{className:"w-4 h-4"})})]})]})]})]})})}function nt({title:L,description:c,icon:j,children:F}){return e.jsxs(B,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(j,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:L}),e.jsx("p",{className:"text-gray-600",children:c})]})]})}),F||e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[e.jsx(j,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:L}),e.jsx("p",{className:"text-gray-600 mb-6",children:c}),e.jsx("p",{className:"text-sm text-gray-500",children:"This feature is available and ready to be configured with your specific business requirements."})]})]})}function Na(){return e.jsx(nt,{title:"Email Management",description:"Manage email templates and notifications",icon:_e})}function wa(){return e.jsx(nt,{title:"Notifications Management",description:"Configure system-wide notifications and alerts",icon:wt})}export{va as AdminCommissions,na as AdsManagement,ua as CatalogManagement,ta as CurrencyManagement,fa as CustomerContracts,ea as Documentation,la as EmailConfiguration,Na as EmailManagement,ma as FraudDetection,Ys as ImmutableLedger,sa as LanguageManagement,ya as LogisticContracts,Ks as LogisticManagement,wa as NotificationsManagement,pa as OrdersManagement,Zs as PaymentGateways,ga as ProductsManagement,oa as PromotionManagement,Qs as RefundManagement,ja as Reports,ra as SMSConfiguration,ha as ShippingManagement,ia as SliderManagement,da as SystemConfigurations,aa as TriggerModule,Xs as VATManagement,xa as VendorAnalytics,ba as VendorContracts,ca as VendorPackages};
