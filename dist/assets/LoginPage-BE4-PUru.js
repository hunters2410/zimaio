import{r as n,e as v,f as N,u as S,j as e,L as d,P,s as h}from"./index-T9wcIP7k.js";function L(){const[i,y]=n.useState(""),[c,f]=n.useState(""),[g,l]=n.useState(""),[m,t]=n.useState(!1),{signIn:p}=v(),{settings:x}=N(),k=S(),j=async r=>{r.preventDefault(),l(""),t(!0);try{const{error:o}=await p(i,c);if(o){l(o.message),t(!1);return}await new Promise(s=>setTimeout(s,500));const{data:{user:u}}=await h.auth.getUser();if(u){const{data:s,error:w}=await h.from("profiles").select("role").eq("id",u.id).single();if(!w&&s){console.log("Profile found:",s),t(!1);let a="/";switch(s.role){case"admin":a="/admin/dashboard";break;case"vendor":a="/vendor/dashboard";break;case"customer":a="/dashboard";break;case"logistic":a="/logistic/dashboard";break;default:a="/"}console.log("Redirecting to:",a);const b=`${window.location.origin}${a}`;console.log("Full redirect URL:",b),window.location.href=b;return}}t(!1),k("/")}catch(o){console.error("Login error:",o),l("An unexpected error occurred. Please try again."),t(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-cyan-50 to-green-50 dark:from-slate-950 dark:to-slate-900 flex items-center justify-center p-4 transition-colors duration-300",children:e.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-slate-800 rounded-2xl shadow-xl dark:shadow-slate-950/40 p-8 border border-gray-100 dark:border-slate-700",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("img",{src:x.site_logo,alt:x.site_name,className:"h-12 w-auto object-contain",onError:r=>{r.currentTarget.src="/zimaio_mineral_edition,_no_background_v1.2.png"}})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Sign in to your ZimAIO account"})]}),g&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:g}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:i,onChange:r=>y(r.target.value),className:"w-full px-4 py-2 bg-gray-50 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 transition-all",placeholder:"you@example.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),e.jsx("input",{type:"password",value:c,onChange:r=>f(r.target.value),className:"w-full px-4 py-2 bg-gray-50 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 transition-all",placeholder:"••••••••",required:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 dark:border-slate-600 text-cyan-600 focus:ring-cyan-500 bg-white dark:bg-slate-700"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:"Remember me"})]}),e.jsx(d,{to:"/forgot-password",className:"text-sm text-cyan-600 dark:text-cyan-400 hover:text-cyan-700 dark:hover:text-cyan-300 font-medium",children:"Forgot password?"})]}),e.jsx("button",{type:"submit",disabled:m,className:"w-full py-2 bg-gradient-to-r from-cyan-600 to-green-600 text-white rounded-lg font-semibold hover:from-cyan-700 hover:to-green-700 transition disabled:opacity-50",children:m?"Signing in...":"Sign In"})]}),e.jsxs("div",{className:"mt-6 text-center space-y-4",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",e.jsx(d,{to:"/signup",className:"text-cyan-600 dark:text-cyan-400 hover:text-cyan-700 dark:hover:text-cyan-300 font-semibold",children:"Sign up"})]}),e.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-slate-700",children:e.jsxs(d,{to:"/logistic-signup",className:"text-sm text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300 font-bold flex items-center justify-center gap-2",children:[e.jsx(P,{className:"h-4 w-4"})," Sign Up As Logistic"]})})]})]})})}export{L as LoginPage};
