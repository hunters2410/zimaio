import{b as E,u as I,r as l,s as g,j as e,P as S,H as O,p as F,o as W,L as c}from"./index-DO0RgZ49.js";import{X as H}from"./x-DeAqnK16.js";import{S as b}from"./shopping-bag-DO24syK1.js";import{R as k}from"./rotate-ccw-CasWziMb.js";import{W as u}from"./wallet-C3LNpqMM.js";import{S as q}from"./settings-CrPpwdBJ.js";import{C as z}from"./clock-BObq69c6.js";import{C as U}from"./chevron-right-Q63LQqcu.js";function ee(){var v,w;const{profile:t,signOut:_}=E(),C=I(),[a,y]=l.useState("overview"),[p,x]=l.useState(!1),[D,j]=l.useState(!0),[d,R]=l.useState({totalOrders:0,pendingOrders:0,walletBalance:0,favoriteItems:0}),[o,$]=l.useState([]),[f,A]=l.useState([]);l.useEffect(()=>{t&&B()},[t]);const B=async()=>{var s;j(!0);try{const[r,m,i]=await Promise.all([g.from("orders").select("*").eq("customer_id",t==null?void 0:t.id).order("created_at",{ascending:!1}),g.from("wallets").select("balance").eq("user_id",t==null?void 0:t.id).maybeSingle(),g.from("order_refunds").select("*, orders(order_number)").eq("customer_id",t==null?void 0:t.id).order("created_at",{ascending:!1})]),h=r.data||[],L=i.data||[],M=h.filter(T=>["pending","processing"].includes(T.status)).length;$(h),A(L),R({totalOrders:h.length,pendingOrders:M,walletBalance:((s=m.data)==null?void 0:s.balance)||0,favoriteItems:0})}catch(r){console.error("Error fetching customer data",r)}finally{j(!1)}},P=async()=>{await _(),C("/login")},N=s=>{switch(s){case"delivered":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"cancelled":return"bg-red-100 text-red-700 border-red-200";case"pending":return"bg-amber-100 text-amber-700 border-amber-200";case"processing":return"bg-blue-100 text-blue-700 border-blue-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},n=({id:s,icon:r,label:m,count:i})=>e.jsxs("button",{onClick:()=>{y(s),x(!1)},className:`w-full flex items-center justify-between px-4 py-3 rounded-xl transition-all duration-200 ${a===s?"bg-gradient-to-r from-cyan-50 to-cyan-100 text-cyan-800 font-semibold shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(r,{className:`w-5 h-5 ${a===s?"text-cyan-600":"text-gray-400"}`}),e.jsx("span",{children:m})]}),i!==void 0&&i>0&&e.jsx("span",{className:"bg-cyan-100 text-cyan-800 text-xs font-bold px-2 py-0.5 rounded-full",children:i})]});return D?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600"})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>x(!1)}),e.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-72 bg-white border-r border-gray-100 transform transition-transform duration-200 lg:translate-x-0 ${p?"translate-x-0":"-translate-x-full"}`,children:e.jsxs("div",{className:"h-full flex flex-col p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-cyan-500 to-green-500 rounded-xl flex items-center justify-center text-white font-bold text-xl shadow-lg shadow-cyan-500/20",children:"Z"}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-gray-900 text-lg leading-none",children:"ZimaShop"}),e.jsx("span",{className:"text-xs text-cyan-600 font-medium",children:"Customer Portal"})]})]}),e.jsx("button",{onClick:()=>x(!1),className:"lg:hidden p-2 text-gray-400 hover:text-gray-600",children:e.jsx(H,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx(n,{id:"overview",icon:b,label:"Overview"}),e.jsx(n,{id:"orders",icon:S,label:"My Orders",count:d.pendingOrders}),e.jsx(n,{id:"refunds",icon:k,label:"Refunds"}),e.jsx(n,{id:"wallet",icon:u,label:"My Wallet"}),e.jsx(n,{id:"favorites",icon:O,label:"Favorites",count:d.favoriteItems}),e.jsx(n,{id:"settings",icon:q,label:"Settings"})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-100 mt-auto",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-cyan-100 rounded-full flex items-center justify-center text-cyan-700 font-bold text-lg",children:((v=t==null?void 0:t.full_name)==null?void 0:v.charAt(0))||"U"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 truncate",children:t==null?void 0:t.full_name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:t==null?void 0:t.email})]})]}),e.jsxs("button",{onClick:P,className:"w-full flex items-center justify-center gap-2 text-red-600 hover:bg-red-50 p-3 rounded-xl transition-colors font-medium",children:[e.jsx(F,{className:"w-4 h-4"}),"Sign Out"]})]})]})}),e.jsxs("main",{className:"flex-1 flex flex-col min-h-0 overflow-hidden",children:[e.jsxs("header",{className:"bg-white border-b border-gray-100 px-6 py-4 flex items-center justify-between lg:justify-end",children:[e.jsx("button",{onClick:()=>x(!0),className:"lg:hidden p-2 text-gray-600 hover:bg-gray-50 rounded-lg",children:e.jsx(W,{className:"w-6 h-6"})}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(c,{to:"/products",className:"bg-gray-900 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-800 transition shadow-sm",children:"Browse Products"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[a==="overview"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Welcome back, ",(w=t==null?void 0:t.full_name)==null?void 0:w.split(" ")[0],"!"]}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Here's what's happening with your account today."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"bg-blue-50 p-3 rounded-xl group-hover:bg-blue-100 transition-colors",children:e.jsx(b,{className:"w-6 h-6 text-blue-600"})}),e.jsx("span",{className:"text-xs font-medium text-blue-600 bg-blue-50 px-2 py-1 rounded-full",children:"Total"})]}),e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:d.totalOrders}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Orders placed"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"bg-amber-50 p-3 rounded-xl group-hover:bg-amber-100 transition-colors",children:e.jsx(z,{className:"w-6 h-6 text-amber-600"})}),e.jsx("span",{className:"text-xs font-medium text-amber-600 bg-amber-50 px-2 py-1 rounded-full",children:"Pending"})]}),e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:d.pendingOrders}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Orders in progress"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"bg-emerald-50 p-3 rounded-xl group-hover:bg-emerald-100 transition-colors",children:e.jsx(u,{className:"w-6 h-6 text-emerald-600"})}),e.jsx("span",{className:"text-xs font-medium text-emerald-600 bg-emerald-50 px-2 py-1 rounded-full",children:"Balance"})]}),e.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:["$",d.walletBalance.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Available funds"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[e.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:"Recent Orders"}),e.jsx("button",{onClick:()=>y("orders"),className:"text-cyan-600 hover:text-cyan-700 text-sm font-medium",children:"View All"})]}),e.jsx("div",{className:"overflow-x-auto",children:o.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(b,{className:"w-12 h-12 mx-auto text-gray-300 mb-2"}),e.jsx("p",{children:"No orders found"})]}):e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase",children:"Order ID"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase hidden md:table-cell",children:"Total"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:o.slice(0,5).map(s=>e.jsxs("tr",{className:"hover:bg-gray-50/50",children:[e.jsxs("td",{className:"px-6 py-4 font-medium text-gray-900",children:["#",s.order_number]}),e.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:new Date(s.created_at).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 font-medium text-gray-900 hidden md:table-cell",children:["$",s.total]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${N(s.status)}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(c,{to:`/orders/${s.id}`,className:"text-cyan-600 hover:text-cyan-700 text-sm font-medium",children:"Details"})})]},s.id))})]})})]})]}),a==="orders"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"My Orders"})}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase",children:"Order ID"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase",children:"Total"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase",children:"Details"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:o.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50/50",children:[e.jsxs("td",{className:"px-6 py-4 font-medium text-gray-900",children:["#",s.order_number]}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:new Date(s.created_at).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 font-medium",children:["$",s.total]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${N(s.status)}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(c,{to:`/orders/${s.id}`,className:"p-2 text-gray-400 hover:text-cyan-600 transition-colors",children:e.jsx(U,{className:"w-5 h-5"})})})]},s.id))})]}),o.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(S,{className:"w-16 h-16 mx-auto text-gray-200 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No orders yet"}),e.jsx(c,{to:"/products",className:"text-cyan-600 hover:underline mt-2 inline-block",children:"Start shopping"})]})]})]}),a==="refunds"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"My Refunds"})}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase",children:"Order"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase",children:"Reason"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase",children:"Date"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:f.map(s=>{var r;return e.jsxs("tr",{className:"hover:bg-gray-50/50",children:[e.jsxs("td",{className:"px-6 py-4 font-medium text-gray-900",children:["#",((r=s.orders)==null?void 0:r.order_number)||"N/A"]}),e.jsx("td",{className:"px-6 py-4 text-gray-600 max-w-xs truncate",title:s.reason,children:s.reason}),e.jsxs("td",{className:"px-6 py-4 font-medium",children:["$",s.amount]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${s.status==="approved"?"bg-green-100 text-green-700 border-green-200":s.status==="rejected"?"bg-red-100 text-red-700 border-red-200":"bg-amber-100 text-amber-700 border-amber-200"}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:new Date(s.created_at).toLocaleDateString()})]},s.id)})})]}),f.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(k,{className:"w-16 h-16 mx-auto text-gray-200 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No refunds found"})]})]})]}),a==="wallet"&&e.jsxs("div",{className:"max-w-xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"My Wallet"}),e.jsx("p",{className:"text-gray-500",children:"Manage your funds and transactions"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl p-8 text-white shadow-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10",children:e.jsx(u,{className:"w-32 h-32"})}),e.jsx("p",{className:"text-gray-400 mb-2 font-medium",children:"Available Balance"}),e.jsxs("div",{className:"text-4xl font-bold mb-8",children:["$",d.walletBalance.toFixed(2)]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{className:"flex-1 bg-white/10 hover:bg-white/20 backdrop-blur-sm py-2 rounded-lg font-medium transition-colors",children:"Top Up"}),e.jsx("button",{className:"flex-1 bg-emerald-500 hover:bg-emerald-600 text-white py-2 rounded-lg font-medium transition-colors border border-transparent",children:"History"})]})]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6 text-center",children:e.jsx("p",{className:"text-gray-500",children:"Transaction history feature coming soon."})})]}),a==="settings"&&e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Profile Settings"}),e.jsx("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),e.jsx("input",{type:"text",disabled:!0,value:(t==null?void 0:t.full_name)||"",className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",disabled:!0,value:(t==null?void 0:t.email)||"",className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"text",disabled:!0,value:(t==null?void 0:t.phone)||"Not set",className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-500"})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx("button",{disabled:!0,className:"px-6 py-2 bg-gray-100 text-gray-400 rounded-lg font-medium cursor-not-allowed",children:"Save Changes"}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Editing profile is currently disabled in this demo."})]})]})})]}),a==="favorites"&&e.jsxs("div",{className:"text-center py-20",children:[e.jsx(O,{className:"w-16 h-16 mx-auto text-gray-200 mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Your Favorites"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"You haven't saved any items yet."}),e.jsx(c,{to:"/products",className:"mt-6 inline-block bg-cyan-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-cyan-700 transition",children:"Browse Shop"})]})]})})]})]})}export{ee as CustomerDashboard};
