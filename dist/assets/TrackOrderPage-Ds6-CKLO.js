import{r as s,j as e,d as f,p as g,s as j}from"./index-T9wcIP7k.js";import{T as v}from"./truck-CI4bnO7s.js";import{C as N}from"./clock-Hzc8pPp_.js";import{C as w}from"./circle-check-big-BYTb-izI.js";function C(){const[d,u]=s.useState(""),[a,n]=s.useState(null),[o,x]=s.useState([]),[m,c]=s.useState(!1),[p,l]=s.useState(""),b=async()=>{if(!d.trim()){l("Please enter a tracking number");return}c(!0),l(""),n(null),x([]);try{const{data:t,error:r}=await j.rpc("get_delivery_details",{p_tracking_number:d.trim()});if(r)throw r;if(!t){l("No delivery found with this tracking number"),c(!1);return}n(t.delivery),x(t.history||[])}catch(t){console.error("Tracking Error:",t),l(t.message||"Failed to track order")}finally{c(!1)}},k=t=>{switch(t){case"delivered":return"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-400 border-emerald-100 dark:border-emerald-800/50";case"in_transit":case"picked_up":return"bg-cyan-50 dark:bg-cyan-900/20 text-cyan-700 dark:text-cyan-400 border-cyan-100 dark:border-cyan-800/50";case"pending":case"assigned":return"bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-400 border-amber-100 dark:border-amber-800/50";case"cancelled":return"bg-rose-50 dark:bg-rose-900/20 text-rose-700 dark:text-rose-400 border-rose-100 dark:border-rose-800/50";default:return"bg-slate-50 dark:bg-slate-900/50 text-slate-700 dark:text-slate-400 border-slate-100 dark:border-slate-800"}},h=t=>t.split("_").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "),i=t=>new Date(t).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-900 transition-colors duration-300",children:[e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-cyan-950 text-white py-20 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10"}),e.jsxs("div",{className:"container mx-auto px-4 relative z-10 text-center",children:[e.jsx("h1",{className:"text-5xl font-black uppercase tracking-tighter mb-4",children:"Track Logistics"}),e.jsx("p",{className:"text-cyan-400 font-bold uppercase tracking-[0.3em] text-[10px]",children:"Real-time Satellite Order Monitoring"})]})]}),e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsxs("div",{className:"max-w-2xl mx-auto mb-16",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-[2rem] shadow-2xl shadow-slate-900/10 p-2 md:p-3 border-2 border-slate-50 dark:border-slate-700",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[e.jsx("input",{type:"text",value:d,onChange:t=>u(t.target.value),onKeyPress:t=>t.key==="Enter"&&b(),placeholder:"Transit ID (e.g. TRK...)",className:"flex-1 px-6 py-4 bg-transparent dark:text-white font-bold placeholder-slate-400 outline-none"}),e.jsxs("button",{onClick:b,disabled:m,className:"px-10 py-4 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-[1.5rem] font-black uppercase tracking-widest text-[10px] transition-all active:scale-95 disabled:opacity-50 flex items-center justify-center gap-3",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx("span",{children:m?"Decrypting...":"Scan"})]})]})}),p&&e.jsx("div",{className:"mt-6 p-4 bg-rose-50 dark:bg-rose-900/20 border-2 border-rose-100 dark:border-rose-800/50 rounded-2xl text-rose-700 dark:text-rose-400 text-xs font-black uppercase text-center tracking-widest animate-in slide-in-from-top-4",children:p})]}),a&&e.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 animate-in fade-in zoom-in-95 duration-500",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-[2.5rem] border-2 border-slate-50 dark:border-slate-700 shadow-xl overflow-hidden p-8 md:p-12",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-12 gap-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white uppercase tracking-tighter mb-2",children:"Manifest Summary"}),e.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-cyan-500"}),"Transit ID: ",a.tracking_number]})]}),e.jsx("span",{className:`px-6 py-2 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border-2 shadow-sm ${k(a.delivery_status)}`,children:h(a.delivery_status)})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-10",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx(g,{className:"h-3 w-3 text-cyan-500"}),"Destination"]}),e.jsx("p",{className:"text-sm font-black text-slate-900 dark:text-white uppercase leading-relaxed",children:a.delivery_address}),e.jsx("p",{className:"text-[10px] font-bold text-slate-500 mt-1 uppercase",children:a.customer_phone})]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Origin Vendor"}),e.jsx("p",{className:"text-sm font-black text-slate-900 dark:text-white uppercase",children:a.vendor.full_name}),e.jsx("p",{className:"text-[10px] font-bold text-slate-500 mt-1 uppercase",children:a.vendor.phone})]})}),e.jsx("div",{className:"space-y-6",children:a.driver&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx(v,{className:"h-3 w-3 text-cyan-500"}),"Logistics Envoy"]}),e.jsx("p",{className:"text-sm font-black text-slate-900 dark:text-white uppercase",children:a.driver.driver_name}),e.jsxs("p",{className:"text-[10px] font-bold text-slate-500 mt-1 uppercase",children:[a.driver.vehicle_type," â€¢ ",a.driver.vehicle_number]})]})})]}),e.jsxs("div",{className:"mt-12 pt-10 border-t-2 border-slate-50 dark:border-slate-700 grid md:grid-cols-2 gap-8",children:[a.pickup_time&&e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-6 rounded-3xl border-2 border-slate-100 dark:border-slate-800",children:[e.jsxs("h3",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-2 flex items-center gap-2",children:[e.jsx(N,{className:"h-3 w-3"})," dispatch logs"]}),e.jsx("p",{className:"text-xs font-black text-slate-700 dark:text-slate-300 uppercase",children:i(a.pickup_time)})]}),a.delivery_time&&e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-6 rounded-3xl border-2 border-emerald-100 dark:border-emerald-800/50",children:[e.jsxs("h3",{className:"text-[9px] font-black text-emerald-600 dark:text-emerald-400 uppercase tracking-widest mb-2 flex items-center gap-2",children:[e.jsx(w,{className:"h-3 w-3"})," arrival logs"]}),e.jsx("p",{className:"text-xs font-black text-emerald-700 dark:text-emerald-300 uppercase",children:i(a.delivery_time)})]})]})]}),o.length>0&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-[2.5rem] border-2 border-slate-50 dark:border-slate-700 shadow-xl p-8 md:p-12 overflow-hidden",children:[e.jsx("h2",{className:"text-2xl font-black text-slate-900 dark:text-white uppercase tracking-tighter mb-10",children:"Neural History Feed"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-0 bottom-0 w-1 bg-slate-100 dark:bg-slate-700 rounded-full"}),e.jsx("div",{className:"space-y-10",children:o.map(t=>e.jsxs("div",{className:"relative pl-12",children:[e.jsx("div",{className:"absolute left-0 top-1 p-1 bg-white dark:bg-slate-800 rounded-full z-10",children:e.jsx("div",{className:`w-4 h-4 rounded-full border-2 border-white dark:border-slate-800 ${t.status==="delivered"?"bg-emerald-500":"bg-cyan-500"}`})}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-2 mb-2",children:[e.jsx("h3",{className:"text-sm font-black text-slate-900 dark:text-white uppercase tracking-tight",children:h(t.status)}),e.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:i(t.created_at)})]}),t.location&&e.jsxs("p",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-400 uppercase tracking-widest mb-1 flex items-center gap-1",children:[e.jsx(g,{className:"h-2.5 w-2.5"}),t.location]}),t.notes&&e.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 leading-relaxed max-w-2xl",children:t.notes})]},t.id))})]})]})]})]})]})}export{C as TrackOrderPage};
