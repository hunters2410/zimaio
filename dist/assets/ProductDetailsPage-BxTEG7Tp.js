import{i as ue,r,s as c,j as e,m as $e,b as Te,e as qe,f as Me,u as Ee,a as Ie,P as de,L as R,S as Ae,H as Re,k as q,F as De,T as Pe,M as Ve,h as Ue,n as Le}from"./index-BktnpWS0.js";import{S as ge}from"./store-DDL7ZG_8.js";import{X as pe}from"./x-Be8cuiWM.js";import{M as ze}from"./message-square-Bdx-_X7f.js";import{S as O}from"./send-Ywos9H0t.js";import{S as Be,a as Oe}from"./shield-alert-DFNj6Yaw.js";import{C as He}from"./circle-check-big-DQYFJHkd.js";import{A as We}from"./arrow-left-DLErrt3f.js";import{Z as xe}from"./zap-CpGj1Zaf.js";import{C as B}from"./check-t-U1Tl8Z.js";import{S as me}from"./shield-check-DNs4Rlpo.js";import{M as Qe}from"./minus-CUR8ke6T.js";import{P as Ze}from"./plus-DKkFzrwN.js";import{S as D}from"./star-N_Zw1XPq.js";import{T as Ge}from"./truck-CO3939ut.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],Xe=ue("linkedin",Ke);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],he=ue("scan",Ye);function Je({vendorId:j,vendorName:l,customerId:d,onClose:p}){const[f,w]=r.useState([]),[s,_]=r.useState(""),[o,$]=r.useState(null),[S,v]=r.useState(!0),y=r.useRef(null);r.useEffect(()=>{N()},[j,d]),r.useEffect(()=>{if(o){const i=c.channel(`chat:${o}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`conversation_id=eq.${o}`},h=>{w(x=>[...x,h.new])}).subscribe();return()=>{i.unsubscribe()}}},[o]),r.useEffect(()=>{C()},[f]);const C=()=>{var i;(i=y.current)==null||i.scrollIntoView({behavior:"smooth"})},N=async()=>{try{const{data:i}=await c.from("vendor_profiles").select("user_id").eq("id",j).single();if(!i)return;const h=i.user_id,{data:x}=await c.from("chat_conversations").select("id, participant_ids").filter("participant_ids","cs",`{${d},${h}}`);let b=x==null?void 0:x.find(F=>F.participant_ids.length===2);if(!b){const{data:F,error:k}=await c.from("chat_conversations").insert([{participant_ids:[d,h]}]).select().single();if(k)throw k;b=F}$(b.id);const{data:M}=await c.from("chat_messages").select("*").eq("conversation_id",b.id).order("created_at",{ascending:!0});w(M||[])}catch(i){console.error("Error setting up chat:",i)}finally{v(!1)}},m=async i=>{if(i.preventDefault(),!s.trim()||!o)return;const h=s.trim();_("");try{const{error:x}=await c.from("chat_messages").insert([{conversation_id:o,sender_id:d,message:h}]);if(x)throw x;await c.from("chat_conversations").update({last_message:h,last_message_at:new Date().toISOString()}).eq("id",o)}catch(x){console.error("Error sending message:",x)}};return e.jsxs("div",{className:"fixed bottom-6 right-6 z-[100] w-80 h-[450px] bg-white rounded-2xl shadow-2xl border border-gray-100 flex flex-col overflow-hidden animate-in slide-in-from-bottom-4 duration-300",children:[e.jsxs("div",{className:"bg-[#FF7F01] p-4 flex items-center justify-between text-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(ge,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-black uppercase tracking-tight",children:l}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-400 animate-pulse"}),e.jsx("span",{className:"text-[10px] font-bold opacity-80",children:"Vendor is Online"})]})]})]}),e.jsx("button",{onClick:p,className:"p-1 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(pe,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50/50",children:[S?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"w-6 h-6 border-2 border-orange-500/30 border-t-orange-500 rounded-full animate-spin"})}):f.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center space-y-2 p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(ze,{className:"w-6 h-6 text-gray-300"})}),e.jsx("p",{className:"text-[11px] font-bold text-gray-400 uppercase tracking-widest",children:"No messages yet. Say hi!"})]}):f.map((i,h)=>e.jsx("div",{className:`flex ${i.sender_id===d?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[80%] p-3 rounded-2xl text-[12px] font-medium ${i.sender_id===d?"bg-[#FF7F01] text-white rounded-tr-none shadow-md shadow-orange-500/10":"bg-white text-gray-800 rounded-tl-none border border-gray-100 shadow-sm"}`,children:i.message})},i.id||h)),e.jsx("div",{ref:y})]}),e.jsxs("form",{onSubmit:m,className:"p-3 bg-white border-t border-gray-50 flex gap-2",children:[e.jsx("input",{type:"text",value:s,onChange:i=>_(i.target.value),placeholder:"Type your message...",className:"flex-1 bg-gray-50 border-none rounded-xl px-4 py-2 text-xs font-bold outline-none focus:ring-2 focus:ring-orange-500/20 transition-all"}),e.jsx("button",{type:"submit",disabled:!s.trim(),className:"w-10 h-10 bg-[#FF7F01] text-white rounded-xl flex items-center justify-center hover:bg-[#e67300] transition-all active:scale-95 disabled:opacity-50",children:e.jsx(O,{className:"w-4 h-4"})})]})]})}function es({userId:j,onClose:l}){const[d,p]=r.useState(""),[f,w]=r.useState(""),[s,_]=r.useState("General Inquiry"),[o,$]=r.useState("medium"),[S,v]=r.useState(!1),[y,C]=r.useState(!1),N=async m=>{m.preventDefault(),v(!0);try{const i=`TKT-${Math.random().toString(36).substring(2,8).toUpperCase()}`,{data:h,error:x}=await c.from("support_tickets").insert([{ticket_number:i,user_id:j,subject:d,category:s,priority:o,status:"open"}]).select().single();if(x)throw x;const{error:b}=await c.from("ticket_messages").insert([{ticket_id:h.id,user_id:j,message:f}]);if(b)throw b;C(!0),setTimeout(l,2e3)}catch(i){console.error("Error creating ticket:",i)}finally{v(!1)}};return e.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[32px] shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200",children:[e.jsxs("div",{className:"bg-[#FF7F01] p-6 text-white flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center",children:e.jsx(Be,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-black uppercase tracking-tight",children:"Raise a Ticket"}),e.jsx("p",{className:"text-[10px] font-bold opacity-80 uppercase tracking-widest",children:"Connect with our support team"})]})]}),e.jsx("button",{onClick:l,className:"p-2 hover:bg-white/10 rounded-xl transition-all",children:e.jsx(pe,{className:"w-5 h-5"})})]}),y?e.jsxs("div",{className:"p-12 flex flex-col items-center justify-center text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-green-50 rounded-full flex items-center justify-center",children:e.jsx(He,{className:"w-8 h-8 text-green-500 animate-bounce"})}),e.jsx("h4",{className:"text-xl font-black text-gray-900 uppercase",children:"Ticket Submitted!"}),e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Our team will get back to you shortly via your dashboard."})]}):e.jsxs("form",{onSubmit:N,className:"p-8 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest leading-none",children:"Category"}),e.jsxs("select",{value:s,onChange:m=>_(m.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-transparent rounded-2xl text-xs font-bold focus:bg-white focus:border-orange-500 focus:ring-4 focus:ring-orange-500/10 outline-none transition-all appearance-none cursor-pointer",children:[e.jsx("option",{children:"General Inquiry"}),e.jsx("option",{children:"Order Issue"}),e.jsx("option",{children:"Payment Problem"}),e.jsx("option",{children:"Vendor Dispute"}),e.jsx("option",{children:"Technical Error"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest leading-none",children:"Priority"}),e.jsxs("select",{value:o,onChange:m=>$(m.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-transparent rounded-2xl text-xs font-bold focus:bg-white focus:border-orange-500 focus:ring-4 focus:ring-orange-500/10 outline-none transition-all appearance-none cursor-pointer",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest leading-none",children:"Subject"}),e.jsx("input",{required:!0,type:"text",value:d,onChange:m=>p(m.target.value),placeholder:"Brief summary of the issue...",className:"w-full px-4 py-3 bg-gray-50 border border-transparent rounded-2xl text-xs font-bold focus:bg-white focus:border-orange-500 focus:ring-4 focus:ring-orange-500/10 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest leading-none",children:"Description"}),e.jsx("textarea",{required:!0,rows:4,value:f,onChange:m=>w(m.target.value),placeholder:"Describe your problem in detail...",className:"w-full px-4 py-3 bg-gray-50 border border-transparent rounded-2xl text-xs font-bold focus:bg-white focus:border-orange-500 focus:ring-4 focus:ring-orange-500/10 outline-none transition-all resize-none"})]}),e.jsx("button",{type:"submit",disabled:S,className:"w-full bg-[#FF7F01] text-white py-4 rounded-2xl text-xs font-black uppercase tracking-widest shadow-xl shadow-orange-500/20 active:scale-[0.98] transition-all disabled:opacity-50 flex items-center justify-center gap-3",children:S?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Submitting Ticket..."]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"w-4 h-4"}),"Submit Ticket"]})})]})]})})}function ps(){var Y,J,ee,se,te,ae,re,ne,ie,le;const{slug:j}=$e(),{user:l}=Te(),{formatPrice:d}=qe(),{calculatePrice:p,settings:f}=Me(),w=Ee(),[s,_]=r.useState(null),[o,$]=r.useState([]),[S,v]=r.useState(!0),[y,C]=r.useState(!1),[N,m]=r.useState(5),[i,h]=r.useState(""),[x,b]=r.useState(null),[M,F]=r.useState(!1),[k,H]=r.useState(!1),[T,P]=r.useState(1),[E,fe]=r.useState({days:27,hrs:4,mins:38,secs:9}),[V,be]=r.useState(0),[I,U]=r.useState(!1),[W,Q]=r.useState(null),[we,je]=r.useState([]),[g,ye]=r.useState(null),[ve,Ne]=r.useState(!1),[ke,Z]=r.useState(!1),{addToCart:_e}=Ie();r.useEffect(()=>{const t=setInterval(()=>{fe(a=>a.secs>0?{...a,secs:a.secs-1}:a.mins>0?{...a,mins:a.mins-1,secs:59}:a.hrs>0?{...a,hrs:a.hrs-1,mins:59,secs:59}:a.days>0?{...a,days:a.days-1,hrs:23,mins:59,secs:59}:a)},1e3);return()=>clearInterval(t)},[]),r.useEffect(()=>{j&&G()},[j]);const G=async()=>{var t,a;v(!0);try{const{data:n,error:u}=await c.from("products").select("*, category:categories(name), vendor:vendor_profiles(user_id, shop_name, shop_logo_url, is_verified)").eq("slug",j).single();if(u)throw u;if(n&&!n.vendor&&(console.warn("Vendor data missing for product",n.id),n.vendor={id:n.vendor_id,shop_name:"Unknown Vendor",shop_logo_url:"/placeholder.png",user_id:"",is_verified:!1}),n){if(Array.isArray(n.images)||(n.images=[]),_(n),c.rpc("increment_product_views",{product_id:n.id}).then(({error:A})=>{A&&console.error("Error incrementing views:",A)}),((a=(t=n.attributes)==null?void 0:t.colors)==null?void 0:a.length)>0&&Q(n.attributes.colors[0]),l){const{data:A}=await c.from("wishlists").select("id").eq("user_id",l.id).eq("product_id",n.id).single();U(!!A)}const{data:oe}=await c.from("shipping_methods").select("*").eq("is_active",!0);oe&&je(oe);const{data:ce}=await c.from("product_reviews").select("*, user:profiles(full_name)").eq("product_id",n.id).order("created_at",{ascending:!1});ce&&$(ce)}}catch(n){console.error("Error fetching product:",n),b(n.message)}finally{v(!1)}},Se=async()=>{if(!(!l||!s))try{I?(await c.from("wishlists").delete().eq("user_id",l.id).eq("product_id",s.id),U(!1)):(await c.from("wishlists").insert({user_id:l.id,product_id:s.id}),U(!0))}catch(t){console.error("Error toggling wishlist:",t)}},L=()=>{var a,n;if(!s)return;const t=p(s.base_price);_e({id:s.id,name:s.name,price:t.total,base_price:s.base_price,quantity:T,image:((a=s.images)==null?void 0:a[0])||"",vendor:((n=s.vendor)==null?void 0:n.shop_name)||"Vendor",vendor_id:s.vendor_id,options:{color:W,shipping:g==null?void 0:g.display_name}}),H(!0),setTimeout(()=>H(!1),2e3)},K=()=>{L(),w("/cart")},z=async()=>{var t,a;if(!l){w("/login");return}if(s)try{const{data:n}=await c.from("chat_conversations").select("id").contains("participant_ids",[l.id,(t=s==null?void 0:s.vendor)==null?void 0:t.user_id]).maybeSingle();if(n)w("/messages");else{const{error:u}=await c.from("chat_conversations").insert({participant_ids:[l.id,(a=s==null?void 0:s.vendor)==null?void 0:a.user_id],last_message:"Started a new conversation",last_message_at:new Date().toISOString()});if(u)throw u;w("/messages")}}catch(n){console.error("Error starting chat:",n)}},Ce=t=>{const a=window.location.href,n=`Check out ${s==null?void 0:s.name} on ZimAI!`,u={facebook:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(a)}`,twitter:`https://twitter.com/intent/tweet?url=${encodeURIComponent(a)}&text=${encodeURIComponent(n)}`,linkedin:`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(a)}`,mail:`mailto:?subject=${encodeURIComponent(n)}&body=${encodeURIComponent(a)}`};t==="share2"&&navigator.share?navigator.share({title:n,url:a}):u[t]&&window.open(u[t],"_blank","width=600,height=400")},Fe=async t=>{if(t.preventDefault(),!l){w("/login");return}C(!0),b(null);try{const{error:a}=await c.from("product_reviews").insert({product_id:s==null?void 0:s.id,user_id:l.id,rating:N,comment:i});if(a)throw a;F(!0),h(""),m(5),G(),setTimeout(()=>F(!1),3e3)}catch(a){b(a.message)}finally{C(!1)}};if(S)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-emerald-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400 font-black uppercase tracking-widest text-xs",children:"Loading Details..."})]})});if(!s)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(de,{className:"w-20 h-20 text-gray-200 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl font-black text-gray-900 uppercase mb-4",children:"Product Not Found"}),e.jsx("p",{className:"text-gray-500 font-medium mb-8",children:"This item is no longer available or the link is broken."}),e.jsxs(R,{to:"/products",className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-8 py-4 rounded-2xl font-black uppercase tracking-widest text-xs shadow-xl shadow-emerald-200 hover:bg-emerald-700 transition-all",children:[e.jsx(We,{className:"w-4 h-4"})," Back to Shop"]})]})});const X=o.length>0?o.reduce((t,a)=>t+a.rating,0)/o.length:5;return e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsxs("div",{className:"lg:col-span-4 space-y-4",children:[e.jsxs("div",{className:"aspect-square bg-white border border-gray-100 shadow-sm rounded-lg overflow-hidden group relative",children:[s.images&&s.images.length>0&&s.images[V]?e.jsx("img",{src:s.images[V],className:"w-full h-full object-contain p-4 group-hover:scale-105 transition-transform duration-500",alt:s.name}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-50",children:e.jsx(de,{className:"w-20 h-20 text-gray-200"})}),e.jsx("div",{className:"absolute top-4 right-4 bg-white/80 backdrop-blur-sm p-2 rounded-full cursor-pointer hover:bg-white border border-gray-100 transition-all",children:e.jsx(Ae,{className:"w-4 h-4 text-gray-600"})})]}),e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 custom-scrollbar",children:(Y=s.images)==null?void 0:Y.map((t,a)=>e.jsx("button",{onClick:()=>be(a),className:`w-20 h-20 shrink-0 border-2 rounded-lg overflow-hidden transition-all ${V===a?"border-orange-500 shadow-md ring-2 ring-orange-500/20":"border-gray-100 hover:border-gray-200"}`,children:e.jsx("img",{src:t,className:"w-full h-full object-cover",alt:""})},a))})]}),e.jsxs("div",{className:"lg:col-span-5 space-y-6",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-3",children:e.jsxs("div",{className:"flex bg-[#6345FF] rounded overflow-hidden",children:[e.jsxs("span",{className:"bg-[#5022FF] px-3 py-1 text-[10px] font-black italic text-white flex items-center gap-1",children:[e.jsx(xe,{className:"w-3 h-3 fill-white"})," HOT DEAL"]}),e.jsxs("span",{className:"px-3 py-1 text-[10px] font-bold text-white flex items-center gap-2",children:["Ends In : ",e.jsxs("span",{className:"font-black text-rose-300",children:[E.days," days : ",E.hrs," hrs : ",E.mins," mins : ",E.secs," sec"]})]})]})}),e.jsxs(R,{to:`/shop/${(J=s.vendor)==null?void 0:J.user_id}`,className:"flex items-center gap-1.5 text-blue-500 hover:underline group",children:[e.jsx(ge,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-bold",children:((ee=s.vendor)==null?void 0:ee.shop_name)||"Unknown Vendor"}),((se=s.vendor)==null?void 0:se.is_verified)&&e.jsx("div",{className:"w-3.5 h-3.5 bg-yellow-400 rounded-full flex items-center justify-center p-0.5",children:e.jsx(B,{className:"w-2 h-2 text-white stroke-[4]"})})]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:s.name}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-4xl font-black text-orange-500 font-mono",children:d(p(s.base_price).total)}),e.jsxs("div",{className:"flex-1 max-w-[180px] ml-4",children:[e.jsx("div",{className:"flex justify-between text-[10px] font-bold text-gray-400 italic mb-1",children:e.jsxs("span",{children:[s.sales_count||0," of ",(s.sales_count||0)+(s.stock_quantity||0)," sold"]})}),e.jsx("div",{className:"flex justify-between items-center text-[10px] text-gray-400 font-bold mb-2",children:e.jsxs("span",{children:["VAT & Handling Fees: ",d(p(s.base_price).vat+p(s.base_price).commission)]})}),e.jsx("div",{className:"h-4 bg-gray-100 rounded-full overflow-hidden shadow-inner flex",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-orange-400 to-orange-500 rounded-full transition-all duration-1000",style:{width:`${Math.min(100,Math.round((s.sales_count||0)/((s.sales_count||0)+(s.stock_quantity||1))*100))}%`}})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-y-2 text-xs font-medium text-gray-500",children:[e.jsxs("p",{children:["Availability: ",e.jsx("span",{className:`${s.stock_quantity>0?"text-emerald-500":"text-rose-500"} font-bold`,children:s.stock_quantity>0?"In Stock":"Out of Stock"})]}),e.jsxs("p",{children:["Condition: ",e.jsx("span",{className:"text-gray-400 font-bold",children:"New"})]})]}),e.jsxs("div",{className:"flex gap-6 text-[11px] font-bold text-blue-500 uppercase tracking-tight",children:[e.jsxs("button",{onClick:Se,className:`flex items-center gap-1.5 hover:underline transition-all ${I?"text-rose-500":""}`,children:[e.jsx(Re,{className:`w-3.5 h-3.5 ${I?"fill-rose-500":""}`})," ",I?"Wishlisted":"Add to wishlist"]}),e.jsxs("button",{onClick:()=>z(),className:"flex items-center gap-1.5 hover:underline transition-all text-emerald-600",children:[e.jsx(q,{className:"w-3.5 h-3.5"})," Chat with Seller"]}),e.jsxs("button",{onClick:()=>Z(!0),className:"flex items-center gap-1.5 hover:underline transition-all text-rose-500",children:[e.jsx(me,{className:"w-3.5 h-3.5"})," Support"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-gray-50",children:[[{icon:De,key:"facebook"},{icon:Pe,key:"twitter"},{icon:Oe,key:"share2"},{icon:Xe,key:"linkedin"},{icon:Ve,key:"mail"}].map((t,a)=>e.jsx("div",{onClick:()=>Ce(t.key),className:"w-7 h-7 flex items-center justify-center rounded border border-gray-200 text-rose-500 hover:bg-rose-50 cursor-pointer transition-colors",children:e.jsx(t.icon,{className:"w-3.5 h-3.5"})},a)),e.jsxs("div",{className:"ml-auto flex items-center gap-2 text-[10px] font-black text-gray-400 uppercase tracking-widest italic",children:[e.jsx(he,{className:"w-3 h-3"})," ",s.views_count||0," Viewers"]})]}),((te=s.attributes)==null?void 0:te.colors)&&s.attributes.colors.length>0&&e.jsx("div",{className:"space-y-3 pt-4 border-t border-gray-50",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-xs font-black text-gray-500 uppercase",children:"Color:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.attributes.colors.map((t,a)=>e.jsx("button",{onClick:()=>Q(t),className:`w-7 h-7 rounded-lg border-2 p-0.5 transition-all ${W===t?"border-orange-500 shadow-sm":"border-gray-100 hover:border-gray-200"}`,children:e.jsx("div",{className:"w-full h-full rounded shadow-inner",style:{backgroundColor:t}})},a))})]})}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-dashed border-gray-200",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("span",{className:"text-xs font-black text-gray-500 uppercase mt-1",children:"Shipping:"}),e.jsx("div",{className:"flex-1 space-y-3",children:e.jsx("div",{className:"grid grid-cols-1 gap-2",children:we.map(t=>e.jsxs("button",{onClick:()=>ye(t),className:`p-3 rounded-xl border-2 text-left transition-all group ${(g==null?void 0:g.id)===t.id?"border-orange-500 bg-orange-50/30":"border-gray-100 hover:border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-tighter text-gray-800",children:t.display_name}),e.jsx("span",{className:"text-xs font-black text-orange-500",children:d(t.base_cost)})]}),e.jsxs("p",{className:"text-[10px] text-gray-400 font-bold italic",children:["Estimated: ",t.delivery_time_min,"-",t.delivery_time_max," Days"]})]},t.id))})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-xs font-black text-gray-500 uppercase",children:"Quantity:"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center bg-white border border-gray-200 rounded overflow-hidden",children:[e.jsx("button",{onClick:()=>P(t=>Math.max(1,t-1)),className:"p-2 hover:bg-gray-50 transition-colors border-r border-gray-100",children:e.jsx(Qe,{className:"w-3 h-3 text-gray-400"})}),e.jsx("input",{type:"number",value:T,onChange:t=>P(Math.max(1,Math.min(s.stock_quantity,parseInt(t.target.value)||1))),className:"w-10 text-center text-xs font-black focus:outline-none"}),e.jsx("button",{onClick:()=>P(t=>Math.min(s.stock_quantity,t+1)),className:"p-2 hover:bg-gray-50 transition-colors border-l border-gray-100",children:e.jsx(Ze,{className:"w-3 h-3 text-gray-400"})})]}),e.jsxs("span",{className:"text-[10px] text-gray-400 font-bold italic tracking-tight",children:[s.stock_quantity," in stock"]})]})]}),e.jsxs("div",{className:"space-y-2 pt-4 border-t border-gray-100 mt-4",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 font-medium",children:[e.jsx("span",{children:"Subtotal:"}),e.jsx("span",{children:d(p(s.base_price).total*T)})]}),(f==null?void 0:f.is_enabled)&&e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 font-medium",children:[e.jsxs("span",{children:["Includes VAT (",f.default_rate,"%):"]}),e.jsx("span",{children:d(p(s.base_price).vat*T)})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 font-medium",children:[e.jsx("span",{children:"Shipping:"}),e.jsx("span",{className:g?"text-gray-900":"text-orange-500 font-bold",children:g?d(g.base_cost):"Select Shipping"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[e.jsx("span",{className:"text-sm font-black text-gray-900 uppercase",children:"Total:"}),e.jsx("span",{className:"text-2xl font-black text-emerald-600 font-mono",children:d(p(s.base_price).total*T+((g==null?void 0:g.base_cost)||0))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-6",children:[e.jsxs("button",{onClick:K,className:"flex items-center justify-center gap-3 bg-[#FF7F01] hover:bg-[#e67300] text-white py-3 rounded-lg font-black uppercase text-xs shadow-lg shadow-orange-500/20 active:scale-[0.98] transition-all",children:[e.jsx(xe,{className:"w-4 h-4 fill-white animate-pulse"})," Buy Now"]}),e.jsxs("button",{onClick:L,className:`flex items-center justify-center gap-3 py-3 rounded-lg font-black uppercase text-xs shadow-lg active:scale-[0.98] transition-all ${k?"bg-emerald-50 text-emerald-600 border border-emerald-200":"bg-[#FF6E43] hover:bg-[#ff5a29] text-white shadow-rose-500/20"}`,children:[e.jsx(Ue,{className:"w-4 h-4"})," ",k?"In Cart":"Add to Cart"]})]})]}),e.jsxs("div",{className:"lg:col-span-3 space-y-4",children:[e.jsxs("div",{className:"bg-white border-2 border-gray-50 rounded-lg p-6 flex flex-col items-center group",children:[e.jsxs("div",{className:"flex w-full items-center justify-between mb-6",children:[e.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Sold by"}),e.jsxs("button",{className:"flex items-center gap-1 text-[10px] font-black text-blue-500 hover:underline",children:[e.jsx(he,{className:"w-3 h-3"})," Quick View"]})]}),e.jsx("div",{className:"w-24 h-24 rounded-2xl overflow-hidden mb-4 border-2 border-gray-100 group-hover:border-orange-500 transition-all p-1 bg-white",children:e.jsx("img",{src:((ae=s.vendor)==null?void 0:ae.shop_logo_url)||"/placeholder.png",className:"w-full h-full object-cover rounded-xl",alt:""})}),e.jsxs(R,{to:`/shop/${(re=s.vendor)==null?void 0:re.user_id}`,className:"flex items-center gap-1.5 mb-2 hover:text-orange-600 transition-colors",children:[e.jsx("h4",{className:"font-black text-gray-800 uppercase tracking-tight",children:((ne=s.vendor)==null?void 0:ne.shop_name)||"Unknown Vendor"}),((ie=s.vendor)==null?void 0:ie.is_verified)&&e.jsx("div",{className:"w-4 h-4 bg-yellow-400 rounded-full flex items-center justify-center p-0.5",children:e.jsx(B,{className:"w-2 h-2 text-white stroke-[4]"})})]}),e.jsx("div",{className:"flex gap-0.5 mb-2",children:[...Array(5)].map((t,a)=>e.jsx(D,{className:"w-4 h-4 text-orange-400 stroke-[2.5]"},a))}),e.jsxs("button",{onClick:z,className:"w-full mt-4 flex items-center justify-center gap-3 bg-white border-2 border-emerald-600 text-emerald-600 py-3 rounded-lg font-black uppercase text-[10px] tracking-widest hover:bg-emerald-50 transition-all active:scale-[0.98]",children:[e.jsx(q,{className:"w-4 h-4"})," Chat with Vendor"]})]}),e.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 text-[10px] font-black text-gray-400 uppercase tracking-widest border-b border-gray-50 pb-2",children:[e.jsx(me,{className:"w-4 h-4 text-emerald-500"})," Secure Checkout"]}),e.jsxs("div",{className:"flex items-center gap-3 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:[e.jsx(Ge,{className:"w-4 h-4 text-blue-500"})," Fast Delivery"]})]})]})]}),e.jsx("div",{className:"mt-20",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("h2",{className:"text-xl font-black text-gray-900 uppercase tracking-tight mb-1",children:"Customer Feedback"}),e.jsx("p",{className:"text-gray-400 font-bold text-[10px] uppercase tracking-widest mb-8",children:"Real experiences from our community."}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 border border-gray-100 shadow-sm mb-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-4xl font-black text-gray-900 mb-1",children:X.toFixed(1)}),e.jsx("div",{className:"flex justify-center gap-1 mb-1",children:[...Array(5)].map((t,a)=>e.jsx(D,{className:`w-4 h-4 ${a<Math.floor(X)?"text-yellow-500 fill-yellow-500":"text-gray-200"}`},a))}),e.jsxs("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-[0.2em]",children:[o.length," Verified Reviews"]})]}),e.jsx("div",{className:"space-y-3",children:[5,4,3,2,1].map(t=>{const a=o.filter(u=>u.rating===t).length,n=o.length>0?a/o.length*100:0;return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-[10px] font-black text-gray-400 w-2 shrink-0",children:t}),e.jsx("div",{className:"flex-1 h-1.5 bg-gray-50 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-yellow-500 rounded-full",style:{width:`${n}%`}})}),e.jsx("span",{className:"text-[10px] font-black text-gray-400 w-6 shrink-0 text-right",children:a})]},t)})})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 border border-emerald-100 shadow-xl shadow-emerald-900/5",children:[e.jsxs("h3",{className:"font-black text-gray-900 uppercase tracking-tight mb-4 flex items-center gap-2 text-sm",children:[e.jsx(q,{className:"w-4 h-4 text-emerald-600"})," Share Thoughts"]}),l?e.jsxs("form",{onSubmit:Fe,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] font-black text-gray-400 uppercase tracking-widest mb-2 block text-center",children:"Your Rating"}),e.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4,5].map(t=>e.jsx("button",{type:"button",onClick:()=>m(t),className:`p-1 transition-all ${N>=t?"scale-110":"opacity-30 hover:opacity-100"}`,children:e.jsx(D,{className:`w-6 h-6 ${N>=t?"text-yellow-500 fill-yellow-500":"text-gray-300"}`})},t))})]}),e.jsx("div",{children:e.jsx("textarea",{required:!0,value:i,onChange:t=>h(t.target.value),placeholder:"Write your review...",rows:3,className:"w-full bg-gray-50 border border-transparent rounded-xl p-4 text-xs font-medium focus:bg-white focus:border-emerald-500 outline-none transition-all placeholder-gray-400"})}),x&&e.jsxs("div",{className:"bg-red-50 text-red-600 text-[8px] font-bold p-3 rounded-lg flex items-center gap-2",children:[e.jsx(Le,{className:"w-3 h-3"})," ",x]}),e.jsx("button",{type:"submit",disabled:y,className:`w-full py-3 rounded-xl font-black uppercase tracking-widest text-[9px] transition-all flex items-center justify-center gap-2 ${M?"bg-emerald-50 text-emerald-600":y?"bg-gray-100 text-gray-400":"bg-gray-900 text-white hover:bg-emerald-600"}`,children:M?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"w-3 h-3"})," Shared"]}):y?e.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"w-3 h-3"})," Post"]})})]}):e.jsxs("div",{className:"text-center py-2",children:[e.jsx("p",{className:"text-[10px] text-gray-400 font-bold mb-2",children:"Sign in to leave a review"}),e.jsx(R,{to:"/login",className:"text-[9px] font-black text-emerald-600 uppercase tracking-widest hover:underline",children:"Sign In Now"})]})]})]}),e.jsx("div",{className:"lg:col-span-2 space-y-4",children:o.length===0?e.jsxs("div",{className:"bg-white rounded-3xl border border-gray-100 p-12 text-center shadow-sm",children:[e.jsx(q,{className:"w-12 h-12 text-gray-100 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-black text-gray-900 uppercase",children:"Be the First"}),e.jsx("p",{className:"text-gray-400 font-bold text-[10px] uppercase tracking-widest",children:"No reviews posted yet."})]}):o.map(t=>{var a,n,u;return e.jsxs("div",{className:"bg-white rounded-3xl p-6 md:p-8 border border-gray-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-50 rounded-xl flex items-center justify-center font-black text-emerald-600 uppercase text-sm",children:((n=(a=t.user)==null?void 0:a.full_name)==null?void 0:n.charAt(0))||"U"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-black text-gray-900 uppercase tracking-tight text-xs",children:((u=t.user)==null?void 0:u.full_name)||"Verified User"}),e.jsx("p",{className:"text-[8px] text-gray-400 font-bold uppercase tracking-widest",children:new Date(t.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-yellow-50 px-2 py-1 rounded-full",children:[e.jsx(D,{className:"w-3 h-3 text-yellow-500 fill-yellow-500"}),e.jsx("span",{className:"text-[10px] font-black text-yellow-700",children:t.rating.toFixed(1)})]})]}),e.jsxs("p",{className:"text-gray-600 font-medium leading-relaxed italic text-sm",children:['"',t.comment,'"']})]},t.id)})})]})})]}),ke&&l&&e.jsx(es,{userId:l.id,onClose:()=>Z(!1)}),ve&&l&&s&&e.jsx(Je,{vendorId:s.vendor_id,vendorName:((le=s.vendor)==null?void 0:le.shop_name)||"Vendor",customerId:l.id,onClose:()=>Ne(!1)}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 p-3 px-4 z-40 lg:hidden safe-area-bottom shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:z,className:"flex flex-col items-center justify-center p-2 text-gray-500 hover:text-emerald-600 transition-colors",children:[e.jsx(q,{className:"w-5 h-5 mb-0.5"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Chat"})]}),e.jsx("div",{className:"h-auto w-px bg-gray-100 mx-1"}),e.jsx("button",{onClick:L,className:`flex-1 py-3 rounded-lg font-black uppercase text-[10px] tracking-widest transition-all ${k?"bg-emerald-50 text-emerald-600 border border-emerald-200":"bg-white border-2 border-orange-500 text-orange-500 active:bg-orange-50"}`,children:k?"In Cart":"Add to Cart"}),e.jsx("button",{onClick:K,className:"flex-1 bg-[#FF7F01] hover:bg-[#e67300] text-white py-3 rounded-lg font-black uppercase text-[10px] tracking-widest shadow-lg shadow-orange-500/20 active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:"Buy Now"})]})})]})}export{ps as ProductDetailsPage};
