import{n as k,r as o,s as x,j as e,X as I,O as C,z as S,P as A}from"./index-T9wcIP7k.js";import{P as M}from"./plus-B2DFtXvD.js";import{S as P}from"./save-Bbxo6HuH.js";import{T as D}from"./trash-2-RCUSiwrv.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],q=k("arrow-down",E);function U(){const[r,p]=o.useState([]),[f,b]=o.useState(!0),[L,v]=o.useState(null),[g,m]=o.useState(!1),[n,l]=o.useState({label:"",url:"",icon:"",is_active:!0});o.useEffect(()=>{c()},[]);const c=async()=>{const{data:s}=await x.from("navigation_menu_items").select("*").order("order_position");s&&p(s),b(!1)},j=async()=>{const s=r.length>0?Math.max(...r.map(t=>t.order_position)):0,{error:a}=await x.from("navigation_menu_items").insert({...n,order_position:s+1});a||(l({label:"",url:"",icon:"",is_active:!0}),m(!1),c())},y=async(s,a)=>{const{error:t}=await x.from("navigation_menu_items").update(a).eq("id",s);t||(c(),v(null))},N=async s=>{if(!confirm("Are you sure you want to delete this navigation item?"))return;const{error:a}=await x.from("navigation_menu_items").delete().eq("id",s);a||c()},u=async(s,a)=>{const t=r.findIndex(i=>i.id===s);if(t===-1||a==="up"&&t===0||a==="down"&&t===r.length-1)return;const d=[...r],h=a==="up"?t-1:t+1;[d[t],d[h]]=[d[h],d[t]];const w=d.map((i,_)=>({id:i.id,order_position:_+1}));for(const i of w)await x.from("navigation_menu_items").update({order_position:i.order_position}).eq("id",i.id);c()};return f?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Navigation Menu Settings"}),e.jsx("p",{className:"text-green-100",children:"Manage top navigation bar items"})]})}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Menu Items"}),e.jsxs("button",{onClick:()=>m(!g),className:"flex items-center space-x-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition",children:[e.jsx(M,{className:"h-5 w-5"}),e.jsx("span",{children:"Add Item"})]})]}),g&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Add New Navigation Item"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Label"}),e.jsx("input",{type:"text",value:n.label,onChange:s=>l({...n,label:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"e.g., CATEGORIES"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL"}),e.jsx("input",{type:"text",value:n.url,onChange:s=>l({...n,url:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"e.g., /categories"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Icon (optional)"}),e.jsxs("select",{value:n.icon,onChange:s=>l({...n,icon:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"",children:"No Icon"}),e.jsx("option",{value:"Menu",children:"Menu Icon"}),e.jsx("option",{value:"Package",children:"Package Icon"})]})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.is_active,onChange:s=>l({...n,is_active:s.target.checked}),className:"w-4 h-4 text-green-500 border-gray-300 rounded focus:ring-green-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"flex space-x-2 mt-4",children:[e.jsxs("button",{onClick:j,className:"flex items-center space-x-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx("span",{children:"Save"})]}),e.jsxs("button",{onClick:()=>m(!1),className:"flex items-center space-x-2 px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition",children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx("span",{children:"Cancel"})]})]})]}),e.jsx("div",{className:"space-y-2",children:r.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200 hover:border-green-300 transition",children:[e.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("button",{onClick:()=>u(s.id,"up"),disabled:a===0,className:"p-1 hover:bg-gray-200 rounded disabled:opacity-30",children:e.jsx(C,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>u(s.id,"down"),disabled:a===r.length-1,className:"p-1 hover:bg-gray-200 rounded disabled:opacity-30",children:e.jsx(q,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[s.icon==="Menu"&&e.jsx(S,{className:"h-5 w-5 text-gray-600"}),s.icon==="Package"&&e.jsx(A,{className:"h-5 w-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:s.label}),e.jsx("div",{className:"text-sm text-gray-500",children:s.url})]})]}),e.jsx("div",{children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${s.is_active?"bg-green-100 text-green-700":"bg-gray-200 text-gray-600"}`,children:s.is_active?"Active":"Inactive"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>y(s.id,{is_active:!s.is_active}),className:"p-2 text-gray-600 hover:bg-gray-200 rounded-lg transition",title:s.is_active?"Deactivate":"Activate",children:s.is_active?"Hide":"Show"}),e.jsx("button",{onClick:()=>N(s.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",title:"Delete",children:e.jsx(D,{className:"h-5 w-5"})})]})]},s.id))})]})})]})}export{U as NavigationSettings};
