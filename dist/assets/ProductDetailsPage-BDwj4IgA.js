import{n as he,r as l,j as e,X as ve,l as ge,s as g,q as _e,e as Se,h as Ce,i as Fe,u as Te,b as $e,t as Ie,a as Me,P as ce,L as T,d as qe,S as Ae,H as Re,o as N,c as de,F as Pe,T as Ee,M as De,m as Ue,w as Ve}from"./index-T9wcIP7k.js";import{S as Le}from"./shield-alert-B_XNUTdg.js";import{C as ze}from"./circle-check-big-BYTb-izI.js";import{A as Be}from"./arrow-left-CeWPuxjJ.js";import{Z as xe}from"./zap-_oUAMe_n.js";import{C as U}from"./check-CtKt80mY.js";import{S as He}from"./share-2-BEHdt95O.js";import{M as We}from"./minus-CQkdbG1R.js";import{P as Oe}from"./plus-B2DFtXvD.js";import{S as $}from"./star-Fc9uE4lG.js";import{T as Qe}from"./truck-CI4bnO7s.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],Ge=he("linkedin",Ze);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],me=he("scan",Ke);function Xe({userId:u,onClose:x}){const[c,m]=l.useState(""),[h,f]=l.useState(""),[p,I]=l.useState("General Inquiry"),[v,s]=l.useState("medium"),[_,i]=l.useState(!1),[M,q]=l.useState(!1),S=async n=>{n.preventDefault(),i(!0);try{const b=`TKT-${Math.random().toString(36).substring(2,8).toUpperCase()}`,{data:y,error:j}=await g.from("support_tickets").insert([{ticket_number:b,user_id:u,subject:c,category:p,priority:v,status:"open"}]).select().single();if(j)throw j;const{error:w}=await g.from("ticket_messages").insert([{ticket_id:y.id,user_id:u,message:h}]);if(w)throw w;q(!0),setTimeout(x,2e3)}catch(b){console.error("Error creating ticket:",b)}finally{i(!1)}};return e.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[32px] shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200",children:[e.jsxs("div",{className:"bg-[#FF7F01] p-6 text-white flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center",children:e.jsx(Le,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-black uppercase tracking-tight",children:"Raise a Ticket"}),e.jsx("p",{className:"text-[10px] font-bold opacity-80 uppercase tracking-widest",children:"Connect with our support team"})]})]}),e.jsx("button",{onClick:x,className:"p-2 hover:bg-white/10 rounded-xl transition-all",children:e.jsx(ve,{className:"w-5 h-5"})})]}),M?e.jsxs("div",{className:"p-12 flex flex-col items-center justify-center text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-green-50 rounded-full flex items-center justify-center",children:e.jsx(ze,{className:"w-8 h-8 text-green-500 animate-bounce"})}),e.jsx("h4",{className:"text-xl font-black text-gray-900 uppercase",children:"Ticket Submitted!"}),e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Our team will get back to you shortly via your dashboard."})]}):e.jsxs("form",{onSubmit:S,className:"p-8 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest leading-none",children:"Category"}),e.jsxs("select",{value:p,onChange:n=>I(n.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-transparent rounded-2xl text-xs font-bold focus:bg-white focus:border-orange-500 focus:ring-4 focus:ring-orange-500/10 outline-none transition-all appearance-none cursor-pointer",children:[e.jsx("option",{children:"General Inquiry"}),e.jsx("option",{children:"Order Issue"}),e.jsx("option",{children:"Payment Problem"}),e.jsx("option",{children:"Vendor Dispute"}),e.jsx("option",{children:"Technical Error"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest leading-none",children:"Priority"}),e.jsxs("select",{value:v,onChange:n=>s(n.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-transparent rounded-2xl text-xs font-bold focus:bg-white focus:border-orange-500 focus:ring-4 focus:ring-orange-500/10 outline-none transition-all appearance-none cursor-pointer",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest leading-none",children:"Subject"}),e.jsx("input",{required:!0,type:"text",value:c,onChange:n=>m(n.target.value),placeholder:"Brief summary of the issue...",className:"w-full px-4 py-3 bg-gray-50 border border-transparent rounded-2xl text-xs font-bold focus:bg-white focus:border-orange-500 focus:ring-4 focus:ring-orange-500/10 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest leading-none",children:"Description"}),e.jsx("textarea",{required:!0,rows:4,value:h,onChange:n=>f(n.target.value),placeholder:"Describe your problem in detail...",className:"w-full px-4 py-3 bg-gray-50 border border-transparent rounded-2xl text-xs font-bold focus:bg-white focus:border-orange-500 focus:ring-4 focus:ring-orange-500/10 outline-none transition-all resize-none"})]}),e.jsx("button",{type:"submit",disabled:_,className:"w-full bg-[#FF7F01] text-white py-4 rounded-2xl text-xs font-black uppercase tracking-widest shadow-xl shadow-orange-500/20 active:scale-[0.98] transition-all disabled:opacity-50 flex items-center justify-center gap-3",children:_?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Submitting Ticket..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"w-4 h-4"}),"Submit Ticket"]})})]})]})})}function ct(){var X,Y,J,ee,te,se,ae,re,le;const{slug:u}=_e(),{user:x}=Se(),{formatPrice:c}=Ce(),{calculatePrice:m,settings:h}=Fe(),f=Te(),{isInWishlist:p,toggleWishlist:I}=$e(),{openChat:v}=Ie(),[s,_]=l.useState(null),[i,M]=l.useState([]),[q,S]=l.useState(!0),[n,b]=l.useState(!1),[y,j]=l.useState(5),[w,V]=l.useState(""),[L,A]=l.useState(null),[z,B]=l.useState(!1),[C,H]=l.useState(!1),[k,R]=l.useState(1),[F,ue]=l.useState({days:27,hrs:4,mins:38,secs:9}),[P,pe]=l.useState(0),[W,O]=l.useState(null),[be,fe]=l.useState([]),[o,ye]=l.useState(null),[je,Q]=l.useState(!1),{addToCart:we}=Me();l.useEffect(()=>{const t=setInterval(()=>{ue(a=>a.secs>0?{...a,secs:a.secs-1}:a.mins>0?{...a,mins:a.mins-1,secs:59}:a.hrs>0?{...a,hrs:a.hrs-1,mins:59,secs:59}:a.days>0?{...a,days:a.days-1,hrs:23,mins:59,secs:59}:a)},1e3);return()=>clearInterval(t)},[]),l.useEffect(()=>{u&&Z()},[u]);const Z=async()=>{var t,a;S(!0);try{const{data:r,error:d}=await g.from("products").select("*, category:categories(name), vendor:vendor_profiles(user_id, shop_name, shop_logo_url, is_verified)").eq("slug",u).single();if(d)throw d;if(r&&!r.vendor&&(console.warn("Vendor data missing for product",r.id),r.vendor={id:r.vendor_id,shop_name:"Unknown Vendor",shop_logo_url:"/placeholder.png",user_id:"",is_verified:!1}),r){Array.isArray(r.images)||(r.images=[]),_(r),g.rpc("increment_product_views",{product_id:r.id}).then(({error:oe})=>{oe&&console.error("Error incrementing views:",oe)}),((a=(t=r.attributes)==null?void 0:t.colors)==null?void 0:a.length)>0&&O(r.attributes.colors[0]);const{data:ne}=await g.from("shipping_methods").select("*").eq("is_active",!0);ne&&fe(ne);const{data:ie}=await g.from("product_reviews").select("*, user:profiles(full_name)").eq("product_id",r.id).order("created_at",{ascending:!1});ie&&M(ie)}}catch(r){console.error("Error fetching product:",r),A(r.message)}finally{S(!1)}},E=()=>{var a,r;if(!s)return;const t=m(s.base_price);we({id:s.id,name:s.name,price:t.total,base_price:s.base_price,quantity:k,image:((a=s.images)==null?void 0:a[0])||"",vendor:((r=s.vendor)==null?void 0:r.shop_name)||"Vendor",vendor_id:s.vendor_id,options:{color:W,shipping:o==null?void 0:o.display_name}}),H(!0),setTimeout(()=>H(!1),2e3)},G=()=>{E(),f("/cart")},D=()=>{var t;if(!x){f("/login");return}s&&v(s.vendor_id,((t=s.vendor)==null?void 0:t.shop_name)||"Vendor")},ke=t=>{const a=window.location.href,r=`Check out ${s==null?void 0:s.name} on ZimAI!`,d={facebook:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(a)}`,twitter:`https://twitter.com/intent/tweet?url=${encodeURIComponent(a)}&text=${encodeURIComponent(r)}`,linkedin:`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(a)}`,mail:`mailto:?subject=${encodeURIComponent(r)}&body=${encodeURIComponent(a)}`};t==="share2"&&navigator.share?navigator.share({title:r,url:a}):d[t]&&window.open(d[t],"_blank","width=600,height=400")},Ne=async t=>{if(t.preventDefault(),!x){f("/login");return}b(!0),A(null);try{const{error:a}=await g.from("product_reviews").insert({product_id:s==null?void 0:s.id,user_id:x.id,rating:y,comment:w});if(a)throw a;B(!0),V(""),j(5),Z(),setTimeout(()=>B(!1),3e3)}catch(a){A(a.message)}finally{b(!1)}};if(q)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-slate-900 transition-colors duration-300",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-emerald-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400 font-black uppercase tracking-widest text-xs",children:"Loading Details..."})]})});if(!s)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-slate-900 p-4 transition-colors duration-300",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(ce,{className:"w-20 h-20 text-gray-200 dark:text-slate-800 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl font-black text-gray-900 dark:text-white uppercase mb-4",children:"Product Not Found"}),e.jsx("p",{className:"text-gray-500 font-medium mb-8",children:"This item is no longer available or the link is broken."}),e.jsxs(T,{to:"/products",className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-8 py-4 rounded-2xl font-black uppercase tracking-widest text-xs shadow-xl shadow-emerald-200 hover:bg-emerald-700 transition-all",children:[e.jsx(Be,{className:"w-4 h-4"})," Back to Shop"]})]})});const K=i.length>0?i.reduce((t,a)=>t+a.rating,0)/i.length:5;return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-900 pb-20 transition-colors duration-300",children:[e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsxs("div",{className:"lg:col-span-4 space-y-4",children:[e.jsxs("div",{className:"aspect-square bg-white dark:bg-slate-800 border border-gray-100 dark:border-slate-700 shadow-sm rounded-lg overflow-hidden group relative",children:[s.images&&s.images.length>0&&s.images[P]?e.jsx("img",{src:s.images[P],className:"w-full h-full object-contain p-4 group-hover:scale-105 transition-transform duration-500",alt:s.name}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-50 dark:bg-slate-700",children:e.jsx(ce,{className:"w-20 h-20 text-gray-200 dark:text-slate-500"})}),e.jsx("div",{className:"absolute top-4 right-4 bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm p-2 rounded-full cursor-pointer hover:bg-white dark:hover:bg-slate-700 border border-gray-100 dark:border-slate-600 transition-all",children:e.jsx(qe,{className:"w-4 h-4 text-gray-600 dark:text-gray-300"})})]}),e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 custom-scrollbar",children:(X=s.images)==null?void 0:X.map((t,a)=>e.jsx("button",{onClick:()=>pe(a),className:`w-20 h-20 shrink-0 border-2 rounded-lg overflow-hidden transition-all ${P===a?"border-orange-500 shadow-md ring-2 ring-orange-500/20":"border-gray-100 dark:border-slate-700 hover:border-gray-200 dark:hover:border-slate-600"}`,children:e.jsx("img",{src:t,className:"w-full h-full object-cover",alt:""})},a))})]}),e.jsxs("div",{className:"lg:col-span-5 space-y-6",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-3",children:e.jsxs("div",{className:"flex bg-[#6345FF] rounded overflow-hidden",children:[e.jsxs("span",{className:"bg-[#5022FF] px-3 py-1 text-[10px] font-black italic text-white flex items-center gap-1",children:[e.jsx(xe,{className:"w-3 h-3 fill-white"})," HOT DEAL"]}),e.jsxs("span",{className:"px-3 py-1 text-[10px] font-bold text-white flex items-center gap-2",children:["Ends In : ",e.jsxs("span",{className:"font-black text-rose-300",children:[F.days," days : ",F.hrs," hrs : ",F.mins," mins : ",F.secs," sec"]})]})]})}),e.jsxs(T,{to:`/shop/${(Y=s.vendor)==null?void 0:Y.user_id}`,className:"flex items-center gap-1.5 text-blue-500 hover:underline group",children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-bold",children:((J=s.vendor)==null?void 0:J.shop_name)||"Unknown Vendor"}),((ee=s.vendor)==null?void 0:ee.is_verified)&&e.jsx("div",{className:"w-3.5 h-3.5 bg-yellow-400 rounded-full flex items-center justify-center p-0.5",children:e.jsx(U,{className:"w-2 h-2 text-white stroke-[4]"})})]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white tracking-tight",children:s.name}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-4xl font-black text-orange-500 font-mono",children:c(m(s.base_price).total)}),e.jsxs("div",{className:"flex-1 max-w-[180px] ml-4",children:[e.jsx("div",{className:"flex justify-between text-[10px] font-bold text-gray-400 italic mb-1",children:e.jsxs("span",{children:[s.sales_count||0," of ",(s.sales_count||0)+(s.stock_quantity||0)," sold"]})}),e.jsx("div",{className:"flex justify-between items-center text-[10px] text-gray-400 font-bold mb-2",children:e.jsxs("span",{children:["VAT & Handling Fees: ",c(m(s.base_price).vat+m(s.base_price).commission)]})}),e.jsx("div",{className:"h-4 bg-gray-100 dark:bg-slate-800 rounded-full overflow-hidden shadow-inner flex",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-orange-400 to-orange-500 rounded-full transition-all duration-1000",style:{width:`${Math.min(100,Math.round((s.sales_count||0)/((s.sales_count||0)+(s.stock_quantity||1))*100))}%`}})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-y-2 text-xs font-medium text-gray-500",children:[e.jsxs("p",{children:["Availability: ",e.jsx("span",{className:`${s.stock_quantity>0?"text-emerald-500":"text-rose-500"} font-bold`,children:s.stock_quantity>0?"In Stock":"Out of Stock"})]}),e.jsxs("p",{children:["Condition: ",e.jsx("span",{className:"text-gray-400 dark:text-gray-500 font-bold",children:"New"})]})]}),e.jsxs("div",{className:"flex gap-6 text-[11px] font-bold text-blue-500 uppercase tracking-tight",children:[e.jsxs("button",{onClick:()=>I(s.id),className:`flex items-center gap-1.5 hover:underline transition-all ${p(s.id)?"text-rose-500":""}`,children:[e.jsx(Re,{className:`w-3.5 h-3.5 ${p(s.id)?"fill-rose-500":""}`})," ",p(s.id)?"Wishlisted":"Add to wishlist"]}),e.jsxs("button",{onClick:()=>D(),className:"flex items-center gap-1.5 hover:underline transition-all text-emerald-600",children:[e.jsx(N,{className:"w-3.5 h-3.5"})," Chat with Seller"]}),e.jsxs("button",{onClick:()=>Q(!0),className:"flex items-center gap-1.5 hover:underline transition-all text-rose-500",children:[e.jsx(de,{className:"w-3.5 h-3.5"})," Support"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-gray-50 dark:border-slate-800",children:[[{icon:Pe,key:"facebook"},{icon:Ee,key:"twitter"},{icon:He,key:"share2"},{icon:Ge,key:"linkedin"},{icon:De,key:"mail"}].map((t,a)=>e.jsx("div",{onClick:()=>ke(t.key),className:"w-7 h-7 flex items-center justify-center rounded border border-gray-200 dark:border-slate-700 text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 cursor-pointer transition-colors",children:e.jsx(t.icon,{className:"w-3.5 h-3.5"})},a)),e.jsxs("div",{className:"ml-auto flex items-center gap-2 text-[10px] font-black text-gray-400 uppercase tracking-widest italic",children:[e.jsx(me,{className:"w-3 h-3"})," ",s.views_count||0," Viewers"]})]}),((te=s.attributes)==null?void 0:te.colors)&&s.attributes.colors.length>0&&e.jsx("div",{className:"space-y-3 pt-4 border-t border-gray-50 dark:border-slate-800",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-xs font-black text-gray-500 uppercase",children:"Color:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.attributes.colors.map((t,a)=>e.jsx("button",{onClick:()=>O(t),className:`w-7 h-7 rounded-lg border-2 p-0.5 transition-all ${W===t?"border-orange-500 shadow-sm":"border-gray-100 dark:border-slate-700 hover:border-gray-200 dark:hover:border-slate-600"}`,children:e.jsx("div",{className:"w-full h-full rounded shadow-inner",style:{backgroundColor:t}})},a))})]})}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-dashed border-gray-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("span",{className:"text-xs font-black text-gray-500 uppercase mt-1",children:"Shipping:"}),e.jsx("div",{className:"flex-1 space-y-3",children:e.jsx("div",{className:"grid grid-cols-1 gap-2",children:be.map(t=>e.jsxs("button",{onClick:()=>ye(t),className:`p-3 rounded-xl border-2 text-left transition-all group ${(o==null?void 0:o.id)===t.id?"border-orange-500 bg-orange-50/30 dark:bg-orange-950/20":"border-gray-100 dark:border-slate-700 hover:border-gray-200 dark:hover:border-slate-600"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-tighter text-gray-800 dark:text-gray-200",children:t.display_name}),e.jsx("span",{className:"text-xs font-black text-orange-500",children:c(t.base_cost)})]}),e.jsxs("p",{className:"text-[10px] text-gray-400 font-bold italic",children:["Estimated: ",t.delivery_time_min,"-",t.delivery_time_max," Days"]})]},t.id))})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-xs font-black text-gray-500 uppercase",children:"Quantity:"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded overflow-hidden",children:[e.jsx("button",{onClick:()=>R(t=>Math.max(1,t-1)),className:"p-2 hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors border-r border-gray-100 dark:border-slate-700",children:e.jsx(We,{className:"w-3 h-3 text-gray-400"})}),e.jsx("input",{type:"number",value:k,onChange:t=>R(Math.max(1,Math.min(s.stock_quantity,parseInt(t.target.value)||1))),className:"w-10 text-center text-xs font-black bg-transparent text-gray-900 dark:text-white focus:outline-none"}),e.jsx("button",{onClick:()=>R(t=>Math.min(s.stock_quantity,t+1)),className:"p-2 hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors border-l border-gray-100 dark:border-slate-700",children:e.jsx(Oe,{className:"w-3 h-3 text-gray-400"})})]}),e.jsxs("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 font-bold italic tracking-tight",children:[s.stock_quantity," in stock"]})]})]}),e.jsxs("div",{className:"space-y-2 pt-4 border-t border-gray-100 dark:border-slate-800 mt-4",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 font-medium",children:[e.jsx("span",{children:"Subtotal:"}),e.jsx("span",{children:c(m(s.base_price).total*k)})]}),(h==null?void 0:h.is_enabled)&&e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 font-medium",children:[e.jsxs("span",{children:["Includes VAT (",h.default_rate,"%):"]}),e.jsx("span",{children:c(m(s.base_price).vat*k)})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 font-medium",children:[e.jsx("span",{children:"Shipping:"}),e.jsx("span",{className:o?"text-gray-900 dark:text-gray-200":"text-orange-500 font-bold",children:o?c(o.base_cost):"Select Shipping"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100 dark:border-slate-800",children:[e.jsx("span",{className:"text-sm font-black text-gray-900 dark:text-gray-200 uppercase",children:"Total:"}),e.jsx("span",{className:"text-2xl font-black text-emerald-600 font-mono",children:c(m(s.base_price).total*k+((o==null?void 0:o.base_cost)||0))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-6",children:[e.jsxs("button",{onClick:G,className:"flex items-center justify-center gap-3 bg-orange-500 hover:bg-orange-600 text-white py-3 rounded-lg font-black uppercase text-xs shadow-lg shadow-orange-500/20 active:scale-[0.98] transition-all",children:[e.jsx(xe,{className:"w-4 h-4 fill-white animate-pulse"})," Buy Now"]}),e.jsxs("button",{onClick:E,className:`flex items-center justify-center gap-3 py-3 rounded-lg font-black uppercase text-xs shadow-lg active:scale-[0.98] transition-all ${C?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 border border-emerald-200 dark:border-emerald-800":"bg-rose-500 hover:bg-rose-600 text-white shadow-rose-500/20"}`,children:[e.jsx(Ue,{className:"w-4 h-4"})," ",C?"In Cart":"Add to Cart"]})]})]}),e.jsxs("div",{className:"lg:col-span-3 space-y-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 border-2 border-gray-100 dark:border-slate-700 rounded-lg p-6 flex flex-col items-center group",children:[e.jsxs("div",{className:"flex w-full items-center justify-between mb-6",children:[e.jsx("span",{className:"text-[10px] font-black text-gray-500 dark:text-gray-400 uppercase tracking-widest",children:"Sold by"}),e.jsxs("button",{className:"flex items-center gap-1 text-[10px] font-black text-blue-500 hover:underline",children:[e.jsx(me,{className:"w-3 h-3"})," Quick View"]})]}),e.jsx("div",{className:"w-24 h-24 rounded-2xl overflow-hidden mb-4 border-2 border-gray-200 dark:border-slate-700 group-hover:border-orange-500 transition-all p-1 bg-white dark:bg-slate-700",children:e.jsx("img",{src:((se=s.vendor)==null?void 0:se.shop_logo_url)||"/placeholder.png",className:"w-full h-full object-cover rounded-xl",alt:""})}),e.jsxs(T,{to:`/shop/${(ae=s.vendor)==null?void 0:ae.user_id}`,className:"flex items-center gap-1.5 mb-2 hover:text-orange-600 transition-colors text-center",children:[e.jsx("h4",{className:"font-black text-gray-900 dark:text-white uppercase tracking-tight",children:((re=s.vendor)==null?void 0:re.shop_name)||"Unknown Vendor"}),((le=s.vendor)==null?void 0:le.is_verified)&&e.jsx("div",{className:"w-4 h-4 bg-yellow-400 rounded-full flex items-center justify-center p-0.5",children:e.jsx(U,{className:"w-2 h-2 text-white stroke-[4]"})})]}),e.jsx("div",{className:"flex gap-0.5 mb-2",children:[...Array(5)].map((t,a)=>e.jsx($,{className:"w-4 h-4 text-orange-400 stroke-[2.5]"},a))}),e.jsxs("button",{onClick:D,className:"w-full mt-4 flex items-center justify-center gap-3 bg-white dark:bg-slate-700 border-2 border-emerald-600 text-emerald-600 dark:text-emerald-400 py-3 rounded-lg font-black uppercase text-[10px] tracking-widest hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-all active:scale-[0.98]",children:[e.jsx(N,{className:"w-4 h-4"})," Chat with Vendor"]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-gray-100 dark:border-slate-700 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 text-[10px] font-black text-gray-500 dark:text-gray-400 uppercase tracking-widest border-b border-gray-50 dark:border-slate-700 pb-2",children:[e.jsx(de,{className:"w-4 h-4 text-emerald-500"})," Secure Checkout"]}),e.jsxs("div",{className:"flex items-center gap-3 text-[10px] font-black text-gray-500 dark:text-gray-400 uppercase tracking-widest",children:[e.jsx(Qe,{className:"w-4 h-4 text-blue-500"})," Fast Delivery"]})]})]})]}),e.jsx("div",{className:"mt-20",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("h2",{className:"text-xl font-black text-gray-900 dark:text-white uppercase tracking-tight mb-1",children:"Customer Feedback"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-bold text-[10px] uppercase tracking-widest mb-8",children:"Real experiences from our community."}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 border border-gray-100 dark:border-slate-700 shadow-sm mb-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-4xl font-black text-gray-900 dark:text-white mb-1",children:K.toFixed(1)}),e.jsx("div",{className:"flex justify-center gap-1 mb-1",children:[...Array(5)].map((t,a)=>e.jsx($,{className:`w-4 h-4 ${a<Math.floor(K)?"text-yellow-500 fill-yellow-500":"text-gray-200 dark:text-gray-600"}`},a))}),e.jsxs("p",{className:"text-[9px] font-black text-gray-500 dark:text-gray-400 uppercase tracking-[0.2em]",children:[i.length," Verified Reviews"]})]}),e.jsx("div",{className:"space-y-3",children:[5,4,3,2,1].map(t=>{const a=i.filter(d=>d.rating===t).length,r=i.length>0?a/i.length*100:0;return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-[10px] font-black text-gray-500 dark:text-gray-400 w-2 shrink-0",children:t}),e.jsx("div",{className:"flex-1 h-1.5 bg-gray-50 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-yellow-500 rounded-full",style:{width:`${r}%`}})}),e.jsx("span",{className:"text-[10px] font-black text-gray-500 dark:text-gray-400 w-6 shrink-0 text-right",children:a})]},t)})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 border border-emerald-100 dark:border-emerald-900/30 shadow-xl shadow-emerald-900/5",children:[e.jsxs("h3",{className:"font-black text-gray-900 dark:text-white uppercase tracking-tight mb-4 flex items-center gap-2 text-sm",children:[e.jsx(N,{className:"w-4 h-4 text-emerald-600"})," Share Thoughts"]}),x?e.jsxs("form",{onSubmit:Ne,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] font-black text-gray-500 dark:text-gray-400 uppercase tracking-widest mb-2 block text-center",children:"Your Rating"}),e.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4,5].map(t=>e.jsx("button",{type:"button",onClick:()=>j(t),className:`p-1 transition-all ${y>=t?"scale-110":"opacity-30 hover:opacity-100"}`,children:e.jsx($,{className:`w-6 h-6 ${y>=t?"text-yellow-500 fill-yellow-500":"text-gray-300 dark:text-gray-600"}`})},t))})]}),e.jsx("div",{children:e.jsx("textarea",{required:!0,value:w,onChange:t=>V(t.target.value),placeholder:"Write your review...",rows:3,className:"w-full bg-gray-100 dark:bg-slate-900 border border-transparent rounded-xl p-4 text-xs font-medium text-gray-900 dark:text-gray-200 focus:bg-white dark:focus:bg-slate-700 focus:border-emerald-500 outline-none transition-all placeholder-gray-400 dark:placeholder-gray-500"})}),L&&e.jsxs("div",{className:"bg-red-50 text-red-600 text-[8px] font-bold p-3 rounded-lg flex items-center gap-2",children:[e.jsx(Ve,{className:"w-3 h-3"})," ",L]}),e.jsx("button",{type:"submit",disabled:n,className:`w-full py-3 rounded-xl font-black uppercase tracking-widest text-[9px] transition-all flex items-center justify-center gap-2 ${z?"bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400":n?"bg-gray-100 dark:bg-slate-700 text-gray-400":"bg-gray-900 dark:bg-slate-700 text-white hover:bg-emerald-600"}`,children:z?e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"w-3 h-3"})," Shared"]}):n?e.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"w-3 h-3"})," Post"]})})]}):e.jsxs("div",{className:"text-center py-2",children:[e.jsx("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 font-bold mb-2",children:"Sign in to leave a review"}),e.jsx(T,{to:"/login",className:"text-[9px] font-black text-emerald-600 uppercase tracking-widest hover:underline",children:"Sign In Now"})]})]})]}),e.jsx("div",{className:"lg:col-span-2 space-y-4",children:i.length===0?e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl border border-gray-100 dark:border-slate-700 p-12 text-center shadow-sm",children:[e.jsx(N,{className:"w-12 h-12 text-gray-100 dark:text-slate-700 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-black text-gray-900 dark:text-white uppercase",children:"Be the First"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-bold text-[10px] uppercase tracking-widest",children:"No reviews posted yet."})]}):i.map(t=>{var a,r,d;return e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 md:p-8 border border-gray-100 dark:border-slate-700 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-50 dark:bg-emerald-900/20 rounded-xl flex items-center justify-center font-black text-emerald-600 dark:text-emerald-400 uppercase text-sm",children:((r=(a=t.user)==null?void 0:a.full_name)==null?void 0:r.charAt(0))||"U"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-black text-gray-900 dark:text-white uppercase tracking-tight text-xs",children:((d=t.user)==null?void 0:d.full_name)||"Verified User"}),e.jsx("p",{className:"text-[8px] text-gray-500 dark:text-gray-400 font-bold uppercase tracking-widest",children:new Date(t.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-yellow-50 dark:bg-yellow-900/20 px-2 py-1 rounded-full",children:[e.jsx($,{className:"w-3 h-3 text-yellow-500 fill-yellow-500"}),e.jsx("span",{className:"text-[10px] font-black text-yellow-700 dark:text-yellow-400",children:t.rating.toFixed(1)})]})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 font-medium leading-relaxed italic text-sm",children:['"',t.comment,'"']})]},t.id)})})]})})]}),je&&x&&e.jsx(Xe,{userId:x.id,onClose:()=>Q(!1)}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 p-3 px-4 z-40 lg:hidden safe-area-bottom shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:D,className:"flex flex-col items-center justify-center p-2 text-gray-500 hover:text-emerald-600 transition-colors",children:[e.jsx(N,{className:"w-5 h-5 mb-0.5"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Chat"})]}),e.jsx("div",{className:"h-auto w-px bg-gray-100 mx-1"}),e.jsx("button",{onClick:E,className:`flex-1 py-3 rounded-lg font-black uppercase text-[10px] tracking-widest transition-all ${C?"bg-emerald-50 text-emerald-600 border border-emerald-200":"bg-white border-2 border-orange-500 text-orange-500 active:bg-orange-50"}`,children:C?"In Cart":"Add to Cart"}),e.jsx("button",{onClick:G,className:"flex-1 bg-[#FF7F01] hover:bg-[#e67300] text-white py-3 rounded-lg font-black uppercase text-[10px] tracking-widest shadow-lg shadow-orange-500/20 active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:"Buy Now"})]})})]})}export{ct as ProductDetailsPage};
