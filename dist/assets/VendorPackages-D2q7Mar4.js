import{n as O,y as q,r as o,s as x,j as e,P as T,w as R,X as C}from"./index-T9wcIP7k.js";import{A as k}from"./AdminLayout-CfMOCoMf.js";import{P as V}from"./plus-B2DFtXvD.js";import{C as p}from"./check-CtKt80mY.js";import{E as B}from"./ellipsis-vertical-GFqU5AFZ.js";import{P as U}from"./pen-CPGzRDpf.js";import{T as W}from"./trash-2-RCUSiwrv.js";import{Z as P}from"./zap-_oUAMe_n.js";import{S as Y}from"./star-Fc9uE4lG.js";import{S as Z}from"./shield-BnwYx_xt.js";import"./bell-B6qorZ8L.js";import"./triangle-alert-C6svA3ly.js";import"./circle-check-big-BYTb-izI.js";import"./chevron-right-DQGX3U4F.js";import"./settings-CBK8R_-F.js";import"./maximize-CxfeF--5.js";import"./users-CYjWSRo-.js";import"./file-text-D26nKDmr.js";import"./globe-BkMXYPOg.js";import"./truck-CI4bnO7s.js";import"./credit-card-DbXuWlg0.js";import"./trending-up-D57PSrGr.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],H=O("crown",G);function _e(){const{theme:S}=q(),r=S==="dark",[v,M]=o.useState([]),[j,_]=o.useState(!0),[A,b]=o.useState(!1),[f,w]=o.useState(null),[m,d]=o.useState(null),[N,h]=o.useState(null),y=o.useRef(null),[t,i]=o.useState({name:"",description:"",price_monthly:0,price_yearly:0,product_limit:10,has_catalog_management:!1,has_stock_management:!1,has_pos_access:!1,has_orders_management:!1,has_wallet_management:!1,has_shipping_management:!1,has_withdraw_management:!1,has_shop_configurations:!1,has_reports_management:!1,has_customer_support:!1,has_notifications:!1,has_refund_management:!1,has_kyc_verification:!1,has_ads_access:!1,has_promotion_access:!1,has_analytics_access:!1,has_priority_support:!1,is_active:!0,is_default:!1,sort_order:0});o.useEffect(()=>{g();const s=a=>{y.current&&!y.current.contains(a.target)&&h(null)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]),o.useEffect(()=>{if(m){const s=setTimeout(()=>d(null),5e3);return()=>clearTimeout(s)}},[m]);const g=async()=>{try{const{data:s,error:a}=await x.from("vendor_packages").select("*").order("sort_order",{ascending:!0});if(a)throw a;M(s||[])}catch(s){console.error("Error fetching packages:",s),d({type:"error",text:"Failed to load packages"})}finally{_(!1)}},E=async s=>{s.preventDefault(),_(!0);try{if(f){const{error:a}=await x.from("vendor_packages").update(t).eq("id",f.id);if(a)throw a;d({type:"success",text:"Package updated successfully"})}else{const{error:a}=await x.from("vendor_packages").insert([t]);if(a)throw a;d({type:"success",text:"Package created successfully"})}await g(),$()}catch(a){console.error("Error saving package:",a),d({type:"error",text:a.message||"Failed to save package"})}finally{_(!1)}},D=s=>{w(s),i({name:s.name,description:s.description,price_monthly:s.price_monthly,price_yearly:s.price_yearly,product_limit:s.product_limit,has_catalog_management:s.has_catalog_management,has_stock_management:s.has_stock_management,has_pos_access:s.has_pos_access,has_orders_management:s.has_orders_management,has_wallet_management:s.has_wallet_management,has_shipping_management:s.has_shipping_management,has_withdraw_management:s.has_withdraw_management,has_shop_configurations:s.has_shop_configurations,has_reports_management:s.has_reports_management,has_customer_support:s.has_customer_support,has_notifications:s.has_notifications,has_refund_management:s.has_refund_management,has_kyc_verification:s.has_kyc_verification,has_ads_access:s.has_ads_access,has_promotion_access:s.has_promotion_access,has_analytics_access:s.has_analytics_access,has_priority_support:s.has_priority_support,is_active:s.is_active,is_default:s.is_default,sort_order:s.sort_order}),b(!0),h(null)},L=async s=>{if(confirm("Are you sure you want to delete this package? Vendors using this package will be affected.")){try{const{error:a}=await x.from("vendor_packages").delete().eq("id",s);if(a)throw a;d({type:"success",text:"Package deleted successfully"}),await g()}catch(a){console.error("Error deleting package:",a),d({type:"error",text:a.message||"Failed to delete package"})}h(null)}},F=async s=>{try{const{error:a}=await x.from("vendor_packages").update({is_active:!s.is_active}).eq("id",s.id);if(a)throw a;d({type:"success",text:`Package ${s.is_active?"deactivated":"activated"} successfully`}),await g()}catch(a){console.error("Error toggling package status:",a),d({type:"error",text:a.message||"Failed to update package status"})}h(null)},$=()=>{b(!1),w(null),i({name:"",description:"",price_monthly:0,price_yearly:0,product_limit:10,has_catalog_management:!1,has_stock_management:!1,has_pos_access:!1,has_orders_management:!1,has_wallet_management:!1,has_shipping_management:!1,has_withdraw_management:!1,has_shop_configurations:!1,has_reports_management:!1,has_customer_support:!1,has_notifications:!1,has_refund_management:!1,has_kyc_verification:!1,has_ads_access:!1,has_promotion_access:!1,has_analytics_access:!1,has_priority_support:!1,is_active:!0,is_default:!1,sort_order:0})},z=r?"white-glass":"bg-white",n=r?"border-gray-700":"border-gray-100",c=r?"text-gray-100":"text-gray-900",l=r?"text-gray-400":"text-gray-500",I=s=>{const a=s.toLowerCase();return a.includes("gold")||a.includes("pro")||a.includes("premium")?e.jsx(H,{className:"h-6 w-6 text-yellow-500"}):a.includes("silver")||a.includes("standard")?e.jsx(Y,{className:"h-6 w-6 text-slate-400"}):a.includes("basic")||a.includes("starter")?e.jsx(Z,{className:"h-6 w-6 text-emerald-500"}):e.jsx(P,{className:"h-6 w-6 text-cyan-500"})};return j&&v.length===0?e.jsx(k,{children:e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto"}),e.jsx("p",{className:`mt-4 ${l} font-medium tracking-wide`,children:"Loading packages..."})]})})}):e.jsxs(k,{children:[e.jsxs("div",{className:"mb-10 flex flex-col md:flex-row md:items-end justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-cyan-500 to-emerald-500 rounded-lg shadow-lg",children:e.jsx(T,{className:"h-8 w-8 text-white"})}),e.jsx("h1",{className:`text-4xl font-extrabold tracking-tight ${c}`,children:"Vendor Packages"})]}),e.jsx("p",{className:`${l} text-lg max-w-2xl`,children:"Create and manage subscription tiers to monetize your platform efficiently."})]}),e.jsxs("button",{onClick:()=>b(!0),className:"group flex items-center space-x-2 px-6 py-3 bg-slate-900 text-white rounded-xl hover:bg-slate-800 transition-all shadow-xl hover:shadow-2xl active:scale-95",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-white/20 flex items-center justify-center group-hover:bg-white/30 transition",children:e.jsx(V,{className:"h-4 w-4"})}),e.jsx("span",{className:"font-semibold",children:"Create Package"})]})]}),m&&e.jsxs("div",{className:`mb-8 p-4 rounded-xl flex items-center shadow-lg transform transition-all animate-in slide-in-from-top-4 ${m.type==="success"?"bg-emerald-500/10 border border-emerald-500/20 text-emerald-600":"bg-red-500/10 border border-red-500/20 text-red-600"}`,children:[m.type==="success"?e.jsx(p,{className:"h-5 w-5 mr-3"}):e.jsx(R,{className:"h-5 w-5 mr-3"}),e.jsx("span",{className:"font-medium",children:m.text})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-8",children:v.map(s=>e.jsxs("div",{className:`group relative rounded-3xl p-8 transition-all duration-300 hover:-translate-y-2 ${z} border ${n} shadow-sm hover:shadow-2xl ${s.is_active?"":"opacity-75 grayscale-[0.5]"}`,children:[e.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 rounded-bl-full -z-10 group-hover:scale-110 transition-transform duration-500 ${s.is_active?"bg-gradient-to-br from-cyan-500/5 to-emerald-500/5":"bg-gradient-to-br from-red-500/10 to-orange-500/10"}`}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-3 rounded-2xl ${s.is_active?r?"bg-slate-700":"bg-slate-50":r?"bg-red-900/20":"bg-red-100"}`,children:I(s.name)}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:`text-xl font-bold ${c} tracking-tight`,children:s.name}),!s.is_active&&e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-red-100 text-red-700 text-[10px] font-bold uppercase tracking-wider",children:"Inactive"})]}),s.is_default&&e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-cyan-600 bg-cyan-50 px-2 py-0.5 rounded-full mt-1 inline-block",children:"Default Choice"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:a=>{a.stopPropagation(),h(N===s.id?null:s.id)},className:`p-2 rounded-full transition-colors ${r?"hover:bg-slate-700 text-slate-400":"hover:bg-slate-100 text-slate-500"}`,children:e.jsx(B,{className:"h-5 w-5"})}),N===s.id&&e.jsxs("div",{ref:y,className:`absolute right-0 top-full mt-2 w-48 rounded-2xl shadow-2xl border overflow-hidden z-20 animate-in fade-in zoom-in-95 ${r?"bg-slate-800 border-slate-700":"bg-white border-slate-100"}`,children:[e.jsxs("button",{onClick:()=>D(s),className:`w-full flex items-center px-4 py-3 text-sm font-medium transition-colors ${r?"hover:bg-slate-700 text-slate-300":"hover:bg-slate-50 text-slate-600"}`,children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Edit Details"]}),e.jsxs("button",{onClick:()=>F(s),className:`w-full flex items-center px-4 py-3 text-sm font-medium transition-colors ${r?"hover:bg-slate-700 text-slate-300":"hover:bg-slate-50 text-slate-600"}`,children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),s.is_active?"Deactivate":"Activate"]}),e.jsx("div",{className:`h-px mx-4 ${r?"bg-slate-700":"bg-slate-100"}`}),e.jsxs("button",{onClick:()=>L(s.id),className:`w-full flex items-center px-4 py-3 text-sm font-medium transition-colors text-red-500 ${r?"hover:bg-red-900/20":"hover:bg-red-50"}`,children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]}),e.jsx("p",{className:`text-sm ${l} mb-8 leading-relaxed h-10 line-clamp-2`,children:s.description}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-baseline",children:[e.jsxs("span",{className:`text-4xl font-extrabold ${c} tracking-tight`,children:["$",s.price_monthly]}),e.jsx("span",{className:`ml-1 text-sm font-medium ${l}`,children:"/mo"})]}),s.price_yearly>0&&e.jsxs("p",{className:"text-xs font-semibold text-emerald-600 mt-1",children:["or $",s.price_yearly,"/yr ",e.jsxs("span",{className:"text-emerald-500/70 font-normal ml-1",children:["â€¢ Save ",Math.round((1-s.price_yearly/(s.price_monthly*12))*100),"%"]})]})]}),e.jsxs("div",{className:`space-y-4 border-t ${r?"border-slate-700":"border-slate-100"} pt-6`,children:[e.jsxs("div",{className:"flex items-center justify-between group/feature",children:[e.jsx("span",{className:`text-sm font-medium ${l} group-hover/feature:text-cyan-600 transition-colors`,children:"Products allowed"}),e.jsx("span",{className:`bg-slate-100 text-slate-700 px-3 py-1 rounded-full text-xs font-bold ${r?"bg-slate-700 text-slate-300":""}`,children:s.product_limit>9999?"Unlimited":s.product_limit})]}),e.jsx("div",{className:"space-y-3 pt-2",children:[{label:"POS System",has:s.has_pos_access},{label:"Online Store",has:s.has_shop_configurations},{label:"Analytics",has:s.has_analytics_access},{label:"Support",has:s.has_customer_support}].map((a,u)=>e.jsxs("div",{className:"flex items-center text-sm",children:[a.has?e.jsx("div",{className:"w-5 h-5 rounded-full bg-emerald-100 flex items-center justify-center mr-3 shrink-0",children:e.jsx(p,{className:"h-3 w-3 text-emerald-600"})}):e.jsx("div",{className:"w-5 h-5 rounded-full bg-slate-100 flex items-center justify-center mr-3 shrink-0",children:e.jsx(C,{className:"h-3 w-3 text-slate-400"})}),e.jsx("span",{className:a.has?c:l,children:a.label})]},u))})]}),e.jsx("div",{className:"mt-8",children:e.jsx("div",{className:`w-full py-2 rounded-xl text-center text-xs font-bold uppercase tracking-wider ${s.is_active?"bg-emerald-50 text-emerald-600":"bg-slate-100 text-slate-500"}`,children:s.is_active?"Active Plan":"Archived"})})]},s.id))}),A&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:`${r?"bg-slate-800 border-slate-700":"bg-white"} rounded-3xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto transform transition-all border`,children:[e.jsxs("div",{className:`p-8 border-b ${n} flex items-center justify-between sticky top-0 ${r?"bg-slate-800/95":"bg-white/95"} backdrop-blur-md z-10`,children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold ${c}`,children:f?"Edit Package":"Create New Package"}),e.jsx("p",{className:l,children:"Configure features and pricing limits."})]}),e.jsx("button",{onClick:$,className:`p-2 rounded-full ${r?"hover:bg-slate-700 text-slate-400":"hover:bg-slate-100 text-slate-500"} transition`,children:e.jsx(C,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:E,className:"p-8 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-bold uppercase tracking-wider ${l} mb-2`,children:"Package Name *"}),e.jsx("input",{type:"text",required:!0,value:t.name,onChange:s=>i({...t,name:s.target.value}),className:`w-full px-4 py-3 border ${n} rounded-xl focus:outline-none focus:ring-4 focus:ring-cyan-500/20 focus:border-cyan-500 transition-all ${r?"bg-slate-900 text-gray-100 placeholder-slate-600":"bg-slate-50 text-slate-900"}`,placeholder:"e.g., Gold Tier"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-bold uppercase tracking-wider ${l} mb-2`,children:"Sort Order"}),e.jsx("input",{type:"number",value:t.sort_order,onChange:s=>i({...t,sort_order:parseInt(s.target.value)}),className:`w-full px-4 py-3 border ${n} rounded-xl focus:outline-none focus:ring-4 focus:ring-cyan-500/20 focus:border-cyan-500 transition-all ${r?"bg-slate-900 text-gray-100 placeholder-slate-600":"bg-slate-50 text-slate-900"}`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-bold uppercase tracking-wider ${l} mb-2`,children:"Description"}),e.jsx("textarea",{value:t.description,onChange:s=>i({...t,description:s.target.value}),rows:2,className:`w-full px-4 py-3 border ${n} rounded-xl focus:outline-none focus:ring-4 focus:ring-cyan-500/20 focus:border-cyan-500 transition-all ${r?"bg-slate-900 text-gray-100 placeholder-slate-600":"bg-slate-50 text-slate-900"}`,placeholder:"Briefly describe who this package is for..."})]}),e.jsxs("div",{className:`p-6 rounded-2xl border ${n} ${r?"bg-slate-900/50":"bg-slate-50"}`,children:[e.jsxs("h3",{className:`text-sm font-bold ${c} mb-4 flex items-center gap-2`,children:[e.jsx(P,{className:"h-4 w-4 text-cyan-500"})," Pricing & Limits"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-bold uppercase tracking-wider ${l} mb-2`,children:"Monthly ($) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:t.price_monthly,onChange:s=>i({...t,price_monthly:parseFloat(s.target.value)}),className:`w-full px-4 py-3 border ${n} rounded-xl focus:outline-none focus:ring-4 focus:ring-cyan-500/20 focus:border-cyan-500 transition-all ${r?"bg-slate-800 text-gray-100":"bg-white"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-bold uppercase tracking-wider ${l} mb-2`,children:"Yearly ($)"}),e.jsx("input",{type:"number",step:"0.01",value:t.price_yearly,onChange:s=>i({...t,price_yearly:parseFloat(s.target.value)}),className:`w-full px-4 py-3 border ${n} rounded-xl focus:outline-none focus:ring-4 focus:ring-cyan-500/20 focus:border-cyan-500 transition-all ${r?"bg-slate-800 text-gray-100":"bg-white"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-bold uppercase tracking-wider ${l} mb-2`,children:"Product Limit *"}),e.jsx("input",{type:"number",required:!0,value:t.product_limit,onChange:s=>i({...t,product_limit:parseInt(s.target.value)}),className:`w-full px-4 py-3 border ${n} rounded-xl focus:outline-none focus:ring-4 focus:ring-cyan-500/20 focus:border-cyan-500 transition-all ${r?"bg-slate-800 text-gray-100":"bg-white"}`,placeholder:"Max products"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-bold ${c} mb-4 pb-2 border-b ${n}`,children:"Core Features"}),e.jsx("div",{className:"space-y-3",children:[["has_catalog_management","Catalog Management"],["has_stock_management","Stock Management"],["has_orders_management","Orders Management"],["has_shop_configurations","Shop Configurations"],["has_notifications","Notifications"]].map(([s,a])=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[e.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors ${t[s]?"bg-cyan-500 border-cyan-500":`${n} bg-transparent`}`,children:t[s]&&e.jsx(p,{className:"h-3 w-3 text-white"})}),e.jsx("input",{type:"checkbox",className:"hidden",checked:t[s],onChange:u=>i({...t,[s]:u.target.checked})}),e.jsx("span",{className:`text-sm ${l} group-hover:${c} transition-colors`,children:a})]},s))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-bold ${c} mb-4 pb-2 border-b ${n}`,children:"Advanced Features"}),e.jsx("div",{className:"space-y-3",children:[["has_pos_access","POS Access"],["has_wallet_management","Wallet Management"],["has_shipping_management","Shipping Management"],["has_withdraw_management","Withdraw Management"],["has_reports_management","Reports & Analytics"],["has_customer_support","Customer Support"],["has_refund_management","Refund Management"],["has_kyc_verification","KYC Verification"],["has_ads_access","Ads Access"],["has_promotion_access","Promotions"],["has_analytics_access","Deep Analytics"],["has_priority_support","Priority Support"]].map(([s,a])=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[e.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors ${t[s]?"bg-emerald-500 border-emerald-500":`${n} bg-transparent`}`,children:t[s]&&e.jsx(p,{className:"h-3 w-3 text-white"})}),e.jsx("input",{type:"checkbox",className:"hidden",checked:t[s],onChange:u=>i({...t,[s]:u.target.checked})}),e.jsx("span",{className:`text-sm ${l} group-hover:${c} transition-colors`,children:a})]},s))})]})]}),e.jsxs("div",{className:"flex items-center gap-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("div",{className:`w-10 h-6 rounded-full transition-colors relative ${t.is_active?"bg-cyan-500":"bg-slate-300"}`,children:e.jsx("div",{className:`absolute top-1 left-1 bg-white w-4 h-4 rounded-full transition-transform ${t.is_active?"translate-x-4":""}`})}),e.jsx("input",{type:"checkbox",className:"hidden",checked:t.is_active,onChange:s=>i({...t,is_active:s.target.checked})}),e.jsx("span",{className:`text-sm font-medium ${c}`,children:"Active Package"})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("div",{className:`w-10 h-6 rounded-full transition-colors relative ${t.is_default?"bg-cyan-500":"bg-slate-300"}`,children:e.jsx("div",{className:`absolute top-1 left-1 bg-white w-4 h-4 rounded-full transition-transform ${t.is_default?"translate-x-4":""}`})}),e.jsx("input",{type:"checkbox",className:"hidden",checked:t.is_default,onChange:s=>i({...t,is_default:s.target.checked})}),e.jsx("span",{className:`text-sm font-medium ${c}`,children:"Default Choice"})]})]}),e.jsx("div",{className:"flex justify-end pt-6",children:e.jsx("button",{type:"submit",className:"px-8 py-3 bg-gradient-to-r from-cyan-600 to-emerald-600 text-white font-bold rounded-xl hover:shadow-xl hover:scale-105 active:scale-95 transition-all text-sm",children:j?"Processing...":f?"Update Package":"Create Package"})})]})]})})]})}export{_e as default};
